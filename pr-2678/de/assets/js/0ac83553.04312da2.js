"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["2380"],{7208:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>o,toc:()=>d,default:()=>l,metadata:()=>r,assets:()=>c,contentTitle:()=>a});var r=JSON.parse('{"id":"admin/tutorials/sftp_on_apps","title":"Give SFTP permission to edit an app","description":"In YunoHost permission management web admin interface, you can specify which user can access your system through SFTP.","source":"@site/docs/admin/45.tutorials/65.sftp_on_apps.mdx","sourceDirName":"admin/45.tutorials","slug":"/admin/tutorials/sftp_on_apps","permalink":"/doc/pr-2678/de/admin/tutorials/sftp_on_apps","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/docs/admin/45.tutorials/65.sftp_on_apps.mdx","tags":[],"version":"current","sidebarPosition":65,"frontMatter":{"sidebar_label":"Access apps via SFTP","title":"Give SFTP permission to edit an app"},"sidebar":"admin","previous":{"title":"Security","permalink":"/doc/pr-2678/de/admin/tutorials/security"},"next":{"title":"\u{1F41E} Troubleshooting","permalink":"/doc/pr-2678/de/admin/troubleshooting/"}}'),i=n(4848),t=n(4429);let o={sidebar_label:"Access apps via SFTP",title:"Give SFTP permission to edit an app"},a,c={},d=[];function p(e){let s={code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:"In YunoHost permission management web admin interface, you can specify which user can access your system through SFTP."}),"\n",(0,i.jsx)(s.p,{children:"Go to :"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Groups and permissions > Individual user permissions."}),"\n",(0,i.jsx)(s.li,{children:"Click on add a permission and select SFTP"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"However, those user are chrooted in their home directory for security reasons."}),"\n",(0,i.jsx)(s.p,{children:"If you want to give access to a specific apps through SFTP, here are additional steps to do after giving the SFTP permission in the web interface."}),"\n",(0,i.jsx)(s.p,{children:"In instructions below,"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"USER is the user to whom you wish to give permission to edit wordpress files."}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"/var/www/wordpress/wp-config.php"})," must be replaced by the path your app config file. For example, for yeswiki (",(0,i.jsx)(s.code,{children:"/var/www/yeswiki/wakka.config.php"}),")"]}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'mkdir -p /home/USER/apps/wordpress\ntouch /home/USER/.nobackup\nmount --bind /var/www/wordpress /home/USER/apps/wordpress\necho "/var/www/wordpress /home/USER/apps/wordpress none defaults,bind 0 0" >> /etc/fstab\nfind /var/www/wordpress -type d -exec chmod g+s {} \\;\n\nsetfacl -R -m u:wordpress:rwX /var/www/wordpress\nsetfacl -R -d -m u:wordpress:rwX /var/www/wordpress\nsetfacl -m u:wordpress:r-- /var/www/wordpress/wp-config.php\n\nsetfacl -R -m u:USER:rwX /var/www/wordpress\nsetfacl -R -d -m u:USER:rwX /var/www/wordpress\n'})}),"\n",(0,i.jsx)(s.p,{children:"Quick commands explanation :"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"mkdir -p /PATH"})," creates a folder in the specified PATH"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"touch"})," creates an empty file"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"mount --bind"})," makes the contents of the source file or directory available at the target location without actually moving or copying the data."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"setfacl"})," set the file permissions"]}),"\n"]})]})}function l(e={}){let{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},4429:function(e,s,n){n.d(s,{R:()=>o,x:()=>a});var r=n(6540);let i={},t=r.createContext(i);function o(e){let s=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);