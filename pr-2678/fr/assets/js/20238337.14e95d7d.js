"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["1110"],{5218:function(e,r,t){t.r(r),t.d(r,{frontMatter:()=>o,toc:()=>a,default:()=>c,metadata:()=>n,assets:()=>l,contentTitle:()=>d});var n=JSON.parse('{"id":"admin/get_started/post_install/port_forwarding","title":"Configurer la redirection des ports","description":"Si vous vous auto-h\xe9bergez \xe0 la maison et sans VPN, il vous faut rediriger les ports de votre routeur (\\"machin-box\\"). Le sch\xe9ma ci-dessous tente d\'expliquer bri\xe8vement le r\xf4le de la redirection des ports lors de la mise en place d\'un serveur \xe0 la maison.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/admin/05.get_started/40.post_install/15.port_forwarding.mdx","sourceDirName":"admin/05.get_started/40.post_install","slug":"/admin/get_started/post_install/port_forwarding","permalink":"/doc/pr-2678/fr/admin/get_started/post_install/port_forwarding","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/i18n/fr/docusaurus-plugin-content-docs/current/admin/05.get_started/40.post_install/15.port_forwarding.mdx","tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"title":"Configurer la redirection des ports"},"sidebar":"admin","previous":{"title":"Trouver l\u2019IP locale de son serveur","permalink":"/doc/pr-2678/fr/admin/get_started/post_install/find_ip"},"next":{"title":"Configuration de la zone DNS","permalink":"/doc/pr-2678/fr/admin/get_started/post_install/dns_config"}}'),i=t(4848),s=t(4429);let o={title:"Configurer la redirection des ports"},d,l={},a=[{value:"1. Diagnostiquer les ports ouverts",id:"1-diagnostiquer-les-ports-ouverts",level:3},{value:"2. Acc\xe9der \xe0 l&#39;interface d&#39;administration de votre box/routeur",id:"2-acc\xe9der-\xe0-linterface-dadministration-de-votre-boxrouteur",level:3},{value:"3. Trouver l&#39;IP locale de votre serveur",id:"3-trouver-lip-locale-de-votre-serveur",level:3},{value:"4. Rediriger les ports",id:"4-rediriger-les-ports",level:3},{value:"Redirection automatique / UPnP",id:"redirection-automatique--upnp",level:2}];function u(e){let r={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components},{FAIcon:t,Figure:n}=r;return t||p("FAIcon",!0),n||p("Figure",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.p,{children:"Si vous vous auto-h\xe9bergez \xe0 la maison et sans VPN, il vous faut rediriger les ports de votre routeur (\"machin-box\"). Le sch\xe9ma ci-dessous tente d'expliquer bri\xe8vement le r\xf4le de la redirection des ports lors de la mise en place d'un serveur \xe0 la maison."}),"\n",(0,i.jsx)(n,{caption:"Illustration sur l\u2019importance de la redirection des ports",src:"/img/portForwarding_en.png"}),"\n",(0,i.jsx)(r.h3,{id:"1-diagnostiquer-les-ports-ouverts",children:"1. Diagnostiquer les ports ouverts"}),"\n",(0,i.jsx)(r.p,{children:"Une fois les redirections configur\xe9es, l'outil de diagnostic introduit dans\nYunoHost 3.8 vous permettra de v\xe9rifier si les ports sont correctement expos\xe9s."}),"\n",(0,i.jsx)(r.h3,{id:"2-acc\xe9der-\xe0-linterface-dadministration-de-votre-boxrouteur",children:"2. Acc\xe9der \xe0 l'interface d'administration de votre box/routeur"}),"\n",(0,i.jsxs)(r.p,{children:["L'interface d'administration est g\xe9n\xe9ralement accessible via ",(0,i.jsx)(r.a,{href:"http://192.168.0.1",children:"http://192.168.0.1"})," ou ",(0,i.jsx)(r.a,{href:"http://192.168.1.1",children:"http://192.168.1.1"}),".\nEnsuite, il vous faudra peut-\xeatre vous authentifier avec les identifiants\nfournis par votre fournisseur d'acc\xe8s \xe0 Internet (FAI)."]}),"\n",(0,i.jsx)(r.h3,{id:"3-trouver-lip-locale-de-votre-serveur",children:"3. Trouver l'IP locale de votre serveur"}),"\n",(0,i.jsx)(r.p,{children:"Identifiez quelle est l'IP locale de votre serveur, soit :"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"depuis l'interface de votre routeur/box, qui liste peut-\xeatre les dispositifs\nconnect\xe9s;"}),"\n",(0,i.jsx)(r.li,{children:"depuis la webadmin de YunoHost, dans 'Diagnostic', section 'Connectivit\xe9 Internet', cliquer sur 'D\xe9tails' \xe0 c\xf4t\xe9 de la ligne sur IPv4."}),"\n",(0,i.jsx)(r.li,{children:"depuis la webadmin de YunoHost, dans '\xc9tat du serveur', 'R\xe9seau';"}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["Une adresse IP locale ressemble g\xe9n\xe9ralement \xe0 ",(0,i.jsx)(r.code,{children:"192.168.xx.yy"}),", ou ",(0,i.jsx)(r.code,{children:"10.0.xx.yy"}),"."]}),"\n",(0,i.jsx)(r.h3,{id:"4-rediriger-les-ports",children:"4. Rediriger les ports"}),"\n",(0,i.jsx)(r.p,{children:"Dans l'interface d'administration de votre box/routeur, il vous faut trouver\nune cat\xe9gorie comme 'Configuration du routeur', ou 'Redirections de ports'. Le\nnom diff\xe8re suivant le type / marque de la box..."}),"\n",(0,i.jsx)(r.p,{children:"Il vous faut ensuite rediriger chacun des ports list\xe9s ci-dessous vers l'IP locale de votre serveur pour que les diff\xe9rents services de YunoHost fonctionnent. Pour chacun d'eux, une redirection 'TCP' est n\xe9cessaire. Certaines interfaces font r\xe9f\xe9rence \xe0 un port \xab externe \xbb et un port \xab interne \xbb : dans notre cas il s'agit du m\xeame."}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Web : ",(0,i.jsx)(r.code,{children:"80"})," ",(0,i.jsx)("small",{children:"(HTTP)"}),", ",(0,i.jsx)(r.code,{children:"443"})," ",(0,i.jsx)("small",{children:"(HTTPS)"})]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"/admin/command_line",children:"SSH"})," : ",(0,i.jsx)(r.code,{children:"22"})]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"https://wikipedia.org/wiki/XMPP",children:"XMPP"})," : ",(0,i.jsx)(r.code,{children:"5222"})," ",(0,i.jsx)("small",{children:"(clients)"}),", ",(0,i.jsx)(r.code,{children:"5269"})," ",(0,i.jsx)("small",{children:"(serveurs)"})]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"/admin/email",children:"Email"})," : ",(0,i.jsx)(r.code,{children:"25"}),", ",(0,i.jsx)(r.code,{children:"587"})," ",(0,i.jsx)("small",{children:"(SMTP)"}),", ",(0,i.jsx)(r.code,{children:"993"})," ",(0,i.jsx)("small",{children:"(IMAP)"})]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"If you use both a modem and a router, then you need to do the following:"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"first on the modem (the box closest to the internet) create rules to forward the above ports to your router;"}),"\n",(0,i.jsx)(r.li,{children:"then on the router (the box between the modem and your devices) create rules to forward the above ports to the static IP address for your server."}),"\n"]}),"\n",(0,i.jsx)(r.admonition,{type:"warning",children:(0,i.jsxs)(r.p,{children:[(0,i.jsx)(t,{icon:"fa-exclamation-triangle"})," Certains fournisseurs d'acc\xe8s \xe0 Internet bloquent le port 25 (mail SMTP) par d\xe9faut pour combattre le spam. D'autres (plus rares) ne permettent pas d'utiliser librement les ports 80/443. En fonction de votre FAI, il peut \xeatre possible d'ouvrir ces ports dans l'interface... Voir ",(0,i.jsx)(r.a,{href:"/admin/get_started/providers/isp/",children:"cette page"})," pour plus d'informations."]})}),"\n",(0,i.jsx)(r.h2,{id:"redirection-automatique--upnp",children:"Redirection automatique / UPnP"}),"\n",(0,i.jsx)(r.p,{children:"Une technologie nomm\xe9e UPnP est disponible sur certains routeurs/box et permet de rediriger automatiquement des ports vers une machine qui le demande. Si UPnP est activ\xe9 chez vous, ex\xe9cuter cette commande devrait automatiquement rediriger les bons ports :"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"sudo yunohost firewall reload\n"})})]})}function c(e={}){let{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}function p(e,r){throw Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},4429:function(e,r,t){t.d(r,{R:()=>o,x:()=>d});var n=t(6540);let i={},s=n.createContext(i);function o(e){let r=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(s.Provider,{value:r},e.children)}}}]);