"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["4136"],{6735:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>s,toc:()=>u,default:()=>l,metadata:()=>o,assets:()=>c,contentTitle:()=>r});var o=JSON.parse('{"id":"admin/backups/custom_backup_methods","title":"Metodi di backup personalizzati","description":"\xc8 possibile creare un proprio metodo di backup e includerlo nel sistema di raccolta file di backup di YunoHost. Questo pu\xf2 essere utilizzato ad esempio, nel caso utilizziate un particolare programma di backup o vogliate effettuare delle operazioni di montaggio o smontaggio sui vostri HD.","source":"@site/i18n/it/docusaurus-plugin-content-docs/current/admin/40.backups/30.custom_backup_methods.mdx","sourceDirName":"admin/40.backups","slug":"/admin/backups/custom_backup_methods","permalink":"/doc/pr-2672/it/admin/backups/custom_backup_methods","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/i18n/it/docusaurus-plugin-content-docs/current/admin/40.backups/30.custom_backup_methods.mdx","tags":[],"version":"current","sidebarPosition":30,"frontMatter":{"title":"Metodi di backup personalizzati"},"sidebar":"admin","previous":{"title":"Includere o escludere files","permalink":"/doc/pr-2672/it/admin/backups/include_exclude_files"},"next":{"title":"Migrare o unire server","permalink":"/doc/pr-2672/it/admin/backups/migrate_or_merge_servers"}}'),i=t(4848),a=t(4429);let s={title:"Metodi di backup personalizzati"},r,c={},u=[];function d(e){let n={code:"code",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"\xc8 possibile creare un proprio metodo di backup e includerlo nel sistema di raccolta file di backup di YunoHost. Questo pu\xf2 essere utilizzato ad esempio, nel caso utilizziate un particolare programma di backup o vogliate effettuare delle operazioni di montaggio o smontaggio sui vostri HD."}),"\n",(0,i.jsx)(n.p,{children:"Dovrete creare un hook che lancer\xe0 il backup utilizzando il metodo personalizzato con questo comando:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"yunohost backup create --method custom\n"})}),"\n",(0,i.jsx)(n.p,{children:"Di seguito un esempio, semplificato, che esegue il backup con rotazione dei dischi, che vengono sostituiti ogni settimana."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"/etc/yunohost/hooks.d/backup_method/05-custom"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\nset -euo pipefail\n\nwork_dir="$2"\nname="$3"\nrepo="$4"\nsize="$5"\ndescription="$6"\n\ncase "$1" in\n  need_mount)\n    # Set false if your method can itself put files in good place in your archive\n    true\n    ;;\n  backup)\n    mount /dev/sda1 /mnt/hdd\n    if [[ "$(df /mnt/hdd | tail -n1 | cut -d" " -f1)" != "/dev/sda1" ]]\n    then\n        exit 1\n    fi\n    pushd "$work_dir"\n    current_date=$(date +"%Y-%m-%d_%H:%M")\n    cp -a "${work_dir}" "/mnt/hdd/${current_date}_$name"\n    popd\n    umount /mnt/hdd\n    ;;\n  *)\n    echo "hook called with unknown argument \\`$1\'" >&2\n    exit 1\n    ;;\nesac\n\nexit 0\n'})})]})}function l(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},4429:function(e,n,t){t.d(n,{R:()=>s,x:()=>r});var o=t(6540);let i={},a=o.createContext(i);function s(e){let n=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);