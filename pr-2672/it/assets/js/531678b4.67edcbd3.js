"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["2954"],{2918:function(e,i,n){n.r(i),n.d(i,{frontMatter:()=>s,toc:()=>d,default:()=>p,metadata:()=>o,assets:()=>t,contentTitle:()=>r});var o=JSON.parse('{"id":"admin/tutorials/external_storage","title":"Aggiungere un disco esterno al vostro server","description":"Introduzione","source":"@site/i18n/it/docusaurus-plugin-content-docs/current/admin/45.tutorials/25.external_storage.mdx","sourceDirName":"admin/45.tutorials","slug":"/admin/tutorials/external_storage","permalink":"/doc/pr-2672/it/admin/tutorials/external_storage","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/i18n/it/docusaurus-plugin-content-docs/current/admin/45.tutorials/25.external_storage.mdx","tags":[],"version":"current","sidebarPosition":25,"frontMatter":{"sidebar_label":"Add external storage","title":"Aggiungere un disco esterno al vostro server"},"sidebar":"admin","previous":{"title":"Transfer files","permalink":"/doc/pr-2672/it/admin/tutorials/filezilla"},"next":{"title":"Configurare un relay SMTP","permalink":"/doc/pr-2672/it/admin/tutorials/email_configure_relay"}}'),a=n(4848),l=n(4429);let s={sidebar_label:"Add external storage",title:"Aggiungere un disco esterno al vostro server"},r,t={},d=[{value:"Introduzione",id:"introduzione",level:2},{value:"<FAIcon></FAIcon> Prerequisiti",id:"-prerequisiti",level:2},{value:"1. Identificare le cartelle da spostare",id:"1-identificare-le-cartelle-da-spostare",level:2},{value:"2. Collegare e identificare il disco",id:"2-collegare-e-identificare-il-disco",level:2},{value:"3. Formattare il disco (Se necessario)",id:"3-formattare-il-disco-se-necessario",level:2},{value:"4. Montare il disco",id:"4-montare-il-disco",level:2},{value:"5. Montare una cartella <code>/mnt/hdd</code> nella cartella che contiene i dati da spostare",id:"5-montare-una-cartella-mnthdd-nella-cartella-che-contiene-i-dati-da-spostare",level:2},{value:"5.1 Creazione delle sotto cartelle sul disco",id:"51-creazione-delle-sotto-cartelle-sul-disco",level:3},{value:"5.2 Passaggio alla modalit\xe0 manutenzione",id:"52-passaggio-alla-modalit\xe0-manutenzione",level:3},{value:"5.3 Creazione dei punti di montaggio",id:"53-creazione-dei-punti-di-montaggio",level:3},{value:"5.4 Copia dei dati",id:"54-copia-dei-dati",level:3},{value:"5.5 Uscita dalla modalit\xe0 manutenzione",id:"55-uscita-dalla-modalit\xe0-manutenzione",level:3},{value:"6. Automatizzare il montaggio all&#39;avvio",id:"6-automatizzare-il-montaggio-allavvio",level:2},{value:"7. Cancellare i dati precedenti",id:"7-cancellare-i-dati-precedenti",level:2},{value:"\u{1F389} Complimenti!!!",id:"-complimenti",level:3}];function c(e){let i={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components},{FAIcon:n}=i;return n||function(e,i){throw Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("FAIcon",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.h2,{id:"introduzione",children:"Introduzione"}),"\n",(0,a.jsx)(i.p,{children:"Oltre al monitoraggio delle dimensioni delle partizioni (che controlla che non siano troppo piccole), YunoHost non si occupa, al momento, dell'organizzazione delle partizioni dei vostri dischi."}),"\n",(0,a.jsx)(i.p,{children:"Se la vostra configurazione \xe8 basata su una board ARM con scheda SD, oppure il server dispone di un disco SSD di piccole dimensioni, potreste, per motivi di spazio o di sicurezza, voler aggiungere uno o pi\xf9 dischi al vostro server."}),"\n",(0,a.jsx)(i.admonition,{type:"warning",children:(0,a.jsxs)(i.p,{children:["Se avete esaurito lo spazio sul disco del vostro server, potete provare con il comando ",(0,a.jsx)(i.code,{children:"apt clean"})," per tentare di recuperarne un po' e avere modo di seguire le istruzioni di seguito riportate."]})}),"\n",(0,a.jsx)(i.p,{children:"Troverete qui le istruzioni per riuscire a spostare i vostri dati su un disco esterno in modo corretto e con un impatto minimo sul funzionamento di YunoHost. Potete eseguire lo spostamento durante l'installazione o in un secondo momento, quando si presenter\xe0 la necessit\xe0 di pi\xf9 spazio o temete per l'affidabilit\xe0 della scheda SD."}),"\n",(0,a.jsx)(i.admonition,{type:"tip",children:(0,a.jsx)(i.p,{children:"Il procedimento presentato qui inizia montando l'unica partizione del disco, in seguito utilizza una o pi\xf9 sotto-cartelle per creare diversi punti di montaggio sull'albero del file system del pc. Questo metodo \xe8 preferibile rispetto al utilizzo di link simbolici poich\xe9 questi possono entrare in conflitto con alcune applicazioni, tra le quali il sistema di backup di YunoHost. Potreste scegliere di montare le partizioni invece che le sotto-cartelle, ma sorge la difficolt\xe0 di prevedere la stima della dimensione della cartella."})}),"\n",(0,a.jsxs)(i.h2,{id:"-prerequisiti",children:[(0,a.jsx)(n,{icon:"fa-list-alt"})," Prerequisiti"]}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:["Prevedere un periodo temporale nel quale gli utenti del vostro server possono sopportare una interruzione dei servizi. I passaggi da compiere, anche se relativamente semplici, sono tecnicamente complessi e necessitano di un lasso di tempo ",(0,a.jsx)(i.strong,{children:"da dedicare in modo esclusivo"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:["Conoscenza della connessione come root sul server anche via ",(0,a.jsx)(i.a,{href:"/admin/command_line",children:"SSH"}),". (Nota bene: se siete connessi come utente ",(0,a.jsx)(i.code,{children:"admin"}),", potete passare root con il comando ",(0,a.jsx)(i.code,{children:"sudo su"}),")"]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:["Conoscere i comandi ",(0,a.jsx)(i.code,{children:"cd"}),", ",(0,a.jsx)(i.code,{children:"ls"}),", ",(0,a.jsx)(i.code,{children:"mkdir"}),", ",(0,a.jsx)(i.code,{children:"rm"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsx)(i.p,{children:"Disporre di un backup nel caso le cose non vadano come previsto"}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsx)(i.p,{children:"Disporre di un disco aggiuntivo (SSD, hard disk, chiavetta USB) collegato al server via USB o SATA"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(i.h2,{id:"1-identificare-le-cartelle-da-spostare",children:"1. Identificare le cartelle da spostare"}),"\n",(0,a.jsxs)(i.p,{children:["Il comando ",(0,a.jsx)(i.code,{children:"ncdu"})," vi permette di navigare tra le cartelle del vostro server affinch\xe9 possiate conoscerne la loro dimensione."]}),"\n",(0,a.jsx)(i.p,{children:"Di seguito, alcuni esempi di percorsi che possono essere di notevoli dimensioni e qualche consiglio su come ridurre la loro dimensione o perch\xe9 sceglierli tra quelli da spostare."}),"\n",(0,a.jsxs)(i.table,{children:[(0,a.jsx)(i.thead,{children:(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.th,{children:"Percorso"}),(0,a.jsx)(i.th,{children:"Contenuto"}),(0,a.jsx)(i.th,{children:"Consigli"})]})}),(0,a.jsxs)(i.tbody,{children:[(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"/home"})}),(0,a.jsx)(i.td,{children:"Cartelle Utenti accessibile via SFTP"}),(0,a.jsx)(i.td,{children:"Spostabile"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"/home/yunohost.backup"})}),(0,a.jsx)(i.td,{children:"Backup di YunoHost"}),(0,a.jsx)(i.td,{children:"In base alla vostra strategia di backup \xe8 consigliabile spostare questa cartella su un disco diverso da quello che contiene i dati e i database"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"/home/yunohost.app"})}),(0,a.jsx)(i.td,{children:"Cartella di grandi dimensioni contenente i dati delle varie applicazioni (nextcloud, matrix)"}),(0,a.jsx)(i.td,{children:"Spostabile"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"/home/yunohost.multimedia"})}),(0,a.jsx)(i.td,{children:"Cartella di grandi dimensioni condivisa tra varie applicazioni (nextcloud, matrix)"}),(0,a.jsx)(i.td,{children:"Spostabile"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"/var/lib/msql"})}),(0,a.jsx)(i.td,{children:"Database utilizzato dalle applicazioni"}),(0,a.jsx)(i.td,{children:"Per motivi di velocit\xe0 \xe8 consigliato lasciarlo sul disco principale"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"/var/lib/postgresql"})}),(0,a.jsx)(i.td,{children:"Database utilizzato dalle applicazioni"}),(0,a.jsx)(i.td,{children:"Per motivi di velocit\xe0 \xe8 consigliato lasciarlo sul disco principale"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"/var/mail"})}),(0,a.jsx)(i.td,{children:"Mail degli utenti"}),(0,a.jsx)(i.td,{children:"Spostabile"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"/var/www"})}),(0,a.jsx)(i.td,{children:"Cartella delle applicazioni WEB"}),(0,a.jsx)(i.td,{children:"Per motivi di velocit\xe0 \xe8 consigliato lasciarla sul disco principale"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"/var/log"})}),(0,a.jsx)(i.td,{children:"Log degli eventi (messaggi di errore, connessioni...)"}),(0,a.jsx)(i.td,{children:"Questa cartella dovrebbe essere di dimensioni ridotte, in caso contrario potrebbe esserci un errore nella rotazione dei log che deve essere risolto."})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"/opt"})}),(0,a.jsx)(i.td,{children:"Programmi e dipendenze di alcune applicazioni YunoHost"}),(0,a.jsx)(i.td,{children:"Per motivi di velocit\xe0 \xe8 consigliato lasciare sul disco principale. Per le applicazioni nodejs \xe8 possibile recuperare dello spazio cancellando le versioni non in uso"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"/boot"})}),(0,a.jsx)(i.td,{children:"Kernel e file di avvio"}),(0,a.jsx)(i.td,{children:"Non spostare se non perfettamente a conoscenza delle possibili conseguenze. Si possono eliminare vecchi kernel non in uso"})]})]})]}),"\n",(0,a.jsx)(i.h2,{id:"2-collegare-e-identificare-il-disco",children:"2. Collegare e identificare il disco"}),"\n",(0,a.jsx)(i.p,{children:"Collegate il disco al server e identificate il nome assegnato dal sistema."}),"\n",(0,a.jsx)(i.p,{children:"Utilizzate il comando:"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"lsblk\n"})}),"\n",(0,a.jsx)(i.p,{children:"La risposta potrebbe essere qualcosa di simile"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT\nsda           8:0    0 931.5G  0 disk\n\u2514\u2500sda1        8:1    0 931.5G  0 part\nmmcblk0     179:0    0  14.9G  0 disk\n\u251C\u2500mmcblk0p1 179:1    0  47.7M  0 part /boot\n\u2514\u2500mmcblk0p2 179:2    0  14.8G  0 part /\n"})}),"\n",(0,a.jsxs)(i.p,{children:["In questo caso ",(0,a.jsx)(i.code,{children:"mmcblk0"})," corrisponde ad una scheda SD di 16 GB (si nota che le partizioni ",(0,a.jsx)(i.code,{children:"mmcblk0p1"})," e ",(0,a.jsx)(i.code,{children:"mmcblk0p2"})," corrispondono rispettivamente alla partizione di ",(0,a.jsx)(i.code,{children:"/boot"})," e alla partizione di sistema ",(0,a.jsx)(i.code,{children:"/"}),"). Il disco esterno collegato corrisponde a ",(0,a.jsx)(i.code,{children:"sda"}),", ha una capacit\xe0 di circa 1GB, e contiene una sola partizione ",(0,a.jsx)(i.code,{children:"sda1"}),' che non \xe8 montata (non ha nessun riferimento nella colonna "MOUNTPOINT").']}),"\n",(0,a.jsx)(i.admonition,{type:"warning",children:(0,a.jsxs)(i.p,{children:[(0,a.jsx)(n,{icon:"fa-exclamation-triangle"}),"  In alcuni casi il sistema operativo \xe8 installato su ",(0,a.jsx)(i.code,{children:"sda"})," e di conseguenza il vostro disco sar\xe0 ",(0,a.jsx)(i.code,{children:"sdb"})]})}),"\n",(0,a.jsx)(i.admonition,{type:"tip",children:(0,a.jsxs)(i.p,{children:["Suggerimento! se la dimensione del disco non \xe8 sufficiente per essere riconosciuto, potete scollegare il disco e eseguire il comando ",(0,a.jsx)(i.code,{children:"lsblk"}),", ricollegare il disco, eseguire nuovamente ",(0,a.jsx)(i.code,{children:"lsblk"})," e osservare le differenze di output."]})}),"\n",(0,a.jsx)(i.h2,{id:"3-formattare-il-disco-se-necessario",children:"3. Formattare il disco (Se necessario)"}),"\n",(0,a.jsx)(i.p,{children:"Se il vostro disco \xe8 formattato con un filesystem supportato da Linux (quindi non FAT32 o NTFS) potete andare al punto successivo, diversamente."}),"\n",(0,a.jsx)(i.p,{children:"Create un partizione sul disco:"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"fdisk /dev/miodisco\n"})}),"\n",(0,a.jsxs)(i.p,{children:["digitate in sequenza ",(0,a.jsx)(i.code,{children:"n"}),", ",(0,a.jsx)(i.code,{children:"p"}),", ",(0,a.jsx)(i.code,{children:"1"}),", ",(0,a.jsx)(i.code,{children:"Invio"}),", ",(0,a.jsx)(i.code,{children:"Invio"}),", ",(0,a.jsx)(i.code,{children:"w"})," per creare una nuova partizione"]}),"\n",(0,a.jsxs)(i.p,{children:["Controllate con ",(0,a.jsx)(i.code,{children:"lsblk"})," che il vostro disco contenga solo una partizione."]}),"\n",(0,a.jsx)(i.p,{children:"Prima di poter essere utilizzato il disco deve essere formattato."}),"\n",(0,a.jsx)(i.admonition,{type:"warning",children:(0,a.jsxs)(i.p,{children:[(0,a.jsx)(n,{icon:"fa-exclamation-triangle"}),"  **Se il vostro disco \xe8 gi\xe0 formattato potete saltare questa parte. La formattazione di un disco comporta la cancellazione di tutti i dati presenti! Ponete attenzione nel digitare il nome del disco, potreste formattare un disco diverso da quello dove volete intervenire! Nell'esempio sopra, il disco si chiama ",(0,a.jsx)(i.code,{children:"/dev/sda"}),". Se il vostro disco \xe8 gi\xe0 formattato potete saltare questa parte."]})}),"\n",(0,a.jsx)(i.p,{children:"Per formattare la partizione digitate :"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"mkfs.ext4 /dev/miodisco\n# e poi 'y' per confermare\n"})}),"\n",(0,a.jsxs)(i.p,{children:["Sostituite ",(0,a.jsx)(i.code,{children:"miodisco"})," con il nome della prima partizione del disco di destinazione, nel nostro esempio ",(0,a.jsx)(i.code,{children:"sda1"}),"."]}),"\n",(0,a.jsx)(i.admonition,{type:"tip",children:(0,a.jsx)(i.p,{children:"Potete variare queste istruzioni se volete creare un volume raid 1 o cifrare la cartella."})}),"\n",(0,a.jsx)(i.h2,{id:"4-montare-il-disco",children:"4. Montare il disco"}),"\n",(0,a.jsxs)(i.p,{children:["Contrariamente a Windows, dove i dischi sono contraddistinti da lettere (C:), in linux i dischi sono accessibili dall'albero del gestore dei file. \"Montare\" un disco significa renderlo accessibile nell'albero dei file. Sceglieremo di montare il disco in ",(0,a.jsx)(i.code,{children:"/mnt/hdd"})," ma possiamo anche assegnare un nome di fantasia. (Ad esempio ",(0,a.jsx)(i.code,{children:"/mnt/disco"})," ...)."]}),"\n",(0,a.jsx)(i.p,{children:"Iniziamo creando la directory:"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"mkdir /mnt/hdd\n"})}),"\n",(0,a.jsx)(i.p,{children:"Montiamo il disco con il comando:"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"mount /dev/miodisco /mnt/hdd\n"})}),"\n",(0,a.jsxs)(i.p,{children:["(In questo caso, ",(0,a.jsx)(i.code,{children:"/dev/miodisco"})," corrisponde alla prima partizione del disco)"]}),"\n",(0,a.jsxs)(i.h2,{id:"5-montare-una-cartella-mnthdd-nella-cartella-che-contiene-i-dati-da-spostare",children:["5. Montare una cartella ",(0,a.jsx)(i.code,{children:"/mnt/hdd"})," nella cartella che contiene i dati da spostare"]}),"\n",(0,a.jsxs)(i.p,{children:["Ipotizzeremo, di seguito, lo spostamento delle mail e di una notevole quantit\xe0 di dati delle applicazioni, che si trovano in ",(0,a.jsx)(i.code,{children:"/home/yunohost.app"}),"."]}),"\n",(0,a.jsx)(i.h3,{id:"51-creazione-delle-sotto-cartelle-sul-disco",children:"5.1 Creazione delle sotto cartelle sul disco"}),"\n",(0,a.jsx)(i.p,{children:"Iniziamo creando due cartelle nel disco di destinazione."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"mkdir -p /mnt/hdd/home/yunohost.app\nmkdir -p /mnt/hdd/var/mail\n"})}),"\n",(0,a.jsx)(i.h3,{id:"52-passaggio-alla-modalit\xe0-manutenzione",children:"5.2 Passaggio alla modalit\xe0 manutenzione"}),"\n",(0,a.jsx)(i.p,{children:"Precauzionalmente portiamo nello stato di manutenzione le applicazioni che potrebbero scrivere dei dati nella cartella che vogliamo spostare."}),"\n",(0,a.jsx)(i.p,{children:"Ad esempio, per nextcloud:"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"sudo -u nextcloud /var/www/nextcloud/occ maintenance:mode --on\n"})}),"\n",(0,a.jsx)(i.p,{children:"Per la mail:"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"systemctl stop postfix\nsystemctl stop dovecot\n"})}),"\n",(0,a.jsx)(i.admonition,{type:"warning",children:(0,a.jsx)(i.p,{children:"Se desiderate spostare dei database come ad esempio mariadb (mysql), dovete necessariamente fermare i servizi del database, pena la corruzione dei dati."})}),"\n",(0,a.jsx)(i.h3,{id:"53-creazione-dei-punti-di-montaggio",children:"5.3 Creazione dei punti di montaggio"}),"\n",(0,a.jsx)(i.p,{children:"Procediamo con rinominare la cartella di origine e crearne una fittizia"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"mv /home/yunohost.app /home/yunohost.app.bkp\nmkdir /home/yunohost.app\nmv /var/mail /var/mail.bkp\nmkdir /var/mail\n"})}),"\n",(0,a.jsxs)(i.p,{children:["Servendoci del comando ",(0,a.jsx)(i.code,{children:"mount --bind"})," montiamo la cartella del nostro disco nel nuovo ramo dell'albero dei file."]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"mount --bind /mnt/hdd/home/yunohost.app /home/yunohost.app\nmount --bind /mnt/hdd/var/mail /var/mail\n"})}),"\n",(0,a.jsx)(i.h3,{id:"54-copia-dei-dati",children:"5.4 Copia dei dati"}),"\n",(0,a.jsxs)(i.p,{children:["Copiamo quindi i dati, mantenendo le propriet\xe0 delle cartelle e dei file. Questa operazione pu\xf2 impiegare un po' di tempo, aprendo un altro terminale potete seguire la progressione dell'operazione osservando la dimensione del punto di montaggio con il comando ",(0,a.jsx)(i.code,{children:"df -h"})]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"cp -a /home/yunohost.app.bkp/. /home/yunohost.app/\ncp -a /var/mail.bkp/. /var/mail/\n"})}),"\n",(0,a.jsxs)(i.p,{children:["Terminata la copia, assicuratevi che sia andato tutto a buon fine con il comando ",(0,a.jsx)(i.code,{children:"ls"})]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"ls -la /home/yunohost.app/\nls -la /var/mail/\n"})}),"\n",(0,a.jsx)(i.h3,{id:"55-uscita-dalla-modalit\xe0-manutenzione",children:"5.5 Uscita dalla modalit\xe0 manutenzione"}),"\n",(0,a.jsx)(i.p,{children:"Da questo momento potete uscire dalla modalit\xe0 manutenzione, il comando illustrato qui sotto va adattato in base ai servizi che avevate sospeso o arrestato."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"sudo -u nextcloud /var/www/nextcloud/occ maintenance:mode --off\nsystemctl start postfix\nsystemctl start dovecot\n"})}),"\n",(0,a.jsx)(i.p,{children:"Dopo aver impartito i comandi di avvio, le applicazioni e i servizi sfrutteranno il disco esterno per i loro dati. Dobbiamo quindi effettuare qualche test per capire in quale misura la velocit\xe0 di esecuzione \xe8 impattata dal disco esterno (in particolar modo se il disco utilizza l'interfaccia USB 2.0)."}),"\n",(0,a.jsx)(i.h2,{id:"6-automatizzare-il-montaggio-allavvio",children:"6. Automatizzare il montaggio all'avvio"}),"\n",(0,a.jsx)(i.p,{children:"Fino ad ora, abbiamo montato manualmente il disco e le sotto cartelle. \xc8 per\xf2 necessario  configurare il sistema affinch\xe9 il disco esterno venga montato in automatico ad ogni avvio."}),"\n",(0,a.jsx)(i.p,{children:"Se i test di velocit\xe0 sono soddisfacenti, bisogna rendere definitivo il punto di montaggio. In caso contrario affrettatevi a fare dietro front iniziando a ripristinare la modalit\xe0 di manutenzione."}),"\n",(0,a.jsx)(i.p,{children:"Iniziamo cercando l'UUID (universal identifier, identificatore universale) del nostro disco:"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:'blkid | grep "/dev/miodisco"\n# Restituisce una stringa del tipo :\n# /dev/sda1:UUID="cea0b7ae-2fbc-4f01-8884-3cb5884c8bb7" TYPE="ext4" PARTUUID="34e4b02c-02"\n'})}),"\n",(0,a.jsxs)(i.p,{children:["Aggiungiamo una riga di codice al file ",(0,a.jsx)(i.code,{children:"/etc/fstab"})," deputato alla gestione dei montaggi dei dischi all'avvio. Aprite il file con ",(0,a.jsx)(i.code,{children:"nano"}),":"]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"nano /etc/fstab\n"})}),"\n",(0,a.jsx)(i.p,{children:"Digitiamo questa riga in fondo al file:"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:'UUID="cea0b7ae-2fbc-4f01-8884-3cb5884c8bb7" /mnt/hdd ext4 defaults,nofail 0 0\n/mnt/hdd/home/yunohost.app /home/yunohost.app none defaults,bind 0 0\n/mnt/hdd/var/mail /var/mail none defaults,bind 0 0\n'})}),"\n",(0,a.jsx)(i.p,{children:"(dovremo modificare la riga in base alle nostre scelte precedenti)"}),"\n",(0,a.jsxs)(i.p,{children:["Salvate le modifiche con CTRL+x e ",(0,a.jsx)(i.code,{children:"o"}),"."]}),"\n",(0,a.jsx)(i.p,{children:"Riavviate il server per assicurarvi che il disco e le sotto cartelle vengano montate in automatico."}),"\n",(0,a.jsx)(i.h2,{id:"7-cancellare-i-dati-precedenti",children:"7. Cancellare i dati precedenti"}),"\n",(0,a.jsx)(i.p,{children:"Quando siete sicuri che la configurazione sia corretta, potete procedere alla cancellazione della configurazione creata nel punto 5.3:"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"rm -Rf /home/yunohost.app.bkp\nrm -Rf /var/mail.bkp\n"})}),"\n",(0,a.jsx)(i.h3,{id:"-complimenti",children:"\u{1F389} Complimenti!!!"}),"\n",(0,a.jsx)(i.p,{children:"Se siete giunti fino qui senza incidenti, avete configurato un server che sfrutta uno o pi\xf9 dischi per il salvataggio dei dati."})]})}function p(e={}){let{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},4429:function(e,i,n){n.d(i,{R:()=>s,x:()=>r});var o=n(6540);let a={},l=o.createContext(a);function s(e){let i=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(l.Provider,{value:i},e.children)}}}]);