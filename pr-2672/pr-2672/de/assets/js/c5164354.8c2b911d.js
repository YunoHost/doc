"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["5839"],{8094:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>d,toc:()=>a,default:()=>h,metadata:()=>s,assets:()=>o,contentTitle:()=>l});var s=JSON.parse('{"id":"packaging/index","title":"Einf\xfchrung in die Paketierung","description":"In dieser Dokumentation findest du alle grundlegenden Konzepte und Vokabeln, die du zum Verst\xe4ndnis von Anwendungspaketen ben\xf6tigst.","source":"@site/i18n/de/docusaurus-plugin-content-docs/current/packaging/index.mdx","sourceDirName":"packaging","slug":"/packaging/","permalink":"/pr-2672/de/packaging/","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/i18n/de/docusaurus-plugin-content-docs/current/packaging/index.mdx","tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"title":"Einf\xfchrung in die Paketierung","sidebar_position":0},"sidebar":"devpackaging","previous":{"title":"How is used the main domain","permalink":"/pr-2672/de/dev/core/maindomain"},"next":{"title":"Einf\xfchrung in die Paketierung","permalink":"/pr-2672/de/packaging/"}}'),r=i(4848),t=i(4429);let d={title:"Einf\xfchrung in die Paketierung",sidebar_position:0},l,o={},a=[{value:"1. Paketierungs-Philosophie",id:"1-paketierungs-philosophie",level:2},{value:"2. Voraussetzungen",id:"2-voraussetzungen",level:2},{value:"3. Anmerkungen zur Geschichte der YunoHost-App-Pakete",id:"3-anmerkungen-zur-geschichte-der-yunohost-app-pakete",level:2},{value:"4. Allgemeiner \xdcberblick \xfcber die Struktur einer YunoHost-App",id:"4-allgemeiner-\xfcberblick-\xfcber-die-struktur-einer-yunohost-app",level:2},{value:"5. Erstellen deines allerersten YunoHost-Pakets",id:"5-erstellen-deines-allerersten-yunohost-pakets",level:2}];function u(e){let n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"In dieser Dokumentation findest du alle grundlegenden Konzepte und Vokabeln, die du zum Verst\xe4ndnis von Anwendungspaketen ben\xf6tigst."}),"\n",(0,r.jsx)(n.p,{children:"Wir werden detailliert beschreiben, was ein YunoHost-Anwendungspaket ist, wie es funktioniert, wie du dein eigenes Paket erstellst und wie du Hilfe findest, wenn du diese ben\xf6tigst."}),"\n",(0,r.jsx)(n.h2,{id:"1-paketierungs-philosophie",children:"1. Paketierungs-Philosophie"}),"\n",(0,r.jsx)(n.p,{children:"Die M\xf6glichkeit, Anwendungen einfach aus einem Katalog zu installieren, ist eine Schl\xfcsselfunktion von YunoHost. W\xe4hrend du in den Prozess der YunoHost-Anwendungspaketierung eintauchst, solltest du dich an diese Schl\xfcsselprinzipien erinnern:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Der Administrator sollte keinen Doktortitel in Informatik haben, um deine Anwendung installieren, konfigurieren und nutzen zu k\xf6nnen"}),": Gehe davon aus, dass der Administrator keine fortgeschrittenen Computerkenntnisse hat;"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Weniger ist mehr"}),", ",(0,r.jsx)(n.strong,{children:"Keep it simple!"}),": \xfcberfrachte den Administrator nicht mit Dutzenden von technischen Fragen;"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Die Dinge sollten sofort funktionieren"}),": zum Beispiel sollte der Administrator den Installationsprozess nicht manuell abschlie\xdfen m\xfcssen, indem er die Zugangsdaten f\xfcr die Datenbank manuell ausf\xfcllt;"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Bei der Paketierung von YunoHost-Apps geht es ",(0,r.jsx)(n.strong,{children:"nicht nur um die Installation"})," von Quellen und Abh\xe4ngigkeiten: Es geht auch um Wartung (Upgrade, Backup...) und die Integration der App in das YunoHost-\xd6kosystem (NGINX, SSO/LDAP, Fail2Ban, Anwendungskatalog, UI/UX...)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"2-voraussetzungen",children:"2. Voraussetzungen"}),"\n",(0,r.jsx)(n.p,{children:"In dieser Dokumentation wird vorausgesetzt, dass:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Du selbst bereits YunoHost-Administrator bist und wei\xdft, wie der Installationsablauf aussieht;)"}),"\n",(0,r.jsx)(n.li,{children:"Du bist einigerma\xdfen vertraut mit Systemadministration und Bash-Programmierung (oder bereit, diese zu lernen);"}),"\n",(0,r.jsx)(n.li,{children:"Du bist einigerma\xdfen vertraut mit Git (oder bereit, es zu lernen);"}),"\n",(0,r.jsx)(n.li,{children:"Du hast Spa\xdf am Basteln und am Debuggen von Computerkram im Allgemeinen."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Du bist auch eingeladen, dem ",(0,r.jsx)(n.a,{href:"/community/chat_rooms",children:"app packaging chatroom"})," beizutreten, um alle Fragen zu stellen, die du vielleicht hast!"]}),"\n",(0,r.jsxs)(n.p,{children:["Irgendwann wirst du auch eine Entwicklungs-/Testumgebung haben wollen, entweder mit ",(0,r.jsx)(n.a,{href:"/packaging/resources/packaging_apps_virtualbox",children:"VirtualBox"})," oder ",(0,r.jsx)(n.a,{href:"https://github.com/yunohost/ynh-dev",children:"LXC/ynh-dev"}),", das f\xfcr den Kern gedacht ist, aber durchaus auch f\xfcr die Entwicklung von Anwendungen verwendet werden kann. Du kannst auch einen Dev/Test-VPS bei deinem bevorzugten Hosting-Anbieter einrichten oder sogar auf deinem Prod entwickeln, wenn du gerne gef\xe4hrlich lebst ;)."]}),"\n",(0,r.jsx)(n.h2,{id:"3-anmerkungen-zur-geschichte-der-yunohost-app-pakete",children:"3. Anmerkungen zur Geschichte der YunoHost-App-Pakete"}),"\n",(0,r.jsx)(n.p,{children:"Viele Dinge bei YunoHost und dem YunoHost App-Packaging-Format sind historisch bedingt oder wurden auf organische Art und Weise entwickelt. Daher k\xf6nnen sich einige Aspekte zu Recht alt anf\xfchlen."}),"\n",(0,r.jsxs)(n.p,{children:["Die ",(0,r.jsx)(n.strong,{children:'"v0" der App-Paketierung'})," bestand aus dem Schreiben roher Bash-Skripte ohne echte Standardisierung/Einschr\xe4nkung."]}),"\n",(0,r.jsxs)(n.p,{children:['Mit der Zeit wurden wiederkehrende Schritte (wie die Installation von Abh\xe4ngigkeiten mit apt oder die Einrichtung der NGINX-Konfiguration) in standardisierte Bash-Funktionen, auch "Helfer" genannt, formalisiert. Dies markierte so ziemlich ',(0,r.jsx)(n.strong,{children:'den Beginn der \xc4ra der "v1"-Pakete'}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Verschiedene Tools wurden implementiert, um die Anwendung zu testen und ihr Verhalten zu standardisieren."}),"\n",(0,r.jsxs)(n.p,{children:["Nach einer Weile bildete sich eine Reihe von gemeinsamen Praktiken und Konventionen heraus, die sich in der ",(0,r.jsx)(n.code,{children:"example_ynh"}),"-Vorlagenanwendung widerspiegeln und erhalten. W\xe4hrend es f\xfcr Entwickler verlockend ist, die Namensschemata von Variablen zu \xe4ndern oder die Struktur von Skripten zu refaktorisieren, stellt sich heraus, dass es sogar noch wichtiger ist, sich an die gemeinsamen Praktiken zu halten (auch wenn sie willk\xfcrlich und nicht elegant sind), um die Wartung aller Anwendungen durch jedes Mitglied der Paketierungsgemeinschaft \xfcber alle Repos hinweg zu erleichtern!"]}),"\n",(0,r.jsxs)(n.p,{children:["Nichtsdestotrotz war die inh\xe4rente Struktur von Anwendungen, auch wenn es Helfer gab, schwer und langweilig zu warten, da sie zu viele redundante Codest\xfccke enthielt oder mit seltsamen historischen Konventionen gef\xfcllt war. ",(0,r.jsx)(n.strong,{children:"Ein neues v2-Format"})," [wurde entworfen und zu YunoHost 11.1 Anfang 2023 hinzugef\xfcgt] (",(0,r.jsx)(n.a,{href:"https://github.com/YunoHost/yunohost/pull/1289",children:"https://github.com/YunoHost/yunohost/pull/1289"}),") in der Hoffnung, das App-Packaging zu modernisieren und zu vereinfachen und die UI/UX von YunoHost zu verbessern."]}),"\n",(0,r.jsxs)(n.p,{children:["Es wird jedoch ",(0,r.jsx)(n.a,{href:"https://github.com/YunoHost/issues/issues/2136",children:(0,r.jsx)(n.strong,{children:"ein zuk\xfcnftiges v3-Format"})})," geben, um die Paketierung von Anwendungen weiter zu vereinfachen (z.B. durch die \xdcbernahme von NGINX/systemd/... Konfigurationen, die Beseitigung der Notwendigkeit, Skripte zum Entfernen/Backup/Wiederherstellen manuell zu schreiben, usw.)"]}),"\n",(0,r.jsx)(n.h2,{id:"4-allgemeiner-\xfcberblick-\xfcber-die-struktur-einer-yunohost-app",children:"4. Allgemeiner \xdcberblick \xfcber die Struktur einer YunoHost-App"}),"\n",(0,r.jsx)(n.p,{children:"Eine YunoHost-Anwendung besteht aus einem Git-Repository. Wir empfehlen dir, einen Blick auf diese Code-Repositories zu werfen, um dich mit der Struktur der App-Repositories vertraut zu machen:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsxs)(n.a,{href:"https://github.com/YunoHost-Apps/helloworld_ynh",children:["die ",(0,r.jsx)(n.code,{children:"helloworld_ynh"})," App"]})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.a,{href:"https://github.com/YunoHost/example_ynh",children:["die ",(0,r.jsx)(n.code,{children:"example_ynh"})," app"]}),", die alle g\xe4ngigen Funktionen und empfohlenen Formatierungen veranschaulicht"]}),"\n",(0,r.jsxs)(n.li,{children:['Deine bevorzugte "Real-Life"-App in der ',(0,r.jsx)(n.a,{href:"https://github.com/orgs/YunoHost-Apps/repositories",children:"YunoHost-Apps-Organisation"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Unter den in einem Paket enthaltenen Dateien sind die wichtigsten:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["das ",(0,r.jsx)(n.strong,{children:"Anwendungsmanifest"})," ",(0,r.jsx)(n.code,{children:"manifest.toml"})," ",(0,r.jsxs)("small",{children:["(oder ",(0,r.jsx)(n.code,{children:".json"})," in der Vergangenheit)"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Dies kann als der Ausweis der Anwendung angesehen werden, der verschiedene Metadaten enth\xe4lt."}),"\n",(0,r.jsx)(n.li,{children:"Sie enth\xe4lt auch die Fragen, die bei der Installation der Anwendung gestellt werden."}),"\n",(0,r.jsx)(n.li,{children:'und eine Reihe von "Ressourcen" zum Initialisieren, wie z.B. herunterzuladende Quellen oder zu installierende apt-Abh\xe4ngigkeiten'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"scripts/"})," enth\xe4lt eine Reihe von Bash-Skripten, die den in YunoHost angebotenen Aktionen entsprechen","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"_common.sh"}),": gemeinsame Variablen oder eigene Funktionen, die in anderen Skripten enthalten sind"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"install"}),"/",(0,r.jsx)(n.code,{children:"remove"}),": die Installations- und Deinstallationsprozedur"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upgrade"}),": die Upgrade-Prozedur"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"backup"}),"/",(0,r.jsx)(n.code,{children:"restore"}),": die Sicherungs-/Wiederherstellungsprozeduren"]}),"\n",(0,r.jsxs)(n.li,{children:["(",(0,r.jsx)(n.code,{children:"change_url"}),"): \xc4ndern des Ortes, an dem die Anwendung in Bezug auf die Webzugriffsurl installiert ist"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"conf/"})," enth\xe4lt eine Reihe von Konfigurationsvorlagen, die bei der Installation der Anwendung verwendet werden. Hier sind einige Beispiele f\xfcr h\xe4ufig vorkommende Dateien:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"nginx.conf"}),": die NGINX (=Webserver) Konfigurationsvorlage f\xfcr diese Anwendung"]}),"\n",(0,r.jsx)(n.li,{children:'systemd.service": die Konfigurationsvorlage f\xfcr den systemd-Dienst f\xfcr diese Anwendung'}),"\n",(0,r.jsx)(n.li,{children:"config.json/yaml/???`: die Konfigurationsvorlage f\xfcr die Anwendung"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Grob gesagt besteht die Installation selbst im Allgemeinen aus den folgenden Vorg\xe4ngen (die jedoch je nach Komplexit\xe4t und von der App verwendeten Technologien variieren k\xf6nnen) - nicht unbedingt in dieser genauen Reihenfolge:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"YunoHost holt das Git-Repository des Pakets"}),"\n",(0,r.jsxs)(n.li,{children:["YunoHost stellt dem Administrator die in ",(0,r.jsx)(n.code,{children:"manifest.toml"})," definierten Fragen zur Installation"]}),"\n",(0,r.jsx)(n.li,{children:"Der Administrator f\xfcllt das Formular aus und startet die Installation"}),"\n",(0,r.jsxs)(n.li,{children:["YunoHost stellt eine Reihe von technischen Voraussetzungen (genannt 'Ressourcen') bereit, wie z.B.:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Initialisierung des Schl\xfcssel/Wertspeichers der Anwendung ",(0,r.jsx)(n.code,{children:"settings.yml"})," mit den Antworten des Administrators auf das Installationsformular"]}),"\n",(0,r.jsx)(n.li,{children:"legt einen UNIX-Systembenutzer f\xfcr diese Anwendung an"}),"\n",(0,r.jsx)(n.li,{children:"installiert apt-Abh\xe4ngigkeiten, die f\xfcr diese Anwendung ben\xf6tigt werden"}),"\n",(0,r.jsx)(n.li,{children:"w\xe4hlt einen Port f\xfcr internes Reverse-Proxying aus"}),"\n",(0,r.jsx)(n.li,{children:"initialisiert eine leere SQL-Datenbank"}),"\n",(0,r.jsx)(n.li,{children:"konfiguriert SSOwat-Berechtigungen"}),"\n",(0,r.jsx)(n.li,{children:"..."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Das eigentliche Skript ",(0,r.jsx)(n.code,{children:"Install"})," wird ausgef\xfchrt und erledigt in der Regel:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Holen und Bereitstellen der App-Quellen"}),"\n",(0,r.jsx)(n.li,{children:"die App konfigurieren (typischerweise DB-Anmeldedaten, interner Reverse-Proxy-Port...)"}),"\n",(0,r.jsx)(n.li,{children:"Hinzuf\xfcgen der NGINX-Konfiguration"}),"\n",(0,r.jsx)(n.li,{children:"Hinzuf\xfcgen der systemd-Konfiguration f\xfcr den Daemon der Anwendung"}),"\n",(0,r.jsx)(n.li,{children:"Startet den Daemon der Anwendung"}),"\n",(0,r.jsx)(n.li,{children:"verschiedene Feinabstimmungen zur Fertigstellung"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"???"}),"\n",(0,r.jsx)(n.li,{children:"Die Anwendung ist einsatzbereit!"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"5-erstellen-deines-allerersten-yunohost-pakets",children:"5. Erstellen deines allerersten YunoHost-Pakets"}),"\n",(0,r.jsxs)(n.p,{children:["Wenn du nicht wirklich bei Null anfangen willst oder von ",(0,r.jsx)(n.a,{href:"https://github.com/YunoHost/example_ynh",children:(0,r.jsx)(n.code,{children:"example_ynh"})}),", ist eine g\xe4ngige Praxis, eine Anwendung zu identifizieren, die derjenigen \xe4hnlich ist, die du zu paketieren versuchst - typischerweise, weil du dich auf die gleichen Technologien st\xfctzt -, das entsprechende Code-Repository zu klonen und die verschiedenen Dateien anzupassen."]}),"\n",(0,r.jsx)(n.p,{children:"TODO/FIXME : hier sollten wir eine Reihe von bekannten Anwendungen f\xfcr klassische Technologien auflisten"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"PHP-Anwendungen:"}),"\n",(0,r.jsx)(n.li,{children:"NodeJS-Apps:"}),"\n",(0,r.jsx)(n.li,{children:"Python-Apps:"}),"\n",(0,r.jsx)(n.li,{children:"???"}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},4429:function(e,n,i){i.d(n,{R:()=>d,x:()=>l});var s=i(6540);let r={},t=s.createContext(r);function d(e){let n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);