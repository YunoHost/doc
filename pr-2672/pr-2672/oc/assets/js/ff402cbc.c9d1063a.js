"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["772"],{4939:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>s,toc:()=>l,default:()=>p,metadata:()=>i,assets:()=>c,contentTitle:()=>r});var i=JSON.parse('{"id":"packaging/index","title":"Packaging applications","description":"YunoHost relies on applications, and so, on their packagers. This documentation","source":"@site/docs/packaging/index.mdx","sourceDirName":"packaging","slug":"/packaging/","permalink":"/pr-2672/oc/packaging/","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/docs/packaging/index.mdx","tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"title":"Packaging applications","sidebar_position":0},"sidebar":"devpackaging","previous":{"title":"How is used the main domain","permalink":"/pr-2672/oc/dev/core/maindomain"},"next":{"title":"Packaging applications","permalink":"/pr-2672/oc/packaging/"}}'),o=t(4848),a=t(4429);let s={title:"Packaging applications",sidebar_position:0},r,c={},l=[{value:"Packaging philosophy",id:"packaging-philosophy",level:2},{value:"2. Prerequisites",id:"2-prerequisites",level:2},{value:"3. Notes about the history of YunoHost&#39;s app packaging",id:"3-notes-about-the-history-of-yunohosts-app-packaging",level:2}];function h(e){let n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"YunoHost relies on applications, and so, on their packagers. This documentation\nis here to help you package and maintain apps."}),"\n",(0,o.jsx)(n.h2,{id:"packaging-philosophy",children:"Packaging philosophy"}),"\n",(0,o.jsx)(n.p,{children:"The simplicity of using apps is a key feature of YunoHost. As a packager, you should remember these principles:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"The admin should not have a PhD in computer science to be able to install, configure and use your application"}),": try to assume that the admin doesn't know about advanced computer concepts;"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Less is more"}),", ",(0,o.jsx)(n.strong,{children:"Keep it simple"}),": don't overcrowd the admin with a dozens technical questions;"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Things should work out of the box"}),": for example, the admin should not have to manually finish the installation process by manually filling in database credentials;"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["YunoHost app packaging is ",(0,o.jsx)(n.strong,{children:"not just about installing"})," sources and dependencies: it's also about maintenance (upgrade, backup...) and integrating the app in the YunoHost ecosystem (NGINX, SSO/LDAP, Fail2Ban, application catalog, UI/UX...)"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"2-prerequisites",children:"2. Prerequisites"}),"\n",(0,o.jsx)(n.p,{children:"Before diving in, this documentation assumes that:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"You already are a YunoHost admin yourself and already know what the install workflow looks like;)"}),"\n",(0,o.jsx)(n.li,{children:"You are somewhat familiar with (or are willing to learn) system administration and bash programming;"}),"\n",(0,o.jsx)(n.li,{children:"You are somewhat familiar with (or are willing to learn) Git;"}),"\n",(0,o.jsx)(n.li,{children:"You are comfortable with tinkering and debugging computer stuff in general."}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["You are also encouraged to join the ",(0,o.jsx)(n.a,{href:"/community/chat_rooms",children:"app packaging chatroom"})," to ask any question you may have!"]}),"\n",(0,o.jsxs)(n.p,{children:["At some point, you will also want to have a dev/test environment, either using ",(0,o.jsx)(n.a,{href:"/packaging/resources/packaging_apps_virtualbox",children:"VirtualBox"})," or ",(0,o.jsx)(n.a,{href:"https://github.com/yunohost/ynh-dev",children:"LXC/ynh-dev"})," which is meant for the core but can totally be used for developping apps. You can also setup a dev/test VPS on your favourite hosting provider, or even develop on your prod if you like to live dangerously;)."]}),"\n",(0,o.jsx)(n.h2,{id:"3-notes-about-the-history-of-yunohosts-app-packaging",children:"3. Notes about the history of YunoHost's app packaging"}),"\n",(0,o.jsx)(n.p,{children:"Many things in YunoHost, and YunoHost app packaging format, are historical or were designed in an organic fashion. Thus some aspects may legitimately feel old."}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.strong,{children:'"v0" of app packaging'})," consisted in writing raw bash scripts with no real standardization/constrain."]}),"\n",(0,o.jsxs)(n.p,{children:['Over time, recurrent steps (such as installing dependencies with apt, or setting up the NGINX config) where formalized into standardized bash functions, aka "helpers". This pretty much marked ',(0,o.jsx)(n.strong,{children:'the beginning of the "v1" packaging era'}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Various tools were implemented to test the app and standardize their behavior."}),"\n",(0,o.jsxs)(n.p,{children:["After a while, a set of common practices and conventions emerged and is somewhat reflected and maintain in the ",(0,o.jsx)(n.a,{href:"https://github.com/YunoHost/example_ynh",children:(0,o.jsx)(n.code,{children:"example_ynh"})})," template application. While it is tempting for dev-oriented folks to change variable naming schemes or refactorize the structure of scripts, it turns out that it is even more important to stick to the common set of practices (even though arbitrary and not elegant) to ease the maintenance of all apps by any member of the packaging community accross all repos!"]}),"\n",(0,o.jsxs)(n.p,{children:["Nevertheless, even though helpers existed, the inherent structure of apps was hard and boring to maintain with too many redundant pieces of code or filled with funky historical conventions. ",(0,o.jsx)(n.strong,{children:"A new v2 format"})," ",(0,o.jsx)(n.a,{href:"https://github.com/YunoHost/yunohost/pull/1289",children:"has been designed and added to YunoHost 11.1 in early 2023"})," in the hope to modernize and simplify app packaging and improve the UI/UX of YunoHost."]}),"\n",(0,o.jsxs)(n.p,{children:["However, ",(0,o.jsxs)(n.a,{href:"https://github.com/YunoHost/issues/issues/2136",children:[(0,o.jsx)(n.strong,{children:"a future v3 format"})," has yet to come"]})," to further simplify app packaging (such as taking care of NGINX/systemd/... configurations, removing the need to manually write remove/backup/restore scripts, etc.)"]})]})}function p(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},4429:function(e,n,t){t.d(n,{R:()=>s,x:()=>r});var i=t(6540);let o={},a=i.createContext(o);function s(e){let n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);