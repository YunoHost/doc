"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["3088"],{7270:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>i,toc:()=>o,default:()=>p,metadata:()=>a,assets:()=>u,contentTitle:()=>l});var a=JSON.parse('{"id":"packaging/resources/packaging_apps_virtualbox","title":"Cr\xe9er un environnement de d\xe9veloppement avec VirtualBox","description":"Cette page de documentation va vous expliquer comment mettre en place un serveur YunoHost virtuel, avec VirtualBox, pour travailler sur le packaging d\'application.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/packaging/80.resources/packaging_apps_virtualbox.mdx","sourceDirName":"packaging/80.resources","slug":"/packaging/resources/packaging_apps_virtualbox","permalink":"/pr-2672/fr/packaging/resources/packaging_apps_virtualbox","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/i18n/fr/docusaurus-plugin-content-docs/current/packaging/80.resources/packaging_apps_virtualbox.mdx","tags":[],"version":"current","frontMatter":{"title":"Cr\xe9er un environnement de d\xe9veloppement avec VirtualBox"},"sidebar":"devpackaging","previous":{"title":"Utiliser Git pour packager les applications","permalink":"/pr-2672/fr/packaging/resources/packaging_apps_git"},"next":{"title":"Apps catalog policy","permalink":"/pr-2672/fr/packaging/policy"}}'),s=r(4848),t=r(4429);let i={title:"Cr\xe9er un environnement de d\xe9veloppement avec VirtualBox"},l,u={},o=[{value:"Pourquoi utiliser VirtualBox plut\xf4t qu\u2019un serveur YunoHost de production pour packager une application ?",id:"pourquoi-utiliser-virtualbox-plut\xf4t-quun-serveur-yunohost-de-production-pour-packager-une-application-",level:2},{value:"Installer VirtualBox",id:"installer-virtualbox",level:2},{value:"Installer YunoHost sur VirtualBox",id:"installer-yunohost-sur-virtualbox",level:2},{value:"Utiliser les instantan\xe9s",id:"utiliser-les-instantan\xe9s",level:2},{value:"Tout d&#39;abord, cr\xe9ons un premier instantan\xe9",id:"tout-dabord-cr\xe9ons-un-premier-instantan\xe9",level:3},{value:"Utiliser plusieurs branches d&#39;instantan\xe9s",id:"utiliser-plusieurs-branches-dinstantan\xe9s",level:3},{value:"Comment se connecter \xe0 la machine virtuelle ?",id:"comment-se-connecter-\xe0-la-machine-virtuelle-",level:2}];function c(e){let n={a:"a",blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Cette page de documentation va vous expliquer comment mettre en place un serveur YunoHost virtuel, avec VirtualBox, pour travailler sur le packaging d'application."}),"\n",(0,s.jsx)(n.h2,{id:"pourquoi-utiliser-virtualbox-plut\xf4t-quun-serveur-yunohost-de-production-pour-packager-une-application-",children:"Pourquoi utiliser VirtualBox plut\xf4t qu\u2019un serveur YunoHost de production pour packager une application ?"}),"\n",(0,s.jsx)(n.p,{children:"Il y a principalement deux raisons pour pr\xe9f\xe9rer l'usage d'un serveur virtuel plut\xf4t que votre propre serveur :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Vous pouvez torturer \xe0 loisir un serveur virtuel sans courir le risque de le casser, puisque vous pourrez toujours restaurer un \xe9tat pr\xe9c\xe9dent. Alors qu'il serait dommage de casser son propre serveur !"}),"\n",(0,s.jsx)(n.li,{children:"Un serveur virtuel sera restaur\xe9 avant de travailler dessus, pour garder en permanence un syst\xe8me sans r\xe9sidus d'une pr\xe9c\xe9dente installation. Cela permet de se rapprocher au plus pr\xe8s d'une premi\xe8re installation par un utilisateur."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Nous parlerons ici de VirtualBox, pour son approche graphique facile \xe0 utiliser. Si vous pr\xe9f\xe9rez une interface en ligne de commande pour la gestion de la machine virtuelle, tournez-vous de pr\xe9f\xe9rence vers ",(0,s.jsx)(n.a,{href:"/dev/core/",children:"ynh-dev"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"installer-virtualbox",children:"Installer VirtualBox"}),"\n",(0,s.jsxs)(n.p,{children:["Depuis un syst\xe8me GNU/Linux, installer simplement le paquet ",(0,s.jsx)(n.code,{children:"virtualbox-qt"}),".\nDepuis un syst\xe8me Windows ou macOS, il faudra se r\xe9f\xe9rer \xe0 la page de ",(0,s.jsx)(n.a,{href:"https://www.virtualbox.org/wiki/Downloads",children:"t\xe9l\xe9chargement de VirtualBox"})," pour r\xe9cup\xe9rer le fichier d'installation ad\xe9quat. Le paquet virtualbox est d\xe9pr\xe9ci\xe9 depuis Debian 9, un fichier d'installation ",(0,s.jsx)(n.code,{children:".deb"})," est disponible sur la m\xeame page."]}),"\n",(0,s.jsx)(n.p,{children:"Quel que soit votre syst\xe8me, il ne devrait pas \xeatre n\xe9cessaire d'installer l'extension pack ou les additions invit\xe9s."}),"\n",(0,s.jsx)(n.h2,{id:"installer-yunohost-sur-virtualbox",children:"Installer YunoHost sur VirtualBox"}),"\n",(0,s.jsxs)(n.p,{children:["Suivez simplement la documentation idoine pour l'",(0,s.jsx)(n.a,{href:"/packaging/resources/packaging_apps_virtualbox",children:"installation sur VirtualBox"})," puis la documentation sur la ",(0,s.jsx)(n.a,{href:"/category/after-installation",children:"post-installation"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Lors de la post-installation, il est inutile d'utiliser un nom de domaine en ",(0,s.jsx)(n.code,{children:".nohost.me"})," ou ",(0,s.jsx)(n.code,{children:".noho.st"}),", votre serveur virtuel ne sera pas accessible depuis l'ext\xe9rieur de votre r\xe9seau local.",(0,s.jsx)(n.br,{}),"\n","Nous pr\xe9f\xe9rerons l'usage d'un faux nom de domaine qui restera cantonn\xe9 au r\xe9seau local. Par exemple, ",(0,s.jsx)(n.code,{children:"yunohost.packaging"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Ce nom de domaine n'\xe9tant enregistr\xe9 dans aucun serveur DNS, on l'enregistrera dans le fichier ",(0,s.jsx)(n.code,{children:"hosts"})," de l'ordinateur qui y acc\xe9dera. Voir la documentation sur le ",(0,s.jsx)(n.a,{href:"/admin/tutorials/domains/dns_local_network",children:"DNS local"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Votre serveur virtuel est \xe0 pr\xe9sent install\xe9. Avant de commencer \xe0 l'utiliser, nous allons voir comment cr\xe9er un premier instantan\xe9 et comment les utiliser."}),"\n",(0,s.jsx)(n.h2,{id:"utiliser-les-instantan\xe9s",children:"Utiliser les instantan\xe9s"}),"\n",(0,s.jsxs)(n.p,{children:["VirtualBox prend tout son int\xe9r\xeat avec l'usage des instantan\xe9s, qui permettent d'enregistrer l'\xe9tat de la machine \xe0 un moment donn\xe9 et d'y revenir rapidement.",(0,s.jsx)(n.br,{}),"\n","Nous verrons \xe9galement par la suite comment utiliser plusieurs branches d'instantan\xe9s pour travailler sur des apps diff\xe9rentes sur une m\xeame machine."]}),"\n",(0,s.jsx)(n.h3,{id:"tout-dabord-cr\xe9ons-un-premier-instantan\xe9",children:"Tout d'abord, cr\xe9ons un premier instantan\xe9"}),"\n",(0,s.jsxs)(n.p,{children:["Avant de commencer \xe0 jouer avec la machine virtuelle, il convient de faire un premier instantan\xe9, pour ne pas avoir \xe0 recommencer le processus d'installation \xe0 chaque fois.",(0,s.jsx)(n.br,{}),"\n","Arr\xeatez la machine virtuelle avant tout."]}),"\n",(0,s.jsxs)(n.p,{children:['La gestion des instantan\xe9s se fait dans l\'onglet "Instantan\xe9s"',(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.img,{src:r(7451).A+"",width:"901",height:"639"})]}),"\n",(0,s.jsxs)(n.p,{children:["Et on cr\xe9e un premier instantan\xe9",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.img,{src:r(6786).A+"",width:"318",height:"331"})]}),"\n",(0,s.jsx)(n.p,{children:"\xc0 pr\xe9sent on peut commencer \xe0 travailler sur la machine virtuelle et cr\xe9er autant d'instantan\xe9s que souhait\xe9 pour jalonner le travail."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:r(9457).A+"",width:"902",height:"640"})}),"\n",(0,s.jsxs)(n.p,{children:["Dans cet exemple, on pourra facilement revenir en arri\xe8re, apr\xe8s avoir test\xe9 la suppression du package par exemple et restaurer la machine virtuelle dans l'\xe9tat pr\xe9c\xe9dent avec le package encore install\xe9 avec succ\xe8s.",(0,s.jsx)(n.br,{}),"\n","Et lorsque le package sera pleinement fonctionnel, il suffira de supprimer les instantan\xe9s li\xe9s \xe0 ce package pour revenir \xe0 l'\xe9tat initial de la machine virtuelle.",(0,s.jsx)(n.br,{}),"\n","Nous disposerons ainsi d'un serveur YunoHost vierge de toute installation d'application pour notre prochain test."]}),"\n",(0,s.jsx)(n.h3,{id:"utiliser-plusieurs-branches-dinstantan\xe9s",children:"Utiliser plusieurs branches d'instantan\xe9s"}),"\n",(0,s.jsx)(n.p,{children:"En plus de l'usage d'instantan\xe9s successifs, il est \xe9galement possible de d\xe9river un nouvel \xe9tat actuel et de nouveaux instantan\xe9s depuis un instantan\xe9 plus ancien que le dernier."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:r(5840).A+"",width:"902",height:"640"})}),"\n",(0,s.jsxs)(n.p,{children:["Dans cet exemple, j'ai d\xe9riv\xe9 deux branches depuis mon installation r\xe9ussie du package, pour tester ind\xe9pendamment la suppression simple de l'application, l'upgrade et le backup/restore.",(0,s.jsx)(n.br,{}),"\n","Finalement je suis reparti de la base de la machine virtuelle pour d\xe9marrer un nouveau test sur un autre package, sans pour autant abandonner le pr\xe9c\xe9dent test.",(0,s.jsx)(n.br,{}),"\n","\xc0 tout moment, il est possible de revenir sur un instantan\xe9 pr\xe9c\xe9dent en le restaurant.",(0,s.jsx)(n.br,{}),"\n",'La machine d\xe9marrera toujours sur l\'"\xc9tat actuel".']}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:r(7847).A+"",width:"902",height:"640"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Il est toujours possible de cr\xe9er un nouvel instantan\xe9, que la machine soit \xe0 l'arr\xeat ou non.",(0,s.jsx)(n.br,{}),"\n","Mais pour restaurer un instantan\xe9, la machine ne doit pas \xeatre en cours d'ex\xe9cution."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"comment-se-connecter-\xe0-la-machine-virtuelle-",children:"Comment se connecter \xe0 la machine virtuelle ?"}),"\n",(0,s.jsx)(n.p,{children:"On se connecte \xe0 la machine virtuelle comme \xe0 n'importe quel serveur YunoHost, en utilisant SSH."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ssh admin@mon.domain\n"})}),"\n",(0,s.jsx)(n.p,{children:"Ou, si le domaine n'a pas \xe9t\xe9 ajout\xe9 dans le hosts, en utilisant son IP."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ssh admin@11.22.33.44\n"})}),"\n",(0,s.jsx)(n.p,{children:"\xc0 pr\xe9sent, on peut travailler sur la machine virtuelle en CLI."}),"\n",(0,s.jsx)(n.p,{children:"Pour copier facilement les fichiers du package ou utiliser un \xe9diteur de texte graphique, on peut \xe9galement se connecter en SFTP avec un explorateur de fichier."}),"\n",(0,s.jsxs)(n.p,{children:["Il suffit de se connecter \xe0 l'adresse ",(0,s.jsx)(n.code,{children:"sftp://admin@mon.domain/"})," avec l'explorateur.",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.img,{src:r(8131).A+"",width:"1027",height:"730"})]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Sur Windows ou macOS, l'explorateur de fichier ne supporte pas nativement le protocole SFTP..."}),"\n"]})]})}function p(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},7451:function(e,n,r){r.d(n,{A:()=>a});let a=r.p+"assets/images/virtualbox_packaging1-fr-68e67ec37f74bccdb6135b4796d56716.jpg"},6786:function(e,n,r){r.d(n,{A:()=>a});let a=r.p+"assets/images/virtualbox_packaging2-fr-1c7614c001a2a01abd6d67094c0dcdf3.jpg"},9457:function(e,n,r){r.d(n,{A:()=>a});let a=r.p+"assets/images/virtualbox_packaging3-fr-7a783d3ba54b21c9c06b16fa688e9b48.jpg"},5840:function(e,n,r){r.d(n,{A:()=>a});let a=r.p+"assets/images/virtualbox_packaging4-fr-c7380a85a5a3818a91cc9eb69cba8ef7.jpg"},7847:function(e,n,r){r.d(n,{A:()=>a});let a=r.p+"assets/images/virtualbox_packaging5-fr-66d50de1fc607672fb4c17d7ab8a0f3e.jpg"},8131:function(e,n,r){r.d(n,{A:()=>a});let a=r.p+"assets/images/virtualbox_packaging6-7a37fd92233ce58045af55e68e50a87a.jpg"},4429:function(e,n,r){r.d(n,{R:()=>i,x:()=>l});var a=r(6540);let s={},t=a.createContext(s);function i(e){let n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);