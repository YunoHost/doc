"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["9122"],{7465:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>l,toc:()=>c,default:()=>u,metadata:()=>s,assets:()=>o,contentTitle:()=>d});var s=JSON.parse('{"id":"admin/get_started/post_install/dns_config","title":"Configuration de la zone DNS","description":"DNS (syst\xe8me de nom de domaine) est un \xe9l\xe9ment essentiel d\'Internet qui permet","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/admin/05.get_started/40.post_install/20.dns_config.mdx","sourceDirName":"admin/05.get_started/40.post_install","slug":"/admin/get_started/post_install/dns_config","permalink":"/pr-2672/fr/admin/get_started/post_install/dns_config","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/i18n/fr/docusaurus-plugin-content-docs/current/admin/05.get_started/40.post_install/20.dns_config.mdx","tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"title":"Configuration de la zone DNS"},"sidebar":"admin","previous":{"title":"Configurer la redirection des ports","permalink":"/pr-2672/fr/admin/get_started/post_install/port_forwarding"},"next":{"title":"Conseils et lignes directrices","permalink":"/pr-2672/fr/admin/get_started/guidelines"}}'),r=t(4848),i=t(4429);let l={title:"Configuration de la zone DNS"},d,o={},c=[{value:"Configuration DNS recommand\xe9e",id:"configuration-dns-recommand\xe9e",level:2},{value:"Quelques notes \xe0 propos de cette table",id:"quelques-notes-\xe0-propos-de-cette-table",level:3},{value:"R\xe9solution DNS inverse",id:"r\xe9solution-dns-inverse",level:3},{value:"IP Dynamique",id:"ip-dynamique",level:3}];function a(e){let n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"DNS (syst\xe8me de nom de domaine) est un \xe9l\xe9ment essentiel d'Internet qui permet\nde convertir des adresses compr\xe9hensibles par les \xeatres humains (les noms de\ndomaines) en adresses compr\xe9hensibles par la machine (les adresses IP). Pour que\nvotre serveur soit facilement accessible par d'autres \xeatres humains, et pour\nque certains services comme le mail fonctionnent correctement, il est n\xe9cessaire\nde configurer la zone DNS de votre domaine."}),"\n",(0,r.jsxs)(n.p,{children:["Si vous utilisez un ",(0,r.jsx)(n.a,{href:"/admin/tutorials/domains/dns_nohost_me",children:"domaine automatique"})," fourni par le Projet YunoHost,\nla configuration devrait \xeatre faite automatiquement. Si vous utilisez votre propre nom de domaine\n(e.g. achet\xe9 chez un registrar), il vous faut configurer manuellement votre\ndomaine via l'interface de votre registrar."]}),"\n",(0,r.jsx)(n.h2,{id:"configuration-dns-recommand\xe9e",children:"Configuration DNS recommand\xe9e"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.em,{children:["NB : les exemples utilisent ici le texte ",(0,r.jsx)(n.code,{children:"votre.domaine.tld"}),", \xe0 remplacer par votre propre domaine (par exemple ",(0,r.jsx)(n.code,{children:"www.yunohost.org"}),")."]})}),"\n",(0,r.jsx)(n.p,{children:"YunoHost fournit une configuration DNS recommand\xe9e, accessible via :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"la webadmin, dans Domaines > votre.domain.tld > Configuration DNS ;"}),"\n",(0,r.jsxs)(n.li,{children:["ou la ligne de commande, ",(0,r.jsx)(n.code,{children:"yunohost domain dns suggest votre.domaine.tld"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Pour certains besoins ou installations particuli\xe8res, et si vous savez ce que\nvous faites, il vous faudra peut-\xeatre modifier cette recommandation ou ajouter\nd'autres enregistrements (e.g. pour g\xe9rer des sous-domaines)."}),"\n",(0,r.jsx)(n.p,{children:"La configuration recommand\xe9e ressemble typiquement \xe0 :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'#\n# Enregistrements IPv4/IPv6 basiques\n#\n@ 3600 IN A 111.222.33.44\n* 3600 IN A 111.222.33.44\n\n# (Si votre serveur supporte l\'IPv6, il a des enregistrements AAAA)\n@ 3600 IN AAAA 2222:444:8888:3333:bbbb:5555:3333:1111\n* 3600 IN AAAA 2222:444:8888:3333:bbbb:5555:3333:1111\n\n#\n# XMPP\n#\n_xmpp-client._tcp 3600 IN SRV 0 5 5222 votre.domaine.tld.\n_xmpp-server._tcp 3600 IN SRV 0 5 5269 votre.domaine.tld.\nmuc 3600 IN CNAME @\npubsub 3600 IN CNAME @\nvjud 3600 IN CNAME @\nxmpp-upload 3600 IN CNAME @\n\n#\n# Mail (MX, SPF, DKIM et DMARC)\n#\n@ 3600 IN MX 10 votre.domaine.tld.\n@ 3600 IN TXT "v=spf1 a mx -all"\nmail._domainkey 3600 IN TXT "v=DKIM1; k=rsa; p=uneGrannnnndeClef"\n_dmarc 3600 IN TXT "v=DMARC1; p=none"\n'})}),"\n",(0,r.jsx)(n.p,{children:"Mais il est peut-\xeatre plus facile de la comprendre affich\xe9e de la fa\xe7on\nsuivante :"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Type"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Nom"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Valeur"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.strong,{children:"A"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.strong,{children:"@"})}),(0,r.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,r.jsx)(n.code,{children:"111.222.333.444"})," (votre IPv4)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"A"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"*"}),(0,r.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,r.jsx)(n.code,{children:"111.222.333.444"})," (votre IPv4)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"AAAA"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"@"}),(0,r.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,r.jsx)(n.code,{children:"2222:444:8888:3333:bbbb:5555:3333:1111"})," (votre IPv6)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"AAAA"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"*"}),(0,r.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,r.jsx)(n.code,{children:"2222:444:8888:3333:bbbb:5555:3333:1111"})," (votre IPv6)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.strong,{children:"SRV"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.strong,{children:"_xmpp-client._tcp"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"0 5 5222 votre.domaine.tld."})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.strong,{children:"SRV"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.strong,{children:"_xmpp-server._tcp"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"0 5 5269 votre.domaine.tld."})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"CNAME"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"muc"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"@"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"CNAME"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"pubsub"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"@"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"CNAME"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"vjud"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"@"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"CNAME"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"xmpp-upload"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"@"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.strong,{children:"MX"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.strong,{children:"@"})}),(0,r.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,r.jsx)(n.code,{children:"votre.domaine.tld."}),"     (et priorit\xe9: 10)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"TXT"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"@"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:'"v=spf1 a mx -all"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"TXT"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"mail._domainkey"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:'"v=DKIM1; k=rsa; p=uneGrannnndeClef"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"TXT"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"_dmarc"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:'"v=DMARC1; p=none"'})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"quelques-notes-\xe0-propos-de-cette-table",children:"Quelques notes \xe0 propos de cette table"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tous ces enregistrements ne sont pas n\xe9cessaires. Pour une installation minimale, seuls les enregistrements en gras sont n\xe9cessaires ;"}),"\n",(0,r.jsxs)(n.li,{children:["Le point \xe0 la fin de ",(0,r.jsx)(n.code,{children:"votre.domaine.tld."})," est important ;) ;"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@"})," correspond \xe0 ",(0,r.jsx)(n.code,{children:"votre.domaine.tld"}),", et par ex. ",(0,r.jsx)(n.code,{children:"muc"})," correspond \xe0 ",(0,r.jsx)(n.code,{children:"muc.votre.domaine.tld"})," ;"]}),"\n",(0,r.jsx)(n.li,{children:"Les valeurs montr\xe9es ici sont des valeurs d'exemple ! R\xe9f\xe9rez-vous \xe0 la configuration g\xe9n\xe9r\xe9e chez vous pour savoir quelles valeurs utiliser ;"}),"\n",(0,r.jsxs)(n.li,{children:["Nous recommandons un ",(0,r.jsx)(n.a,{href:"https://fr.wikipedia.org/wiki/Time_to_Live#Le_Time_to_Live_dans_le_DNS",children:"TTL"})," de 3600 (1 heure). Mais vous pouvez utiliser une autre valeur si vous savez ce que vous fa\xeetes ;"]}),"\n",(0,r.jsx)(n.li,{children:"Ne mettez pas d'enregistrement IPv6 si vous n'\xeates pas certain que l'IPv6 fonctionne sur votre serveur ! Vous aurez des probl\xe8mes avec Let's Encrypt si ce n'est pas le cas."}),"\n",(0,r.jsxs)(n.li,{children:["Si vous utilisez le registrar Namecheap, les entr\xe9es SRV sont formatt\xe9es comme ",(0,r.jsx)(n.strong,{children:"Service"}),": ",(0,r.jsx)(n.code,{children:"_xmpp-client"})," ",(0,r.jsx)(n.strong,{children:"Protocol"}),": ",(0,r.jsx)(n.code,{children:"_tcp"})," ",(0,r.jsx)(n.strong,{children:"Priority"}),": ",(0,r.jsx)(n.code,{children:"0"})," ",(0,r.jsx)(n.strong,{children:"Weight"}),": ",(0,r.jsx)(n.code,{children:"5"})," ",(0,r.jsx)(n.strong,{children:"Port"}),": ",(0,r.jsx)(n.code,{children:"5222"})," ",(0,r.jsx)(n.strong,{children:"Target"}),": ",(0,r.jsx)(n.code,{children:"votre.domaine.tld"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"r\xe9solution-dns-inverse",children:"R\xe9solution DNS inverse"}),"\n",(0,r.jsxs)(n.p,{children:["Si votre op\xe9rateur ou votre h\xe9bergeur le permet, nous vous encourageons \xe0\nconfigurer une ",(0,r.jsx)(n.a,{href:"https://fr.wikipedia.org/wiki/Domain_Name_System#R%C3%A9solution_inverse",children:"r\xe9solution DNS\ninverse"}),"\npour vos adresses publiques IPv4 et/ou IPv6. Ceci vous \xe9vitera d'\xeatre marqu\xe9\ncomme spammeur par les syst\xe8mes de filtrage anti-spams."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["N.B. : la configuration du DNS inverse se passe au niveau de votre fournisseur d'acc\xe8s \xe0 Internet, ou de votre h\xe9bergeur de VPS. Elle ne se fait ",(0,r.jsx)(n.em,{children:"pas"})," sur le registrar de votre nom de domaine."]})}),"\n",(0,r.jsxs)(n.p,{children:["Cela signifie que si votre adresse IPv4 publique est ",(0,r.jsx)(n.code,{children:"111.222.333.444"})," et que\nvotre nom de domaine est ",(0,r.jsx)(n.code,{children:"domain.tld"}),", vous devez obtenir le r\xe9sultat suivant\nen utilisant la commande ",(0,r.jsx)(n.code,{children:"nslookup"})," :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"nslookup 111.222.333.444\n444.333.222.111.in-addr.arpa    name = domain.tld.\n"})}),"\n",(0,r.jsx)(n.p,{children:"Le syst\xe8me de diagnostic pr\xe9sent dans l'interface d'administration fait cette v\xe9rification automatiquement (dans la section Email)"}),"\n",(0,r.jsx)(n.h3,{id:"ip-dynamique",children:"IP Dynamique"}),"\n",(0,r.jsxs)(n.p,{children:["Si votre adresse IP publique change constamment, suivez ce ",(0,r.jsx)(n.a,{href:"/admin/tutorials/domains/dns_dynamicip",children:"tutoriel"}),"."]})]})}function u(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},4429:function(e,n,t){t.d(n,{R:()=>l,x:()=>d});var s=t(6540);let r={},i=s.createContext(r);function l(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);