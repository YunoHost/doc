"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["9299"],{4643:function(e,i,t){t.r(i),t.d(i,{frontMatter:()=>r,toc:()=>l,default:()=>u,metadata:()=>n,assets:()=>o,contentTitle:()=>c});var n=JSON.parse('{"id":"admin/tutorials/certificate_custom","title":"Certificati personalizzati","description":"Dalla versione 2.5 YunoHost integra la gestione automatizzata dei certificati Let\'s Encrypt. Potete quindi facilmente e gratuitamente  installare un certificato Let\'s Encrypt. Questa guida descrive la procedura per installare un certificato, a pagamento, di una diversa autorit\xe0 di certificazione (Gandi, RapidSSL, StartSSL, Cacert).","source":"@site/i18n/it/docusaurus-plugin-content-docs/current/admin/45.tutorials/45.certificate_custom.mdx","sourceDirName":"admin/45.tutorials","slug":"/admin/tutorials/certificate_custom","permalink":"/pr-2672/it/admin/tutorials/certificate_custom","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/i18n/it/docusaurus-plugin-content-docs/current/admin/45.tutorials/45.certificate_custom.mdx","tags":[],"version":"current","sidebarPosition":45,"frontMatter":{"title":"Certificati personalizzati"},"sidebar":"admin","previous":{"title":"Configure Tor Hidden Service","permalink":"/pr-2672/it/admin/tutorials/torhiddenservice"},"next":{"title":"Move apps storage","permalink":"/pr-2672/it/admin/tutorials/moving_app_folder"}}'),a=t(4848),s=t(4429);let r={title:"Certificati personalizzati"},c,o={},l=[{value:"Installazione di un certificato firmato da un&#39;autorit\xe0 diversa da Let&#39;s Encrypt",id:"installazione-di-un-certificato-firmato-da-unautorit\xe0-diversa-da-lets-encrypt",level:3},{value:"StartSSL",id:"startssl",level:4},{value:"Gandi",id:"gandi",level:4},{value:"RapidSSL",id:"rapidssl",level:4},{value:"Cacert",id:"cacert",level:4}];function d(e){let i={a:"a",admonition:"admonition",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.admonition,{type:"warning",children:(0,a.jsxs)(i.p,{children:["Dalla versione 2.5 YunoHost integra la gestione automatizzata dei certificati Let's Encrypt. Potete quindi facilmente e gratuitamente  ",(0,a.jsx)(i.a,{href:"/admin/domains/certificate",children:"installare un certificato Let's Encrypt"}),". Questa guida descrive la procedura per installare un certificato, a pagamento, di una diversa autorit\xe0 di certificazione (",(0,a.jsx)(i.strong,{children:"Gandi"}),", ",(0,a.jsx)(i.strong,{children:"RapidSSL"}),", ",(0,a.jsx)(i.strong,{children:"StartSSL"}),", ",(0,a.jsx)(i.strong,{children:"Cacert"}),")."]})}),"\n",(0,a.jsx)(i.p,{children:"Nel corso delle versioni, sono state introdotte delle modifiche che possono impattare sulle procedure descritte di seguito:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsx)(i.li,{children:"Il gruppo metronome non \xe8 pi\xf9 utilizzato direttamente ma viene usato ssl-cert."}),"\n",(0,a.jsxs)(i.li,{children:["La directory ",(0,a.jsx)(i.code,{children:"/etc/yunohost/certs/DOMAIN.LTD-history/stamp"})," viene utilizzata per salvare le configurazioni create e viene creato un link simbolico."]}),"\n"]}),"\n",(0,a.jsx)(i.h3,{id:"installazione-di-un-certificato-firmato-da-unautorit\xe0-diversa-da-lets-encrypt",children:"Installazione di un certificato firmato da un'autorit\xe0 diversa da Let's Encrypt"}),"\n",(0,a.jsx)(i.p,{children:"Dopo aver creato il certificato presso l'autorit\xe0 di certificazione scelta, sarete in possesso di una chiave privata, il file key e di un certificato pubblico, il file crt."}),"\n",(0,a.jsx)(i.admonition,{type:"warning",children:(0,a.jsx)(i.p,{children:"Il file key contiene dati sensibili, \xe8 strettamente personale e deve essere conservato in un luogo sicuro."})}),"\n",(0,a.jsx)(i.p,{children:"Questi due file devono essere copiati sul server."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"scp CERTIFICAT.crt admin@DOMAIN.TLD:ssl.crt\nscp CLE.key admin@DOMAIN.TLD:ssl.key\n"})}),"\n",(0,a.jsxs)(i.p,{children:["Nelle versioni precedenti Windows 10, per utilizzare scp dovrete installare Putty e il plugin ",(0,a.jsx)(i.a,{href:"http://the.earth.li/~sgtatham/putty/latest/x86/pscp.exe",children:"pscp"}),"."]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"pscp -P 22 CERTIFICATE.crt admin@DOMAIN.TLD:ssl.crt\npscp -P 22 KEY.key admin@DOMAIN.TLD:ssl.key\n"})}),"\n",(0,a.jsxs)(i.p,{children:["Una volta copiati i file, i passi successivi si faranno sul server via ",(0,a.jsx)(i.a,{href:"/admin/command_line",children:"ssh"})," o in locale.\nPer prima cosa create una directory per salvare i certificati in vostro possesso."]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"sudo mkdir /etc/yunohost/certs/DOMAIN.TLD/ae_certs\nsudo mv ssl.key ssl.crt /etc/yunohost/certs/DOMAIN.TLD/ae_certs/\n"})}),"\n",(0,a.jsx)(i.p,{children:"Spostatevi nella directory superiore"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"cd /etc/yunohost/certs/DOMAIN.TLD/\n"})}),"\n",(0,a.jsx)(i.p,{children:"Eseguite un backup dei certificati auto firmati di YunoHost."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"sudo mkdir yunohost_self_signed\nsudo mv *.pem *.cnf yunohost_self_signed/\n"})}),"\n",(0,a.jsx)(i.p,{children:"Per alcune autorit\xe0 di certificazione, \xe8 necessario ottenere di altri certificati (intermediate e root)."}),"\n",(0,a.jsx)(i.h4,{id:"startssl",children:"StartSSL"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"sudo wget http://www.startssl.com/certs/ca.pem -O ae_certs/ca.pem\nsudo wget http://www.startssl.com/certs/sub.class1.server.ca.pem -O ae_certs/intermediate_ca.pem\n"})}),"\n",(0,a.jsx)(i.h4,{id:"gandi",children:"Gandi"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"sudo wget https://www.gandi.net/static/CAs/GandiStandardSSLCA2.pem -O ae_certs/intermediate_ca.pem\n"})}),"\n",(0,a.jsx)(i.h4,{id:"rapidssl",children:"RapidSSL"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"sudo wget https://knowledge.rapidssl.com/library/VERISIGN/INTERNATIONAL_AFFILIATES/RapidSSL/AR1548/RapidSSLCABundle.txt -O ae_certs/intermediate_ca.pem\n"})}),"\n",(0,a.jsx)(i.h4,{id:"cacert",children:"Cacert"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"sudo wget http://www.cacert.org/certs/root.crt -O ae_certs/ca.pem\nsudo wget http://www.cacert.org/certs/class3.crt -O ae_certs/intermediate_ca.pem\n"})}),"\n",(0,a.jsx)(i.p,{children:'I certificati intermedi e root devono essere collegati con il certificato "principale" a creare una unica catena di certificati.'}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"cat ae_certs/ssl.crt ae_certs/intermediate_ca.pem ae_certs/ca.pem | sudo tee crt.pem\n"})}),"\n",(0,a.jsxs)(i.p,{children:["La chiave privata deve esser convertita nel formato ",(0,a.jsx)(i.code,{children:".pem"}),"."]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"sudo openssl rsa -in ae_certs/ssl.key -out key.pem -outform PEM\n"})}),"\n",(0,a.jsx)(i.p,{children:"Controllate la sintassi dei certificati, verificando il contenuto dei file."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"cat crt.pem key.pem\n"})}),"\n",(0,a.jsx)(i.p,{children:"I certificati e la chiave privata, devono assomigliare a questo:"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-text",children:"-----BEGIN CERTIFICATE-----\nMIICVDCCAb0CAQEwDQYJKoZIhvcNAQEEBQAwdDELMAkGA1UEBhMCRlIxFTATBgNV\nBAgTDENvcnNlIGR1IFN1ZDEQMA4GA1UEBxMHQWphY2NpbzEMMAoGA1UEChMDTExC\nMREwDwYDVQQLEwhCVFMgSU5GTzEbMBkGA1UEAxMSc2VydmV1ci5idHNpbmZvLmZy\nMB4XDTA0MDIwODE2MjQyNloXDTA0MDMwOTE2MjQyNlowcTELMAkGA1UEBhMCRlIx\nFTATBgNVBAgTDENvcnNlIGR1IFN1ZDEQMA4GA1UEBxMHQWphY2NpbzEMMAoGA1UE\nChMDTExCMREwDwYDVQQLEwhCVFMgSU5GTzEYMBYGA1UEAxMPcHJvZi5idHNpbmZv\nLmZyMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDSUagxPSv3LtgDV5sygt12\nkSbN/NWP0QUiPlksOkF2NkPfwW/mf55dD1hSndlOM/5kLbSBo5ieE3TgikF0Iktj\nBWm5xSqewM5QDYzXFt031DrPX63Fvo+tCKTQoVItdEuJPMahVsXnDyYHeUURRWLW\nwc0BzEgFZGGw7wiMF6wt5QIDAQABMA0GCSqGSIb3DQEBBAUAA4GBALD640iwKPMf\npqdYtfvmLnA7CiEuao60i/pzVJE2LIXXXbwYjNAM+7Lov+dFT+b5FcOUGqLymSG3\nkSK6OOauBHItgiGI7C87u4EJaHDvGIUxHxQQGsUM0SCIIVGK7Lwm+8e9I2X0G2GP\n9t/rrbdGzXXOCl3up99naL5XAzCIp6r5\n-----END CERTIFICATE-----\n"})}),"\n",(0,a.jsx)(i.p,{children:"Infine mettete al sicuro i file del vostro certificato."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"sudo chown root:metronome crt.pem key.pem\nsudo chmod 640 crt.pem key.pem\nsudo chown root:root -R ae_certs\nsudo chmod 600 -R ae_certs\n"})}),"\n",(0,a.jsxs)(i.p,{children:["Adesso i certificati (i due files con estensione ",(0,a.jsx)(i.code,{children:".pem"}),") devono essere copiati in ",(0,a.jsx)(i.code,{children:"/etc/yunohost/certs/DOMAIN.TLD"}),"."]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"cp ae_certs/*.pem ./\n"})}),"\n",(0,a.jsx)(i.p,{children:"Ricaricate la configurazione di NGINX per rendere effettive le modifiche effettuate."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-bash",children:"sudo service nginx reload\n"})}),"\n",(0,a.jsxs)(i.p,{children:["Il certificato \xe8 pronto. Potete controllare la corretta configurazione e installazione utilizzando il servizio di ",(0,a.jsx)(i.a,{href:"https://www.geocerts.com/ssl_checker",children:"geocerts"}),"."]})]})}function u(e={}){let{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},4429:function(e,i,t){t.d(i,{R:()=>r,x:()=>c});var n=t(6540);let a={},s=n.createContext(a);function r(e){let i=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(s.Provider,{value:i},e.children)}}}]);