"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["8516"],{3407:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>u,toc:()=>l,default:()=>c,metadata:()=>r,assets:()=>d,contentTitle:()=>a});var r=JSON.parse('{"id":"admin/backups/avoid_hardware_failure","title":"\xc9viter les pannes mat\xe9rielles","description":"S\xe9curiser physiquement votre serveur","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/admin/40.backups/20.avoid_hardware_failure.mdx","sourceDirName":"admin/40.backups","slug":"/admin/backups/avoid_hardware_failure","permalink":"/doc/pr-2672/fr/admin/backups/avoid_hardware_failure","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/i18n/fr/docusaurus-plugin-content-docs/current/admin/40.backups/20.avoid_hardware_failure.mdx","tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"title":"\xc9viter les pannes mat\xe9rielles"},"sidebar":"admin","previous":{"title":"Cr\xe9er une image compl\xe8te du syst\xe8me de fichier","permalink":"/doc/pr-2672/fr/admin/backups/clone_filesystem"},"next":{"title":"Inclure/exclure des fichiers","permalink":"/doc/pr-2672/fr/admin/backups/include_exclude_files"}}'),i=n(4848),t=n(4429);let u={title:"\xc9viter les pannes mat\xe9rielles"},a,d={},l=[{value:"S\xe9curiser physiquement votre serveur",id:"s\xe9curiser-physiquement-votre-serveur",level:2},{value:"Fixer vos disques durs",id:"fixer-vos-disques-durs",level:2},{value:"R\xe9duire la swapiness pour les cartes SD et disques SSD",id:"r\xe9duire-la-swapiness-pour-les-cartes-sd-et-disques-ssd",level:2},{value:"Redondance de stockage",id:"redondance-de-stockage",level:2}];function o(e){let s={admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:"s\xe9curiser-physiquement-votre-serveur",children:"S\xe9curiser physiquement votre serveur"}),"\n",(0,i.jsx)(s.p,{children:"Tr\xe8s souvent les personnes qui s'autoh\xe9bergent n'ont pas de rangement correct pour leur syst\xe8me. Laisser le serveur en plusieurs parties, dans un lieu de passage, accessible \xe0 des enfants ou des animaux, ou dans un endroit peu a\xe9r\xe9 peut vite tourner \xe0 la catastrophe."}),"\n",(0,i.jsx)(s.h2,{id:"fixer-vos-disques-durs",children:"Fixer vos disques durs"}),"\n",(0,i.jsx)(s.p,{children:"Id\xe9alement, vos disques durs doivent \xeatre fix\xe9s pour \xe9viter les vibrations qui peuvent acc\xe9l\xe9rer l'usure du mat\xe9riel voire att\xe9nuer ses performances, notamment s'il y a un autre disque \xe0 c\xf4t\xe9."}),"\n",(0,i.jsx)(s.h2,{id:"r\xe9duire-la-swapiness-pour-les-cartes-sd-et-disques-ssd",children:"R\xe9duire la swapiness pour les cartes SD et disques SSD"}),"\n",(0,i.jsx)(s.p,{children:"Si vous utilisez un fichier de swap avec un SSD ou une carte SD avec une swapiness trop \xe9lev\xe9e, votre support de stockage pourrait rendre l'\xe2me pr\xe9matur\xe9ment en raison d'un trop grand nombre d'\xe9critures."}),"\n",(0,i.jsx)(s.p,{children:"Pour \xe9viter \xe7a:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"cat /proc/sys/vm/swappiness\n"})}),"\n",(0,i.jsx)(s.p,{children:"Si elle est au-dessus de 10:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sysctl vm.swappiness=10\nnano /etc/sysctl.conf\n"})}),"\n",(0,i.jsx)(s.p,{children:"Si la ligne est pr\xe9sente, changez la valeur vm.swappiness \xe0 10.Sinon, ajoutez la ligne:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-text",children:"vm.swappiness = 10\n"})}),"\n",(0,i.jsx)(s.h2,{id:"redondance-de-stockage",children:"Redondance de stockage"}),"\n",(0,i.jsx)(s.p,{children:"Afin de limiter les pannes mat\xe9rielles des supports de stockage, il peut \xeatre pertinent de mettre en place une grappe de disques en miroir (RAID, ZFS). L'id\xe9e ici est que tout ce qui est \xe9crit sur un disque le sera sur l'autre. Ainsi, si l'un tombe en panne, l'autre continue de fonctionner et le serveur est toujours pleinement fonctionnel."}),"\n",(0,i.jsx)(s.p,{children:"Il existe aussi des grappes plus \xe9volu\xe9es qui maximisent la tol\xe9rance de panne (panne de 2 disques comme le RAID6) ou le stockage (voir RAID 5)."}),"\n",(0,i.jsx)(s.p,{children:"Toutefois, ces techniques de grappes de disques ne devraient pas \xeatre consid\xe9r\xe9es comme des copies de sauvegarde. Une grappe RAID devrait \xeatre consid\xe9r\xe9e comme un seul support de stockage. En effet, si cette technique permet d'\xe9viter de devoir r\xe9installer en cas de crash probable d'un disque, on est loin du risque z\xe9ro."}),"\n",(0,i.jsx)(s.p,{children:"Quelques exemples de situations connues des administrateurs syst\xe8mes professionnels:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"les disques d'une grappe mont\xe9e avec des disques de la m\xeame marque peuvent tomber en panne quasiment en m\xeame temps en moins de quelques heures"}),"\n",(0,i.jsx)(s.li,{children:"sans monitoring de la sant\xe9 des disques, il y a de fortes chances que l'on ne remarque la panne d'un disque de la grappe que lorsqu'un deuxi\xe8me tombe en panne (><)"}),"\n",(0,i.jsx)(s.li,{children:"si on n'a pas de disque de rechange, le d\xe9lai d'achat peut aboutir \xe0 un crash de l'autre disque"}),"\n",(0,i.jsx)(s.li,{children:"un disque \xe0 moiti\xe9 fonctionnel qui produit des erreurs peut propager son erreur \xe0 travers la grappe"}),"\n",(0,i.jsx)(s.li,{children:"les connectiques des disques ou le contr\xf4leur RAID peuvent produire des erreurs aussi ou tomber en panne"}),"\n",(0,i.jsx)(s.li,{children:"plus on complexifie l'architecture avec de nombreux composants, plus il y a de chances que l'un d'eux tombe en panne"}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsx)(s.p,{children:"Si vous souhaitez mettre en place une grappe RAID ou utiliser btrfs, le plus simple est de le faire \xe0 l'installation avec l'iso YunoHost en mode expert (lors du partitionnement du syst\xe8me)."})})]})}function c(e={}){let{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},4429:function(e,s,n){n.d(s,{R:()=>u,x:()=>a});var r=n(6540);let i={},t=r.createContext(i);function u(e){let s=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:u(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);