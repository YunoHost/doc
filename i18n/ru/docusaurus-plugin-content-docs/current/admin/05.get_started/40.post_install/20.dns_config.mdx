---
title: 'Конфигурация зоны DNS'
---

DNS (система доменных имен) - это система, которая преобразует удобочитаемые адреса
(доменные имена) в адреса, понятные машине (IP). Чтобы ваш сервер был
легко доступен людям, а некоторые службы, такие как почта, работали
должным образом, необходимо настроить DNS.

Если вы используете [автоматический домен](/admin/tutorials/domains/dns_nohost_me), предоставляемый проектом YunoHost, настройка должна
выполняться автоматически. Если вы используете свое собственное доменное имя (например, купленное через
регистратора), вам следует вручную настроить свой домен в
интерфейсе вашего регистратора.

## Рекомендуемая конфигурация DNS

ПРИМЕЧАНИЕ: В примерах здесь используется заполнитель `your.domain.tld`, вы должны заменить его своим реальным доменом, например `www.yunohost.org`.

YunoHost предоставляет рекомендуемую конфигурацию DNS, доступную через:

- the webadmin, in Domain > your.domain.tld > DNS configuration;
- or the command line, `yunohost domain dns suggest your.domain.tld`

Для конкретных нужд или конкретных настроек, и если вы знаете, что делаете, вы
можете захотеть или быть вынуждены изменить их или добавить дополнительные (например, для обработки
поддоменов).

Рекомендуемая конфигурация обычно выглядит следующим образом:

```bash
#
# Basic ipv4/ipv6 records
#
@ 3600 IN A 111.222.33.44
* 3600 IN A 111.222.33.44

# (If your server is IPv6 capable, there are some AAAA records)
@ 3600 IN AAAA 2222:444:8888:3333:bbbb:5555:3333:1111
* 3600 IN AAAA 2222:444:8888:3333:bbbb:5555:3333:1111

#
# XMPP
#
_xmpp-client._tcp 3600 IN SRV 0 5 5222 your.domain.tld.
_xmpp-server._tcp 3600 IN SRV 0 5 5269 your.domain.tld.
muc 3600 IN CNAME @
pubsub 3600 IN CNAME @
vjud 3600 IN CNAME @
xmpp-upload 3600 IN CNAME @

#
# Mail (MX, SPF, DKIM and DMARC)
#
@ 3600 IN MX 10 your.domain.tld.
@ 3600 IN TXT "v=spf1 a mx -all"
mail._domainkey 3600 IN TXT "v=DKIM1; k=rsa; p=someHuuuuuuugeKey"
_dmarc 3600 IN TXT "v=DMARC1; p=none"
```

Хотя, возможно, было бы легче понять это, если бы оно отображалось следующим образом:

| Тип    | Название                   | Значение                                                 |
| :-----: | :--------------------: | :--------------------------------------------------:  |
|  **A**  |   **@**                |  `111.222.333.444` (ваш IPv4)                        |
|    A    |   *                    |  `111.222.333.444` (ваш IPv4)                        |
|  AAAA   |   @                    |  `2222:444:8888:3333:bbbb:5555:3333:1111` (ваш IPv6) |
|  AAAA   |   *                    |  `2222:444:8888:3333:bbbb:5555:3333:1111` (ваш IPv6) |
| **SRV** | **_xmpp-client._tcp**  |  `0 5 5222 your.domain.tld.`                          |
| **SRV** | **_xmpp-server._tcp**  |  `0 5 5269 your.domain.tld.`                          |
|  CNAME  |   muc                  |  `@`                                                  |
|  CNAME  |   pubsub               |  `@`                                                  |
|  CNAME  |   vjud                 |  `@`                                                  |
|  CNAME  |   xmpp-upload          |  `@`                                                  |
| **MX**  | **@**                  |  `your.domain.tld.`     (с приоритетом: 10)            |
|   TXT   |   @                    |  `"v=spf1 a mx -all"`               |
|   TXT   |  mail._domainkey       |  `"v=DKIM1; k=rsa; p=someHuuuuuuugeKey"`              |
|   TXT   |  _dmarc                |  `"v=DMARC1; p=none"`                                 |

### Несколько замечаний по поводу этой таблицы

- Not all these lines are absolutely necessary. For a minimal setup, you only need the records in bold.
- The dot at the end of `your.domain.tld.` is important ;);
- `@` corresponds to `your.domain.tld`, and e.g. `muc` corresponds to `muc.your.domain.tld`;
- These are example values ! See your generated conf for the actual values you should use;
- We recommend a [TTL](https://en.wikipedia.org/wiki/Time_to_live#DNS_records) of 3600 (1 hour). But you can use something else if you know what you're doing;
- Don't put an IPv6 record if you're not sure IPv6 really works on your server! You might have issues with Let's Encrypt if it doesn't.
- If you're using the domain provider Namecheap the SRV DNS entries are formatted as **Service**: `_xmpp-client` **Protocol**: `_tcp` **Priority**: `0` **Weight**: `5` **Port**: `5222` **Target**: `your.domain.tld`

### Обратный DNS

Если ваш интернет-провайдер или VPS-провайдер позволяет вам определить [обратный
поиск DNS](https://ru.wikipedia.org/wiki/%D0%9E%D0%B1%D1%80%D0%B0%D1%82%D0%BD%D1%8B%D0%B9_%D0%BF%D1%80%D0%BE%D1%81%D0%BC%D0%BE%D1%82%D1%80_DNS) для ваших общедоступных IPv4
и/или IPv6-адресов вы должны настроить его. Это предотвратит пометку вас
антиспам-фильтрами как нежелательные письма.

**Примечание: обратная настройка DNS выполняется у вашего интернет-провайдера или VPS-провайдера. Это *не* обрабатывается регистратором вашего домена.**

Если ваш общедоступный IPv4-адрес `111.222.333.444`, а ваш DNS
-домен - `domain.tld`, вы должны получить следующий ответ при использовании
командной строки `nslookup`:

```bash
nslookup 111.222.333.444
444.333.222.111.in-addr.arpa    name = domain.tld.
```

Система диагностики, доступная в webadmin, выполняет эту проверку автоматически (в разделе Электронная почта).

### Динамический IP-адрес

Если ваш глобальный IP-адрес постоянно меняется, следуйте этому [руководству](/admin/tutorials/domains/dns_dynamicip).
