---
title: 'Stratégies de sauvegarde'
---

Dans le contexte de l'auto-hébergement, les sauvegardes (backups) sont un élément important pour pallier les événements inattendus (incendies, corruption de base de données, perte d'accès au serveur, serveur compromis...). La politique de sauvegardes à mettre en place dépend de l'importance des services et des données que vous gérez. Par exemple, sauvegarder un serveur de test aura peu d'intérêt, tandis que vous voudrez être très prudent⋅e si vous gérez des données critiques pour une association ou une entreprise - et dans ce genre de cas, vous souhaiterez stocker les sauvegardes *dans un ou plusieurs endroits différents*.

## Qu'est-ce qu'une bonne sauvegarde ?

Une bonne sauvegarde est constituée d'au moins **3 copies des données** (en comptant les données originales), sur au moins **2 stockages distincts**, dans au moins **2 lieux distincts** (suffisamment éloignés) et idéalement avec 2 méthodes distinctes. Si vos sauvegardes sont chiffrées **ces règles s'appliquent aussi à la phrase/clé de déchiffrement**.

Une bonne sauvegarde est aussi dans de nombreux cas, une sauvegarde récente, il faut donc soit beaucoup de rigueur, soit **automatiser** le processus.

Une bonne sauvegarde est vérifiée régulièrement afin de s'assurer de l'effectivité et de l'intégrité des données.

Enfin, une bonne sauvegarde est une sauvegarde **restaurable dans des délais acceptables** pour vous. Pensez notamment à documenter votre méthode de restauration et à estimer le temps de transfert d'une copie notamment si les connexions internet en jeu ne sont pas symétriques.

:::info
Exemple d'**une combinaison** robuste et comfortable:

- une sauvegarde distante et automatique avec borg
- une sauvegarde sur disque externe et automatique avec borg
- un snapshot/image régulier (et avant les mises à jour)
- une grappe RAID 1 monitorée (ou un VPS du commerce qui sera aussi sur une grappe)
- une passphrase de déchiffrement stockée sur 3 supports dans 2 lieux
:::

## Quelques méthodes possibles

- [generate an archive and download it manually (default method of YunoHost)](/admin/backups)
- [backup automatically (recommended method)](/admin/backups/backup_methods)
- [generate an archive directly on another disk](/admin/tutorials/external_storage)
- [make a disk image or snapshot](/admin/backups/clone_filesystem)
- [save useful data via a custom method](/admin/backups/custom_backup_methods)

## Risques

Ci-dessous, une liste de risques triés du plus au moins probable, dont la probabilité reste à adapter selon votre situation (lieu du serveur, qualité des installations, profils d'usagers, etc.). À vous de mettre le curseur là où il faut, notamment en considérant les conséquences d'une perte de données.

:::caution
Gardez en tête que les vrais accidents sont liés à la survenue de 2 événements de façon simultanée.
:::

- **Lack of rigor**: strategies based on manual backups require a lot of rigor in the regularity
- **Bad handling**: it can happen that a backup is erased by mistake during a restoration or if you rely on a synchronization system, you could delete a file and the deletion would be synchronized instantly
- **Cryptolocker**: this is a virus that encrypts files and demands a ransomware. If your users are using nextcloud and windows, an infected windows could synchronize encrypted files and thus you lose your copy.
- **Hardware failure**: SD cards are the least reliable media over time (~2 years of life in a server), followed by SSD disks (about 3 years of life) and hard drives (3 years). Note that a new equipment has also probability to break down during the first 6 months. In all cases, your copies should not be on the same physical media.
- **Software failure/bug**: a software bug may result in data deletion or you may not know how to fix a problem and want to restore your system.
- **Electricity or internet failure**: do you have a plan if this happens? What if you are on vacation?
- **Disaster or natural or unnatural event**: a small child, a cat, lightning or a simple leak can destroy your equipment. Fires or floods can also destroy your backup copy at the other end of your home...
- **Server compromise**: a malicious person or a robot could attack your server and delete your data
- **Machine theft**: a burglary or theft of a computer on which your password manager is located to decrypt your backups
- **Search**: whether you are guilty or not, a search can result in the seizure of the entire computer equipment of a place (or even several)
- **Death/health problem**: you may not be able to type your passphrase anymore

## À propos de la synchronisation Nextcloud ou Thunderbird (IMAP)

Une méthode qui permet une sauvegarde partielle consiste à sauvegarder les fichiers et les emails via des logiciels de synchronisation comme Nextcloud client ou ThunderBird. De cette façon, vous évitez le risque de panne matérielle.

Si cette méthode est simple à mettre en place, elle n'est pas sans risque du fait de la synchronisation elle-même. Par exemple, si vous êtes sur windows ou mac, vous augmentez de façon non négligeable le risque de perte de données suite au chiffrement des fichiers par un virus de type [cryptolocker](https://fr.wikipedia.org/wiki/Ran%C3%A7ongiciel). Sur tout type de système, une fausse manipulation peut supprimer l'ensemble de vos copies sur le serveur et sur les équipements qui synchronisent. Ce souci est aggravé par le fait que la synchronisation de suppression est en général plutôt instantanée.

Si le risque de fausse manipulation peut être atténué via des logiciels de sauvegarde pour PC de bureau comme TimeShift, seule une sauvegarde sur un disque dur externe déconnecté vous protège vraiment des rançongiciels.
