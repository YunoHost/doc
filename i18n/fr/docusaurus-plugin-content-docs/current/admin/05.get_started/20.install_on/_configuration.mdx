import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## <FAIcon icon="fa-cog"/> Lancer la configuration initiale

:::tip
Si vous √™tes en train de restaurer une sauvegarde YunoHost, vous devez sauter cette √©tape et vous r√©f√©rer √† la section [Restaurer durant la post-installation √† la place de cette √©tape de configuration initiale](/admin/backups#restaurer).
:::

:::note
Cette documentation suppose que vous √™tes sur le m√™me r√©seau local que votre YunoHost.
[Trouvez son adresse IP](/admin/get_started/post_install/find_ip) avant de continuer.

Pour un VPS, utilisez l'adresse IP publique au lieu du domaine ou adresse locale.
:::

<Tabs groupId="admin-commands">
  <TabItem value="web" label="Depuis l'interface web">

    :::warning
    Lors de la premi√®re visite, vous rencontrerez tr√®s probablement un avertissement de s√©curit√© li√© au certificat utilis√©. Pour le moment, votre serveur utilise un certificat auto-sign√©. Vous pourrez plus tard ajouter un certificat automatiquement reconnu par les navigateurs comme d√©crit dans [la page sur les certificats](/admin/domains/certificate). En attendant, ajoutez une exception de s√©curit√© pour accepter le certificat actuel. Toutefois, **s'il vous pla√Æt**, ne prenez pas l'habitude d'accepter ce genre d'alerte de s√©curit√© !
    :::

    Vous devriez ensuite obtenir cette page :
    <Figure caption="Capture d'√©cran de la page de configuration initiale" src="/img/webadmin/postinstall_web.png"/>
  </TabItem>
  <TabItem value="cli" label="Depuis la ligne de commande">
    Vous pouvez aussi lancer la post-installation avec la commande `yunohost tools postinstall` directement sur le serveur ou [via SSH](/admin/command_line).

    <Figure caption="Capture d'√©cran de la configuration initiale en ligne de commande" src="/img/postinstall_cli.png"/>
  </TabItem>
</Tabs>

### <FAIcon icon="fa-globe"/> Domaine principal

<details>
<summary>Configuration sp√©cifique WSL</summary>

Vous devrez choisir un faux nom de domaine, car il ne sera pas accessible de l'ext√©rieur.
Par exemple, `ynh.wsl`. L'√©tape compliqu√© est d'exposer ce nom de domaine √† votre h√¥te.

√âditez le fichier `C:\Windows\System32\drivers\etc\hosts`. Vous devriez avoir une ligne commen√ßant par `::1`, cr√©ez la si elle n'existe pas, et rajoutez votre domaine √† la fin:

```text
::1    ynh.wsl localhost
```

Si vous voulez des sous-domaines, n'oubliez pas de les y rajouter aussi:

```text
::1    ynh.wsl subdomain.ynh.wsl localhost
```
</details>

C‚Äôest le nom de domaine qui permettra l‚Äôacc√®s √† votre serveur ainsi qu‚Äôau **portail d‚Äôauthentification** des utilisateurs. Vous pourrez ensuite ajouter d'autres domaines, et changer celui qui sera le domaine principal si besoin.

- Si l'auto-h√©bergement est tout neuf pour vous et que vous n'avez pas encore de nom de domaine, nous recommandons d'utiliser un domaine en **.nohost.me** / **.noho.st** / **.ynh.fr** (exemple : `homersimpson.nohost.me`). S'il n'est pas d√©j√† utilis√©, le domaine sera automatiquement rattach√© √† votre serveur YunoHost, et vous n‚Äôaurez pas d‚Äô√©tape de configuration suppl√©mentaire. Toutefois, notez que l'utilisation d'un de ces noms de domaines implique que vous n'aurez pas le contr√¥le complet sur votre configuration DNS.

- Si en revanche vous avez d√©j√† votre propre nom de domaine, vous souhaitez probablement l'utiliser. Vous aurez donc besoin ensuite de configurer les enregistrements DNS comme expliqu√© [ici](/admin/get_started/post_install/dns_config).

:::tip
Oui, vous *devez* configurer un nom de domaine. Si vous n'avez pas de nom de domaine et que vous n'en voulez pas en **.nohost.me**, **.noho.st** ou **.ynh.fr**, vous pouvez utilisez un ¬´ faux ¬ª domaine comme par exemple `yolo.test` et [modifier votre fichier `/etc/hosts` **sur votre ordinateur local** pour que ce domaine pointe vers l'IP de votre serveur, comme expliqu√© ici](/admin/tutorials/domains/dns_local_network).
:::

### <FAIcon icon="fa-key"/> Premier compte utilisateur

Le premier compte utilisateur est cr√©√© √† cette √©tape. Il vous faudra choisir un nom d'utilisateur et un mot de passe raisonablement complexe. (Nous ne pouvons que souligner l'importance du choix d'un mot de passe **robuste** !) Ce compte utilisateur sera ajout√© au groupe Admins, et pourra se connecter au portail utilisateur, √† la webadmin, et se connecter [via **SSH**](/admin/command_line) ou [**SFTP**](/admin/tutorials/filezilla). Les admins recevront aussi les mails envoy√©s √† `root@votredomaine.tld` et `admin@votredomaine.tld` : ces emails peuvent √™tre utilis√©s pour envoyer des informations ou des alertes techniques. Vous pourrez plus tard ajouter d'autres comptes utilisateur suppl√©mentaire, qu'il est aussi possible d'ajouter au groupe Admins.

Ce compte remplace l'ancien compte `admin`, qui est peut √™tre toujours mentionn√© dans certaines pages de documentation. Dans ce cas, remplacez simplement `admin` par votre identifiant.

## <FAIcon icon="fa-stethoscope"/> Lancer le diagnostic

Une fois la postinstall termin√©e, vous devriez pouvoir vous connecter √† la webadmin en utilisant les identiants du premier compte utilisateur que vous venez de cr√©er.

Le syst√®me de diagnostic est con√ßu pour fournir un moyen facile de valider que tous les aspects critiques de votre serveur sont proprement configur√©s et pour vous guider dans la r√©solution des probl√®mes soulev√©s. Le diagnostic se lance deux fois par jour et envoie une alerte si un dysfonctionnement est d√©tect√©.

:::tip
N.B. : **ne partez pas en courant** ! La premi√®re fois que vous lancerez le diagnostic, il est assez normal d'avoir plusieurs alertes rouges ou jaunes car vous devez g√©n√©ralement [configurer les enregistrements DNS](/admin/get_started/post_install/dns_config) (si vous n'utilisez pas un domaine `.nohost.me`, `.noho.st` ou `.ynh.fr`), ajouter un fichier de swap ainsi que [configurer la redirection des ports](/admin/get_started/post_install/port_forwarding) sur votre box.
:::

:::tip
Si une alerte n'est pas pertinente (par exemple parce que vous ne pensez pas utiliser une fonctionnalit√© sp√©cifique), il est tout √† fait convenable d'indiquer le dysfonctionnement comme ¬´ √Ä ignorer ¬ª en allant dans l'administration web > Diagnostic, et en cliquant sur le bouton ¬´ Ignorer ¬ª pour ce dysfonctionnement sp√©cifique.
:::

:::warning
Notamment, les installations WSL ou sur machines virtuelles ne seront g√©n√©ralement pas accessibles de l'ext√©rieur sans une configuration r√©seau avanc√©e sur Virtualbox et son h√¥te.
:::

<Tabs groupId="admin-commands">
  <TabItem value="web" label="(Recommand√©) Depuis l'interface web">
    Pour lancer le diagnostic, allez dans l'Administration Web dans la partie Diagnostic. Vous devriez obtenir un √©cran comme celui-ci :

    <Figure caption="Capture d'√©cran du panneau de diagnostic" src="/img/webadmin/diagnostic.png"/>
  </TabItem>
  <TabItem value="cli" label="Depuis la ligne de commande">
    ```bash
    yunohost diagnosis run
    yunohost diagnosis show --issues --human-readable
    ```
  </TabItem>
</Tabs>

## <FAIcon icon="fa-lock"/> Obtenir un certificat Let's Encrypt

Une fois que vous avez configur√©, si n√©cessaire, les enregistrements DNS et la redirection de ports, vous devriez √™tre en mesure d'installer un certificat Let's Encrypt. Ceci permettra de supprimer l'√©trange alerte de s√©curit√© vue plus t√¥t.

Pour plus d'instructions d√©taill√©es, ou pour en savoir plus √† propos des certificats SSL/TLS, voir [la page correspondante ici](/admin/domains/certificate).

<Tabs groupId="admin-commands">
  <TabItem value="web" label="Depuis l'interface web">
    <Figure caption="Capture d'√©cran du panneau pour installer un certificat Let's Encrypt" src="/img/webadmin/certificate-before-LE.png"/>
  </TabItem>
  <TabItem value="cli" label="Depuis la ligne de commande">
    ```bash
    yunohost domain cert install
    ```
  </TabItem>
</Tabs>

## üéâ F√©licitations !

Vous avez maintenant un serveur plut√¥t bien configur√©. Si vous d√©couvrez YunoHost, nous vous recommandons de jeter un ≈ìil √† [la visite guid√©e](/admin/webadmin). Vous devriez aussi √™tre en mesure d'[installer vos applications favorites](https://apps.yunohost.org). N'oubliez pas de [pr√©voir des sauvegardes](/admin/backups) !
