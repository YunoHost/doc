"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["5531"],{360:function(e,n,o){o.r(n),o.d(n,{frontMatter:()=>d,toc:()=>c,default:()=>h,metadata:()=>i,assets:()=>r,contentTitle:()=>a});var i=JSON.parse('{"id":"dev/packaging/doc","title":"Documenting apps","description":"Properly documenting your app is important for user experience ;).","source":"@site/docs/dev/50.packaging/30.doc.mdx","sourceDirName":"dev/50.packaging","slug":"/dev/packaging/doc","permalink":"/doc/pr-2675/ar/dev/packaging/doc","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/docs/dev/50.packaging/30.doc.mdx","tags":[],"version":"current","sidebarPosition":30,"frontMatter":{"title":"Documenting apps"},"sidebar":"devpackaging","previous":{"title":"App helpers (v2.1)","permalink":"/doc/pr-2675/ar/dev/packaging/scripts/helpers_v2.1"},"next":{"title":"Testing your app","permalink":"/doc/pr-2675/ar/dev/packaging/test"}}'),t=o(4848),s=o(4429);let d={title:"Documenting apps"},a,r={},c=[{value:"Extensive description : <code>doc/DESCRIPTION.md</code> and <code>doc/screenshots/</code>",id:"extensive-description--docdescriptionmd-and-docscreenshots",level:2},{value:"Specific notes for admins : <code>doc/ADMIN.md</code>, <code>doc/&lt;whatever&gt;.md</code>",id:"specific-notes-for-admins--docadminmd-docwhatevermd",level:2},{value:"Pre/post-install notes, pre/post-upgrade notes",id:"prepost-install-notes-prepost-upgrade-notes",level:2},{value:"Display notes only for a specific version",id:"display-notes-only-for-a-specific-version",level:3},{value:"Localization",id:"localization",level:3}];function l(e){let n={admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Properly documenting your app is important for user experience ;).",(0,t.jsx)(n.br,{}),"\n","YunoHost provides several mechanism to display information to users."]}),"\n",(0,t.jsxs)(n.h2,{id:"extensive-description--docdescriptionmd-and-docscreenshots",children:["Extensive description : ",(0,t.jsx)(n.code,{children:"doc/DESCRIPTION.md"})," and ",(0,t.jsx)(n.code,{children:"doc/screenshots/"})]}),"\n",(0,t.jsxs)(n.p,{children:["You are encouraged to add a ",(0,t.jsx)(n.code,{children:"doc/DESCRIPTION.md"})," which should contain a more extensive description than the short description contained in ",(0,t.jsx)(n.code,{children:"manifest.toml"}),". This usually corresponds to listing the key features of the app."]}),"\n",(0,t.jsxs)(n.p,{children:["You are also encouraged to add a ",(0,t.jsx)(n.code,{children:".png"})," or ",(0,t.jsx)(n.code,{children:".jpg"})," screenshot of what the app looks like in ",(0,t.jsx)(n.code,{children:"doc/screenshots/"}),".",(0,t.jsx)(n.br,{}),"\n","The filename is arbitrary but must not start with a dot. Also the file weight should be kept below 512kb."]}),"\n",(0,t.jsx)(n.p,{children:"This description and screenshot will be shown when the admin open the catalog page for this app and the app info page in the webadmin after the admin installs this app."}),"\n",(0,t.jsxs)(n.p,{children:["You can add subfolders such as ",(0,t.jsx)(n.code,{children:"doc/screenshots/subfolder"})," to add pictures in your documentation without showing them on the app info page."]}),"\n",(0,t.jsxs)(n.p,{children:["You can also add translated versions of the ",(0,t.jsx)(n.code,{children:".md"})," file in, for example, ",(0,t.jsx)(n.code,{children:"doc/DESCRIPTION_fr.md"}),", ",(0,t.jsx)(n.code,{children:"_es.md"}),", ",(0,t.jsx)(n.code,{children:"_it.md"}),", etc."]}),"\n",(0,t.jsxs)(n.p,{children:["If your app repository is part of the YunoHost-Apps org, the provided description will be used to auto-regenerate the README.md of your GitHub repo via ",(0,t.jsx)(n.code,{children:"yunohost-bot"}),"."]}),"\n",(0,t.jsxs)(n.h2,{id:"specific-notes-for-admins--docadminmd-docwhatevermd",children:["Specific notes for admins : ",(0,t.jsx)(n.code,{children:"doc/ADMIN.md"}),", ",(0,t.jsx)(n.code,{children:"doc/<whatever>.md"})]}),"\n",(0,t.jsx)(n.p,{children:"Sometimes, you may want to ship YunoHost-specific notes regarding the administration of this app. For example, integrating OnlyOffice inside Nextcloud."}),"\n",(0,t.jsxs)(n.p,{children:["You can do so by adding a ",(0,t.jsx)(n.code,{children:"doc/ADMIN.md"})," file or even a ",(0,t.jsx)(n.code,{children:"doc/<whatever>.md"})," page for each specific topic - and similarly add ",(0,t.jsx)(n.code,{children:"_<lang>"})," suffix for translations."]}),"\n",(0,t.jsxs)(n.p,{children:["Note that you can even use the ",(0,t.jsx)(n.code,{children:"__FOOBAR__"})," syntax which will automatically be replaced with the ",(0,t.jsx)(n.code,{children:"foobar"})," setting."]}),"\n",(0,t.jsx)(n.p,{children:"These notes will be available in the app info page in the webadmin after the app installation."}),"\n",(0,t.jsx)(n.h2,{id:"prepost-install-notes-prepost-upgrade-notes",children:"Pre/post-install notes, pre/post-upgrade notes"}),"\n",(0,t.jsx)(n.p,{children:"Sometimes, you may want to display important information to the admin at key points in the app's life cycle. You can do so by providing special markdown files:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"doc/PRE_INSTALL.md"}),": displayed right before the installation (for example to warn that \xab This app install is expected to take around 30 minutes, be patient! \xbb or \xab This app will automatically add 1GB swap to your system \xbb).","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"NB: try to not overlap with the anti-feature tags from the catalog (cf. Publishing your app in the catalog) which can be used to warn that the app's upstream is alpha-stage or deprecated among other things."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"doc/POST_INSTALL.md"}),": displayed in a popup after the installation AND a dismissable note in the webadmin app info view."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"doc/PRE_UPGRADE.md"}),": displayed right before any upgrade of this app.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"NB: the pre-upgrade note from the NEW version will be used, not the one from the installed version."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"doc/POST_UPGRADE.md"}),": displayed in a popup after the upgrade AND a dismissable note in the webadmin app info view."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["In these files you can use the ",(0,t.jsx)(n.code,{children:"__FOOBAR__"})," syntax which will automatically be replaced with the ",(0,t.jsx)(n.code,{children:"foobar"})," setting."]}),"\n",(0,t.jsx)(n.p,{children:"These notes are displayed both in WebUI and CLI contexts. In the CLI context, admin is prompted to press a key to dismiss the note and continue the install/upgrade process."}),"\n",(0,t.jsx)(n.h3,{id:"display-notes-only-for-a-specific-version",children:"Display notes only for a specific version"}),"\n",(0,t.jsxs)(n.p,{children:["To display such note only for a specific version, you can create a markdown file named after the version inside a folder named after the targeted hook as such: ",(0,t.jsx)(n.code,{children:"doc/{hook}.d/{version}.md"}),", where:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"{hook}"})," corresponds to ",(0,t.jsx)(n.code,{children:"PRE_UPGRADE"})," or ",(0,t.jsx)(n.code,{children:"POST_UPGRADE"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"{version}"})," corresponds to the version defined in the manifest."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Example: ",(0,t.jsx)(n.code,{children:"doc/PRE_UPGRADE.d/1.2.1~ynh1.md"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["With the above example, the user will be notified with the content of this markdown file when they upgrade from a lower version of ",(0,t.jsx)(n.code,{children:"1.2.1~ynh1"})," to this latter version or higher."]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["You can easily increase the package version directly from a comment in a Pull Request on Github by posting ",(0,t.jsx)(n.code,{children:"!bump"}),". The YunoHost bot will automatically add 1 to the package version (",(0,t.jsx)(n.code,{children:"~ynh1"})," to ",(0,t.jsx)(n.code,{children:"~ynh2"}),", for instance)."]})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["You can add a PRE_UPGRADE message directly from a comment in a Pull Request on Github by posting ",(0,t.jsx)(n.code,{children:"!changelog <text>"}),", ",(0,t.jsx)(n.code,{children:"!pre_upgrade <text>"}),", or ",(0,t.jsx)(n.code,{children:"!preupgrade <text>"}),". The YunoHost bot will automatically create the appropriate file with the ",(0,t.jsx)(n.code,{children:"<text>"})," you wrote."]})}),"\n",(0,t.jsx)(n.h3,{id:"localization",children:"Localization"}),"\n",(0,t.jsxs)(n.p,{children:["All notes' markdown file can optionally be localized using via a filename suffix with the following format: ",(0,t.jsx)(n.code,{children:"doc/{hook}_{locale}.md"})," or ",(0,t.jsx)(n.code,{children:"doc/{hook}.d/{version}_{locale}.md"}),".\nWithout locale suffix, a file will be considered to be the English locale (i.e. ",(0,t.jsx)(n.code,{children:"doc/PRE_UPGRADE.md"})," is equivalent to ",(0,t.jsx)(n.code,{children:"doc/PRE_UPGRADE_en.md"}),")."]}),"\n",(0,t.jsx)(n.p,{children:"Examples:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"doc/POST_INSTALL_fr.md"})," will be displayed after each install of the given app where the Yunohost instance's language is set to French."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"doc/POST_UPGRADE.d/2025.04.02~ynh1_es.md"})," will be displayed after upgrading to version ",(0,t.jsx)(n.code,{children:"2025.04.02~ynh1"})," or newer of the given app where the Yunohost instance's language is set to Spanish."]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},4429:function(e,n,o){o.d(n,{R:()=>d,x:()=>a});var i=o(6540);let t={},s=i.createContext(t);function d(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);