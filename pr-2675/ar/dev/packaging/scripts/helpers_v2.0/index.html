<!doctype html><html lang=ar dir=rtl class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-dev/packaging/scripts/helpers_v2.0" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>App helpers (v2) | Yunohost</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://yunohost.org/assets/img/portal_simple_dark.jpg /><meta data-rh=true name=twitter:image content=https://yunohost.org/assets/img/portal_simple_dark.jpg /><meta data-rh=true property=og:url content=https://doc.next.yunohost.org/doc/pr-2675/ar/dev/packaging/scripts/helpers_v2.0 /><meta data-rh=true property=og:locale content=ar /><meta data-rh=true property=og:locale:alternate content=ca /><meta data-rh=true property=og:locale:alternate content=de /><meta data-rh=true property=og:locale:alternate content=en /><meta data-rh=true property=og:locale:alternate content=es /><meta data-rh=true property=og:locale:alternate content=fr /><meta data-rh=true property=og:locale:alternate content=it /><meta data-rh=true property=og:locale:alternate content=oc /><meta data-rh=true property=og:locale:alternate content=ru /><meta data-rh=true property=og:locale:alternate content=en_GB /><meta data-rh=true name=docusaurus_locale content=ar /><meta data-rh=true name=docsearch:language content=ar /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="App helpers (v2) | Yunohost"/><meta data-rh=true name=description content="Doc auto-generated by this script on 18/09/2025 (YunoHost version 12.1.25)"/><meta data-rh=true property=og:description content="Doc auto-generated by this script on 18/09/2025 (YunoHost version 12.1.25)"/><link data-rh=true rel=icon href=/doc/pr-2675/ar/img/favicon.png /><link data-rh=true rel=canonical href=https://doc.next.yunohost.org/doc/pr-2675/ar/dev/packaging/scripts/helpers_v2.0 /><link data-rh=true rel=alternate href=https://doc.next.yunohost.org/doc/pr-2675/ar/dev/packaging/scripts/helpers_v2.0 hreflang=ar /><link data-rh=true rel=alternate href=https://doc.next.yunohost.org/doc/pr-2675/ca/dev/packaging/scripts/helpers_v2.0 hreflang=ca /><link data-rh=true rel=alternate href=https://doc.next.yunohost.org/doc/pr-2675/de/dev/packaging/scripts/helpers_v2.0 hreflang=de /><link data-rh=true rel=alternate href=https://doc.next.yunohost.org/doc/pr-2675/en/dev/packaging/scripts/helpers_v2.0 hreflang=en /><link data-rh=true rel=alternate href=https://doc.next.yunohost.org/doc/pr-2675/es/dev/packaging/scripts/helpers_v2.0 hreflang=es /><link data-rh=true rel=alternate href=https://doc.next.yunohost.org/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0 hreflang=fr /><link data-rh=true rel=alternate href=https://doc.next.yunohost.org/doc/pr-2675/it/dev/packaging/scripts/helpers_v2.0 hreflang=it /><link data-rh=true rel=alternate href=https://doc.next.yunohost.org/doc/pr-2675/oc/dev/packaging/scripts/helpers_v2.0 hreflang=oc /><link data-rh=true rel=alternate href=https://doc.next.yunohost.org/doc/pr-2675/ru/dev/packaging/scripts/helpers_v2.0 hreflang=ru /><link data-rh=true rel=alternate href=https://doc.next.yunohost.org/doc/pr-2675/dev/packaging/scripts/helpers_v2.0 hreflang=en-GB /><link data-rh=true rel=alternate href=https://doc.next.yunohost.org/doc/pr-2675/dev/packaging/scripts/helpers_v2.0 hreflang=x-default /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://doc.next.yunohost.org/doc/pr-2675/ar/dev/packaging/","name":"üì¶ Application packaging","position":1},{"@type":"ListItem","item":"https://doc.next.yunohost.org/doc/pr-2675/ar/dev/packaging/scripts/","name":"App scripts","position":2},{"@type":"ListItem","item":"https://doc.next.yunohost.org/doc/pr-2675/ar/dev/packaging/scripts/helpers_v2.0","name":"App helpers (v2)","position":3}]}</script><script src=/js/language-detect.js async data-language-redirect='{"ar":"/ar/","ca":"/ca/","de":"/de/","en":"/en/","es":"/es/","fr":"/fr/","it":"/it/","oc":"/oc/","ru":"/ru/"}'></script><link rel=stylesheet href=/doc/pr-2675/ar/assets/css/styles.3ef0106a.css /><script src=/doc/pr-2675/ar/assets/js/runtime~main.bdf992e4.js defer></script><script src=/doc/pr-2675/ar/assets/js/main.5cdffa69.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/doc/pr-2675/ar/img/icons/logo-ynh_horizontal.png /><link rel=preload as=image href=/doc/pr-2675/ar/img/icons/ynh_logo_roundcorner.png /><div role=region aria-label="ÿßŸÜÿ™ŸÇŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>ÿßŸÜÿ™ŸÇŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/doc/pr-2675/ar/><div class=navbar__logo><img src=/doc/pr-2675/ar/img/icons/logo-ynh_horizontal.png alt="Yunohost Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/doc/pr-2675/ar/img/icons/logo-ynh_horizontal.png alt="Yunohost Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div><b class="navbar__title text--truncate">Docs</b></a><a class="navbar__item navbar__link" href=/doc/pr-2675/ar/admin/>Administration</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/doc/pr-2675/ar/dev/>Development and packaging</a><a class="navbar__item navbar__link" href=/doc/pr-2675/ar/community/>Community</a><a href=https://apps.yunohost.org/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Apps catalog<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class=navbarSearchContainer_Bca1><div class=navbar__search><span aria-label="expand searchbar" role=button class=search-icon tabindex=0></span><input id=search_input_react type=search placeholder=Loading... aria-label=Search class="navbar__search-input search-bar" disabled/></div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</a><ul class=dropdown__menu><li><a href="/doc/pr-2675/ar/dev/packaging/scripts/helpers_v2.0?persistLocale=true" target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=ar>ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</a><li><a href="/doc/pr-2675/ca/dev/packaging/scripts/helpers_v2.0?persistLocale=true" target=_self rel="noopener noreferrer" class=dropdown__link lang=ca>Catal√†</a><li><a href="/doc/pr-2675/de/dev/packaging/scripts/helpers_v2.0?persistLocale=true" target=_self rel="noopener noreferrer" class=dropdown__link lang=de>Deutsch</a><li><a href="/doc/pr-2675/en/dev/packaging/scripts/helpers_v2.0?persistLocale=true" target=_self rel="noopener noreferrer" class=dropdown__link lang=en>English</a><li><a href="/doc/pr-2675/es/dev/packaging/scripts/helpers_v2.0?persistLocale=true" target=_self rel="noopener noreferrer" class=dropdown__link lang=es>Espa√±ol</a><li><a href="/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0?persistLocale=true" target=_self rel="noopener noreferrer" class=dropdown__link lang=fr>Fran√ßais</a><li><a href="/doc/pr-2675/it/dev/packaging/scripts/helpers_v2.0?persistLocale=true" target=_self rel="noopener noreferrer" class=dropdown__link lang=it>Italiano</a><li><a href="/doc/pr-2675/oc/dev/packaging/scripts/helpers_v2.0?persistLocale=true" target=_self rel="noopener noreferrer" class=dropdown__link lang=oc>Occitan</a><li><a href="/doc/pr-2675/ru/dev/packaging/scripts/helpers_v2.0?persistLocale=true" target=_self rel="noopener noreferrer" class=dropdown__link lang=ru>–†—É—Å—Å–∫–∏–π</a><li><a href="/doc/pr-2675/dev/packaging/scripts/helpers_v2.0?persistLocale=true" target=_self rel="noopener noreferrer" class=dropdown__link lang=en-GB>British English</a></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ®ŸäŸÜ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿØÿßŸÉŸÜ ŸàÿßŸÑŸÅÿßÿ™ÿ≠ (ÿßŸÑÿ≠ÿßŸÑŸä system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="ÿ£ŸÜÿ™ŸÇŸÑ ŸÑŸÑÿ£ÿπŸÑŸâ" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex=-1 class=sidebarLogo_isFc href=/doc/pr-2675/ar/><img src=/doc/pr-2675/ar/img/icons/logo-ynh_horizontal.png alt="Yunohost Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/doc/pr-2675/ar/img/icons/logo-ynh_horizontal.png alt="Yunohost Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"/><b>Docs</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/doc/pr-2675/ar/dev/><span title="Contributing to YunoHost" class=linkLabel_WmDU>Contributing to YunoHost</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/doc/pr-2675/ar/dev/git/><span title="üõ†Ô∏è Working with Git / Github" class=linkLabel_WmDU>üõ†Ô∏è Working with Git / Github</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/doc/pr-2675/ar/dev/doc/><span title="üìù Working on the documentation" class=linkLabel_WmDU>üìù Working on the documentation</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href=/doc/pr-2675/ar/dev/packaging/><span title="üì¶ Application packaging" class=categoryLinkLabel_W154>üì¶ Application packaging</span></a><button aria-label="Collapse sidebar category 'üì¶ Application packaging'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/doc/pr-2675/ar/dev/packaging/structure><span title="App structure" class=linkLabel_WmDU>App structure</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/doc/pr-2675/ar/dev/packaging/manifest><span title=manifest.toml class=linkLabel_WmDU>manifest.toml</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/doc/pr-2675/ar/dev/packaging/resources><span title=Resources class=linkLabel_WmDU>Resources</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex=0 href=/doc/pr-2675/ar/dev/packaging/scripts/><span title="App scripts" class=categoryLinkLabel_W154>App scripts</span></a><button aria-label="Collapse sidebar category 'App scripts'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/doc/pr-2675/ar/dev/packaging/scripts/shell_variables_scope><span title="General scope of variables" class=linkLabel_WmDU>General scope of variables</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/doc/pr-2675/ar/dev/packaging/scripts/helpers_v2.0><span title="App helpers (v2)" class=linkLabel_WmDU>App helpers (v2)</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/doc/pr-2675/ar/dev/packaging/scripts/helpers_v2.1><span title="App helpers (v2.1)" class=linkLabel_WmDU>App helpers (v2.1)</span></a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/doc/pr-2675/ar/dev/packaging/doc><span title="Documenting apps" class=linkLabel_WmDU>Documenting apps</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/doc/pr-2675/ar/dev/packaging/test><span title="Testing your app" class=linkLabel_WmDU>Testing your app</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/doc/pr-2675/ar/dev/packaging/publish><span title="Publishing your app on the catalog" class=linkLabel_WmDU>Publishing your app on the catalog</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/doc/pr-2675/ar/packaging/advanced><span title=Advanced class=categoryLinkLabel_W154>Advanced</span></a><button aria-label="Expand sidebar category 'Advanced'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/doc/pr-2675/ar/category/misc-resources><span title="Misc resources" class=categoryLinkLabel_W154>Misc resources</span></a><button aria-label="Expand sidebar category 'Misc resources'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/doc/pr-2675/ar/dev/packaging/policy><span title="Catalog policy" class=linkLabel_WmDU>Catalog policy</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/doc/pr-2675/ar/dev/core/><span title="‚öôÔ∏è Core development" class=categoryLinkLabel_W154>‚öôÔ∏è Core development</span></a><button aria-label="Expand sidebar category '‚öôÔ∏è Core development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="ÿßŸÑÿ™ŸÜŸÇŸÑ ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä"><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label=ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© class=breadcrumbs__link href=/doc/pr-2675/ar/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/doc/pr-2675/ar/dev/packaging/><span>üì¶ Application packaging</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/doc/pr-2675/ar/dev/packaging/scripts/><span>App scripts</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>App helpers (v2)</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">ŸÖÿ≠ÿ™ŸàŸäÿßÿ™ Ÿáÿ∞Ÿá ÿßŸÑÿµŸÅÿ≠ÿ©</button></div><div class="theme-doc-markdown markdown"><header><h1>App helpers (v2)</h1></header><p>Doc auto-generated by <a href=https://github.com/YunoHost/doc/blob/e1ce8661ec6f1f6597eeb5adc82e2ca367aafcad/scripts/helpers_doc_generate.py target=_blank rel="noopener noreferrer" class="">this script</a> on 18/09/2025 (YunoHost version 12.1.25)</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=sources>Sources<a href=#sources class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Sources" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Sources" translate=no>‚Äã</a></h2>
<p>This is coupled to the 'sources' resource in the manifest.toml</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=sources-1>Sources<a href=#sources-1 class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Sources" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Sources" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_setup_source</code><br/><i>Download, check integrity, uncompress and patch the source from app.src</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_setup_source --dest_dir=dest_dir [--source_id=source_id] [--keep="file1 file2"] [--full_replace]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-d</code>, <code>--dest_dir=</code>: Directory where to setup sources</li>
<li class=""><code>-s</code>, <code>--source_id=</code>: Name of the source, defaults to <code>main</code> (when the sources resource exists in manifest.toml) or (legacy) <code>app</code> otherwise</li>
<li class=""><code>-k</code>, <code>--keep=</code>: Space-separated list of files/folders that will be backup/restored in $dest_dir, such as a config file you don't want to overwrite. For example 'conf.json secrets.json logs' (no trailing <code>/</code> for folders)</li>
<li class=""><code>-r</code>, <code>--full_replace=</code>: Remove previous sources before installing new sources (can be 1 or 0, default to 0)</li>
</ul><p><strong>Details</strong>:<h5 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=new-sources-resources>New 'sources' resources<a href=#new-sources-resources class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ New 'sources' resources" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ New 'sources' resources" translate=no>‚Äã</a></h5><p>(See also the resources documentation which may be more complete?)<p>This helper will read infos from the 'sources' resources in the manifest.toml of the app
and expect a structure like:<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>[</span><span class="token table class-name">resources.sources</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>[</span><span class="token table class-name">resources.sources.main</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key property" style=color:#36acaa>url</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"https://some.address.to/download/the/app/archive"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key property" style=color:#36acaa>sha256</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"0123456789abcdef"</span><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic># The sha256 sum of the asset obtained from the URL</span><br/></span></code></pre></div></div><h5 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=optional-flags>Optional flags<a href=#optional-flags class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Optional flags" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Optional flags" translate=no>‚Äã</a></h5><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">format    = "tar.gz"/xz/bz2    # automatically guessed from the extension of the URL, but can be set explicitly. Will use `tar` to extract</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            "zip"              # automatically guessed from the extension of the URL, but can be set explicitly. Will use `unzip` to extract</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            "docker"           # useful to extract files from an already-built docker image (instead of rebuilding them locally). Will use `docker-image-extract` to extract</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            "whatever"         # an arbitrary value, not really meaningful except to imply that the file won't be extracted</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">in_subdir = true    # default, there's an intermediate subdir in the archive before accessing the actual files</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            false   # sources are directly in the archive root</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            n       # (special cases) an integer representing a number of subdirs levels to get rid of</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">extract   = true    # default if file is indeed an archive such as .zip, .tar.gz, .tar.bz2, ...</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">          = false   # default if file 'format' is not set and the file is not to be extracted because it is not an archive but a script or binary or whatever asset.</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">                    #    in which case the file will only be `mv`ed to the location possibly renamed using the `rename` value</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">rename    = "whatever_your_want"   # to be used for convenience when `extract` is false and the default name of the file is not practical</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">platform  = "linux/amd64"          # (defaults to "linux/$YNH_ARCH") to be used in conjonction with `format = "docker"` to specify which architecture to extract for</span><br/></span></code></pre></div></div><p>You may also define assets url and checksum per-architectures such as:<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>[</span><span class="token table class-name">resources.sources</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>[</span><span class="token table class-name">resources.sources.main</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key property" style=color:#36acaa>amd64.url</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"https://some.address.to/download/the/app/archive/when/amd64"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key property" style=color:#36acaa>amd64.sha256</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"0123456789abcdef"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key property" style=color:#36acaa>armhf.url</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"https://some.address.to/download/the/app/archive/when/armhf"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key property" style=color:#36acaa>armhf.sha256</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"fedcba9876543210"</span><br/></span></code></pre></div></div><p>In which case <code>ynh_setup_source --dest_dir="$install_dir"</code> will automatically pick the appropriate source depending on the arch<p>The helper will:<ul>
<li class="">Download the specific URL if there is no local archive</li>
<li class="">Check the integrity with the specific sha256 sum</li>
<li class="">Uncompress the archive to <code>$dest_dir</code>.<!-- -->
<ul>
<li class="">If <code>in_subdir</code> is true, the first level directory of the archive will be removed.</li>
<li class="">If <code>in_subdir</code> is a numeric value, the N first level directories will be removed.</li>
</ul>
</li>
<li class="">Patches named <code>sources/patches/${src_id}-*.patch</code> will be applied to <code>$dest_dir</code></li>
<li class="">Extra files in <code>sources/extra_files/$src_id</code> will be copied to dest_dir</li>
</ul><p>Requires YunoHost version 2.6.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/sources#L85 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=app-technologies>App Technologies<a href=#app-technologies class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ App Technologies" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ App Technologies" translate=no>‚Äã</a></h2>
<p>These allow to install specific version of the technology required to run some apps</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=nodejs>Nodejs<a href=#nodejs class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Nodejs" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Nodejs" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_use_nodejs</code><br/><i>Load the version of node for an app, and set variables.</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_use_nodejs</code><p><strong>Details</strong>:
<code>ynh_use_nodejs</code> has to be used in any app scripts before using node for the first time.
This helper will provide alias and variables to use in your scripts.<p>To use npm or node, use the alias <code>ynh_npm</code> and <code>ynh_node</code>.<p>Those alias will use the correct version installed for the app.
For example: use <code>ynh_npm install</code> instead of <code>npm install</code><p>With <code>sudo</code> or <code>ynh_exec_as</code>, use instead the fallback variables <code>$ynh_npm</code> and <code>$ynh_node</code>
And propagate $PATH to sudo with $ynh_node_load_PATH
Exemple: <code>ynh_exec_as $app $ynh_node_load_PATH $ynh_npm install</code><p>$PATH contains the path of the requested version of node.
However, $PATH is duplicated into $node_PATH to outlast any manipulation of <code>$PATH</code>
You can use the variable <code>$ynh_node_load_PATH</code> to quickly load your node version
in $PATH for an usage into a separate script.
Exemple: $ynh_node_load_PATH $final_path/script_that_use_npm.sh`<p>Finally, to start a nodejs service with the correct version, 2 solutions
Either the app is dependent of node or npm, but does not called it directly.
In such situation, you need to load PATH :<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Environment="__NODE_ENV_PATH__"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">ExecStart=__FINALPATH__/my_app</span><br/></span></code></pre></div></div><p>You will replace <strong>NODE_ENV_PATH</strong> with $ynh_node_load_PATH.<p>Or node start the app directly, then you don't need to load the PATH variable<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">ExecStart=__YNH_NODE__ my_app run</span><br/></span></code></pre></div></div><p>You will replace <strong>YNH_NODE</strong> with $ynh_node<p>2 other variables are also available<ul>
<li class="">$nodejs_path: The absolute path to node binaries for the chosen version.</li>
<li class="">$nodejs_version: Just the version number of node for this app. Stored as 'nodejs_version' in settings.yml.</li>
</ul><p>Requires YunoHost version 2.7.12 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/nodejs#L68 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_install_nodejs</code><br/><i>Install a specific version of nodejs</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_install_nodejs --nodejs_version=nodejs_version</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-n</code>, <code>--nodejs_version=</code>: Version of node to install. When possible, your should prefer to use major version number (e.g. 8 instead of 8.10.0).</li>
</ul><p><strong>Details</strong>:
ynh_install_nodejs will install the version of node provided as argument by using n.<p><code>n</code> (Node version management) uses the <code>PATH</code> variable to store the path of the version of node it is going to use.
That's how it changes the version<p>Refer to <code>ynh_use_nodejs</code> for more information about available commands and variables<p>Requires YunoHost version 2.7.12 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/nodejs#L110 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_remove_nodejs</code><br/><i>Remove the version of node used by the app.</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_remove_nodejs</code><p><strong>Details</strong>:
This helper will check if another app uses the same version of node.<ul>
<li class="">If not, this version of node will be removed.</li>
<li class="">If no other app uses node, n will be also removed.</li>
</ul><p>Requires YunoHost version 2.7.12 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/nodejs#L150 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=ruby>Ruby<a href=#ruby class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Ruby" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Ruby" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_use_ruby</code><br/><i>Load the version of Ruby for an app, and set variables.</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_use_ruby</code><p><strong>Details</strong>:
ynh_use_ruby has to be used in any app scripts before using Ruby for the first time.
This helper will provide alias and variables to use in your scripts.<p>To use gem or Ruby, use the alias <code>ynh_gem</code> and <code>ynh_ruby</code>
Those alias will use the correct version installed for the app
For example: use <code>ynh_gem install</code> instead of <code>gem install</code><p>With <code>sudo</code> or <code>ynh_exec_as</code>, use instead the fallback variables <code>$ynh_gem</code> and <code>$ynh_ruby</code>
And propagate $PATH to sudo with $ynh_ruby_load_path
Exemple: <code>ynh_exec_as $app $ynh_ruby_load_path $ynh_gem install</code><p>$PATH contains the path of the requested version of Ruby.
However, $PATH is duplicated into $ruby_path to outlast any manipulation of $PATH
You can use the variable <code>$ynh_ruby_load_path</code> to quickly load your Ruby version
in $PATH for an usage into a separate script.
Exemple: $ynh_ruby_load_path $final_path/script_that_use_gem.sh`<p>Finally, to start a Ruby service with the correct version, 2 solutions
Either the app is dependent of Ruby or gem, but does not called it directly.
In such situation, you need to load PATH
<code>Environment="__YNH_RUBY_LOAD_PATH__"</code>
<code>ExecStart=__FINALPATH__/my_app</code>
You will replace <strong>YNH_RUBY_LOAD_PATH</strong> with $ynh_ruby_load_path<p>Or Ruby start the app directly, then you don't need to load the PATH variable
<code>ExecStart=__YNH_RUBY__ my_app run</code>
You will replace <strong>YNH_RUBY</strong> with $ynh_ruby<p>one other variable is also available<ul>
<li class="">$ruby_path: The absolute path to Ruby binaries for the chosen version.</li>
</ul><p>Requires YunoHost version 3.2.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/ruby#L71 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_install_ruby</code><br/><i>Install a specific version of Ruby</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_install_ruby --ruby_version=ruby_version</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-v</code>, <code>--ruby_version=</code>: Version of ruby to install.</li>
</ul><p><strong>Details</strong>:
ynh_install_ruby will install the version of Ruby provided as argument by using rbenv.<p>This helper creates a /etc/profile.d/rbenv.sh that configures PATH environment for rbenv
for every LOGIN user, hence your user must have a defined shell (as opposed to /usr/sbin/nologin)<p>Don't forget to execute ruby-dependent command in a login environment
(e.g. sudo --login option)
When not possible (e.g. in systemd service definition), please use direct path
to rbenv shims (e.g. $RBENV_ROOT/shims/bundle)<p>Requires YunoHost version 3.2.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/ruby#L116 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_remove_ruby</code><br/><i>Remove the version of Ruby used by the app.</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_remove_ruby</code><p><strong>Details</strong>:
This helper will also cleanup Ruby versions<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/ruby#L256 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_cleanup_ruby</code><br/><i>Remove no more needed versions of Ruby used by the app.</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_cleanup_ruby</code><p><strong>Details</strong>:
This helper will check what Ruby version are no more required,
and uninstall them
If no app uses Ruby, rbenv will be also removed.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/ruby#L281 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=go>Go<a href=#go class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Go" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Go" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_use_go</code><br/><i>Load the version of Go for an app, and set variables.</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_use_go</code><p><strong>Details</strong>:
ynh_use_go has to be used in any app scripts before using Go for the first time.
This helper will provide alias and variables to use in your scripts.<p>To use gem or Go, use the alias <code>ynh_gem</code> and <code>ynh_go</code>
Those alias will use the correct version installed for the app
For example: use <code>ynh_gem install</code> instead of <code>gem install</code><p>With <code>sudo</code> or <code>ynh_exec_as</code>, use instead the fallback variables <code>$ynh_gem</code> and <code>$ynh_go</code>
And propagate $PATH to sudo with $ynh_go_load_path
Exemple: <code>ynh_exec_as $app $ynh_go_load_path $ynh_gem install</code><p>$PATH contains the path of the requested version of Go.
However, $PATH is duplicated into $go_path to outlast any manipulation of $PATH
You can use the variable <code>$ynh_go_load_path</code> to quickly load your Go version
in $PATH for an usage into a separate script.
Exemple: <code>$ynh_go_load_path $install_dir/script_that_use_gem.sh</code><p>Finally, to start a Go service with the correct version, 2 solutions
Either the app is dependent of Go or gem, but does not called it directly.
In such situation, you need to load PATH
<code>Environment="__YNH_GO_LOAD_PATH__"</code>
<code>ExecStart=__INSTALL_DIR__/my_app</code>
You will replace <strong>YNH_GO_LOAD_PATH</strong> with $ynh_go_load_path<p>Or Go start the app directly, then you don't need to load the PATH variable
<code>ExecStart=__YNH_GO__ my_app run</code>
You will replace <strong>YNH_GO</strong> with $ynh_go<p>one other variable is also available<ul>
<li class="">$go_path: The absolute path to Go binaries for the chosen version.</li>
</ul><p>Requires YunoHost version 3.2.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/go#L72 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_install_go</code><br/><i>Install a specific version of Go</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_install_go --go_version=go_version</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-v</code>, <code>--go_version=</code>: Version of go to install.</li>
</ul><p><strong>Details</strong>:
ynh_install_go will install the version of Go provided as argument by using goenv.<p>This helper creates a /etc/profile.d/goenv.sh that configures PATH environment for goenv
for every LOGIN user, hence your user must have a defined shell (as opposed to /usr/sbin/nologin)<p>Don't forget to execute go-dependent command in a login environment
(e.g. sudo --login option)
When not possible (e.g. in systemd service definition), please use direct path
to goenv shims (e.g. $goenv_ROOT/shims/bundle)<p>Requires YunoHost version 3.2.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/go#L114 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_remove_go</code><br/><i>Remove the version of Go used by the app.</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_remove_go</code><p><strong>Details</strong>:
This helper will also cleanup Go versions<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/go#L203 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_cleanup_go</code><br/><i>Remove no more needed versions of Go used by the app.</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_cleanup_go</code><p><strong>Details</strong>:
This helper will check what Go version are no more required,
and uninstall them
If no app uses Go, goenv will be also removed.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/go#L226 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=composer>Composer<a href=#composer class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Composer" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Composer" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_composer_exec</code><br/><i>Execute a command with Composer</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_composer_exec [--phpversion=phpversion] [--workdir=$install_dir] --commands="commands"</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-v</code>, <code>--phpversion</code>: PHP version to use with composer</li>
<li class=""><code>-w</code>, <code>--workdir</code>: The directory from where the command will be executed. Default $install_dir or $final_path</li>
<li class=""><code>-c</code>, <code>--commands</code>: Commands to execute.</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 4.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/composer#L34 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_install_composer</code><br/><i>Install and initialize Composer in the given directory</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_install_composer [--phpversion=phpversion] [--workdir=$install_dir] [--install_args="--optimize-autoloader"] [--composerversion=composerversion]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-v</code>, <code>--phpversion</code>: PHP version to use with composer</li>
<li class=""><code>-w</code>, <code>--workdir</code>: The directory from where the command will be executed. Default $install_dir.</li>
<li class=""><code>-a</code>, <code>--install_args</code>: Additional arguments provided to the composer install. Argument --no-dev already include</li>
<li class=""><code>-c</code>, <code>--composerversion</code>: Composer version to install</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 4.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/composer#L66 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=databases>Databases<a href=#databases class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Databases" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Databases" translate=no>‚Äã</a></h2>
<p>This is coupled to the 'database' resource in the manifest.toml - at least for mysql/postgresql. Mongodb/redis may have better integration in the future.</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=mysql>Mysql<a href=#mysql class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Mysql" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Mysql" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_mysql_connect_as</code><br/><i>Open a connection as a user</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_mysql_connect_as --user=user --password=password [--database=database]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-u</code>, <code>--user=</code>: the user name to connect as</li>
<li class=""><code>-p</code>, <code>--password=</code>: the user password</li>
<li class=""><code>-d</code>, <code>--database=</code>: the database to connect to</li>
</ul><p><strong>Examples</strong>:<ul>
<li class=""><code>ynh_mysql_connect_as --user="user" --password="pass" &lt;&lt;&lt; "UPDATE ...;"</code></li>
<li class=""><code>ynh_mysql_connect_as --user="user" --password="pass" &lt; /path/to/file.sql</code></li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/mysql#L33 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_mysql_execute_as_root</code><br/><i>Execute a command as root user</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_mysql_execute_as_root --sql=sql [--database=database]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-s</code>, <code>--sql=</code>: the SQL command to execute</li>
<li class=""><code>-d</code>, <code>--database=</code>: the database to connect to</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/mysql#L54 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_mysql_execute_file_as_root</code><br/><i>Execute a command from a file as root user</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_mysql_execute_file_as_root --file=file [--database=database]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-f</code>, <code>--file=</code>: the file containing SQL commands</li>
<li class=""><code>-d</code>, <code>--database=</code>: the database to connect to</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/mysql#L78 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_mysql_dump_db</code><br/><i>Dump a database</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_mysql_dump_db --database=database</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-d</code>, <code>--database=</code>: the database name to dump</li>
</ul><p><strong>Returns</strong>: The mysqldump output<p><strong>Example</strong>: <code>ynh_mysql_dump_db --database=roundcube > ./dump.sql</code><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/mysql#L146 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=postgresql>Postgresql<a href=#postgresql class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Postgresql" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Postgresql" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_psql_connect_as</code><br/><i>Open a connection as a user</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_psql_connect_as --user=user --password=password [--database=database]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-u</code>, <code>--user=</code>: the user name to connect as</li>
<li class=""><code>-p</code>, <code>--password=</code>: the user password</li>
<li class=""><code>-d</code>, <code>--database=</code>: the database to connect to</li>
</ul><p><strong>Examples</strong>:<ul>
<li class=""><code>ynh_psql_connect_as 'user' 'pass' &lt;&lt;&lt; "UPDATE ...;"</code></li>
<li class=""><code>ynh_psql_connect_as 'user' 'pass' &lt; /path/to/file.sql</code></li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/postgresql#L36 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_psql_execute_as_root</code><br/><i>Execute a command as root user</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_psql_execute_as_root --sql=sql [--database=database]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-s</code>, <code>--sql=</code>: the SQL command to execute</li>
<li class=""><code>-d</code>, <code>--database=</code>: the database to connect to</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/postgresql#L57 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_psql_execute_file_as_root</code><br/><i>Execute a command from a file as root user</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_psql_execute_file_as_root --file=file [--database=database]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-f</code>, <code>--file=</code>: the file containing SQL commands</li>
<li class=""><code>-d</code>, <code>--database=</code>: the database to connect to</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/postgresql#L82 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_psql_dump_db</code><br/><i>Dump a database</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_psql_dump_db --database=database</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-d</code>, <code>--database=</code>: the database name to dump</li>
</ul><p><strong>Returns</strong>: the psqldump output<p><strong>Example</strong>: <code>ynh_psql_dump_db 'roundcube' > ./dump.sql</code><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/postgresql#L153 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_psql_database_exists</code><br/><i>Check if a psql database exists</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_psql_database_exists --database=database | exit: Return 1 if the database doesn't exist, 0 otherwise</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-d</code>, <code>--database=</code>: the database for which to check existence</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/postgresql#L210 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=mongodb>Mongodb<a href=#mongodb class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Mongodb" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Mongodb" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_mongo_exec</code><br/><i>Execute a mongo command
example: ynh_mongo_exec --command='db.getMongo().getDBNames().indexOf("wekan")'
example: ynh_mongo_exec --command="db.getMongo().getDBNames().indexOf(&amp;#34;wekan&amp;#34;)"</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_mongo_exec [--user=user] [--password=password] [--authenticationdatabase=authenticationdatabase] [--database=database] [--host=host] [--port=port] --command="command" [--eval]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-u</code>, <code>--user=</code>: The user name to connect as</li>
<li class=""><code>-p</code>, <code>--password=</code>: The user password</li>
<li class=""><code>-d</code>, <code>--authenticationdatabase=</code>: The authenticationdatabase to connect to</li>
<li class=""><code>-d</code>, <code>--database=</code>: The database to connect to</li>
<li class=""><code>-h</code>, <code>--host=</code>: The host to connect to</li>
<li class=""><code>-P</code>, <code>--port=</code>: The port to connect to</li>
<li class=""><code>-c</code>, <code>--command=</code>: The command to evaluate</li>
<li class=""><code>-e</code>, <code>--eval</code>: Evaluate instead of execute the command.</li>
</ul><p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/mongodb#L35 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_mongo_dump_db</code><br/><i>Dump a database</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_mongo_dump_db --database=database</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-d</code>, <code>--database=</code>: The database name to dump</li>
</ul><p><strong>Returns</strong>: the mongodump output<p><strong>Example</strong>: <code>ynh_mongo_dump_db --database=wekan > ./dump.bson</code><p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/mongodb#L144 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_mongo_database_exists</code><br/><i>Check if a mongo database exists</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_mongo_database_exists --database=database | exit: Return 1 if the database doesn't exist, 0 otherwise</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-d</code>, <code>--database=</code>: The database for which to check existence</li>
</ul><p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/mongodb#L189 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_mongo_restore_db</code><br/><i>Restore a database</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_mongo_restore_db --database=database</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-d</code>, <code>--database=</code>: The database name to restore</li>
</ul><p><strong>Example</strong>: <code>ynh_mongo_restore_db --database=wekan &lt; ./dump.bson</code><p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/mongodb#L212 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_mongo_setup_db</code><br/><i>Create a database, an user and its password. Then store the password in the app's config</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_mongo_setup_db --db_user=user --db_name=name [--db_pwd=pwd]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-u</code>, <code>--db_user=</code>: Owner of the database</li>
<li class=""><code>-n</code>, <code>--db_name=</code>: Name of the database</li>
<li class=""><code>-p</code>, <code>--db_pwd=</code>: Password of the database. If not provided, a password will be generated</li>
</ul><p><strong>Details</strong>:
After executing this helper, the password of the created database will be available in $db_pwd
It will also be stored as "mongopwd" into the app settings.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/mongodb#L255 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_mongo_remove_db</code><br/><i>Remove a database if it exists, and the associated user</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_mongo_remove_db --db_user=user --db_name=name</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-u</code>, <code>--db_user=</code>: Owner of the database</li>
<li class=""><code>-n</code>, <code>--db_name=</code>: Name of the database</li>
</ul><p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/mongodb#L283 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_install_mongo</code><br/><i>Install MongoDB and integrate MongoDB service in YunoHost</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_install_mongo [--mongo_version=mongo_version]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-m</code>, <code>--mongo_version=</code>: Version of MongoDB to install</li>
</ul><p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/mongodb#L308 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_remove_mongo</code><br/><i>Remove MongoDB
Only remove the MongoDB service integration in YunoHost for now
if MongoDB package as been removed</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_remove_mongo</code><p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/mongodb#L351 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=redis>Redis<a href=#redis class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Redis" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Redis" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_redis_get_free_db</code><br/><i>get the first available redis database</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_redis_get_free_db</code><p><strong>Returns</strong>: the database number to use<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/redis#L25 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_redis_remove_db</code><br/><i>Create a master password and set up global settings
Please always call this script in install and restore scripts</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_redis_remove_db database</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>database</code>: the database to erase</li>
</ul><p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/redis#L52 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=configurations--templating>Configurations / Templating<a href=#configurations--templating class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Configurations / Templating" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Configurations / Templating" translate=no>‚Äã</a></h2>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=templating>Templating<a href=#templating class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Templating" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Templating" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_add_config</code><br/><i>Create a dedicated config file from a template</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_add_config --template="template" --destination="destination"</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-t</code>, <code>--template=</code>: Template config file to use</li>
<li class=""><code>-d</code>, <code>--destination=</code>: Destination of the config file</li>
<li class=""><code>-j</code>, <code>--jinja</code>: Use jinja template instead of the simple <code>__MY_VAR__</code> templating format</li>
</ul><p><strong>Examples</strong>:<ul>
<li class=""><code>ynh_add_config --template=".env" --destination="$install_dir/.env"   # (use the template file "conf/.env" from the app's package)</code></li>
<li class=""><code>ynh_add_config --jinja --template="config.j2" --destination="$install_dir/config"    # (use the template file "conf/config.j2" from the app's package)</code></li>
</ul><p><strong>Details</strong>:
The template can be by default the name of a file in the conf directory
of a YunoHost Package, a relative path or an absolute path.<p>The helper will use the template <code>template</code> to generate a config file
<code>destination</code> by replacing the following keywords with global variables
that should be defined before calling this helper :<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">  __PATH__                by $path_url</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  __NAME__                by $app</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  __NAMETOCHANGE__        by $app</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  __USER__                by $app</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  __FINALPATH__           by $final_path</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  __PHPVERSION__          by $YNH_PHP_VERSION (packaging v1 only, packaging v2 uses phpversion setting implicitly set by apt resource)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  __YNH_NODE_LOAD_PATH__  by $ynh_node_load_PATH</span><br/></span></code></pre></div></div><p>And any dynamic variables that should be defined before calling this helper like:<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">  __DOMAIN__   by $domain</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  __APP__      by $app</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  __VAR_1__    by $var_1</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  __VAR_2__    by $var_2</span><br/></span></code></pre></div></div><h5 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=when---jinja-is-enabled>When --jinja is enabled<a href=#when---jinja-is-enabled class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ When --jinja is enabled" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ When --jinja is enabled" translate=no>‚Äã</a></h5><p>This option is meant for advanced use-cases where the "simple" templating
mode ain't enough because you need conditional blocks or loops.<p>For a full documentation of jinja's syntax you can refer to:
<a href=https://jinja.palletsprojects.com/en/3.1.x/templates/ target=_blank rel="noopener noreferrer" class="">https://jinja.palletsprojects.com/en/3.1.x/templates/</a><p>Note that in YunoHost context, all variables are from shell variables and therefore are strings<h5 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=keeping-track-of-manual-changes-by-the-admin>Keeping track of manual changes by the admin<a href=#keeping-track-of-manual-changes-by-the-admin class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Keeping track of manual changes by the admin" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Keeping track of manual changes by the admin" translate=no>‚Äã</a></h5><p>The helper will verify the checksum and backup the destination file
if it's different before applying the new template.<p>And it will calculate and store the destination file checksum
into the app settings when configuration is done.<p>Requires YunoHost version 4.1.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/templating#L74 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_read_var_in_file</code><br/><i>Get a value from heterogeneous file (yaml, json, php, python...)</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_read_var_in_file --file=PATH --key=KEY</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-f</code>, <code>--file=</code>: the path to the file</li>
<li class=""><code>-k</code>, <code>--key=</code>: the key to get</li>
<li class=""><code>-a</code>, <code>--after=</code>: the line just before the key (in case of multiple lines with the name of the key in the file)</li>
</ul><p><strong>Details</strong>:
This helpers match several var affectation use case in several languages
We don't use jq or equivalent to keep comments and blank space in files
This helpers work line by line, it is not able to work correctly
if you have several identical keys in your files<p>Example of line this helpers can managed correctly
.yml
title: YunoHost documentation
email: '<a href=mailto:yunohost@yunohost.org target=_blank rel="noopener noreferrer" class="">yunohost@yunohost.org</a>'
.json
"theme": "colib'ris",
"port": 8102
"some_boolean":     false,
"user": null
.ini
some_boolean = On
action = "Clear"
port = 20
.php
$user=
user => 20
.py
USER = 8102
user = '<a href=https://donate.local target=_blank rel="noopener noreferrer" class="">https://donate.local</a>'
CUSTOM['user'] = 'YunoHost'<p>Requires YunoHost version 4.3 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/templating#L239 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_write_var_in_file</code><br/><i>Set a value into heterogeneous file (yaml, json, php, python...)</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_write_var_in_file --file=PATH --key=KEY --value=VALUE</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-f</code>, <code>--file=</code>: the path to the file</li>
<li class=""><code>-k</code>, <code>--key=</code>: the key to set</li>
<li class=""><code>-v</code>, <code>--value=</code>: the value to set</li>
<li class=""><code>-a</code>, <code>--after=</code>: the line just before the key (in case of multiple lines with the name of the key in the file)</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 4.3 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/templating#L317 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=nginx>Nginx<a href=#nginx class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Nginx" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Nginx" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_add_nginx_config</code><br/><i>Create a dedicated nginx config</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_add_nginx_config</code><p><strong>Details</strong>:
This will use a template in <code>../conf/nginx.conf</code>
See the documentation of <code>ynh_add_config</code> for a description of the template
format and how placeholders are replaced with actual variables.<p>Additionally, ynh_add_nginx_config will replace:<ul>
<li class=""><code>#sub_path_only</code>      by empty string if <code>path_url</code> is not <code>'/'</code></li>
<li class=""><code>#root_path_only</code>     by empty string if <code>path_url</code>  <em>is</em>  <code>'/'</code></li>
</ul><p>This allows to enable/disable specific behaviors dependenging on the install
location<p>Requires YunoHost version 4.1.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/nginx#L37 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_remove_nginx_config</code><br/><i>Remove the dedicated nginx config</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_remove_nginx_config</code><p><strong>Details</strong>:
Requires YunoHost version 2.7.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/nginx#L64 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_change_url_nginx_config</code><br/><i>Regen the nginx config in a change url context</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_change_url_nginx_config</code><p><strong>Details</strong>:
Requires YunoHost version 11.1.9 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/nginx#L74 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=php>Php<a href=#php class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Php" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Php" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_add_fpm_config</code><br/><i>Create a dedicated PHP-FPM config</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_add_fpm_config</code><p><strong>Details</strong>:
Case 1 (recommended) : your provided a snippet conf/extra_php-fpm.conf<p>The actual PHP configuration will be automatically generated,
and your extra_php-fpm.conf will be appended (typically contains PHP upload limits)<p>The resulting configuration will be deployed to the appropriate place, /etc/php/$phpversion/fpm/pool.d/$app.conf<p>Performance-related options in the PHP conf, such as :
pm.max_children, pm.start_servers, pm.min_spare_servers pm.max_spare_servers
are computed from two parameters called "usage" and "footprint" which can be set to low/medium/high. (cf details below)<p>If you wish to tweak those, please initialize the settings <code>fpm_usage</code> and <code>fpm_footprint</code>
<em>prior</em> to calling this helper. Otherwise, "low" will be used as a default for both values.<p>Otherwise, if you want the user to have control over these, we encourage to create a config panel
(which should ultimately be standardized by the core ...)<p>Case 2 (deprecate) : you provided an entire conf/php-fpm.conf<p>The configuration will be hydrated, replacing <strong>FOOBAR</strong> placeholders with $foobar values, etc.<p>The resulting configuration will be deployed to the appropriate place, /etc/php/$phpversion/fpm/pool.d/$app.conf<hr/><p>fpm_footprint: Memory footprint of the service (low/medium/high).
low    - Less than 20 MB of RAM by pool.
medium - Between 20 MB and 40 MB of RAM by pool.
high   - More than 40 MB of RAM by pool.
N      - Or you can specify a quantitative footprint as MB by pool (use watch -n0.5 ps -o user,cmd,%cpu,rss -u APP)<p>fpm_usage: Expected usage of the service (low/medium/high).
low    - Personal usage, behind the SSO.
medium - Low usage, few people or/and publicly accessible.
high   - High usage, frequently visited website.<p>The footprint of the service will be used to defined the maximum footprint we can allow, which is half the maximum RAM.
So it will be used to defined 'pm.max_children'
A lower value for the footprint will allow more children for 'pm.max_children'. And so for
'pm.start_servers', 'pm.min_spare_servers' and 'pm.max_spare_servers' which are defined from the
value of 'pm.max_children'
NOTE: 'pm.max_children' can't exceed 4 times the number of processor's cores.<p>The usage value will defined the way php will handle the children for the pool.
A value set as 'low' will set the process manager to 'ondemand'. Children will start only if the
service is used, otherwise no child will stay alive. This config gives the lower footprint when the
service is idle. But will use more proc since it has to start a child as soon it's used.
Set as 'medium', the process manager will be at dynamic. If the service is idle, a number of children
equal to pm.min_spare_servers will stay alive. So the service can be quick to answer to any request.
The number of children can grow if needed. The footprint can stay low if the service is idle, but
not null. The impact on the proc is a little bit less than 'ondemand' as there's always a few
children already available.
Set as 'high', the process manager will be set at 'static'. There will be always as many children as
'pm.max_children', the footprint is important (but will be set as maximum a quarter of the maximum
RAM) but the impact on the proc is lower. The service will be quick to answer as there's always many
children ready to answer.<p>Requires YunoHost version 4.1.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/php#L88 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_remove_fpm_config</code><br/><i>Remove the dedicated PHP-FPM config</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_remove_fpm_config</code><p><strong>Details</strong>:
Requires YunoHost version 2.7.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/php#L223 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=systemd>Systemd<a href=#systemd class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Systemd" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Systemd" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_add_systemd_config</code><br/><i>Create a dedicated systemd config</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_add_systemd_config [--service=service] [--template=template]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-s</code>, <code>--service=</code>: Service name (optionnal, <code>$app</code> by default)</li>
<li class=""><code>-t</code>, <code>--template=</code>: Name of template file (optionnal, this is 'systemd' by default, meaning <code>../conf/systemd.service</code> will be used as template)</li>
</ul><p><strong>Details</strong>:
This will use the template <code>../conf/&lt;templatename>.service</code>.<p>See the documentation of <code>ynh_add_config</code> for a description of the template
format and how placeholders are replaced with actual variables.<p>Requires YunoHost version 4.1.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/systemd#L33 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_remove_systemd_config</code><br/><i>Remove the dedicated systemd config</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_remove_systemd_config [--service=service]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-s</code>, <code>--service=</code>: Service name (optionnal, $app by default)</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.7.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/systemd#L56 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_systemd_action</code><br/><i>Start (or other actions) a service,  print a log in case of failure and optionnaly wait until the service is completely started</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_systemd_action [--service_name=service_name] [--action=action] [ [--line_match="line to match"] [--log_path=log_path] [--timeout=300] [--length=20] ]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-n</code>, <code>--service_name=</code>: Name of the service to start. Default : <code>$app</code></li>
<li class=""><code>-a</code>, <code>--action=</code>: Action to perform with systemctl. Default: start</li>
<li class=""><code>-l</code>, <code>--line_match=</code>: Line to match - The line to find in the log to attest the service have finished to boot. If not defined it don't wait until the service is completely started.</li>
<li class=""><code>-p</code>, <code>--log_path=</code>: Log file - Path to the log file. Default : <code>/var/log/$app/$app.log</code></li>
<li class=""><code>-t</code>, <code>--timeout=</code>: Timeout - The maximum time to wait before ending the watching. Default : 300 seconds.</li>
<li class=""><code>-e</code>, <code>--length=</code>: Length of the error log displayed for debugging : Default : 20</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/systemd#L85 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=fail2ban>Fail2ban<a href=#fail2ban class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Fail2ban" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Fail2ban" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_add_fail2ban_config</code><br/><i>Create a dedicated fail2ban config (jail and filter conf files)</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>1: ynh_add_fail2ban_config --logpath=log_file --failregex=filter [--max_retry=max_retry] [--ports=ports] 2: ynh_add_fail2ban_config --use_template</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-l</code>, <code>--logpath=</code>: Log file to be checked by fail2ban</li>
<li class=""><code>-r</code>, <code>--failregex=</code>: Failregex to be looked for by fail2ban</li>
<li class=""><code>-m</code>, <code>--max_retry=</code>: Maximum number of retries allowed before banning IP address - default: 3</li>
<li class=""><code>-p</code>, <code>--ports=</code>: Ports blocked for a banned IP address - default: http,https</li>
<li class=""><code>-t</code>, <code>--use_template</code>: Use this helper in template mode</li>
</ul><p><strong>Details</strong>:
This will use a template in <code>../conf/f2b_jail.conf</code> and <code>../conf/f2b_filter.conf</code>
See the documentation of <code>ynh_add_config</code> for a description of the template
format and how placeholders are replaced with actual variables.<p>Generally your template will look like that by example (for synapse):<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">f2b_jail.conf:</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    [__APP__]</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    enabled = true</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    port = http,https</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    filter = __APP__</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    logpath = /var/log/__APP__/logfile.log</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    maxretry = 3</span><br/></span></code></pre></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">f2b_filter.conf:</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    [INCLUDES]</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    before = common.conf</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    [Definition]</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"># Part of regex definition (just used to make more easy to make the global regex)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    __synapse_start_line = .? \- synapse\..+ \-</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"># Regex definition.</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">   failregex = ^%(__synapse_start_line)s INFO \- POST\-(\d+)\- &lt;HOST> \- \d+ \- Received request\: POST /_matrix/client/r0/login\??&lt;SKIPLINES>%(__synapse_start_line)s INFO \- POST\-\1\- Got login request with identifier: \{u'type': u'm.id.user', u'user'\: u'(.+?)'\}, medium\: None, address: None, user\: u'\5'&lt;SKIPLINES>%(__synapse_start_line)s WARNING \- \- (Attempted to login as @\5\:.+ but they do not exist|Failed password login for user @\5\:.+)$</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">ignoreregex =</span><br/></span></code></pre></div></div><h5 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=note-about-the-failregex-option>Note about the "failregex" option:<a href=#note-about-the-failregex-option class=hash-link aria-label='ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Note about the "failregex" option:' title='ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Note about the "failregex" option:' translate=no>‚Äã</a></h5><p>regex to match the password failure messages in the logfile. The host must be
matched by a group named "<code>host</code>". The tag "<code>&lt;HOST></code>" can be used for standard
IP/hostname matching and is only an alias for <code>(?:::f{4,6}:)?(?P&lt;host>[\w\-.^_]+)</code><p>You can find some more explainations about how to make a regex here :
<a href=https://www.fail2ban.org/wiki/index.php/MANUAL_0_8#Filters target=_blank rel="noopener noreferrer" class="">https://www.fail2ban.org/wiki/index.php/MANUAL_0_8#Filters</a><p>To validate your regex you can test with this command:<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">fail2ban-regex /var/log/YOUR_LOG_FILE_PATH /etc/fail2ban/filter.d/YOUR_APP.conf</span><br/></span></code></pre></div></div><p>Requires YunoHost version 4.1.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/fail2ban#L76 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_remove_fail2ban_config</code><br/><i>Remove the dedicated fail2ban config (jail and filter conf files)</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_remove_fail2ban_config</code><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/fail2ban#L148 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=logrotate>Logrotate<a href=#logrotate class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Logrotate" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Logrotate" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_use_logrotate</code><br/><i>Use logrotate to manage the logfile</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_use_logrotate [--logfile=/log/file] [--specific_user=user/group]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-l</code>, <code>--logfile=</code>: absolute path of logfile</li>
<li class=""><code>-u</code>, <code>--specific_user=</code>: run logrotate as the specified user and group. If not specified logrotate is runned as root.</li>
</ul><p><strong>Details</strong>:
If no <code>--logfile</code> is provided, <code>/var/log/$app</code> will be used as default.
<code>logfile</code> can point to a directory or a file.<p>Requires YunoHost version 2.6.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logrotate#L33 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_remove_logrotate</code><br/><i>Remove the app's logrotate config.</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_remove_logrotate</code><p><strong>Details</strong>:
Requires YunoHost version 2.6.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logrotate#L113 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=misc-tools>Misc Tools<a href=#misc-tools class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Misc Tools" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Misc Tools" translate=no>‚Äã</a></h2>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=utils>Utils<a href=#utils class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Utils" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Utils" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_local_curl</code><br/><i>Curl abstraction to help with POST requests to local pages (such as installation forms)</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_local_curl "page_uri" "key1=value1" "key2=value2" ...</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>page_uri</code>: Path (relative to <code>$path_url</code>) of the page where POST data will be sent</li>
<li class=""><code>key1=value1</code>: (Optionnal) POST key and corresponding value</li>
<li class=""><code>key2=value2</code>: (Optionnal) Another POST key and corresponding value</li>
<li class=""><code>...</code>: (Optionnal) More POST keys and values</li>
</ul><p><strong>Example</strong>: <code>ynh_local_curl "/install.php?installButton" "foo=$var1" "bar=$var2"</code><p><strong>Details</strong>:
For multiple calls, cookies are persisted between each call for the same app<p><code>$domain</code> and <code>$path_url</code> should be defined externally (and correspond to the domain.tld and the /path (of the app?))<p>Requires YunoHost version 2.6.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/utils#L106 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_secure_remove</code><br/><i>Remove a file or a directory securely</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_secure_remove --file=path_to_remove</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-f</code>, <code>--file=</code>: File or directory to remove</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.6.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/utils#L188 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_read_manifest</code><br/><i>Read the value of a key in a ynh manifest file</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_read_manifest --manifest="manifest.json" --manifest_key="key"</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-m</code>, <code>--manifest=</code>: Path of the manifest to read</li>
<li class=""><code>-k</code>, <code>--manifest_key=</code>: Name of the key to find</li>
</ul><p><strong>Returns</strong>: the value associate to that key<p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/utils#L222 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_app_upstream_version</code><br/><i>Read the upstream version from the manifest or <code>$YNH_APP_MANIFEST_VERSION</code></i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_app_upstream_version [--manifest="manifest.json"]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-m</code>, <code>--manifest=</code>: Path of the manifest to read</li>
</ul><p><strong>Returns</strong>: the version number of the upstream app<p><strong>Details</strong>:
If the <code>manifest</code> is not specified, the envvar <code>$YNH_APP_MANIFEST_VERSION</code> will be used.<p>The version number in the manifest is defined by <code>&lt;upstreamversion>~ynh&lt;packageversion></code>.<p>For example, if the manifest contains <code>4.3-2~ynh3</code> the function will return <code>4.3-2</code><p>Requires YunoHost version 3.5.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/utils#L262 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_check_app_version_changed</code><br/><i>Checks the app version to upgrade with the existing app version and returns:</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_check_app_version_changed</code><p><strong>Returns</strong>: <code>UPGRADE_APP</code> if the upstream version changed, <code>UPGRADE_PACKAGE</code> otherwise.<p><strong>Details</strong>:
This helper should be used to avoid an upgrade of an app, or the upstream part
of it, when it's not needed<p>Requires YunoHost version 3.5.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/utils#L314 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_compare_current_package_version</code><br/><i>Compare the current package version against another version given as an argument.</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_compare_current_package_version --comparison (lt|le|eq|ne|ge|gt) --version &lt;X~ynhY></code><p><strong>Arguments</strong>:<ul>
<li class=""><code>--comparison</code>: Comparison type. Could be : <code>lt</code> (lower than), <code>le</code> (lower or equal), <code>eq</code> (equal), <code>ne</code> (not equal), <code>ge</code> (greater or equal), <code>gt</code> (greater than)</li>
<li class=""><code>--version</code>: The version to compare. Need to be a version in the yunohost package version type (like <code>2.3.1~ynh4</code>)</li>
</ul><p><strong>Returns</strong>: 0 if the evaluation is true, 1 if false.<p><strong>Example</strong>: <code>ynh_compare_current_package_version --comparison lt --version 2.3.2~ynh1</code><p><strong>Details</strong>:
This helper is usually used when we need to do some actions only for some old package versions.<p>Generally you might probably use it as follow in the upgrade script :<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">if ynh_compare_current_package_version --comparison lt --version 2.3.2~ynh1</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">then</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    # Do something that is needed for the package version older than 2.3.2~ynh1</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">fi</span><br/></span></code></pre></div></div><p>Requires YunoHost version 3.8.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/utils#L344 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_user_exists</code><br/><i>Check if a YunoHost user exists</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_user_exists --username=username</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-u</code>, <code>--username=</code>: the username to check</li>
</ul><p><strong>Returns</strong>: 0 if the user exists, 1 otherwise.<p><strong>Example</strong>: <code>ynh_user_exists 'toto' || echo "User does not exist"</code><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/utils#L421 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_user_get_info</code><br/><i>Retrieve a YunoHost user information</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_user_get_info --username=username --key=key</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-u</code>, <code>--username=</code>: the username to retrieve info from</li>
<li class=""><code>-k</code>, <code>--key=</code>: the key to retrieve</li>
</ul><p><strong>Returns</strong>: the value associate to that key<p><strong>Example</strong>: <code>mail=$(ynh_user_get_info --username="toto" --key=mail)</code><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/utils#L442 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_user_list</code><br/><i>Get the list of YunoHost users</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_user_list</code><p><strong>Returns</strong>: one username per line as strings<p><strong>Example</strong>: <code>for u in $(ynh_user_list); do ... ; done</code><p><strong>Details</strong>:
Requires YunoHost version 2.4.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/utils#L462 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=setting>Setting<a href=#setting class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Setting" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Setting" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_app_setting_get</code><br/><i>Get an application setting</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_app_setting_get --app=app --key=key</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-a</code>, <code>--app=</code>: the application id</li>
<li class=""><code>-k</code>, <code>--key=</code>: the setting to get</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/setting#L28 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_app_setting_set</code><br/><i>Set an application setting</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_app_setting_set --app=app --key=key --value=value</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-a</code>, <code>--app=</code>: the application id</li>
<li class=""><code>-k</code>, <code>--key=</code>: the setting name to set</li>
<li class=""><code>-v</code>, <code>--value=</code>: the setting value to set</li>
</ul><p><strong>Details</strong>:
When choosing the setting key's name, note that including the following keywords will make the associated setting's value appear masked in the debug logs (cf. <a href=https://github.com/YunoHost/yunohost/blob/216210d5e97070b85c96ebb4548c6abf36987771/src/log.py#L571 target=_blank rel="noopener noreferrer" class="">related code</a>): <code>pwd</code>, <code>pass</code>, <code>passwd</code>, <code>password</code>, <code>passphrase</code>, <code>secret\w*</code> (regex),  <code>\w+key</code> (regex), <code>token</code>, <code>PASSPHRASE</code>
This is meant to allow sharing the logs while preserving confidential data, but having this in mind is useful would you expect to see those values while debugging your scripts.<p>Requires YunoHost version 2.2.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/setting#L53 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_app_setting_set_default</code><br/><i>Set an application setting but only if the "$key" variable ain't set yet</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_app_setting_set_default --app=app --key=key --value=value</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-a</code>, <code>--app=</code>: the application id</li>
<li class=""><code>-k</code>, <code>--key=</code>: the setting name to set</li>
<li class=""><code>-v</code>, <code>--value=</code>: the default setting value to set</li>
</ul><p><strong>Details</strong>:
Note that it doesn't just define the setting but ALSO define the $foobar variable<p>Hence it's meant as a replacement for this legacy overly complex syntax:<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">if [ -z "${foo:-}" ]</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">then</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    foo="bar"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    ynh_app_setting_set --key="foo" --value="$foo"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">fi</span><br/></span></code></pre></div></div><p>Requires YunoHost version 11.1.16 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/setting#L88 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_app_setting_delete</code><br/><i>Delete an application setting</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_app_setting_delete --app=app --key=key</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-a</code>, <code>--app=</code>: the application id</li>
<li class=""><code>-k</code>, <code>--key=</code>: the setting to delete</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/setting#L113 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=string>String<a href=#string class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ String" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ String" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_string_random</code><br/><i>Generate a random string</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_string_random [--length=string_length]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-l</code>, <code>--length=</code>: the string length to generate (default: 24)</li>
<li class=""><code>-f</code>, <code>--filter=</code>: the kind of characters accepted in the output (default: 'A-Za-z0-9')</li>
</ul><p><strong>Returns</strong>: the generated string<p><strong>Example</strong>: <code>pwd=$(ynh_string_random --length=8)</code><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/string#L31 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_replace_string</code><br/><i>Substitute/replace a string (or expression) by another in a file</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_replace_string --match_string=match_string --replace_string=replace_string --target_file=target_file</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-m</code>, <code>--match_string=</code>: String to be searched and replaced in the file</li>
<li class=""><code>-r</code>, <code>--replace_string=</code>: String that will replace matches</li>
<li class=""><code>-f</code>, <code>--target_file=</code>: File in which the string will be replaced.</li>
</ul><p><strong>Details</strong>:
As this helper is based on sed command, regular expressions and references to
sub-expressions can be used (see sed manual page for more information)<p>Requires YunoHost version 2.6.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/string#L56 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_replace_special_string</code><br/><i>Substitute/replace a special string by another in a file</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_replace_special_string --match_string=match_string --replace_string=replace_string --target_file=target_file</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-m</code>, <code>--match_string=</code>: String to be searched and replaced in the file</li>
<li class=""><code>-r</code>, <code>--replace_string=</code>: String that will replace matches</li>
<li class=""><code>-t</code>, <code>--target_file=</code>: File in which the string will be replaced.</li>
</ul><p><strong>Details</strong>:
This helper will use ynh_replace_string, but as you can use special
characters, you can't use some regular expressions and sub-expressions.<p>Requires YunoHost version 2.7.7 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/string#L87 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=backup>Backup<a href=#backup class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Backup" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Backup" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_backup</code><br/><i>Add a file or a directory to the list of paths to backup</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_backup --src_path=src_path [--dest_path=dest_path] [--is_big] [--not_mandatory]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-s</code>, <code>--src_path=</code>: file or directory to bind or symlink or copy. it shouldn't be in the backup dir.</li>
<li class=""><code>-d</code>, <code>--dest_path=</code>: destination file or directory inside the backup dir</li>
<li class=""><code>-b</code>, <code>--is_big</code>: Indicate data are big (mail, video, image ...)</li>
<li class=""><code>-m</code>, <code>--not_mandatory</code>: Indicate that if the file is missing, the backup can ignore it.</li>
</ul><p><strong>Details</strong>:
This helper can be used both in a system backup hook, and in an app backup script<p><code>ynh_backup</code> writes <code>src_path</code> and the relative <code>dest_path</code> into a CSV file, and it
creates the parent destination directory<p>If <code>dest_path</code> is ended by a slash it complete this path with the basename of <code>src_path</code>.<p>Example in the context of a wordpress app :<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">ynh_backup "/etc/nginx/conf.d/$domain.d/$app.conf"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"># => This line will be added into CSV file</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"># "/etc/nginx/conf.d/$domain.d/$app.conf","apps/wordpress/etc/nginx/conf.d/$domain.d/$app.conf"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">ynh_backup "/etc/nginx/conf.d/$domain.d/$app.conf" "conf/nginx.conf"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"># => "/etc/nginx/conf.d/$domain.d/$app.conf","apps/wordpress/conf/nginx.conf"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">ynh_backup "/etc/nginx/conf.d/$domain.d/$app.conf" "conf/"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"># => "/etc/nginx/conf.d/$domain.d/$app.conf","apps/wordpress/conf/$app.conf"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">ynh_backup "/etc/nginx/conf.d/$domain.d/$app.conf" "conf"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"># => "/etc/nginx/conf.d/$domain.d/$app.conf","apps/wordpress/conf"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">#Deprecated usages (maintained for retro-compatibility)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">ynh_backup "/etc/nginx/conf.d/$domain.d/$app.conf" "${backup_dir}/conf/nginx.conf"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"># => "/etc/nginx/conf.d/$domain.d/$app.conf","apps/wordpress/conf/nginx.conf"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">ynh_backup "/etc/nginx/conf.d/$domain.d/$app.conf" "/conf/"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"># => "/etc/nginx/conf.d/$domain.d/$app.conf","apps/wordpress/conf/$app.conf"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span></code></pre></div></div><p>How to use <code>--is_big</code>:<p><code>--is_big</code> is used to specify that this part of the backup can be quite huge.
So, you don't want that your package does backup that part during ynh_backup_before_upgrade.
In the same way, an user may doesn't want to backup this big part of the app for
each of his backup. And so handle that part differently.<p>As this part of your backup may not be done, your restore script has to handle it.
In your restore script, use <code>--not_mandatory</code> with <code>ynh_restore_file</code>
As well in your remove script, you should not remove those data ! Or an user may end up with
a failed upgrade restoring an app without data anymore !<p>To have the benefit of <code>--is_big</code> while doing a backup, you can whether set the environement
variable <code>BACKUP_CORE_ONLY</code> to 1 (<code>BACKUP_CORE_ONLY=1</code>) before the backup command. It will affect
only that backup command.
Or set the config <code>do_not_backup_data</code> to 1 into the <code>settings.yml</code> of the app. This will affect
all backups for this app until the setting is removed.<p>Requires YunoHost version 2.4.0 or higher.
Requires YunoHost version 3.5.0 or higher for the argument <code>--not_mandatory</code><p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/backup#L82 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_restore</code><br/><i>Restore all files that were previously backuped in a core backup script or app backup script</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_restore</code><p><strong>Details</strong>:
Requires YunoHost version 2.6.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/backup#L197 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_restore_file</code><br/><i>Restore a file or a directory</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_restore_file --origin_path=origin_path [--dest_path=dest_path] [--not_mandatory]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-o</code>, <code>--origin_path=</code>: Path where was located the file or the directory before to be backuped or relative path to $YNH_CWD where it is located in the backup archive</li>
<li class=""><code>-d</code>, <code>--dest_path=</code>: Path where restore the file or the dir. If unspecified, the destination will be <code>ORIGIN_PATH</code> or if the <code>ORIGIN_PATH</code> doesn't exist in the archive, the destination will be searched into <code>backup.csv</code></li>
<li class=""><code>-m</code>, <code>--not_mandatory</code>: Indicate that if the file is missing, the restore process can ignore it.</li>
</ul><p><strong>Examples</strong>:<ul>
<li class=""><code>ynh_restore_file -o "/etc/nginx/conf.d/$domain.d/$app.conf"</code></li>
<li class=""><code>You can also use relative paths:</code></li>
<li class=""><code>ynh_restore_file -o "conf/nginx.conf"</code></li>
</ul><p><strong>Details</strong>:
Use the registered path in backup_list by ynh_backup to restore the file at the right place.<p>If <code>DEST_PATH</code> already exists and is lighter than 500 Mo, a backup will be made in
<code>/var/cache/yunohost/appconfbackup/</code>. Otherwise, the existing file is removed.<p>if <code>apps/$app/etc/nginx/conf.d/$domain.d/$app.conf</code> exists, restore it into
<code>/etc/nginx/conf.d/$domain.d/$app.conf</code>
if no, search for a match in the csv (eg: conf/nginx.conf) and restore it into
<code>/etc/nginx/conf.d/$domain.d/$app.conf</code><p>Requires YunoHost version 2.6.4 or higher.
Requires YunoHost version 3.5.0 or higher for the argument --not_mandatory<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/backup#L256 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_store_file_checksum</code><br/><i>Calculate and store a file checksum into the app settings</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_store_file_checksum --file=file</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-f</code>, <code>--file=</code>: The file on which the checksum will performed, then stored.</li>
</ul><p><strong>Details</strong>:
$app should be defined when calling this helper<p>Requires YunoHost version 2.6.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/backup#L323 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_backup_if_checksum_is_different</code><br/><i>Verify the checksum and backup the file if it's different</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_backup_if_checksum_is_different --file=file</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-f</code>, <code>--file=</code>: The file on which the checksum test will be perfomed.</li>
</ul><p><strong>Returns</strong>: the name of a backup file, or nothing<p><strong>Details</strong>:
This helper is primarily meant to allow to easily backup personalised/manually
modified config files.<p>Requires YunoHost version 2.6.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/backup#L374 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_delete_file_checksum</code><br/><i>Delete a file checksum from the app settings</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_delete_file_checksum --file=file</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-f</code>, <code>--file=</code>: The file for which the checksum will be deleted</li>
</ul><p><strong>Details</strong>:
$app should be defined when calling this helper<p>Requires YunoHost version 3.3.1 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/backup#L413 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=logging>Logging<a href=#logging class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Logging" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Logging" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_die</code><br/><i>Print a message to stderr and exit</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_die --message=MSG [--ret_code=RETCODE]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-m</code>, <code>--message=</code>: Message to display</li>
<li class=""><code>-c</code>, <code>--ret_code=</code>: Exit code to exit with</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.4.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logging#L28 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_print_info</code><br/><i>Display a message in the 'INFO' logging category</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_print_info --message="Some message"</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-m</code>, <code>--message=</code>: Message to display</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.2.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logging#L48 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_print_warn</code><br/><i>Print a warning on stderr</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_print_warn --message="Text to print"</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-m</code>, <code>--message=</code>: The text to print</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.2.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logging#L74 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_print_err</code><br/><i>Print an error on stderr</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_print_err --message="Text to print"</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-m</code>, <code>--message=</code>: The text to print</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.2.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logging#L91 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_exec_err</code><br/><i>Execute a command and print the result as an error</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_exec_err your command and args</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>command</code>: command to execute</li>
</ul><p><strong>Details</strong>:
Note that you should NOT quote the command but only prefix it with ynh_exec_err<p>Requires YunoHost version 3.2.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logging#L110 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_exec_warn</code><br/><i>Execute a command and print the result as a warning</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_exec_warn your command and args</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>command</code>: command to execute</li>
</ul><p><strong>Details</strong>:
Note that you should NOT quote the command but only prefix it with ynh_exec_warn<p>Requires YunoHost version 3.2.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logging#L130 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_exec_warn_less</code><br/><i>Execute a command and force the result to be printed on stdout</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_exec_warn_less your command and args</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>command</code>: command to execute</li>
</ul><p><strong>Details</strong>:
Note that you should NOT quote the command but only prefix it with ynh_exec_warn<p>Requires YunoHost version 3.2.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logging#L150 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_exec_quiet</code><br/><i>Execute a command and redirect stdout in /dev/null</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_exec_quiet your command and args</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>command</code>: command to execute</li>
</ul><p><strong>Details</strong>:
Note that you should NOT quote the command but only prefix it with ynh_exec_warn<p>Requires YunoHost version 3.2.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logging#L170 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_exec_fully_quiet</code><br/><i>Execute a command and redirect stdout and stderr in /dev/null</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_exec_quiet your command and args</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>command</code>: command to execute</li>
</ul><p><strong>Details</strong>:
Note that you should NOT quote the command but only prefix it with ynh_exec_quiet<p>Requires YunoHost version 3.2.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logging#L190 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_exec_and_print_stderr_only_if_error</code><br/><i>Execute a command and redirect stderr in /dev/null. Print stderr on error.</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_exec_and_print_stderr_only_if_error your command and args</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>command</code>: command to execute</li>
</ul><p><strong>Details</strong>:
Note that you should NOT quote the command but only prefix it with ynh_exec_and_print_stderr_only_if_error<p>Requires YunoHost version 11.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logging#L210 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_script_progression</code><br/><i>Print a progress bar showing the progression of an app script</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_script_progression --message=message [--weight=weight] [--time]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-m</code>, <code>--message=</code>: The text to print</li>
<li class=""><code>-w</code>, <code>--weight=</code>: The weight for this progression. This value is 1 by default. Use a bigger value for a longer part of the script.</li>
<li class=""><code>-t</code>, <code>--time</code>: Print the execution time since the last call to this helper. Especially usefull to define weights. The execution time is given for the duration since the previous call. So the weight should be applied to this previous call.</li>
<li class=""><code>-l</code>, <code>--last</code>: Use for the last call of the helper, to fill the progression bar.</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logging#L270 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_return</code><br/><i>Return data to the YunoHost core for later processing
(to be used by special hooks like app config panel and core diagnosis)</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_return somedata</code><p><strong>Details</strong>:
Requires YunoHost version 3.6.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/logging#L358 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=multimedia>Multimedia<a href=#multimedia class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Multimedia" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Multimedia" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_multimedia_build_main_dir</code><br/><i>Initialize the multimedia directory system</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_multimedia_build_main_dir</code><p><strong>Details</strong>:
Requires YunoHost version 4.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/multimedia#L29 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_multimedia_addfolder</code><br/><i>Add a directory in yunohost.multimedia</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_multimedia_addfolder --source_dir="source_dir" --dest_dir="dest_dir"</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-s</code>, <code>--source_dir=</code>: Source directory - The real directory which contains your medias.</li>
<li class=""><code>-d</code>, <code>--dest_dir=</code>: Destination directory - The name and the place of the symbolic link, relative to "/home/yunohost.multimedia"</li>
</ul><p><strong>Details</strong>:
This "directory" will be a symbolic link to a existing directory.<p>Requires YunoHost version 4.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/multimedia#L90 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_multimedia_addaccess</code><br/><i>Allow an user to have an write authorisation in multimedia directories</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_multimedia_addaccess user_name</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-u</code>, <code>--user_name=</code>: The name of the user which gain this access.</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 4.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/multimedia#L119 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=deprecated-or-handled-by-the-core--app-resources-since-v2>Deprecated Or Handled By The Core / App Resources Since V2<a href=#deprecated-or-handled-by-the-core--app-resources-since-v2 class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Deprecated Or Handled By The Core / App Resources Since V2" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Deprecated Or Handled By The Core / App Resources Since V2" translate=no>‚Äã</a></h2>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=permission>Permission<a href=#permission class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Permission" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Permission" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_permission_create</code><br/><i>Create a new permission for the app</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_permission_create --permission="permission" [--url="url"] [--additional_urls="second-url" [ "third-url" ]] [--auth_header=true|false]                                                        [--allowed=group1 [ group2 ]] [--show_tile=true|false]                                                        [--protected=true|false]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-p</code>, <code>--permission=</code>: the name for the permission (by default a permission named "main" already exist)</li>
<li class=""><code>-u</code>, <code>--url=</code>: (optional) URL for which access will be allowed/forbidden. Note that if 'show_tile' is enabled, this URL will be the URL of the tile.</li>
<li class=""><code>-A</code>, <code>--additional_urls=</code>: (optional) List of additional URL for which access will be allowed/forbidden</li>
<li class=""><code>-h</code>, <code>--auth_header=</code>: (optional) Define for the URL of this permission, if SSOwat pass the authentication header to the application. Default is true</li>
<li class=""><code>-a</code>, <code>--allowed=</code>: (optional) A list of group/user to allow for the permission</li>
<li class=""><code>-t</code>, <code>--show_tile=</code>: (optional) Define if a tile will be shown in the SSO. If yes the name of the tile will be the 'label' parameter. Defaults to false for the permission different than 'main'.</li>
<li class=""><code>-P</code>, <code>--protected=</code>: (optional) Define if this permission is protected. If it is protected the administrator won't be able to add or remove the visitors group of this permission. Defaults to 'false'.</li>
</ul><p><strong>Details</strong>:
Example 1: <code>ynh_permission_create --permission=admin --url=/admin --additional_urls=domain.tld/admin /superadmin --allowed=alice bob \                                  --show_tile=true</code><p>This example will create a new permission permission with this following effect:<ul>
<li class="">A tile named "My app admin" in the SSO will be available for the users alice and bob. This tile will point to the relative url '/admin'.</li>
<li class="">Only the user alice and bob will have the access to theses following url: /admin, domain.tld/admin, /superadmin</li>
</ul><p>Example 2:<p>ynh_permission_create --permission=api --url=domain.tld/api --auth_header=false --allowed=visitors <br/>
<!-- -->--protected=true<p>This example will create a new protected permission. So the admin won't be able to add/remove the visitors group of this permission.
In case of an API with need to be always public it avoid that the admin break anything.
With this permission all client will be allowed to access to the url 'domain.tld/api'.
Note that in this case no tile will be show on the SSO.
Note that the auth_header parameter is to 'false'. So no authentication header will be passed to the application.
Generally the API is requested by an application and enabling the auth_header has no advantage and could bring some issues in some case.
So in this case it's better to disable this option for all API.<p>If provided, 'url' or 'additional_urls' is assumed to be relative to the app domain/path if they
start with '/'.  For example:
/                             -> domain.tld/app
/admin                        -> domain.tld/app/admin
domain.tld/app/api            -> domain.tld/app/api<p>'url' or 'additional_urls' can be treated as a PCRE (not lua) regex if it starts with "re:".
For example:
re:/api/[A-Z]<em>$               -> domain.tld/app/api/[A-Z]</em>$
re<!-- -->:domain<!-- -->.tld/app/api/[A-Z]<em>$ -> domain.tld/app/api/[A-Z]</em>$<p>Note that globally the parameter 'url' and 'additional_urls' are same. The only difference is:<ul>
<li class="">'url' is only one url, 'additional_urls' can be a list of urls. There are no limitation of 'additional_urls'</li>
<li class="">'url' is used for the url of tile in the SSO (if enabled with the 'show_tile' parameter)</li>
</ul><p>About the authentication header (auth_header parameter).
The SSO pass (by default) to the application theses following HTTP header (linked to the authenticated user) to the application:<ul>
<li class="">"Auth-User": username</li>
<li class="">"Remote-User": username</li>
<li class="">"Email": user email</li>
</ul><p>Generally this feature is usefull to authenticate automatically the user in the application but in some case the application don't work with theses header and theses header need to be disabled to have the application to work correctly.
See <a href=https://github.com/YunoHost/issues/issues/1420 target=_blank rel="noopener noreferrer" class="">https://github.com/YunoHost/issues/issues/1420</a> for more informations<p>Requires YunoHost version 3.7.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/permission#L83 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_permission_delete</code><br/><i>Remove a permission for the app (note that when the app is removed all permission is automatically removed)</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_permission_delete --permission="permission"</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-p</code>, <code>--permission=</code>: the name for the permission (by default a permission named "main" is removed automatically when the app is removed)</li>
</ul><p><strong>Example</strong>: <code>ynh_permission_delete --permission=editors</code><p><strong>Details</strong>:
Requires YunoHost version 3.7.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/permission#L161 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_permission_exists</code><br/><i>Check if a permission exists</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_permission_exists --permission=permission | exit: Return 1 if the permission doesn't exist, 0 otherwise</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-p</code>, <code>--permission=</code>: the permission to check</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.7.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/permission#L178 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_permission_url</code><br/><i>Redefine the url associated to a permission</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_permission_url --permission "permission" [--url="url"] [--add_url="new-url" [ "other-new-url" ]] [--remove_url="old-url" [ "other-old-url" ]]                                                     [--auth_header=true|false] [--clear_urls]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-p</code>, <code>--permission=</code>: the name for the permission (by default a permission named "main" is removed automatically when the app is removed)</li>
<li class=""><code>-u</code>, <code>--url=</code>: (optional) URL for which access will be allowed/forbidden. Note that if you want to remove url you can pass an empty sting as arguments ("").</li>
<li class=""><code>-a</code>, <code>--add_url=</code>: (optional) List of additional url to add for which access will be allowed/forbidden.</li>
<li class=""><code>-r</code>, <code>--remove_url=</code>: (optional) List of additional url to remove for which access will be allowed/forbidden</li>
<li class=""><code>-h</code>, <code>--auth_header=</code>: (optional) Define for the URL of this permission, if SSOwat pass the authentication header to the application</li>
<li class=""><code>-c</code>, <code>--clear_urls</code>: (optional) Clean all urls (url and additional_urls)</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.7.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/permission#L201 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_permission_update</code><br/><i>Update a permission for the app</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_permission_update --permission "permission" [--add="group" ["group" ...]] [--remove="group" ["group" ...]]                                                        [--show_tile=true|false] [--protected=true|false]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-p</code>, <code>--permission=</code>: the name for the permission (by default a permission named "main" already exist)</li>
<li class=""><code>-a</code>, <code>--add=</code>: the list of group or users to enable add to the permission</li>
<li class=""><code>-r</code>, <code>--remove=</code>: the list of group or users to remove from the permission</li>
<li class=""><code>-t</code>, <code>--show_tile=</code>: (optional) Define if a tile will be shown in the SSO</li>
<li class=""><code>-P</code>, <code>--protected=</code>: (optional) Define if this permission is protected. If it is protected the administrator won't be able to add or remove the visitors group of this permission.</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.7.0 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/permission#L268 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_permission_has_user</code><br/><i>Check if a permission has an user</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_permission_has_user --permission=permission --user=user | exit: Return 1 if the permission doesn't have that user or doesn't exist, 0 otherwise</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-p</code>, <code>--permission=</code>: the permission to check</li>
<li class=""><code>-u</code>, <code>--user=</code>: the user seek in the permission</li>
</ul><p><strong>Example</strong>: <code>ynh_permission_has_user --permission=main --user=visitors</code><p><strong>Details</strong>:
Requires YunoHost version 3.7.1 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/permission#L331 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_legacy_permissions_exists</code><br/><i>Check if a legacy permissions exist</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_legacy_permissions_exists | exit: Return 1 if the permission doesn't exist, 0 otherwise</code><p><strong>Details</strong>:
Requires YunoHost version 4.1.2 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/permission#L361 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_legacy_permissions_delete_all</code><br/><i>Remove all legacy permissions</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_legacy_permissions_delete_all</code><p><strong>Example</strong>: <code>if ynh_legacy_permissions_exists then ynh_legacy_permissions_delete_all # You can recreate the required permissions here with ynh_permission_create fi Requires YunoHost version 4.1.2 or higher.</code><p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/permission#L381 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=apt>Apt<a href=#apt class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Apt" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Apt" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_package_is_installed</code><br/><i>Check either a package is installed or not</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_package_is_installed --package=name</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-p</code>, <code>--package=</code>: the package name to check</li>
</ul><p><strong>Returns</strong>: 0 if the package is installed, 1 else.<p><strong>Example</strong>: <code>ynh_package_is_installed --package=yunohost && echo "installed"</code><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/apt#L71 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_install_app_dependencies</code><br/><i>Define and install dependencies with a equivs control file</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_install_app_dependencies dep [dep [...]]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>dep</code>: the package name to install in dependence.</li>
<li class=""><code>"dep1|dep2|‚Ä¶"</code>: You can specify alternatives. It will require to install (dep1 or dep2, etc).</li>
</ul><p><strong>Details</strong>:
This helper can/should only be called once per app<p>example : ynh_install_app_dependencies dep1 dep2 "dep3|dep4|dep5"<p>Requires YunoHost version 2.6.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/apt#L257 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_remove_app_dependencies</code><br/><i>Remove fake package and its dependencies</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_remove_app_dependencies</code><p><strong>Details</strong>:
Dependencies will removed only if no other package need them.<p>Requires YunoHost version 2.6.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/apt#L386 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_install_extra_app_dependencies</code><br/><i>Install packages from an extra repository properly.</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_install_extra_app_dependencies --repo="repo" --package="dep1 dep2" [--key=key_url] [--name=name]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-r</code>, <code>--repo=</code>: Complete url of the extra repository.</li>
<li class=""><code>-p</code>, <code>--package=</code>: The packages to install from this extra repository</li>
<li class=""><code>-k</code>, <code>--key=</code>: url to get the public key.</li>
<li class=""><code>-n</code>, <code>--name=</code>: Name for the files for this repo, $app as default value.</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.8.1 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/apt#L418 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=systemuser>Systemuser<a href=#systemuser class=hash-link aria-label="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Systemuser" title="ÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ÿßŸÑÿπŸÜŸàÿßŸÜ Systemuser" translate=no>‚Äã</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_system_user_create</code><br/><i>Create a system user</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_system_user_create --username=user_name [--home_dir=home_dir] [--use_shell] [--groups="group1 group2"]</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-u</code>, <code>--username=</code>: Name of the system user that will be create</li>
<li class=""><code>-h</code>, <code>--home_dir=</code>: Path of the home dir for the user. Usually the final path of the app. If this argument is omitted, the user will be created without home</li>
<li class=""><code>-s</code>, <code>--use_shell</code>: Create a user using the default login shell if present. If this argument is omitted, the user will be created with /usr/sbin/nologin shell</li>
<li class=""><code>-g</code>, <code>--groups</code>: Add the user to system groups. Typically meant to add the user to the ssh.app / sftp.app group (e.g. for borgserver, my_webapp)</li>
</ul><p><strong>Details</strong>:
Create a nextcloud user with no home directory and /usr/sbin/nologin login shell (hence no login capability) :<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">ynh_system_user_create --username=nextcloud</span><br/></span></code></pre></div></div><p>Create a discourse user using /var/www/discourse as home directory and the default login shell :<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">ynh_system_user_create --username=discourse --home_dir=/var/www/discourse --use_shell</span><br/></span></code></pre></div></div><p>Requires YunoHost version 2.6.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/systemuser#L79 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_system_user_delete</code><br/><i>Delete a system user</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_system_user_delete --username=user_name</code><p><strong>Arguments</strong>:<ul>
<li class=""><code>-u</code>, <code>--username=</code>: Name of the system user that will be create</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.6.4 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/systemuser#L121 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary><code>ynh_exec_as</code><br/><i>Execute a command as another user</i></summary><div><div class=collapsibleContent_i85q><p><strong>Usage</strong>: <code>ynh_exec_as $USER COMMAND [ARG ...]</code><p><strong>Details</strong>:
Requires YunoHost version 4.1.7 or higher.<p><a href=https://github.com/YunoHost/yunohost/blob/b91ab52deb47b942572790cc4b4b36b4b15ec365/helpers/helpers.v1.d/systemuser#L147 target=_blank rel="noopener noreferrer" class="">Dude, show me the code!</a></div></div></details>
<hr/></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href=https://github.com/YunoHost/doc/tree/main/docs/dev/50.packaging/20.scripts/20.helpers_v2.0.mdx target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>ÿ™ÿπÿØŸäŸÑ Ÿáÿ∞Ÿá ÿßŸÑÿµŸÅÿ≠ÿ©</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="ÿµŸÅÿ≠ÿ© ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ"><a class="pagination-nav__link pagination-nav__link--prev" href=/doc/pr-2675/ar/dev/packaging/scripts/shell_variables_scope><div class=pagination-nav__sublabel>ÿßŸÑÿ≥ÿßÿ®ŸÇ</div><div class=pagination-nav__label>General scope of variables</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/doc/pr-2675/ar/dev/packaging/scripts/helpers_v2.1><div class=pagination-nav__sublabel>ÿßŸÑÿ™ÿßŸÑŸä</div><div class=pagination-nav__label>App helpers (v2.1)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#sources class="table-of-contents__link toc-highlight">Sources</a><ul><li><a href=#sources-1 class="table-of-contents__link toc-highlight">Sources</a></ul><li><a href=#app-technologies class="table-of-contents__link toc-highlight">App Technologies</a><ul><li><a href=#nodejs class="table-of-contents__link toc-highlight">Nodejs</a><li><a href=#ruby class="table-of-contents__link toc-highlight">Ruby</a><li><a href=#go class="table-of-contents__link toc-highlight">Go</a><li><a href=#composer class="table-of-contents__link toc-highlight">Composer</a></ul><li><a href=#databases class="table-of-contents__link toc-highlight">Databases</a><ul><li><a href=#mysql class="table-of-contents__link toc-highlight">Mysql</a><li><a href=#postgresql class="table-of-contents__link toc-highlight">Postgresql</a><li><a href=#mongodb class="table-of-contents__link toc-highlight">Mongodb</a><li><a href=#redis class="table-of-contents__link toc-highlight">Redis</a></ul><li><a href=#configurations--templating class="table-of-contents__link toc-highlight">Configurations / Templating</a><ul><li><a href=#templating class="table-of-contents__link toc-highlight">Templating</a><li><a href=#nginx class="table-of-contents__link toc-highlight">Nginx</a><li><a href=#php class="table-of-contents__link toc-highlight">Php</a><li><a href=#systemd class="table-of-contents__link toc-highlight">Systemd</a><li><a href=#fail2ban class="table-of-contents__link toc-highlight">Fail2ban</a><li><a href=#logrotate class="table-of-contents__link toc-highlight">Logrotate</a></ul><li><a href=#misc-tools class="table-of-contents__link toc-highlight">Misc Tools</a><ul><li><a href=#utils class="table-of-contents__link toc-highlight">Utils</a><li><a href=#setting class="table-of-contents__link toc-highlight">Setting</a><li><a href=#string class="table-of-contents__link toc-highlight">String</a><li><a href=#backup class="table-of-contents__link toc-highlight">Backup</a><li><a href=#logging class="table-of-contents__link toc-highlight">Logging</a><li><a href=#multimedia class="table-of-contents__link toc-highlight">Multimedia</a></ul><li><a href=#deprecated-or-handled-by-the-core--app-resources-since-v2 class="table-of-contents__link toc-highlight">Deprecated Or Handled By The Core / App Resources Since V2</a><ul><li><a href=#permission class="table-of-contents__link toc-highlight">Permission</a><li><a href=#apt class="table-of-contents__link toc-highlight">Apt</a><li><a href=#systemuser class="table-of-contents__link toc-highlight">Systemuser</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Legal</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/YunoHost/yunohost/blob/dev/LICENSE target=_blank rel="noopener noreferrer" class=footer__link-item>License<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a class=footer__link-item href=/doc/pr-2675/ar/community/terms_of_services>CGUs</a><li class=footer__item><a href=https://github.com/YunoHost/project-organization target=_blank rel="noopener noreferrer" class=footer__link-item>Organization<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Follow us</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://forum.yunohost.org/c/announcement/8/none target=_blank rel="noopener noreferrer" class=footer__link-item>Blog<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://toot.aquilenet.fr/@yunohost target=_blank rel="noopener noreferrer" class=footer__link-item>Mastodon<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href="https://videos.globenet.org/a/yunohost/videos?s=1" target=_blank rel="noopener noreferrer" class=footer__link-item>Peertube<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Use</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/doc/pr-2675/ar/>Documentation</a><li class=footer__item><a href=https://apps.yunohost.org/ target=_blank rel="noopener noreferrer" class=footer__link-item>Apps catalog<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://forum.yunohost.org/ target=_blank rel="noopener noreferrer" class=footer__link-item>Forum<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a class=footer__link-item href=/doc/pr-2675/ar/community/help>Ask for help</a><li class=footer__item><a href=https://status.yunohost.org/ target=_blank rel="noopener noreferrer" class=footer__link-item>Service status<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/YunoHost/yunohost/blob/dev/debian/changelog target=_blank rel="noopener noreferrer" class=footer__link-item>Changelog<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Contribute</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://donate.yunohost.org/ target=_blank rel="noopener noreferrer" class=footer__link-item>Donate<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/YunoHost/issues/issues target=_blank rel="noopener noreferrer" class=footer__link-item>Issues<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/YunoHost target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub (core)<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/YunoHost-Apps target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub (apps)<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://translate.yunohost.org/ target=_blank rel="noopener noreferrer" class=footer__link-item>Translate<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/doc/pr-2675/ar/img/icons/ynh_logo_roundcorner.png alt="Yunohost Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/doc/pr-2675/ar/img/icons/ynh_logo_roundcorner.png alt="Yunohost Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"/></div><div class=footer__copyright>Build with Docusaurus for YunoHost</div></div></div></footer></div></body>