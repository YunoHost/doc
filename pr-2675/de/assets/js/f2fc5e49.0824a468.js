"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["5278"],{546:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>l,toc:()=>u,default:()=>p,metadata:()=>i,assets:()=>c,contentTitle:()=>d});var i=JSON.parse('{"id":"admin/users/groups_and_permissions","title":"Users groups and permissions","description":"You can access the groups and permissions management interface from the webadmin","source":"@site/docs/admin/20.users/groups_and_permissions.mdx","sourceDirName":"admin/20.users","slug":"/admin/users/groups_and_permissions","permalink":"/doc/pr-2675/de/admin/users/groups_and_permissions","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/docs/admin/20.users/groups_and_permissions.mdx","tags":[],"version":"current","frontMatter":{"title":"Users groups and permissions"},"sidebar":"admin","previous":{"title":"\u{1F465} Accounts and portal","permalink":"/doc/pr-2675/de/admin/users/"},"next":{"title":"\u{1F310} Domains","permalink":"/doc/pr-2675/de/admin/domains/"}}'),r=n(4848),a=n(4429),o=n(4109),t=n(3703);let l={title:"Users groups and permissions"},d,c={},u=[{value:"Managing groups",id:"managing-groups",level:2},{value:"Default groups",id:"default-groups",level:3},{value:"List existing groups",id:"list-existing-groups",level:3},{value:"Creating a new group",id:"creating-a-new-group",level:3},{value:"Updating a group",id:"updating-a-group",level:3},{value:"Deleting groups",id:"deleting-groups",level:3},{value:"Managing permissions",id:"managing-permissions",level:2},{value:"List permissions",id:"list-permissions",level:3},{value:"Add accesses to group or users",id:"add-accesses-to-group-or-users",level:3},{value:"Hide/display specific tiles in the user portal",id:"hidedisplay-specific-tiles-in-the-user-portal",level:3},{value:"Config alias group",id:"config-alias-group",level:3}];function h(e){let s={code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["You can access the ",(0,r.jsx)(s.em,{children:"groups and permissions"})," management interface from the webadmin\nby going into the 'Users' section and clicking the corresponding button:"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"screenshot of users permission button",src:n(7579).A+"",width:"638",height:"287"})}),"\n",(0,r.jsx)(s.h2,{id:"managing-groups",children:"Managing groups"}),"\n",(0,r.jsxs)(s.p,{children:["The group mechanism can be used to define groups of users which then can be used to restrict permissions for applications and other services (such as mail or XMPP). Note that it is ",(0,r.jsx)(s.em,{children:"not"})," mandatory to create a group to do so: you can also restrict access to an app or service on a user-per-user basis."]}),"\n",(0,r.jsxs)(s.p,{children:["Using groups is however useful for semantics, for example if you host multiple groups of friends, associations or businesses on your server, you might want to create groups like ",(0,r.jsx)(s.code,{children:"association1"})," and ",(0,r.jsx)(s.code,{children:"association2"})," and add members of each association to the relevant group."]}),"\n",(0,r.jsxs)(s.p,{children:["It's also possible to define mail aliases for a group, such that mails sent to ",(0,r.jsx)(s.code,{children:"groupe@domain.tld"})," will be dispatched to all members of the group."]}),"\n",(0,r.jsx)(s.h3,{id:"default-groups",children:"Default groups"}),"\n",(0,r.jsx)(s.p,{children:"By default, these special groups are created:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"all_users"}),", that contain all users registered on YunoHost,"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"visitors"}),", that applies to people viewing the server while not logged in."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"admins"}),", that contains YunoHost administrators, who will have SSH access as well as to the webadmin."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"The content of those groups cannot be changed, only the permissions given to them."}),"\n",(0,r.jsx)(s.h3,{id:"list-existing-groups",children:"List existing groups"}),"\n",(0,r.jsxs)(o.A,{groupId:"admin-commands",children:[(0,r.jsxs)(t.A,{value:"web",label:"From the web interface",children:[(0,r.jsxs)(s.p,{children:["The existing groups are listed at the top of the ",(0,r.jsx)(s.em,{children:"groups and permissions"})," page."]}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:n(841).A+"",width:"1794",height:"1773"})})]}),(0,r.jsxs)(t.A,{value:"cli",label:"From the command line",children:[(0,r.jsx)(s.p,{children:"To list the currently existing groups in CLI :"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"yunohost user group list\ngroups:\n  all_users:\n    members:\n      - alice\n      - bob\n      - charlie\n      - delphine\n"})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"creating-a-new-group",children:"Creating a new group"}),"\n",(0,r.jsxs)(o.A,{groupId:"admin-commands",children:[(0,r.jsxs)(t.A,{value:"web",label:"From the web interface",children:[(0,r.jsx)(s.p,{children:'To create a new group, simply click on the "New Group" button at the top of the page. You may only choose a name formed with letters (uper- and lowercase) and spaces. The group is created empty and without any permission.'}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"screenshot of new group button",src:n(1254).A+"",width:"1136",height:"510"})})]}),(0,r.jsxs)(t.A,{value:"cli",label:"From the command line",children:[(0,r.jsxs)(s.p,{children:["In CLI, to create a new group called ",(0,r.jsx)(s.code,{children:"yolo_crew"})]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"yunohost user group create yolo_crew\n"})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"updating-a-group",children:"Updating a group"}),"\n",(0,r.jsxs)(o.A,{groupId:"admin-commands",children:[(0,r.jsxs)(t.A,{value:"web",label:"From the web interface",children:[(0,r.jsx)(s.p,{children:'Let\'s add a first to this group: in the group panel, click the button "add a user" and scroll to the desired user, then click on it.'}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:n(4827).A+"",width:"1134",height:"195"})}),(0,r.jsx)(s.p,{children:"To remove a user, click on the cross next to their username, in the group panel."}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:n(4874).A+"",width:"1135",height:"194"})})]}),(0,r.jsxs)(t.A,{value:"cli",label:"From the command line",children:[(0,r.jsxs)(s.p,{children:["In CLI, use the following command to add ",(0,r.jsx)(s.code,{children:"charlie"})," and ",(0,r.jsx)(s.code,{children:"delphine"}),"to the ",(0,r.jsx)(s.code,{children:"yolo_crew"})," group:"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"yunohost user group add yolo_crew charlie delphine\n"})}),(0,r.jsxs)(s.p,{children:["(similarly, ",(0,r.jsx)(s.code,{children:"remove"})," can be used to remove members from a group)"]}),(0,r.jsx)(s.p,{children:"Now in the group list we should see:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"yunohost user group list\ngroups:\n  all_users:\n    members:\n      - alice\n      - bob\n      - charlie\n      - delphine\n  yolo_crew:\n    members:\n      - charlie\n      - delphine\n"})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"deleting-groups",children:"Deleting groups"}),"\n",(0,r.jsxs)(o.A,{groupId:"admin-commands",children:[(0,r.jsxs)(t.A,{value:"web",label:"From the web interface",children:[(0,r.jsx)(s.p,{children:"To delete a group, click on the red cross on the top right of the group panel. You will be asked for confirmation."}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:n(7287).A+"",width:"1135",height:"194"})})]}),(0,r.jsxs)(t.A,{value:"cli",label:"From the command line",children:[(0,r.jsxs)(s.p,{children:["To delete the group ",(0,r.jsx)(s.code,{children:"yolo_crew"})," in CLI, you may run"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"yunohost user group delete yolo_crew\n"})})]})]}),"\n",(0,r.jsx)(s.h2,{id:"managing-permissions",children:"Managing permissions"}),"\n",(0,r.jsx)(s.p,{children:"The permission mechanism allow to restrict access to services (for example mail, XMPP...) and apps, or even specific parts of the apps (for example the administration interface of WordPress)."}),"\n",(0,r.jsx)(s.h3,{id:"list-permissions",children:"List permissions"}),"\n",(0,r.jsxs)(o.A,{groupId:"admin-commands",children:[(0,r.jsxs)(t.A,{value:"web",label:"From the web interface",children:[(0,r.jsxs)(s.p,{children:["The groups page lists the permissions given to each group, including the special groups ",(0,r.jsx)(s.code,{children:"all_users"})," and ",(0,r.jsx)(s.code,{children:"visitors"}),"."]}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:n(4226).A+"",width:"1136",height:"510"})})]}),(0,r.jsxs)(t.A,{value:"cli",label:"From the command line",children:[(0,r.jsx)(s.p,{children:"To list permissions and corresponding accesses in CLI:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"yunohost user permission list\npermissions:\n  mail.main:\n    allowed: all_users\n  wordpress.admin:\n    allowed:\n  wordpress.main:\n    allowed: all_users\n  xmpp.main:\n    allowed: all_users\n"})}),(0,r.jsx)(s.p,{children:"Here, we find that all registered users can use email, XMPP, and access the WordPress blog. However, nobody can access the WordPress admin interface."}),(0,r.jsxs)(s.p,{children:["More details can be displayed by adding the ",(0,r.jsx)(s.code,{children:"--full"})," option which will display the list of users corresponding to groups allowed, as well as urls associated to a permission (relevant for web apps)."]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"add-accesses-to-group-or-users",children:"Add accesses to group or users"}),"\n",(0,r.jsxs)(o.A,{groupId:"admin-commands",children:[(0,r.jsxs)(t.A,{value:"web",label:"From the web interface",children:[(0,r.jsx)(s.p,{children:'To add a permission to a group, simply click the "+" button in the group panel, scroll to the desired permission, then click on it.'}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:n(2788).A+"",width:"1146",height:"431"})}),(0,r.jsx)(s.p,{children:"Note that you can also allow a single user, by using the specific panel at the bottom of the page."}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:n(8484).A+"",width:"1144",height:"633"})})]}),(0,r.jsxs)(t.A,{value:"cli",label:"From the command line",children:[(0,r.jsx)(s.p,{children:"To allow a group to access the WordPress admin interface in CLI:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"yunohost user permission update wordpress.admin --add yolo_crew\n"})}),(0,r.jsx)(s.p,{children:"Note that you can also allow a single user, by using the specific panel at the bottom of the page."}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"yunohost user permission update wordpress.admin --add alice\n"})}),(0,r.jsx)(s.p,{children:"And now we may see that both the YoloCrew and Alice have access to the WordPress admin interface:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"yunohost user permission list\n  [...]\n  wordpress.admin:\n    allowed:\n      - yolo_crew\n      - alice\n  [...]\n"})}),(0,r.jsxs)(s.p,{children:["Note that, for example, if we want to restrict permission for email so that only Bob is allowed to email, we should also remove ",(0,r.jsx)(s.code,{children:"all_users"})," from the permission, by deleting it from the ",(0,r.jsx)(s.code,{children:"all_users"})," group panel, or in CLI:"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"yunohost user permission update mail --remove all_users --add bob\n"})})]})]}),"\n",(0,r.jsx)(s.p,{children:'Note that some permissions may be "protected", meaning that you won\'t be able to add/remove the visitor group to this permission. Generally, this is because it would make no sense (or is a security risk) to do so.'}),"\n",(0,r.jsx)(s.p,{children:"The webadmin will issue a warning if you set a permission that is superseded by a wider permission."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:n(2952).A+"",width:"1275",height:"50"})}),"\n",(0,r.jsx)(s.h3,{id:"hidedisplay-specific-tiles-in-the-user-portal",children:"Hide/display specific tiles in the user portal"}),"\n",(0,r.jsx)(s.p,{children:"Since YunoHost 4.1, you can choose to hide/display specific tiles in the SSO."}),"\n",(0,r.jsxs)(o.A,{groupId:"admin-commands",children:[(0,r.jsx)(t.A,{value:"web",label:"From the web interface",children:(0,r.jsxs)(s.p,{children:["In the webadmin, you can do so by going in the corresponding app view, go in ",(0,r.jsx)(s.code,{children:"Manage label and tiles"})," and check/uncheck the option ",(0,r.jsx)(s.code,{children:"Display the tile in the user portal"})," for the corresponding permission."]})}),(0,r.jsxs)(t.A,{value:"cli",label:"From the command line",children:[(0,r.jsx)(s.p,{children:"In command line, this may be done with:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Enable the tile for the WordPress admin interface\nyunohost user permission update wordpress.admin --show_tile True\n"})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"config-alias-group",children:"Config alias group"}),"\n",(0,r.jsxs)(s.p,{children:["Each group can use mail aliases, but their configuration is only available from the CLI so far. For example, the ",(0,r.jsx)(s.code,{children:"admins"})," group is configured with aliases such as ",(0,r.jsx)(s.code,{children:"admins@domain.tld"}),", ",(0,r.jsx)(s.code,{children:"root@domain.tld"})," ... : mail sent to these addresses will be dispatched to all members of the ",(0,r.jsx)(s.code,{children:"admins"})," group."]}),"\n",(0,r.jsxs)(s.p,{children:["The command ",(0,r.jsx)(s.code,{children:"yunohost user group info"})," will list them."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"yunohost user group info admins\n  [...]\n  mail-aliases:\n    - root@maindomain.tld\n    - admin@maindomain.tld\n    - admins@maindomain.tld\n    - webmaster@maindomain.tld\n    - postmaster@maindomain.tld\n    - abuse@maindomain.tld\n  [...]\n"})}),"\n",(0,r.jsxs)(s.p,{children:["To add a new mail, use the action ",(0,r.jsx)(s.code,{children:"add-mailalias"})," or ",(0,r.jsx)(s.code,{children:"remove-mailalias"})," to delete it."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"yunohost user group add-mailalias <group> <address@domaine.tld>\n"})})]})}function p(e={}){let{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},7579:function(e,s,n){n.d(s,{A:()=>i});let i=n.p+"assets/images/button_to_go_to_permission_interface-f4855a7f8086fa2e53b22a73e9968e40.png"},2788:function(e,s,n){n.d(s,{A:()=>i});let i=n.p+"assets/images/groups_add-permission-group-1da56cbc0a416cb6289bda11b4a991b6.png"},8484:function(e,s,n){n.d(s,{A:()=>i});let i=n.p+"assets/images/groups_add-permission-user-7bed9fc1aa6d4addda614e162c9d38cf.png"},2952:function(e,s,n){n.d(s,{A:()=>i});let i=n.p+"assets/images/groups_alerte-permission-4775854f5865021a8718851591614bce.png"},4827:function(e,s,n){n.d(s,{A:()=>i});let i=n.p+"assets/images/groups_button-add-user-b5fd42c0f9293563ca9b006996f2b5e2.png"},7287:function(e,s,n){n.d(s,{A:()=>i});let i=n.p+"assets/images/groups_button-delete-group-7c2170dff029419f72ae905a4091f7d7.png"},1254:function(e,s,n){n.d(s,{A:()=>i});let i=n.p+"assets/images/groups_button-new-group-9fea9fe0129c5a311dac77ba21e43ea4.png"},4874:function(e,s,n){n.d(s,{A:()=>i});let i=n.p+"assets/images/groups_button-remove-user-bb1df964d5ac22e406c552b9760868e4.png"},841:function(e,s,n){n.d(s,{A:()=>i});let i=n.p+"assets/images/groups_default-groups-288d3cbca57a4c1deb9b4a8e8c49dd66.png"},4226:function(e,s,n){n.d(s,{A:()=>i});let i=n.p+"assets/images/groups_default-with-permissions-048e4bd12e6e8ac33d6aedec9807baef.png"},3703:function(e,s,n){n.d(s,{A:()=>a});var i=n(4848);n(6540);var r=n(9836);function a({children:e,hidden:s,className:n}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)("tabItem_Ymn6",n),hidden:s,children:e})}},4109:function(e,s,n){n.d(s,{A:()=>j});var i=n(4848),r=n(6540),a=n(9836),o=n(6364),t=n(8251),l=n(6347),d=n(8004),c=n(5580),u=n(2213),h=n(5734);function p(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){let{props:s}=e;return!!s&&"object"==typeof s&&"value"in s}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function m({value:e,tabValues:s}){return s.some(s=>s.value===e)}var g=n(8864);function f({className:e,block:s,selectedValue:n,selectValue:r,tabValues:o}){let l=[],{blockElementScrollPositionUntilNextRender:d}=(0,t.a_)(),c=e=>{let s=e.currentTarget,i=o[l.indexOf(s)].value;i!==n&&(d(s),r(i))},u=e=>{let s=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{let n=l.indexOf(e.currentTarget)+1;s=l[n]??l[0];break}case"ArrowLeft":{let n=l.indexOf(e.currentTarget)-1;s=l[n]??l[l.length-1]}}s?.focus()};return(0,i.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":s},e),children:o.map(({value:e,label:s,attributes:r})=>(0,i.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{l.push(e)},onKeyDown:u,onClick:c,...r,className:(0,a.A)("tabs__item","tabItem_LNqP",r?.className,{"tabs__item--active":n===e}),children:s??e},e))})}function x({lazy:e,children:s,selectedValue:n}){let o=(Array.isArray(s)?s:[s]).filter(Boolean);if(e){let e=o.find(e=>e.props.value===n);return e?(0,r.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,i.jsx)("div",{className:"margin-top--md",children:o.map((e,s)=>(0,r.cloneElement)(e,{key:s,hidden:e.props.value!==n}))})}function b(e){let s=function(e){let s,{defaultValue:n,queryString:i=!1,groupId:a}=e,o=function(e){let{values:s,children:n}=e;return(0,r.useMemo)(()=>{let e=s??p(n).map(({props:{value:e,label:s,attributes:n,default:i}})=>({value:e,label:s,attributes:n,default:i})),i=(0,u.XI)(e,(e,s)=>e.value===s.value);if(i.length>0)throw Error(`Docusaurus error: Duplicate values "${i.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[s,n])}(e),[t,g]=(0,r.useState)(()=>(function({defaultValue:e,tabValues:s}){if(0===s.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:s}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${s.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let n=s.find(e=>e.default)??s[0];if(!n)throw Error("Unexpected error: 0 tabValues");return n.value})({defaultValue:n,tabValues:o})),[f,x]=function({queryString:e=!1,groupId:s}){let n=(0,l.W6)(),i=function({queryString:e=!1,groupId:s}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!s)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:e,groupId:s});return[(0,c.aZ)(i),(0,r.useCallback)(e=>{if(!i)return;let s=new URLSearchParams(n.location.search);s.set(i,e),n.replace({...n.location,search:s.toString()})},[i,n])]}({queryString:i,groupId:a}),[b,j]=function({groupId:e}){let s=e?`docusaurus.tab.${e}`:null,[n,i]=(0,h.Dv)(s);return[n,(0,r.useCallback)(e=>{s&&i.set(e)},[s,i])]}({groupId:a}),w=m({value:s=f??b,tabValues:o})?s:null;return(0,d.A)(()=>{w&&g(w)},[w]),{selectedValue:t,selectValue:(0,r.useCallback)(e=>{if(!m({value:e,tabValues:o}))throw Error(`Can't select invalid tab value=${e}`);g(e),x(e),j(e)},[x,j,o]),tabValues:o}}(e);return(0,i.jsxs)("div",{className:(0,a.A)(o.G.tabs.container,"tabs-container","tabList__CuJ"),children:[(0,i.jsx)(f,{...s,...e}),(0,i.jsx)(x,{...s,...e})]})}function j(e){let s=(0,g.A)();return(0,i.jsx)(b,{...e,children:p(e.children)},String(s))}},4429:function(e,s,n){n.d(s,{R:()=>o,x:()=>t});var i=n(6540);let r={},a=i.createContext(r);function o(e){let s=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:s},e.children)}}}]);