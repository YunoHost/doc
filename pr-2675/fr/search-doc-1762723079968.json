{"searchDocs":[{"title":"YunoHost admin documentation","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/","content":"YunoHost admin documentation Here, you'll learn the basics of self-hosting, how to install YunoHost and configure it. Then you'll be able to add users, domains and apps, and ensure backups are done properly. Don't hesitate to contact the community to ask for help !","keywords":"","version":"Next"},{"title":"√Ä propos de l‚Äôauto-h√©bergement","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/about_self_hosting","content":"√Ä propos de l‚Äôauto-h√©bergement L'auto-h√©bergement est le fait d'avoir et d'administrer son propre serveur, typiquement chez soi, pour h√©berger soi-m√™me ses donn√©es personnelles et des services plut√¥t que de se reposer exclusivement sur des tiers. Par exemple, il est possible d'auto-h√©berger son blog de sorte qu'il &quot;vive&quot; dans une machine que vous contr√¥lez, au lieu qu'il soit sur l'ordinateur de quelqu'un d'autre (a.k.a. le Cloud) en √©change d'argent, de publicit√©s ou de donn√©es priv√©es. L'auto-h√©bergement implique de disposer d'un serveur. Un serveur est un ordinateur qui est destin√© √† √™tre accessible sur le r√©seau en permanence, et n'a g√©n√©ralement pas d'√©cran ni de clavier puisqu'il est administr√© √† distance. Contrairement √† une croyance r√©pandue, les serveurs ne sont pas n√©cessairement des machines √©normes et extr√™mement puissantes : aujourd'hui, une petite carte ARM √† ~30‚Ç¨ est ad√©quate pour de l'auto-h√©bergement. Pratiquer l'auto-h√©bergement ne rend pas &quot;votre internet&quot; plus s√©curis√© et ne fournit pas d'anonymat en tant que tel. L'objectif est g√©n√©ralement de pouvoir √™tre autonome et au contr√¥le de ses services et de ses donn√©es - ce qui implique aussi d'en √™tre responsable.","keywords":"","version":"Next"},{"title":"Installing \"custom\" apps","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/apps/custom_apps","content":"","keywords":"","version":"Next"},{"title":"Installing your very own webapp‚Äã","type":1,"pageTitle":"Installing \"custom\" apps","url":"/doc/pr-2675/fr/admin/apps/custom_apps#installing-your-very-own-webapp","content":" A special application exists called My webapp.  It can be seen as &quot;an empty shell&quot; in which you can drop your own HTML, CSS, JS, etc files through SFTP or other means. It also supports PHP, and an SQL database can be initialized.  ","version":"Next","tagName":"h2"},{"title":"Adding a reverse proxy to an app that you manually installed, for example using Docker‚Äã","type":1,"pageTitle":"Installing \"custom\" apps","url":"/doc/pr-2675/fr/admin/apps/custom_apps#adding-a-reverse-proxy-to-an-app-that-you-manually-installed-for-example-using-docker","content":" While YunoHost apps do not use Docker for reasons that are beyond the scope of this page, you can manually install Docker apps on your server (assuming you know what you do and won't tinker too much the base system ...). However, this is not limiter to Docker, you may have deployed &quot;manually&quot; an app using Python, Ruby or other language, and such app usually listen to a specific port.  Once your app or container is setup, you will probably need to actually expose the container on the web on a specific URL. This can be done using another special app called Redirect.  Make sure to chose the reverse proxy mode, and point it to something like http://127.0.0.1:PORT where PORT is the port of your custom app.  It will add the appropriate configuration bits in Nginx, SSOwat and a tile in the user portal.  ","version":"Next","tagName":"h2"},{"title":"Adding a custom tile in the portal pointing to an external app‚Äã","type":1,"pageTitle":"Installing \"custom\" apps","url":"/doc/pr-2675/fr/admin/apps/custom_apps#adding-a-custom-tile-in-the-portal-pointing-to-an-external-app","content":" The Redirect app can also be used add a &quot;shortcut&quot; tile in the user portal that points to an app or page located on a completly different server. Make sure to use the &quot;explicit redirect&quot; mode and the URL of the external page or app.  Generally, you should refrain from manually tinkering and installing apps, except if you are sure they will not interfere with your server. YunoHost proposes two generic apps to help you out: ","version":"Next","tagName":"h2"},{"title":"üöë Sauvegardes","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/backups/","content":"","keywords":"","version":"Next"},{"title":"Sauvegarde manuelle‚Äã","type":1,"pageTitle":"üöë Sauvegardes","url":"/doc/pr-2675/fr/admin/backups/#sauvegarde-manuelle","content":" YunoHost contient un syst√®me de sauvegarde, qui permet de sauvegarder (et restaurer) les configurations du syst√®me, les donn√©es ¬´ syst√®me ¬ª (comme les mails) et les applications si elles le supportent.  Vous pouvez g√©rer vos sauvegardes via la ligne de commande (yunohost backup --help) ou la webadmin (dans la section Sauvegardes) bien que certaines fonctionnalit√©s ne soient pas disponibles via celle-ci.  La m√©thode de sauvegarde actuelle consiste √† cr√©er des archives .tar qui contiennent les fichiers pertinents.  Cr√©er une sauvegarde‚Äã  From the web interfaceFrom the command line Vous pouvez facilement cr√©er des archives depuis la webadmin en allant dans Sauvegardes &gt; Archives locales et en cliquant sur Nouvelle sauvegarde. Vous pourrez ensuite s√©lectionner les √©l√©ments √† sauvegarder (configuration, donn√©es &quot;syst√®me&quot;, applications).  ","version":"Next","tagName":"h2"},{"title":"T√©l√©charger la sauvegarde‚Äã","type":1,"pageTitle":"üöë Sauvegardes","url":"/doc/pr-2675/fr/admin/backups/#t√©l√©charger-la-sauvegarde","content":" From the web interfaceWith a SFTP clientFrom the command line Apr√®s avoir cr√©√© des sauvegardes, il est possible de les lister et de les inspecter gr√¢ce aux vues correspondantes dans l'interface d'administration web. Un bouton propose de t√©l√©charger l'archive. Si l'archive fait plus de 3Go, il peut √™tre pr√©f√©rable de proc√©der via SFTP. Sauvegarde &gt; Archives locales &gt; &lt;Nom de l'archive&gt; &gt; T√©l√©charger  attention N'oubliez pas de stocker votre sauvegarde dans un lieu diff√©rents de celui ou se trouve votre serveur.  info Si vous le souhaitez, vous pouvez connecter un disque externe √† votre serveur pour que les archives arrivent directement dessus. Voir ce guide pour Ajouter un stockage externe √† son serveur  ","version":"Next","tagName":"h3"},{"title":"Tester‚Äã","type":1,"pageTitle":"üöë Sauvegardes","url":"/doc/pr-2675/fr/admin/backups/#tester","content":" Vous devriez tester r√©guli√®rement vos sauvegardes √† minima en listant le contenu des archives et en v√©rifiant le poids des donn√©es associ√©es. Le mieux est de s'entrainer r√®guli√®rement √† restaurer.  # Lister les fichiers tar -tvf /home/yunohost.backup/archives/ARCHIVE.tar | less # Lister les exports de base de donn√©es tar -tvf /home/yunohost.backup/archives/ARCHIVE.tar | grep &quot;(db|dump)\\.sql&quot; # V√©rifier le poids ls -lh /home/yunohost.backup/archives/ARCHIVE.tar   ","version":"Next","tagName":"h3"},{"title":"Restaurer‚Äã","type":1,"pageTitle":"üöë Sauvegardes","url":"/doc/pr-2675/fr/admin/backups/#restaurer","content":" info SPOILER: Plus votre volume de donn√©es et le nombre d'applications sont important, plus votre restauration sera complexe.  Cas simple : peu de donn√©es, archive d√©j√† pr√©sente‚Äã  From the web interfaceFrom the command line Allez dans Sauvegardes &gt; Archives locales et s√©lectionnez l'archive. Vous pouvez ensuite choisir les diff√©rents √©l√©ments que vous voulez restaurer puis cliquer sur &quot;Restaurer&quot;.  Pour restaurer une application, le domaine sur laquelle elle est install√©e doit d√©j√† √™tre configur√© (ou il vous faut restaurer en m√™me temps la configuration correspondante). Aussi, il n'est pas possible de restaurer une application d√©j√† install√©e... ce qui veut dire que pour restaurer une sauvegarde d'une app, il vous faut d√©j√† la d√©sinstaller.  T√©l√©verser une archive‚Äã  Dans de nombreux cas, l'archive n'est pas sur le serveur sur lequel on souhaite la restaurer. Il faut donc la t√©l√©verser, ce qui selon son poids peut prend plus ou moins de temps.  With a SFTP clientFrom the command line √Ä l'heure actuelle, la solution la plus accessible pour t√©l√©verser les sauvegardes est d'utiliser le programme FileZilla comme expliqu√© dans cette page. Par d√©faut, les sauvegardes sont √† placer dans /home/yunohost.backup/archives/. ","version":"Next","tagName":"h3"},{"title":"√âviter les pannes mat√©rielles","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/backups/avoid_hardware_failure","content":"","keywords":"","version":"Next"},{"title":"S√©curiser physiquement votre serveur‚Äã","type":1,"pageTitle":"√âviter les pannes mat√©rielles","url":"/doc/pr-2675/fr/admin/backups/avoid_hardware_failure#s√©curiser-physiquement-votre-serveur","content":" Tr√®s souvent les personnes qui s'autoh√©bergent n'ont pas de rangement correct pour leur syst√®me. Laisser le serveur en plusieurs parties, dans un lieu de passage, accessible √† des enfants ou des animaux, ou dans un endroit peu a√©r√© peut vite tourner √† la catastrophe.  ","version":"Next","tagName":"h2"},{"title":"Fixer vos disques durs‚Äã","type":1,"pageTitle":"√âviter les pannes mat√©rielles","url":"/doc/pr-2675/fr/admin/backups/avoid_hardware_failure#fixer-vos-disques-durs","content":" Id√©alement, vos disques durs doivent √™tre fix√©s pour √©viter les vibrations qui peuvent acc√©l√©rer l'usure du mat√©riel voire att√©nuer ses performances, notamment s'il y a un autre disque √† c√¥t√©.  ","version":"Next","tagName":"h2"},{"title":"R√©duire la swapiness pour les cartes SD et disques SSD‚Äã","type":1,"pageTitle":"√âviter les pannes mat√©rielles","url":"/doc/pr-2675/fr/admin/backups/avoid_hardware_failure#r√©duire-la-swapiness-pour-les-cartes-sd-et-disques-ssd","content":" Si vous utilisez un fichier de swap avec un SSD ou une carte SD avec une swapiness trop √©lev√©e, votre support de stockage pourrait rendre l'√¢me pr√©matur√©ment en raison d'un trop grand nombre d'√©critures.  Pour √©viter √ßa:  cat /proc/sys/vm/swappiness   Si elle est au-dessus de 10:  sysctl vm.swappiness=10 nano /etc/sysctl.conf   Si la ligne est pr√©sente, changez la valeur vm.swappiness √† 10.Sinon, ajoutez la ligne:  vm.swappiness = 10   ","version":"Next","tagName":"h2"},{"title":"Redondance de stockage‚Äã","type":1,"pageTitle":"√âviter les pannes mat√©rielles","url":"/doc/pr-2675/fr/admin/backups/avoid_hardware_failure#redondance-de-stockage","content":" Afin de limiter les pannes mat√©rielles des supports de stockage, il peut √™tre pertinent de mettre en place une grappe de disques en miroir (RAID, ZFS). L'id√©e ici est que tout ce qui est √©crit sur un disque le sera sur l'autre. Ainsi, si l'un tombe en panne, l'autre continue de fonctionner et le serveur est toujours pleinement fonctionnel.  Il existe aussi des grappes plus √©volu√©es qui maximisent la tol√©rance de panne (panne de 2 disques comme le RAID6) ou le stockage (voir RAID 5).  Toutefois, ces techniques de grappes de disques ne devraient pas √™tre consid√©r√©es comme des copies de sauvegarde. Une grappe RAID devrait √™tre consid√©r√©e comme un seul support de stockage. En effet, si cette technique permet d'√©viter de devoir r√©installer en cas de crash probable d'un disque, on est loin du risque z√©ro.  Quelques exemples de situations connues des administrateurs syst√®mes professionnels:  les disques d'une grappe mont√©e avec des disques de la m√™me marque peuvent tomber en panne quasiment en m√™me temps en moins de quelques heuressans monitoring de la sant√© des disques, il y a de fortes chances que l'on ne remarque la panne d'un disque de la grappe que lorsqu'un deuxi√®me tombe en panne (&gt;&lt;)si on n'a pas de disque de rechange, le d√©lai d'achat peut aboutir √† un crash de l'autre disqueun disque √† moiti√© fonctionnel qui produit des erreurs peut propager son erreur √† travers la grappeles connectiques des disques ou le contr√¥leur RAID peuvent produire des erreurs aussi ou tomber en panneplus on complexifie l'architecture avec de nombreux composants, plus il y a de chances que l'un d'eux tombe en panne  info Si vous souhaitez mettre en place une grappe RAID ou utiliser btrfs, le plus simple est de le faire √† l'installation avec l'iso YunoHost en mode expert (lors du partitionnement du syst√®me). ","version":"Next","tagName":"h2"},{"title":"üì¶ Applications","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/apps/","content":"","keywords":"","version":"Next"},{"title":"Installer une application‚Äã","type":1,"pageTitle":"üì¶ Applications","url":"/doc/pr-2675/fr/admin/apps/#installer-une-application","content":" Let's say you want to install a Custom Webapp. Before actually running the installation steps, YunoHost will usually have you fill in a form to properly set it up for you.  From the web interfaceFrom the command line Pre-installation form of the Custom Webapp  ","version":"Next","tagName":"h2"},{"title":"Subpaths vs. individual domains per apps‚Äã","type":1,"pageTitle":"üì¶ Applications","url":"/doc/pr-2675/fr/admin/apps/#subpaths-vs-individual-domains-per-apps","content":" Among specific questions, forms usually ask you to choose a domain and a path onto which the app will be accessible.  In the context of YunoHost, it is quite common to have a single (or a few) domains on which several apps are installed in &quot;subpaths&quot;, so that you end up with something like this:  yolo.com ‚îú‚îÄ‚îÄ /blog : Wordpress (a blog) ‚îú‚îÄ‚îÄ /cloud : Nextcloud (a cloud service) ‚îú‚îÄ‚îÄ /rss : TinyTiny RSS (a RSS reader) ‚îú‚îÄ‚îÄ /wiki : DokuWiki (a wiki)   Alternatively, you may choose to install each (or some) apps on a dedicated domain. Beyond the aesthetic, using sub-domains instead of sub-paths allows the possibility to move a service to another server more easily. Also, some applications may need an entire domain dedicated to them, for technical reasons. The disadvantage is that you have to add a new domain each time, and therefore potentially configure additional DNS records, restart the diagnostics and install a new Let's Encrypt certificate.  This might look prettier for end users, but is generally considered more complicated and less efficient in the context of YunoHost, since you need to add a new domain each time. Nevertheless, some apps might need an entire domain dedicated to them, for technical reasons.  If all apps from the previous example were installed on a separate domain, this would give something like this:  blog.yolo.com : Wordpress (a blog) cloud.yolo.com : Nextcloud (a cloud service) rss.yolo.com : TinyTiny RSS (a RSS reader) wiki.yolo.com : DokuWiki (a wiki)   info Many applications integrate a feature that allows you to change the URL of your application. This choice between subpath and subdomain can be reversed in some cases via a simple manipulation in the administration interface.  ","version":"Next","tagName":"h3"},{"title":"User access management and public apps‚Äã","type":1,"pageTitle":"üì¶ Applications","url":"/doc/pr-2675/fr/admin/apps/#user-access-management-and-public-apps","content":" The installation form usually asks whether or not the app should be publically accessible. If you choose to not make it public, only users logged in YunoHost will be able to reach it.  astuce After installation, this can be configured via the webadmin in the Groups and permissions panel, or similarly via the command-line subcategory yunohost user permission.  ","version":"Next","tagName":"h3"},{"title":"Instructions after installation‚Äã","type":1,"pageTitle":"üì¶ Applications","url":"/doc/pr-2675/fr/admin/apps/#instructions-after-installation","content":" Some applications need to give you instructions, URLs or credentials once they are installed. So remember to check the email of the first user account or the admin user selected before installation, if it was prompted.  ","version":"Next","tagName":"h3"},{"title":"Multi-instance applications‚Äã","type":1,"pageTitle":"üì¶ Applications","url":"/doc/pr-2675/fr/admin/apps/#multi-instance-applications","content":" Some applications support the ability to be installed several times (at different locations) ! To do so, just go another time in Applications ‚Üí + Install, and select again the application to install.  ","version":"Next","tagName":"h3"},{"title":"LDAP / SSO integration‚Äã","type":1,"pageTitle":"üì¶ Applications","url":"/doc/pr-2675/fr/admin/apps/#ldap--sso-integration","content":" Applications that allow users to register may support integration with the LDAP / Single Sign On of YunoHost, so that users who connect to the user portal can be automatically logged in all these apps.  However, some applications do not support this as it can be either not implemented in the upstream, or the package does not work on this part yet. This information is usually available on the README of the application package.  ","version":"Next","tagName":"h2"},{"title":"Application configuration‚Äã","type":1,"pageTitle":"üì¶ Applications","url":"/doc/pr-2675/fr/admin/apps/#application-configuration","content":" After installation, some settings handled by YunoHost can be tweaked, such as user and group permissions, application's tile and label in the SSO page, or its access URL.  From the web interfaceFrom the command line You can access the app's operations page by clicking its name in the applications list. Application operations page in the webadmin You can also delete the application from this page.  ","version":"Next","tagName":"h2"},{"title":"Configuration panels‚Äã","type":1,"pageTitle":"üì¶ Applications","url":"/doc/pr-2675/fr/admin/apps/#configuration-panels","content":" Some apps include a configuration panel, which features actions and settings specific for each app that they usually do not handle themselves. They can also spare you the need for altering configuration files by hand.  info Configuration panels are not meant to tweak every aspects of the apps. You will surely use their own administration panels more often than YunoHost's configuration panels.  From the web interfaceFrom the command line The configuration panels are accessible in the webadmin in their operations page, trough the Config panel button. Configuration panel for My Webapp  ","version":"Next","tagName":"h3"},{"title":"Execute commands within the app‚Äã","type":1,"pageTitle":"üì¶ Applications","url":"/doc/pr-2675/fr/admin/apps/#execute-commands-within-the-app","content":" Starting YunoHost v11.1.21.4, if you need to execute commands with the app's binary, or PHP commands, etc., you can execute the command yunohost app shell &lt;app&gt;. It will:  open a new Bash shell as the app's system useropen the app's working directory (e.g. /var/www/&lt;app&gt;)preload the environment with variables taken from the app's service, if it existsoverride php, so that it points to the PHP version used by the app  ","version":"Next","tagName":"h2"},{"title":"Applications packaging‚Äã","type":1,"pageTitle":"üì¶ Applications","url":"/doc/pr-2675/fr/admin/apps/#applications-packaging","content":" Applications must be packaged manually by application packagers/maintainers. Apps can be integrated with YunoHost to support upgrades, backup/restore and LDAP/SSO integration among other things.  If you want to learn or contribute to app packaging, please check the contributor documentation.  ","version":"Next","tagName":"h2"},{"title":"Integration and quality levels‚Äã","type":1,"pageTitle":"üì¶ Applications","url":"/doc/pr-2675/fr/admin/apps/#integration-and-quality-levels","content":" Automated tests are being run regularly to test the integration and quality of all apps who were declared to be working by packagers. The result is a level between 0 and 8, whose meaning is detailed on this page. Some tests results may also be available on this dashboard.  By default, only applications of sufficient quality are offered. When the quality of an application drops and until the problem is reolved, the app is hidden from the catalog to prevent its installation and its upgrades are put on hold. ","version":"Next","tagName":"h3"},{"title":"Backup methods","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/backups/backup_methods","content":"","keywords":"","version":"Next"},{"title":"BorgBackup (cf the Borg \"client\" and Borg \"server\" apps)‚Äã","type":1,"pageTitle":"Backup methods","url":"/doc/pr-2675/fr/admin/backups/backup_methods#borgbackup-cf-the-borg-client-and-borg-server-apps","content":" backup of data on an external disk or on a remote Borg repositorydeduplication and compression of files, which makes it possible to keep many previous copies without too much storage overheaddata encryption, which allows you to store data with a third partyto define the frequency and type of data to be backed upa mail alert system in case of backup failure.  There are remote borg repository providers, it is also possible to create your own repository on another YunoHost with the borgserver application.  ","version":"Next","tagName":"h2"},{"title":"Restic (cf the Restic app)‚Äã","type":1,"pageTitle":"Backup methods","url":"/doc/pr-2675/fr/admin/backups/backup_methods#restic-cf-the-restic-app","content":" backup of data to remote storage (support for different types of storage: currently SFTP, S3 is planned)deduplication and compression of files, which makes it possible to keep many previous copies without too much storage overheaddata encryption, which allows to store data at a third partyto define the frequency and type of data to be backed upa mail alert system in case of backup failure.  ","version":"Next","tagName":"h2"},{"title":"Archivist‚Äã","type":1,"pageTitle":"Backup methods","url":"/doc/pr-2675/fr/admin/backups/backup_methods#archivist","content":" attention This application is currently broken!  based on rsync and GPGbackup of data on a remote storage (support for different types of storage)data encryption, which allows to store data at a third party  The package also allows you to finely define the frequency and type of data to be backed up and integrates an email alert system in case of backup failure.  More info on the forum. ","version":"Next","tagName":"h2"},{"title":"Cr√©er une image compl√®te du syst√®me de fichier","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/backups/clone_filesystem","content":"","keywords":"","version":"Next"},{"title":"D√©clencher un snapshot‚Äã","type":1,"pageTitle":"Cr√©er une image compl√®te du syst√®me de fichier","url":"/doc/pr-2675/fr/admin/backups/clone_filesystem#d√©clencher-un-snapshot","content":" Un snapshot permet de figer une image du syst√®me de fichiers. Les snapshots sont tr√®s pratiques lorsque l'on fait une mise √† jour ou des essais, car ils vous permettent de revenir facilement en arri√®re en cas de p√©pin. En revanche, en dehors de quelques clusters de tr√®s haute disponibilit√©, les snapshots ne vous prot√®gent pas vraiment face √† des pannes mat√©rielles ou des catastrophes (cf. incendie d'OVH √† Strasbourg en 2021).  En g√©n√©ral, les snapshots sont assez √©conomes en espace disque, le principe est que votre syst√®me de fichier va stocker les diff√©rences survenues depuis votre snapshot. Ainsi, seules les modifications consomment de l'espace.  info Pensez √† supprimer les anciens snapshots pour √©viter de g√¢cher votre espace de stockage en stockant toutes les diff√©rences depuis cette date !  Vous pouvez utiliser cette m√©thode avec la plupart des VPS (souvent payant), des gestionnaires de machines virtuelles ou si vous avez install√© YunoHost avec un filesystem avanc√© comme btrfs, ceph ou ZFS, vous pouvez aussi cr√©er des snapshots via la ligne de commande  VPSVirtualBoxProxmoxBTRFSCEPHZFS Ci-dessous, quelques documentations pour les fournisseurs les plus connus: DigitalOcean (EN)GandiOVHScaleway (EN)  ","version":"Next","tagName":"h2"},{"title":"Cr√©er une image du syst√®me de fichier √† froid‚Äã","type":1,"pageTitle":"Cr√©er une image compl√®te du syst√®me de fichier","url":"/doc/pr-2675/fr/admin/backups/clone_filesystem#cr√©er-une-image-du-syst√®me-de-fichier-√†-froid","content":" Vous pouvez cloner votre support (carte SD, disque ssd, volume de VPS...) pour cr√©er une image disque. Cette image avant compression sera de la taille exacte de votre support, c'est pourquoi cette m√©thode s'applique plut√¥t aux machines de moins de 64Go.  √Ä moins de pouvoir lire un snapshot, cette m√©thode n√©cessite d'arr√™ter le serveur le temps de cr√©er l'image. Avec un VPS, il faut red√©marrer en mode rescue depuis l'interface de votre fournisseur.  With USBimagerIn command line with dd Ceci peut √™tre effectu√© avec USBimager (N.B. : assurez-vous de t√©l√©charger la version 'Read-write' ! Pas la version 'Write-only' !). Le processus consiste ensuite √† &quot;l'inverse&quot; du processus de flashage de la carte SD: √âteignez votre serveurR√©cup√©rez la carte SD et branchez-la dans votre ordinateurDans USBimager, cliquez sur &quot;Read&quot; pour cr√©er une image (&quot;photographie&quot;) de la carte SD. Vous pouvez utiliser le fichier obtenu pour plus tard restaurer le syst√®me en entier. Plus de d√©tails dans la doc d'USBimager ","version":"Next","tagName":"h2"},{"title":"M√©thodes personnalis√©es de sauvegardes","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/backups/custom_backup_methods","content":"M√©thodes personnalis√©es de sauvegardes Il est possible de cr√©er votre propre m√©thode de sauvegarde et de la lier au syst√®me de collecte de fichiers √† sauvegarder de YunoHost. Ceci peut √™tre utile si vous souhaitez utiliser votre propre logiciel de sauvegarde ou mener des op√©rations de montages d√©montages de disques par exemple. Cette op√©ration se fait √† l'aide d'un hook et vous permettra de lancer une sauvegarde de cette fa√ßon: yunohost backup create --method custom Ci-dessous, un exemple simpliste qui peut permettre de mettre en place un backup rotationnel avec diff√©rents disques que l'on change toutes les semaines: /etc/yunohost/hooks.d/backup_method/05-custom #!/bin/bash set -euo pipefail work_dir=&quot;$2&quot; name=&quot;$3&quot; repo=&quot;$4&quot; size=&quot;$5&quot; description=&quot;$6&quot; case &quot;$1&quot; in need_mount) # Set false if your method can itself put files in good place in your archive true ;; backup) mount /dev/sda1 /mnt/hdd if [[ &quot;$(df /mnt/hdd | tail -n1 | cut -d&quot; &quot; -f1)&quot; != &quot;/dev/sda1&quot; ]] then exit 1 fi pushd &quot;$work_dir&quot; current_date=$(date +&quot;%Y-%m-%d_%H:%M&quot;) cp -a &quot;${work_dir}&quot; &quot;/mnt/hdd/${current_date}_$name&quot; popd umount /mnt/hdd ;; *) echo &quot;hook called with unknown argument \\`$1'&quot; &gt;&amp;2 exit 1 ;; esac exit 0 ","keywords":"","version":"Next"},{"title":"Migrer ou fusionner des serveurs","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/backups/migrate_or_merge_servers","content":"","keywords":"","version":"Next"},{"title":"Strat√©gies de sauvegarde","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/backups/evaluate","content":"","keywords":"","version":"Next"},{"title":"Qu'est-ce qu'une bonne sauvegarde ?‚Äã","type":1,"pageTitle":"Strat√©gies de sauvegarde","url":"/doc/pr-2675/fr/admin/backups/evaluate#quest-ce-quune-bonne-sauvegarde-","content":" Une bonne sauvegarde est constitu√©e d'au moins 3 copies des donn√©es (en comptant les donn√©es originales), sur au moins 2 stockages distincts, dans au moins 2 lieux distincts (suffisamment √©loign√©s) et id√©alement avec 2 m√©thodes distinctes. Si vos sauvegardes sont chiffr√©es ces r√®gles s'appliquent aussi √† la phrase/cl√© de d√©chiffrement.  Une bonne sauvegarde est aussi dans de nombreux cas, une sauvegarde r√©cente, il faut donc soit beaucoup de rigueur, soit automatiser le processus.  Une bonne sauvegarde est v√©rifi√©e r√©guli√®rement afin de s'assurer de l'effectivit√© et de l'int√©grit√© des donn√©es.  Enfin, une bonne sauvegarde est une sauvegarde restaurable dans des d√©lais acceptables pour vous. Pensez notamment √† documenter votre m√©thode de restauration et √† estimer le temps de transfert d'une copie notamment si les connexions internet en jeu ne sont pas sym√©triques.  info Exemple d'une combinaison robuste et comfortable: une sauvegarde distante et automatique avec borgune sauvegarde sur disque externe et automatique avec borgun snapshot/image r√©gulier (et avant les mises √† jour)une grappe RAID 1 monitor√©e (ou un VPS du commerce qui sera aussi sur une grappe)une passphrase de d√©chiffrement stock√©e sur 3 supports dans 2 lieux  ","version":"Next","tagName":"h2"},{"title":"Quelques m√©thodes possibles‚Äã","type":1,"pageTitle":"Strat√©gies de sauvegarde","url":"/doc/pr-2675/fr/admin/backups/evaluate#quelques-m√©thodes-possibles","content":" g√©n√©rer une archive et la t√©l√©charger manuellement (m√©thode par d√©faut de YunoHost)sauvegarder automatiquement (m√©thode conseill√©e)g√©n√©rer une archive directement sur un autre disquefaire une image du disque ou un snapshotsauvegarder les donn√©es utiles via une m√©thode personnalis√©e  ","version":"Next","tagName":"h2"},{"title":"Risques‚Äã","type":1,"pageTitle":"Strat√©gies de sauvegarde","url":"/doc/pr-2675/fr/admin/backups/evaluate#risques","content":" Ci-dessous, une liste de risques tri√©s du plus au moins probable, dont la probabilit√© reste √† adapter selon votre situation (lieu du serveur, qualit√© des installations, profils d'usagers, etc.). √Ä vous de mettre le curseur l√† o√π il faut, notamment en consid√©rant les cons√©quences d'une perte de donn√©es.  attention Gardez en t√™te que les vrais accidents sont li√©s √† la survenue de 2 √©v√©nements de fa√ßon simultan√©e.  Manque de rigueur: les strat√©gies √† base de sauvegardes manuelles n√©cessitent beaucoup de rigueur dans la r√©gularit√©Mauvaise manipulation: il peut arriver d'effacer une sauvegarde par erreur lors d'une restauration ou si vous comptez sur un syst√®me de synchronisation, vous pourriez supprimer un fichier et que la suppression soit synchronis√©e de fa√ßon instantan√©eCryptolocker: il s'agit de virus qui chiffrent les fichiers et r√©clament une ran√ßon. Si vos utilisateurs ou utilisatrices utilisent nextcloud et windows, un windows infect√© pourrait synchroniser des fichiers chiffr√©s et ainsi vous perdriez votre copie.Panne mat√©rielle: les cartes SD sont les supports les moins fiables dans le temps (~2ans de vie dans un serveur), viennent ensuite les disques SSD (environ 3 ans de vie) et les disques durs (3 ans). √Ä noter qu'un √©quipement neuf a aussi une probabilit√© non nulle de tomber en panne lors des 6 premiers mois. Dans tous les cas, vos copies ne devraient pas √™tre sur le m√™me support physique.Panne logicielle/bug: un bug logiciel peut aboutir √† la suppression de donn√©es ou vous pourriez ne pas savoir r√©parer un probl√®me et souhaiter restaurer votre syst√®me.Panne d'√©lectricit√© ou d'internet: avez-vous un plan si √ßa arrive ? Quid si vous √™tes en vacances ?Catastrophe ou √©v√©nement naturel ou non: un petit enfant, un chat, la foudre ou une simple fuite peuvent d√©truire votre mat√©riel. Les incendies ou inondations peuvent aussi mettre √† mal votre copie de sauvegarde √† l'autre bout de votre logement...Compromission du serveur: une personne malveillante ou un robot pourrait attaquer votre serveur et supprimer vos donn√©es.Vol de machine: un cambriolage ou le vol d'un ordinateur sur lequel se trouve votre gestionnaire de mots de passe pour d√©chiffrer vos sauvegardes.Perquisition: que vous soyez coupable ou non, une perquisition peut aboutir √† la saisie enti√®re du mat√©riel informatique d'un lieu (voir de plusieurs lieux).D√©c√®s/probl√®me de sant√©: vous pourriez ne plus √™tre en mesure de taper votre phrase de passe.  ","version":"Next","tagName":"h2"},{"title":"√Ä propos de la synchronisation Nextcloud ou Thunderbird (IMAP)‚Äã","type":1,"pageTitle":"Strat√©gies de sauvegarde","url":"/doc/pr-2675/fr/admin/backups/evaluate#√†-propos-de-la-synchronisation-nextcloud-ou-thunderbird-imap","content":" Une m√©thode qui permet une sauvegarde partielle consiste √† sauvegarder les fichiers et les emails via des logiciels de synchronisation comme Nextcloud client ou ThunderBird. De cette fa√ßon, vous √©vitez le risque de panne mat√©rielle.  Si cette m√©thode est simple √† mettre en place, elle n'est pas sans risque du fait de la synchronisation elle-m√™me. Par exemple, si vous √™tes sur windows ou mac, vous augmentez de fa√ßon non n√©gligeable le risque de perte de donn√©es suite au chiffrement des fichiers par un virus de type cryptolocker. Sur tout type de syst√®me, une fausse manipulation peut supprimer l'ensemble de vos copies sur le serveur et sur les √©quipements qui synchronisent. Ce souci est aggrav√© par le fait que la synchronisation de suppression est en g√©n√©ral plut√¥t instantan√©e.  Si le risque de fausse manipulation peut √™tre att√©nu√© via des logiciels de sauvegarde pour PC de bureau comme TimeShift, seule une sauvegarde sur un disque dur externe d√©connect√© vous prot√®ge vraiment des ran√ßongiciels. ","version":"Next","tagName":"h2"},{"title":"Inclure/exclure des fichiers","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/backups/include_exclude_files","content":"","keywords":"","version":"Next"},{"title":"Inclure des fichiers‚Äã","type":1,"pageTitle":"Inclure/exclure des fichiers","url":"/doc/pr-2675/fr/admin/backups/include_exclude_files#inclure-des-fichiers","content":" YunoHost sait en g√©n√©ral d√©j√† ce qui doit √™tre sauvegard√©. Toutefois, si vous avez proc√©d√© √† des modifications manuelles, par exemple en installant une app en dehors du syst√®me d'applications de YunoHost, vous pouvez avoir envie d'√©tendre le m√©canisme de YunoHost pour sp√©cifier d'autres fichiers √† sauvegarder.  Par d√©faut, si des configurations suivies par YunoHost sont modifi√©es, elles seront sauvegard√©es. En revanche, une base de donn√©es ou une app ajout√©e √† la main, des modifs sur certaines configurations non suivies, ne le seront pas.  Vous pouvez cr√©er un hook de sauvegarde et un hook de restauration pour ajouter des donn√©es √† sauvegarder. Ci-dessous un exemple:  /etc/yunohost/hooks.d/backup/99-conf_custom  #!/bin/bash # Source YNH helpers source /usr/share/yunohost/helpers ynh_backup_dest (){ YNH_CWD=&quot;${YNH_BACKUP_DIR%/}/$1&quot; mkdir -p $YNH_CWD cd &quot;$YNH_CWD&quot; } # Exit hook on subcommand error or unset variable ynh_abort_if_errors # Openvpn ynh_backup_dest &quot;conf/custom/openvpn&quot; ynh_backup &quot;/etc/sysctl.d/openvpn.conf&quot; ynh_backup &quot;/etc/openvpn&quot; ynh_backup &quot;/etc/fail2ban/jail.d/openvpn.conf&quot; ynh_backup &quot;/etc/fail2ban/filter.d/openvpn.conf&quot; # Samba ynh_backup_dest &quot;conf/custom/samba&quot; ynh_backup &quot;/etc/samba&quot; ynh_backup &quot;/var/lib/samba&quot; ynh_backup &quot;/etc/yunohost/hooks.d/post_user_create/99-samba&quot; ynh_backup &quot;/etc/yunohost/hooks.d/post_user_delete/99-samba&quot; ynh_backup --src_path=&quot;/etc/yunohost/hooks.d/post_user_update/99-samba&quot; --not_mandatory ynh_backup &quot;/etc/cron.daily/clean-trash&quot; # MISC ynh_backup_dest &quot;conf/custom/misc&quot; ynh_backup &quot;/etc/sysctl.d/noipv6.conf&quot; ynh_backup &quot;/usr/local/bin/&quot; ynh_backup &quot;/etc/yunohost/hooks.d/backup/99-conf_custom&quot; ynh_backup &quot;/etc/yunohost/hooks.d/restore/99-conf_custom&quot;   /etc/yunohost/hooks.d/restore/99-conf_custom  #!/bin/bash # Source YNH helpers source /usr/share/yunohost/helpers ynh_restore_dest (){ YNH_CWD=&quot;${YNH_BACKUP_DIR%/}/$1&quot; cd &quot;$YNH_CWD&quot; } # Exit hook on subcommand error or unset variable ynh_abort_if_errors # Openvpn app=&quot;custom_openvpn&quot; # Cette variable est importante pour le helper suivant ynh_install_app_dependencies &quot;openvpn openvpn-auth-ldap samba&quot; ynh_restore_dest &quot;conf/custom/openvpn&quot; ynh_restore_file &quot;/etc/sysctl.d/openvpn.conf&quot; ynh_restore_file &quot;/etc/openvpn&quot; ynh_restore_file &quot;/etc/fail2ban/jail.d/openvpn.conf&quot; ynh_restore_file &quot;/etc/fail2ban/filter.d/openvpn.conf&quot; # Samba app=&quot;custom_samba&quot; # Cette variable est importante pour le helper suivant ynh_install_app_dependencies &quot;samba&quot; ynh_restore_dest &quot;conf/custom/samba&quot; ynh_restore_file &quot;/etc/samba&quot; ynh_restore_file &quot;/var/lib/samba&quot; ynh_restore_file &quot;/etc/yunohost/hooks.d/post_user_create/99-samba&quot; ynh_restore_file &quot;/etc/yunohost/hooks.d/post_user_delete/99-samba&quot; ynh_restore_file --src_path=&quot;/etc/yunohost/hooks.d/post_user_update/99-samba&quot; --not_mandatory ynh_restore_file &quot;/etc/cron.daily/clean-trash&quot; chown -R openvpn:openvpn /etc/openvpn # MISC ynh_restore_dest &quot;conf/custom/misc&quot; ynh_restore_file &quot;/etc/sysctl.d/noipv6.conf&quot; ynh_restore_file &quot;/usr/local/bin/&quot; ynh_restore_file &quot;/etc/yunohost/hooks.d/backup/99-conf_custom&quot; ynh_restore_file &quot;/etc/yunohost/hooks.d/restore/99-conf_custom&quot;   ","version":"Next","tagName":"h2"},{"title":"Exclure des fichiers‚Äã","type":1,"pageTitle":"Inclure/exclure des fichiers","url":"/doc/pr-2675/fr/admin/backups/include_exclude_files#exclure-des-fichiers","content":" Il n'existe pas de m√©canisme pour exclure d'une sauvegarde au format YunoHost des fichiers sp√©cifiques, en dehors des 2 options pr√©sent√©es ci-dessous:  ","version":"Next","tagName":"h2"},{"title":"√âviter de sauvegarder certains dossiers du /home‚Äã","type":1,"pageTitle":"Inclure/exclure des fichiers","url":"/doc/pr-2675/fr/admin/backups/include_exclude_files#√©viter-de-sauvegarder-certains-dossiers-du-home","content":" Si besoin, vous pouvez sp√©cifier que certains dossiers home d'utilisateurs ou utilisatrices ne soient pas sauvegard√©s par la commande yunohost backup, en cr√©ant un fichier vide nomm√© .nobackup √† l'int√©rieur.  Attention ce m√©canisme ne fonctionne que pour les sous-dossiers de premier niveau du /home, comme par exemple /home/user1 ou /home/yunohost.multimedia . Cela ne fonctionne pas pour les autres dossiers ou sous-dossiers, comme par exemple /home/user1/grosdossier.  ","version":"Next","tagName":"h3"},{"title":"Ne pas sauvegarder les grosses quantit√©s de donn√©es‚Äã","type":1,"pageTitle":"Inclure/exclure des fichiers","url":"/doc/pr-2675/fr/admin/backups/include_exclude_files#ne-pas-sauvegarder-les-grosses-quantit√©s-de-donn√©es","content":" Certaines apps comme Nextcloud sont potentiellement rattach√©es √† des quantit√©s importantes de donn√©es. Il est possible de ne pas les sauvegarder par d√©faut. Dans ce cas, on dit que l'app &quot;sauvegarde uniquement le core&quot; (de l'app). Lors d'une mise √† jour, les apps contenant une grande quantit√© de donn√©es effectuent g√©n√©ralement une sauvegarde sans ces donn√©es.  Pour d√©sactiver temporairement la sauvegarde des donn√©es volumineuses, pour les applications qui impl√©mentent cette fonctionnalit√©, vous pouvez d√©finir la variable BACKUP_CORE_ONLY. Pour ce faire, la variable doit √™tre d√©finie avant la commande de backup :  BACKUP_CORE_ONLY=1 yunohost backup create --apps nextcloud   Faites montre de prudence : il vous faudra alors sauvegarder vous-m√™me les donn√©es des utilisateurs et utilisatrices de Nextcloud.  Si vous souhaitez que ce comportement soit permanent:  yunohost app setting nextcloud do_not_backup_data -v 1  ","version":"Next","tagName":"h3"},{"title":"Migrer un serveur‚Äã","type":1,"pageTitle":"Migrer ou fusionner des serveurs","url":"/doc/pr-2675/fr/admin/backups/migrate_or_merge_servers#migrer-un-serveur","content":" Si le syst√®me d'archive de YunoHost est assez pratique pour migrer un serveur, on peut aussi migrer de serveur √† serveur avec rsync.  ","version":"Next","tagName":"h2"},{"title":"Fusionner 2 serveurs YunoHost‚Äã","type":1,"pageTitle":"Migrer ou fusionner des serveurs","url":"/doc/pr-2675/fr/admin/backups/migrate_or_merge_servers#fusionner-2-serveurs-yunohost","content":" Si vous fusionnez 2 serveurs ensemble, vous devrez recr√©er les utilisateurs et utilisatrices, ainsi que les domaines et les permissions du premier serveur sur le serveur de destination. Puis vous pourrez restaurer app par app.  danger Il existe tout de m√™me une limite concernant les apps qui ont le m√™me ID. Il ne sera pas possible de les restaurer facilement. Attention √©galement √† ne pas supprimer l'app √©ponyme du serveur de destination :/ ","version":"Next","tagName":"h2"},{"title":"üõ†Ô∏è SSH et la ligne de commande","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/command_line","content":"","keywords":"","version":"Next"},{"title":"Qu‚Äôest-ce que SSH ?‚Äã","type":1,"pageTitle":"üõ†Ô∏è SSH et la ligne de commande","url":"/doc/pr-2675/fr/admin/command_line#quest-ce-que-ssh-","content":" SSH est un acronyme pour Secure Shell, et d√©signe un protocole qui permet de contr√¥ler et administrer √† distance une machine via la ligne de commande (CLI). C'est aussi une commande disponible de base dans les terminaux de GNU/Linux et macOS. Sous Windows, il vous faudra utiliser le logiciel MobaXterm (apr√®s l'avoir lanc√©, cliquer sur Session puis SSH).  L'interface en ligne de commande (CLI) est, en informatique, la mani√®re originale (et plus technique) d'interagir avec un ordinateur, compar√©e aux interfaces graphiques. La ligne de commande est g√©n√©ralement consid√©r√©e comme plus compl√®te, puissante et efficace que les interfaces graphiques, bien que plus difficile √† apprendre.  ","version":"Next","tagName":"h2"},{"title":"Comment se connecter ?‚Äã","type":1,"pageTitle":"üõ†Ô∏è SSH et la ligne de commande","url":"/doc/pr-2675/fr/admin/command_line#comment-se-connecter-","content":" ","version":"Next","tagName":"h2"},{"title":"Identifiants avant la postinstall‚Äã","type":1,"pageTitle":"üõ†Ô∏è SSH et la ligne de commande","url":"/doc/pr-2675/fr/admin/command_line#identifiants-avant-la-postinstall","content":" Si vous faites une installation √† la maison, les identifiants par d√©faut sont login: root, mot de passe: yunohost (ou 1234 si vous partez d'une image armbian).Si vous faites une installation sur un serveur distant (VPS), votre fournisseur devrait vous avoir communiqu√© le login et le mot de passe (ou vous proposer de configurer une cl√© SSH).  ","version":"Next","tagName":"h3"},{"title":"Identifiants apr√®s la postinstall‚Äã","type":1,"pageTitle":"üõ†Ô∏è SSH et la ligne de commande","url":"/doc/pr-2675/fr/admin/command_line#identifiants-apr√®s-la-postinstall","content":" Durant la post-installation, vous avez d√©fini un compte et un mot de passe d'administration. Le compte d√©fini lors de la post-installation vous permet de vous connecter en SSH. De plus, le mot de passe d√©fini dans la post-installation devient le nouveau mot de passe pour l'utilisateur root. Enfin, la connexion en SSH avec l'utilisateur root est d√©sactiv√©e et il vous faut utiliser le compte d√©fini durant la post-installation !. L'exception √† cette r√®gle est qu'il reste possible de se logger en root depuis le r√©seau local - ou depuis une console en direct sur la machine (ce qui peut √™tre utile dans l'√©ventualit√© o√π le serveur LDAP est inactif et l'utilisateur admin ne fonctionne plus).  astuce Si vous √™tes connect√© en tant avec le compte d'administration et souhaitez devenir root pour plus de confort (par exemple, ne pas avoir √† taper sudo √† chaque commande), vous pouvez devenir root en tapant sudo su ou sudo -i.  ","version":"Next","tagName":"h3"},{"title":"Adresse √† utiliser‚Äã","type":1,"pageTitle":"üõ†Ô∏è SSH et la ligne de commande","url":"/doc/pr-2675/fr/admin/command_line#adresse-√†-utiliser","content":" Si vous h√©bergez votre serveur √† la maison (par ex. Raspberry Pi ou OLinuXino ou vieil ordinateur)  vous devriez pouvoir vous connecter √† la machine en utilisant yunohost.local (ou yunohost-2.local, selon le nombre de serveurs sur le r√©seau).si yunohost.local et consorts ne fonctionnent pas, il vous faut trouver l'IP locale de votre serveur.si vous avez install√© votre serveur √† la maison mais essayez d'y acc√©der depuis l'ext√©rieur du r√©seau local, assurez-vous d'avoir bien configur√© une redirection de port pour le port 22.  S'il s'agit d'une machine distante (VPS), votre fournisseur devrait vous avoir communiqu√© l'IP de votre machine.  Dans tous les cas, si vous avez d√©j√† configur√© un nom de domaine qui pointe sur l'IP appropri√©e, il est plus pratique d'utiliser votre.domaine.tld plut√¥t que l'adresse IP.  ","version":"Next","tagName":"h3"},{"title":"Se connecter‚Äã","type":1,"pageTitle":"üõ†Ô∏è SSH et la ligne de commande","url":"/doc/pr-2675/fr/admin/command_line#se-connecter","content":" Ci-dessous quelques exemples de commande SSH typiques :  # avant la postinstall: ssh root@11.22.33.44 # apr√®s la postinstall: ssh username@11.22.33.44 # avec le nom de domaine plut√¥t que l'IP (plus pratique): ssh username@votre.domaine.tld # avec le nom de domaine sp√©cial yunohost.local: ssh username@yunohost.local # si vous avez chang√© le num√©ro de port pour SSH ssh -p 2244 username@votre.domaine.tld   remarque fail2ban bannira votre IP pendant 10 minutes si vous √©chouez plus de 10 fois √† vous identifier. Pour d√©bannir une IP, vous pouvez regarder la page sur Fail2Ban.  ","version":"Next","tagName":"h3"},{"title":"Autoriser un utilisateur YunoHost standard‚Äã","type":1,"pageTitle":"üõ†Ô∏è SSH et la ligne de commande","url":"/doc/pr-2675/fr/admin/command_line#autoriser-un-utilisateur-yunohost-standard","content":" Par d√©faut, seuls les comptes dans le groupe admins peuvent se connecter en SSH et SFTP sur une instance YunoHost. Les comptes hors de ce groupe ne peuvent se connecter pour des raisons de s√©curit√©. Avec le syst√®me de permissions il est possible d'autoriser la connexion en SFTP ou si c'est vraiment n√©cessaire en SSH.  attention Faites attention √† qui vous donnez acc√®s √† SSH. Cela augmente encore plus la surface d'attaque disponible pour un utilisateur malveillant.  From the web interfaceFrom the command line Se rendre dans Utilisateurs &gt; G√©rer les groupes et les autorisations √Ä partir de l√†, il est possible d'ajouter les permissions SFTP ou SSH √† un utilisateur ou un groupe au choix. Si vous souhaitez ajouter une cl√© publique SSH √† l'utilisateur, vous devez le faire en ligne de commande, l'interface web ne proposant pas encore cette fonctionnalit√©.  ","version":"Next","tagName":"h2"},{"title":"SSH et s√©curit√©‚Äã","type":1,"pageTitle":"üõ†Ô∏è SSH et la ligne de commande","url":"/doc/pr-2675/fr/admin/command_line#ssh-et-s√©curit√©","content":" Une discussion plus compl√®te sur la s√©curit√© de SSH peut √™tre trouv√©e sur la page d√©di√©e.  ","version":"Next","tagName":"h2"},{"title":"La ligne de commande‚Äã","type":1,"pageTitle":"üõ†Ô∏è SSH et la ligne de commande","url":"/doc/pr-2675/fr/admin/command_line#la-ligne-de-commande","content":" info Fournir un tutoriel complet sur la ligne de commande est bien au-del√† du cadre de la documentation de YunoHost : pour cela, r√©f√©rez-vous √† des tutoriels comme celui-ci ou celui-ci (en). Mais soyez rassur√©, il n'y a pas besoin d'√™tre un expert pour commencer √† l'utiliser !  ","version":"Next","tagName":"h2"},{"title":"La commande yunohost‚Äã","type":1,"pageTitle":"üõ†Ô∏è SSH et la ligne de commande","url":"/doc/pr-2675/fr/admin/command_line#la-commande-yunohost","content":" La commande yunohost peut √™tre utilis√©e pour administrer votre serveur ou r√©aliser les m√™mes actions que celles disponibles sur la webadmin. Elle doit √™tre lanc√©e depuis l'utilisateur root, ou bien depuis un compte membre du groupe admins en pr√©c√©dant la commande de sudo. (ProTip‚Ñ¢ : il est possible de devenir root via la commande sudo su en tant que membre du group admins.)  Les commandes YunoHost ont ce type de structure :  yunohost app install wordpress --label Webmail ^ ^ ^ ^ | | | | cat√©gorie action argument options   N'h√©sitez pas √† naviguer et demander des informations √† propos d'une cat√©gorie ou action donn√©e via l'option --help. Par exemple, ces commandes :  yunohost --help yunohost user --help yunohost user create --help   vont successivement lister toutes les cat√©gories disponibles, puis les actions de la cat√©gorie user, puis expliquer comment utiliser l'action user create. Vous devriez remarquer que l'arbre des commandes YunoHost suit une structure similaire aux pages de la webadmin.  ","version":"Next","tagName":"h3"},{"title":"La commande yunopaste‚Äã","type":1,"pageTitle":"üõ†Ô∏è SSH et la ligne de commande","url":"/doc/pr-2675/fr/admin/command_line#la-commande-yunopaste","content":" Cette commande est utile lorsque vous voulez communiquer √† une autre personne le retour d'une commande.  Exemple :  yunohost diagnosis show | yunopaste   ","version":"Next","tagName":"h3"},{"title":"The ynh-vpnclient-loadcubefile.sh command‚Äã","type":1,"pageTitle":"üõ†Ô∏è SSH et la ligne de commande","url":"/doc/pr-2675/fr/admin/command_line#the-ynh-vpnclient-loadcubefilesh-command","content":" This command is only available if you have the VPN Client application installed. You can use it to load a new .cube in case you can't get to the VPN Client interface to do so.  ynh-vpnclient-loadcubefile.sh -u &lt;username&gt; -p &lt;password&gt; -c &lt;path&gt;.cube   ","version":"Next","tagName":"h3"},{"title":"Quelques commandes utiles‚Äã","type":1,"pageTitle":"üõ†Ô∏è SSH et la ligne de commande","url":"/doc/pr-2675/fr/admin/command_line#quelques-commandes-utiles","content":" Si votre interface web d'administration indique que l'API est injoignable, essayez de d√©marrer yunohost-api :  systemctl start yunohost-api   Si vous ne parvenez plus √† vous connecter avec l'utilisateur admin via SSH et via l'interface web, le service slapd est peut-√™tre √©teint, essayez de le red√©marrer :  systemctl restart slapd   Si vous avez des configurations modifi√©es manuellement et souhaitez conna√Ætre les modifications :  yunohost tools regen-conf --with-diff --dry-run  ","version":"Next","tagName":"h3"},{"title":"üåê Domaines","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/domains/","content":"","keywords":"","version":"Next"},{"title":"3 types de domaines‚Äã","type":1,"pageTitle":"üåê Domaines","url":"/doc/pr-2675/fr/admin/domains/#3-types-de-domaines","content":" Yunohost's domains (the free and easy way)Your own domainsLocal domains (only reachable in your local network) Afin de rendre l'auto-h√©bergement aussi accessible que possible, le projet YunoHost fournit un service de nom de domaine gratuit et configur√© automatiquement. En utilisant ce service, vous n'aurez pas √† configurer les enregistrements DNS vous-m√™me, ce qui peut √™tre fastidieux et technique. N√©anmoins, soyez conscient que vous n'√™tes pas r√©ellement propri√©taire du domaine choisi... Les (sous-)domaines suivants sont propos√©s : whateveryouwant.nohost.me ;whateveryouwant.noho.st ;whateveryouwant.ynh.fr. De plus, YunoHost utilise un m√©canisme de DNS dynamique int√©gr√©, de sorte que votre serveur reste accessible m√™me si votre IP publique change. Pour obtenir un de ces domaines, il vous suffit de choisir Je n'ai pas de nom de domaine... lors de la configuration initiale (post-installation) ou sur la page Ajouter un domaine. info Pour limiter les co√ªts de ressources et les abus, chaque instance ne peut avoir qu'un seul de ces domaines √† la fois, mais vous pouvez ajouter autant de sous-domaines que vous le souhaitez. Par exemple, si vous choisissez example.noho.st vous pouvez plus tard ajouter les domaines video.example.noho.st ou www.example.ynh.noho.st ou tout autre sous-domaine dont vous pourriez avoir besoin. Dans ce cas, vous devez s√©lectionner ¬´ J'ai d√©j√† un nom de domaine ¬ª. Plus d'informations sur ces domaines  ","version":"Next","tagName":"h2"},{"title":"Configuration DNS‚Äã","type":1,"pageTitle":"üåê Domaines","url":"/doc/pr-2675/fr/admin/domains/#configuration-dns","content":" DNS (Domain Name System) est un syst√®me qui permet aux ordinateurs du monde entier de traduire les noms de domaine lisibles par les humains (comme yolo.com) en adresses IP compr√©hensibles par les machines (comme 11.22.33.44). Pour que cette traduction (et d'autres fonctionnalit√©s) fonctionne, il faut configurer soigneusement les enregistrements DNS.  YunoHost peut g√©n√©rer une configuration DNS recommand√©e pour chaque domaine, y compris les enregistrements n√©cessaires pour les emails. La configuration DNS recommand√©e est disponible dans l'administrateur web via Domaines &gt; (le domaine) &gt; configuration DNS, ou avec la commande yunohost domain dns-conf the.domain.tld.  ","version":"Next","tagName":"h2"},{"title":"A propos des caract√®res non-latins‚Äã","type":1,"pageTitle":"üåê Domaines","url":"/doc/pr-2675/fr/admin/domains/#a-propos-des-caract√®res-non-latins","content":" Si votre domaine comporte des caract√®res sp√©ciaux non-latins, il sera transform√© par YunoHost en version internationalis√©e ou en Punycode. Ainsi, lorsque vous utilisez la ligne de commande, vous devez utiliser le format punycode renvoy√© par exemple par yunohost domain list.  ","version":"Next","tagName":"h2"},{"title":"Certificats SSL/HTTPS‚Äã","type":1,"pageTitle":"üåê Domaines","url":"/doc/pr-2675/fr/admin/domains/#certificats-sslhttps","content":" Un autre aspect important de la configuration des domaines est le certificat SSL/HTTPS. YunoHost est int√©gr√© avec Let's Encrypt, de sorte qu'une fois que votre serveur est correctement accessible depuis n'importe qui sur Internet via le nom de domaine, l'administrateur peut demander l'installation d'un certificat Let's Encrypt. Voir la documentation sur les certificats pour plus d'informations. ","version":"Next","tagName":"h2"},{"title":"Certificat","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/domains/certificate","content":"","keywords":"","version":"Next"},{"title":"Installer un certificat Let's Encrypt‚Äã","type":1,"pageTitle":"Certificat","url":"/doc/pr-2675/fr/admin/domains/certificate#installer-un-certificat-lets-encrypt","content":" Avant de chercher √† installer un certificat Let's Encrypt, assurez vous que votre DNS est correctement configur√© (votre.domaine.tld doit pointer sur l'IP de votre serveur) et que votre site est accessible en HTTP depuis l'ext√©rieur (c.-√†-d. qu'au moins le port 80 est correctement redirig√© vers votre serveur).  From the web interfaceFrom the command line Rendez-vous dans la partie 'Domaines' de l'interface d'administration, puis dans la section d√©di√©e √† votre domaine. Vous trouverez un bouton 'Certificat SSL'. Dans la section 'Certificat SSL', vous pourrez voir l'√©tat actuel du certificat. Si vous venez d'ajouter le domaine, il dispose d'un certificat auto-sign√©. Si votre domaine est correctement configur√©, il vous est alors possible de passer √† un certificat Let's Encrypt via le bouton vert. Une fois l'installation effectu√©e, vous pouvez vous rendre sur votre domaine via votre navigateur, en HTTPS, pour v√©rifier que votre certificat est bien sign√© par Let's Encrypt. Le certificat sera renouvel√© automatiquement tous les trois mois environ.  En cas de probl√®me‚Äã  Si, suite √† une mauvaise manipulation, un certificat se retrouve dans une situation f√¢cheuse (e.g. perte du certificat ou impossible de lire le certificat), il est possible de repartir sur des bases propres en reg√©n√©rant un certificat auto-sign√© :  yunohost domain cert install votre.domaine.tld --self-signed --force   Si YunoHost trouve que votre domaine est mal configur√© quand bien m√™me vous avez bien v√©rifi√© votre configuration DNS et avez bien acc√®s √† votre serveur en HTTP depuis l'ext√©rieur, vous pouvez tenter :  d'ajouter une ligne 127.0.0.1 votre.domaine.tld au fichier /etc/hosts sur votre serveur ;si l'installation ne fonctionne toujours pas, de d√©sactiver les v√©rifications en ajoutant --no-checks √† la commande cert install. ","version":"Next","tagName":"h3"},{"title":"üì¨ Courriels","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/email/","content":"","keywords":"","version":"Next"},{"title":"S'assurer que votre configuration est correcte‚Äã","type":1,"pageTitle":"üì¨ Courriels","url":"/doc/pr-2675/fr/admin/email/#sassurer-que-votre-configuration-est-correcte","content":" Les emails sont un √©cosyst√®me compliqu√© et un grand nombre de d√©tails peuvent les emp√™cher de fonctionner correctement.  Pour valider que votre configuration est correcte :  si vous vous h√©bergez chez vous et n'utilisez pas de VPN, assurez-vous que votre FAI ne bloque pas le port 25 ;routez les ports selon cette documentation ;configurez soigneusement les enregistrements DNS du courrier √©lectronique selon cette documentation ;test your configuration using the diagnostic features ( Webadmin ‚Üí Diagnosis ‚Üí Email ). You can also use mail-tester.com, a score of at least 8~9/10 is a reasonnable goal (be careful : only 3 tests per domain per day are allowed)  ","version":"Next","tagName":"h2"},{"title":"Clients de messagerie‚Äã","type":1,"pageTitle":"üì¨ Courriels","url":"/doc/pr-2675/fr/admin/email/#clients-de-messagerie","content":" Pour interagir avec le serveur de mail, c'est-√†-dire lire et envoyer des emails, vous pouvez soit installer un client web comme Roundcube ou Rainloop sur votre serveur, soit configurer un client de bureau ou mobile comme d√©crit dans cette page.  Les clients de bureau ou mobile ont l'avantage de copier vos emails sur l'√©quipement permettant ainsi la consultation hors ligne et une protection relative face √† d'√©ventuelles pannes mat√©rielles de votre serveur.  ","version":"Next","tagName":"h2"},{"title":"Configuration des alias de messagerie et des redirections automatiques‚Äã","type":1,"pageTitle":"üì¨ Courriels","url":"/doc/pr-2675/fr/admin/email/#configuration-des-alias-de-messagerie-et-des-redirections-automatiques","content":" Des alias de messagerie et des redirections peuvent √™tre configur√©s pour chaque utilisateur. Par exemple, le premier utilisateur cr√©√© sur le serveur dispose automatiquement d'un alias root@votre.domaine.tld - ce qui signifie qu'un email envoy√© vers cette adresse se retrouvera dans la bo√Æte de r√©ception de cet utilisateur. Les redirections automatiques peuvent √™tre configur√©es, par exemple si un utilisateur ne veut pas configurer un compte de messagerie suppl√©mentaire et souhaite simplement recevoir des courriels du serveur sur, disons, son adresse Gmail.  Une autre fonctionnalit√© m√©connue est l'utilisation de suffixes commencant par &quot;+&quot;. Par exemple, les emails envoy√©s √† johndoe+sncf@votre.domaine.tld atteriront dans le dossier 'sncf' de la bo√Æte mail de John Doe (ou bien directement dans la bo√Æte mail si ce dossier n'existe pas). C'est une technique pratique pour, par exemple, fournir une adresse mail √† un site puis facilement trier (via des filtres automatiques) les courriers venant de ce site.  Les groupes aussi peuvent utiliser des alias, par d√©faut le groupe admins dispose de root@&lt;domain.tld&gt; ou encore webmaster@&lt;domain.tld&gt;. Plus d'information dans la page d√©di√©e.  ","version":"Next","tagName":"h2"},{"title":"Que se passe-t-il si mon serveur devient indisponible ?‚Äã","type":1,"pageTitle":"üì¨ Courriels","url":"/doc/pr-2675/fr/admin/email/#que-se-passe-t-il-si-mon-serveur-devient-indisponible-","content":" Si votre serveur devient indisponible, les courriels envoy√©s √† votre serveur resteront dans une file d'attente du c√¥t√© de l'exp√©diteur pendant environ 5 jours. L'h√©bergeur de l'exp√©diteur tentera r√©guli√®rement de renvoyer le courrier, jusqu'√† ce qu'il le jette s'il n'a pas pu l'envoyer.  ","version":"Next","tagName":"h2"},{"title":"Formulaires pour enlever son adresse IP des listes noires‚Äã","type":1,"pageTitle":"üì¨ Courriels","url":"/doc/pr-2675/fr/admin/email/#formulaires-pour-enlever-son-adresse-ip-des-listes-noires","content":" Il est possible que les emails envoy√©s depuis votre instance YunoHost soient consid√©r√©s comme du spam par les grands services de mails. Il est possible que l‚Äôadresse IP de votre serveur ait, autrefois, √©t√© utilis√©e pour envoyer du spam ou que ces services de mails consid√®rent votre serveur comme √©metteur de spams. Pour s‚Äôassurer que l‚Äôadresse IP de votre serveur n‚Äôest pas dans ces listes et pour l‚Äôenlever dans le cas √©ch√©ant suivez ce lien.  ","version":"Next","tagName":"h2"},{"title":"Migration des emails d'un fournisseur d'emails vers une instance de YunoHost‚Äã","type":1,"pageTitle":"üì¨ Courriels","url":"/doc/pr-2675/fr/admin/email/#migration-des-emails-dun-fournisseur-demails-vers-une-instance-de-yunohost","content":" Voir cette page.  ","version":"Next","tagName":"h2"},{"title":"Configuration du relais SMTP‚Äã","type":1,"pageTitle":"üì¨ Courriels","url":"/doc/pr-2675/fr/admin/email/#configuration-du-relais-smtp","content":" Voir cette page. ","version":"Next","tagName":"h2"},{"title":"Configurer les clients courriels","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/email/clients","content":"","keywords":"","version":"Next"},{"title":"R√©glages g√©n√©riques‚Äã","type":1,"pageTitle":"Configurer les clients courriels","url":"/doc/pr-2675/fr/admin/email/clients#r√©glages-g√©n√©riques","content":" Voici les √©l√©ments que vous devrez entrer pour configurer manuellement votre client email (votre.domaine.tld fait r√©f√©rence √† ce qui est apr√®s le @ dans votre adresse email, et nom_utilisateur ce qui est avant @).  Protocole\tPort\tChiffrement\tAuthentification\tLoginIMAP\t993\tSSL/TLS\tMot de passe normal\tnom_utilisateur (sans @votre.domaine.tld) SMTP\t587\tSTARTTLS\tMot de passe normal\tnom_utilisateur (sans @votre.domaine.tld)  ","version":"Next","tagName":"h3"},{"title":"Client par client‚Äã","type":1,"pageTitle":"Configurer les clients courriels","url":"/doc/pr-2675/fr/admin/email/clients#client-par-client","content":" Mozilla ThunderbirdK-9 Mail (Thunderbird Mobile)Dekko Configurer Thunderbird Desktop‚Äã To manually configure a new account in Thunderbird Desktop, add the account information, then click on 'Configure manually'. For the incoming server, use IMAP with port 993 and SSL/TLS.For outgoing server, use port 587 with STARTTLS.Select 'Normal Password' for the the authentication method of both. You may need to accept the certificate exceptions for fetching mails and after you send your first mail. Don't forget to remove the dot before the domain name. G√©rer les alias mails ","version":"Next","tagName":"h3"},{"title":"Migrer ses emails d'un ancien serveur mail vers YunoHost","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/email/migration","content":"","keywords":"","version":"Next"},{"title":"ImapSync‚Äã","type":1,"pageTitle":"Migrer ses emails d'un ancien serveur mail vers YunoHost","url":"/doc/pr-2675/fr/admin/email/migration#imapsync","content":" Site d‚ÄôImapSync  Installez ImapSync sur votre ordinateur client en suivant ce guide¬†:  sudo dnf install imapsync # Sous Fedora   Transf√©rez les mails d‚Äôun serveur √† l‚Äôautre¬†:  imapsync --host1 &lt;domaine/IP&gt; --port1 993 --ssl1 --user1 &lt;utilisateur&gt; --password1 &lt;mdp&gt; \\ --host2 &lt;domaine/IP&gt; --port2 993 --ssl2 --user2 &lt;utilisateur&gt; --password2 &lt;mot de passe&gt;   Notez que les param√®tres de transfert --port 993 et --ssl sont sp√©cifiques √† un serveur de mail YunoHost.  ","version":"Next","tagName":"h3"},{"title":"Larch‚Äã","type":1,"pageTitle":"Migrer ses emails d'un ancien serveur mail vers YunoHost","url":"/doc/pr-2675/fr/admin/email/migration#larch","content":" Site de Larch  Apr√®s avoir pr√©alablement install√© gem, installez larch sur votre ordinateur client¬†:  sudo gem install larch   Transf√©rez les mails d‚Äôun serveur √† l‚Äôautre¬†:  larch -a -f imaps://serveur_d'origine.org -t imaps://serveur_de_destination.org   Pour d‚Äôautres types de transferts r√©f√©rez-vous √† la documentation de Larch. ","version":"Next","tagName":"h3"},{"title":"Conseils et lignes directrices","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/guidelines","content":"","keywords":"","version":"Next"},{"title":"Ne cassez pas YunoHost‚Äã","type":1,"pageTitle":"Conseils et lignes directrices","url":"/doc/pr-2675/fr/admin/get_started/guidelines#ne-cassez-pas-yunohost","content":" En d'autres termes : votre serveur est soit un ¬´ serveur de production ¬ª (destin√© √† fonctionner), soit un serveur de test sur lequel vous vous permettez d'exp√©rimenter.  Si votre but est d'avoir un serveur de production :  soyez conscient qu'un serveur est un syst√®me fragile : restez prudent, m√©thodique et patient ;limitez les exp√©rimentations et la personnalisation - notamment des fichiers de config ;n'installez pas des douzaines d'applications juste pour voir de quoi elles ont l'air ;utilisez les applications non-officielles avec prudence, et interdisez-vous d'utiliser celles marqu√©es 'in progress', 'not working' ou qui sont en niveau 0 ;si quelque chose casse, r√©fl√©chissez √† deux fois avant de tenter de le r√©parer vous-m√™me si vous ne savez pas ce que vous faites. (Par exemple, n'essayez pas de recr√©er vous-m√™me l'utilisateur admin juste parce qu'il a myst√©rieusement disparu...)  ","version":"Next","tagName":"h2"},{"title":"Restez simple !‚Äã","type":1,"pageTitle":"Conseils et lignes directrices","url":"/doc/pr-2675/fr/admin/get_started/guidelines#restez-simple-","content":" YunoHost est con√ßu pour fonctionner avec des cas d'utilisation g√©n√©raux et simples. S'√©carter de ces conditions rendra les choses plus difficiles et vous aurez besoin de connaissances techniques pour les faire fonctionner. Par exemple :  n'essayez pas d'ex√©cuter YunoHost dans un contexte o√π vous ne pouvez pas avoir le contr√¥le des ports 80 et 443 (ou pas d'Internet du tout) ;n'essayez pas d'h√©berger cinq serveurs derri√®re la m√™me connexion Internet si vous n'√™tes pas d√©j√† un utilisateur avanc√© ;ne vous tourmentez pas √† vouloir remplacer NGINX par Apache (ou faire tourner les deux √† la fois) ;n'essayez pas d'utiliser des certificats SSL personnalis√©s si vous n'en avez pas vraiment besoin ;...  Gardez les choses aussi simples que possible !  ","version":"Next","tagName":"h2"},{"title":"Ne r√©installez pas tous les jours‚Äã","type":1,"pageTitle":"Conseils et lignes directrices","url":"/doc/pr-2675/fr/admin/get_started/guidelines#ne-r√©installez-pas-tous-les-jours","content":" Certaines personnes ont tendance √† tomber dans la &quot;spirale de la r√©installation&quot; - o√π chaque fois que quelque chose casse dans le serveur et qu'il n'est pas √©vident de le r√©parer, ou parce que le serveur est devenu instable, l'administrateur finit par r√©installer le serveur entier √† partir de z√©ro car cela semble une solution &quot;facile&quot; et rapide pour remettre les choses √† plat.  Ne faites pas √ßa. La r√©installation est une op√©ration lourde et n'est pas une bonne strat√©gie √† long terme pour r√©soudre les probl√®mes. Vous vous fatiguerez et n'apprendrez rien. Oubliez le r√™ve d'avoir un serveur infaillible : un serveur utilis√© quotidiennement finit toujours par √™tre instable. De plus, vous devez apprendre (progressivement) √† r√©soudre les probl√®mes lorsque vous les rencontrez. Demandez de l'aide en fournissant des d√©tails sur les sympt√¥mes, ce que vous essayez de faire et ce qu'il se passe, et corrigez les probl√®mes. Avec le temps, vous aurez un bien meilleur contr√¥le sur votre serveur que si vous r√©installez aveugl√©ment √† chaque fois.  ","version":"Next","tagName":"h2"},{"title":"Faites des sauvegardes‚Äã","type":1,"pageTitle":"Conseils et lignes directrices","url":"/doc/pr-2675/fr/admin/get_started/guidelines#faites-des-sauvegardes","content":" Si vous h√©bergez des services et des donn√©es qui sont importants pour vos utilisateurs, il est important que vous mettiez en place une politique de sauvegarde. Les sauvegardes peuvent √™tre facilement cr√©√©es √† partir de la webadmin - et les archives peuvent √™tre t√©l√©charg√©es depuis la webadmin, depuis un client FTP comme FileZilla, ou depuis un terminal avec scp. Vous devez effectuer r√©guli√®rement des sauvegardes et les conserver dans un endroit s√ªr et physiquement diff√©rent de votre serveur. Plus d'infos dans la documentation des sauvegardes.  ","version":"Next","tagName":"h2"},{"title":"Lisez les emails envoy√©s √† root‚Äã","type":1,"pageTitle":"Conseils et lignes directrices","url":"/doc/pr-2675/fr/admin/get_started/guidelines#lisez-les-emails-envoy√©s-√†-root","content":" En tant qu'administrateur, vous devriez configurer un client de messagerie pour v√©rifier les e-mails envoy√©s √† root@votre.domaine.tld (qui doit √™tre un alias pour le premier utilisateur que vous avez ajout√©) ou les transf√©rer √† une autre adresse que vous v√©rifiez activement. Ces courriels peuvent contenir des informations sur ce qui se passe sur votre serveur, comme les t√¢ches p√©riodiques automatis√©es.  ","version":"Next","tagName":"h2"},{"title":"YunoHost est un logiciel gratuit, maintenu par des b√©n√©voles‚Äã","type":1,"pageTitle":"Conseils et lignes directrices","url":"/doc/pr-2675/fr/admin/get_started/guidelines#yunohost-est-un-logiciel-gratuit-maintenu-par-des-b√©n√©voles","content":" Enfin, gardez √† l'esprit que YunoHost est un logiciel libre maintenu par des volontaires - et que le but de YunoHost (d√©mocratiser l'auto-h√©bergement) n'est pas simple ! Le logiciel est fourni sans aucune garantie. L'√©quipe de b√©n√©voles fait de son mieux pour maintenir et fournir la meilleure exp√©rience possible - pourtant les fonctionnalit√©s, les applications et YunoHost dans son ensemble sont loin d'√™tre parfaits et vous ferez face t√¥t ou tard √† de petit ou gros probl√®mes. Lorsque cela se produit, venez gentiment demander de l'aide sur le chat ou le forum, ou signaler le probl√®me :) !  Si vous aimez YunoHost et que vous voulez que le projet soit maintenu en vie et progresse, n'h√©sitez pas √† laisser une note de remerciement et √† faire un don au projet et √† en parler autour de vous !  Pour finir, puisque YunoHost est un projet de logiciel libre, vous √™tes l√©gitime et bienvenu pour [venir contribuer](/dev au projet, que ce soit sur les aspects techniques (c.-√†-d. code) et moins techniques (comme par exemple contribuer √† cette documentation ;)) ! ","version":"Next","tagName":"h2"},{"title":"Install on...","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/install_on","content":"Install on... Select the hardware on which you want install YunoHost: On a Raspberry Pi Our preferred baked boards On an ARM board Looks like a Raspberry Pi, isn't quite one On a remote server Cloud machines: VPS or dedicated servers On a regular computer An old computer or a huge x86 rack server In a virtual machine For testing and debugging purposes On top of Debian If you can't use preinstalled images On WSL Experimental, for testing purposes","keywords":"","version":"Next"},{"title":"On an ARM board","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/install_on/arm_board","content":"","keywords":"","version":"Next"},{"title":" Pre-requisites‚Äã","type":1,"pageTitle":"On an ARM board","url":"/doc/pr-2675/fr/admin/get_started/install_on/arm_board#-pre-requisites","content":" An ARM board with at least 512MB RAMA power supply (either an adapter or a USB cable) for your board;A microSD card: 16GB capacity (at least), class &quot;A1&quot; highly recommended (such as this SanDisk A1 card);A reasonable ISP, preferably with a good and unlimited upstream bandwidthAn ethernet cable (RJ-45) to connect your server to your router.A computer to read this guide, flash the image and access your server.  attention Each ARM board is different and there might be specific instructions for your board. Please follow the Armbian documentation first!  ","version":"Next","tagName":"h2"},{"title":" Download the Armbian image‚Äã","type":1,"pageTitle":"On an ARM board","url":"/doc/pr-2675/fr/admin/get_started/install_on/arm_board#-download-the-armbian-image","content":" You should download the Armbian Bookworm (Debian 12) image from your vendor's or Armbian's website.   Armbian Download page    ","version":"Next","tagName":"h2"},{"title":" Flash the Armbian image‚Äã","type":1,"pageTitle":"On an ARM board","url":"/doc/pr-2675/fr/admin/get_started/install_on/arm_board#-flash-the-armbian-image","content":" Now that you downloaded the image of Armbian, you should flash it on a microSD card  With Etcher (recommended)With USBimagerWith dd Download Etcher for your operating system and install it. Plug your SD card, select your image and click &quot;Flash&quot;  ","version":"Next","tagName":"h2"},{"title":" Power up the board‚Äã","type":1,"pageTitle":"On an ARM board","url":"/doc/pr-2675/fr/admin/get_started/install_on/arm_board#-power-up-the-board","content":" Put the SD card in your boardConnect your board to your home router via Ethernet For advanced users requiring WiFi instead, please follow the official documentation. If you want to follow the initial boot, connect a screen and keyboard on your board.Power up the board  ","version":"Next","tagName":"h2"},{"title":" Connect to the board‚Äã","type":1,"pageTitle":"On an ARM board","url":"/doc/pr-2675/fr/admin/get_started/install_on/arm_board#-connect-to-the-board","content":" Next you need to find the local IP address of your server to connect as root user via SSH with the temporary password 1234 (see the Armbian doc).  ssh root@192.168.x.xxx   ","version":"Next","tagName":"h2"},{"title":" Run the install script‚Äã","type":1,"pageTitle":"On an ARM board","url":"/doc/pr-2675/fr/admin/get_started/install_on/arm_board#-run-the-install-script","content":" Open a command line prompt on your server (either directly or through SSH)Make sure you are root (or type sudo -i to become root)Run the following command:  curl https://install.yunohost.org | bash   attention You might need to first install curl and ca-certificates by running: apt install curl ca-certificates   danger Always ensure there's an s at the end of https.  remarque For advanced users concerned with the curl | bash approach: consider reading &quot;Is curl|bash insecure?&quot; on Sandstom's blog, and possibly this discussion on Hacker News.  ","version":"Next","tagName":"h2"},{"title":" Proceed with the initial configuration‚Äã","type":1,"pageTitle":"On an ARM board","url":"/doc/pr-2675/fr/admin/get_started/install_on/arm_board#-proceed-with-the-initial-configuration","content":" astuce If you are in the process of restoring a server using a YunoHost backup, you should skip this step and instead restore the backup instead of the postinstall step.  remarque This documentation assumes you're on the same local network as your YunoHost installation.Find out its IP address before continuing. For a VPS, please use the public IP address instead of the local domain or address.  From the web interfaceFrom the command line attention During the first visit, you will very likely encounter a security warning related to the certificate used by the server. For now, your server uses a self-signed certificate. You will later be able to add a certificate automatically recognized by web browsers as described in the certificate documentation. For now, you should add a security exception to accept the current certificate. (Though, PLEASE, do not take the habit of blindly accepting this kind of security alert!) You should then land on this page: Preview of the Web initial configuration page  ","version":"Next","tagName":"h2"},{"title":" Main domain‚Äã","type":1,"pageTitle":"On an ARM board","url":"/doc/pr-2675/fr/admin/get_started/install_on/arm_board#-main-domain","content":" WSL specific configuration You will have to choose a fake domain, since it will not be accessible from outside. For example, ynh.wsl. The tricky part is advertising this domain to your host. Alter your C:\\Windows\\System32\\drivers\\etc\\hosts file. You should have a line starting by ::1, update it or add it if needed to get: ::1 ynh.wsl localhost If you want to create subdomains, do not forget to add them in the hosts file too: ::1 ynh.wsl subdomain.ynh.wsl localhost   This will be the domain used by your server's users to access the authentication portal. You can later add other domains, and change which one is the main domain if needed.  If you're new to self-hosting and do not already have a domain name, we recommend using a .nohost.me / .noho.st / .ynh.fr (e.g. homersimpson.nohost.me). Provided that it's not already taken, the domain will be configured automatically and you won't need any further configuration step. Please note that the downside is that you won't have full-control over the DNS configuration.If you already own a domain name, you probably want to use it here. You will later need to configure DNS records as explained here.  astuce Yes, you have to configure a domain name. If you don't have any domain name and don't want a .nohost.me / .noho.st / .ynh.fr either, you can set up a dummy domain such as yolo.test and tweak your local /etc/hosts file such that this dummy domain points to the appropriate IP, as explained here.  ","version":"Next","tagName":"h3"},{"title":" First user‚Äã","type":1,"pageTitle":"On an ARM board","url":"/doc/pr-2675/fr/admin/get_started/install_on/arm_board#-first-user","content":" The first user is now created at this stage. You should pick a username and a reasonably complex password. (We cannot stress enough that the password should be robust!) This user will be added to the Admins group, and will therefore be able to access the user portal, the web admin interface, and connect via SSH or SFTP. Admins will also receive emails sent to root@yourdomain.tld and admin@yourdomain.tld: these emails may be used to send technical informations or alerts. You can later add additional users, which you can also add to the Admins group.  This user replaces the old admin user, which some old documentation page may still refer to. In which case: just replace admin with your username.  ","version":"Next","tagName":"h3"},{"title":" Run the initial diagnosis‚Äã","type":1,"pageTitle":"On an ARM board","url":"/doc/pr-2675/fr/admin/get_started/install_on/arm_board#-run-the-initial-diagnosis","content":" Once the postinstall is done, you should be able to actually log in the web admin interface using the credentials of the first user you just created.  The diagnosis system is meant to provide an easy way to validate that all critical aspects of your server are properly configured - and guide you in how to fix issues. The diagnosis will run twice a day and send an alert if issues are detected.  astuce Don't run away ! The first time you run the diagnosis, it is quite expected to see a bunch of yellow/red alerts because you typically need to configure DNS records (if not using a .nohost.me/noho.st/ynh.fr domain), add a swapfile if not enough ram as well as port forwarding on your home's router.  astuce If an alert is not relevant (for example because you don't intend on using a specific feature), it is perfectly fine to flag the issue as 'ignored' by going in the webadmin &gt; Diagnosis, and clicking the ignore button for this specifc issue.  attention Especially, installations on WSL or virtual machines will likely not be reachable from outside without further network configuration on Virtualbox and your machine.  (Recommended) From the web interfaceFrom the command line To run a diagnosis, go on Web Admin in the Diagnosis section. Click Run initial diagnosis and you should get a screen like this: Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":" Get a Let's Encrypt certificate‚Äã","type":1,"pageTitle":"On an ARM board","url":"/doc/pr-2675/fr/admin/get_started/install_on/arm_board#-get-a-lets-encrypt-certificate","content":" Once you configured DNS records and port forwarding (if needed), you should be able to install a Let's Encrypt certificate. This will get rid of the spooky security warning from earlier for new visitors.  For more detailed instructions, or to lean more about SSL/TLS certificates, see the corresponding page here.  From the web interfaceFrom the command line Go in Domains &gt; Click on your domain &gt; Certificate Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":"üéâ Congratz!‚Äã","type":1,"pageTitle":"On an ARM board","url":"/doc/pr-2675/fr/admin/get_started/install_on/arm_board#-congratz","content":" You now have a pretty well configured server. If you're new to YunoHost, we recommend to have a look at the guided tour. You should also be able to install your favourite applications. Don't forget to plan backups ! ","version":"Next","tagName":"h2"},{"title":"On top of Debian","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/install_on/on_top_of_debian","content":"","keywords":"","version":"Next"},{"title":" Get Debian‚Äã","type":1,"pageTitle":"On top of Debian","url":"/doc/pr-2675/fr/admin/get_started/install_on/on_top_of_debian#-get-debian","content":" You should download the version Bookworm (Debian 12) and select the architecture for your PC.  When in doubt, select amd64, or i386 for a pre-2010 PC.   Debian Download page  Alternatively, you can browse the Debian archive for the latest 12.x version, select your architecture, the select iso-cd and download the netinst iso.  Installation‚Äã  You might want to wipe the hard drive before starting the Debian installer.  Burn the iso to your USB key, for example using Etcher.  Debian installer will ask for a hostname and a domain name. You can use yunohost and yunohost.local. It is not that important since the YunoHost Installer will overwrite those anyway.  Debian will ask for a root password, which should be reaonably complex as it is your primary defense to possible attacks.  The installer will also ask for a user account and another password.  attention IMPORTANT: this username should be DIFFERENT from the first YunoHost user which you will choose during YunoHost's posinstall‚Ä¶ For example, you can name it debian. Be sure to also use a long complex password.  When the install asks where to install and how to create disk partitions, select the option to use the whole disk, unless you know what you're doing.  We recommend not to separate the /home, /var or /tmp partitions. Use the option to ‚Äúkeep all files in one partition‚Äù.If you don't know what you're doing, don't encrypt the disk (Decryption at power-on will be an issue)  The installer will ask about mirrors. Select a country and server close to your location, or use the default options.  The installer will ask which desktop environment you want. This is generally useless and might waste resources.  Unselect all desktop environmentKeep ‚Äústandard system utilities‚Äù checked  After installing Debian‚Äã  Remove the installation media (unplug the USB stick)RebootLogin as rootInstall curl by typing apt install curl  ","version":"Next","tagName":"h2"},{"title":" Run the install script‚Äã","type":1,"pageTitle":"On top of Debian","url":"/doc/pr-2675/fr/admin/get_started/install_on/on_top_of_debian#-run-the-install-script","content":" Open a command line prompt on your server (either directly or through SSH)Make sure you are root (or type sudo -i to become root)Run the following command:  curl https://install.yunohost.org | bash   attention You might need to first install curl and ca-certificates by running: apt install curl ca-certificates   danger Always ensure there's an s at the end of https.  remarque For advanced users concerned with the curl | bash approach: consider reading &quot;Is curl|bash insecure?&quot; on Sandstom's blog, and possibly this discussion on Hacker News.  ","version":"Next","tagName":"h2"},{"title":" Proceed with the initial configuration‚Äã","type":1,"pageTitle":"On top of Debian","url":"/doc/pr-2675/fr/admin/get_started/install_on/on_top_of_debian#-proceed-with-the-initial-configuration","content":" astuce If you are in the process of restoring a server using a YunoHost backup, you should skip this step and instead restore the backup instead of the postinstall step.  remarque This documentation assumes you're on the same local network as your YunoHost installation.Find out its IP address before continuing. For a VPS, please use the public IP address instead of the local domain or address.  From the web interfaceFrom the command line attention During the first visit, you will very likely encounter a security warning related to the certificate used by the server. For now, your server uses a self-signed certificate. You will later be able to add a certificate automatically recognized by web browsers as described in the certificate documentation. For now, you should add a security exception to accept the current certificate. (Though, PLEASE, do not take the habit of blindly accepting this kind of security alert!) You should then land on this page: Preview of the Web initial configuration page  ","version":"Next","tagName":"h2"},{"title":" Main domain‚Äã","type":1,"pageTitle":"On top of Debian","url":"/doc/pr-2675/fr/admin/get_started/install_on/on_top_of_debian#-main-domain","content":" WSL specific configuration You will have to choose a fake domain, since it will not be accessible from outside. For example, ynh.wsl. The tricky part is advertising this domain to your host. Alter your C:\\Windows\\System32\\drivers\\etc\\hosts file. You should have a line starting by ::1, update it or add it if needed to get: ::1 ynh.wsl localhost If you want to create subdomains, do not forget to add them in the hosts file too: ::1 ynh.wsl subdomain.ynh.wsl localhost   This will be the domain used by your server's users to access the authentication portal. You can later add other domains, and change which one is the main domain if needed.  If you're new to self-hosting and do not already have a domain name, we recommend using a .nohost.me / .noho.st / .ynh.fr (e.g. homersimpson.nohost.me). Provided that it's not already taken, the domain will be configured automatically and you won't need any further configuration step. Please note that the downside is that you won't have full-control over the DNS configuration.If you already own a domain name, you probably want to use it here. You will later need to configure DNS records as explained here.  astuce Yes, you have to configure a domain name. If you don't have any domain name and don't want a .nohost.me / .noho.st / .ynh.fr either, you can set up a dummy domain such as yolo.test and tweak your local /etc/hosts file such that this dummy domain points to the appropriate IP, as explained here.  ","version":"Next","tagName":"h3"},{"title":" First user‚Äã","type":1,"pageTitle":"On top of Debian","url":"/doc/pr-2675/fr/admin/get_started/install_on/on_top_of_debian#-first-user","content":" The first user is now created at this stage. You should pick a username and a reasonably complex password. (We cannot stress enough that the password should be robust!) This user will be added to the Admins group, and will therefore be able to access the user portal, the web admin interface, and connect via SSH or SFTP. Admins will also receive emails sent to root@yourdomain.tld and admin@yourdomain.tld: these emails may be used to send technical informations or alerts. You can later add additional users, which you can also add to the Admins group.  This user replaces the old admin user, which some old documentation page may still refer to. In which case: just replace admin with your username.  ","version":"Next","tagName":"h3"},{"title":" Run the initial diagnosis‚Äã","type":1,"pageTitle":"On top of Debian","url":"/doc/pr-2675/fr/admin/get_started/install_on/on_top_of_debian#-run-the-initial-diagnosis","content":" Once the postinstall is done, you should be able to actually log in the web admin interface using the credentials of the first user you just created.  The diagnosis system is meant to provide an easy way to validate that all critical aspects of your server are properly configured - and guide you in how to fix issues. The diagnosis will run twice a day and send an alert if issues are detected.  astuce Don't run away ! The first time you run the diagnosis, it is quite expected to see a bunch of yellow/red alerts because you typically need to configure DNS records (if not using a .nohost.me/noho.st/ynh.fr domain), add a swapfile if not enough ram as well as port forwarding on your home's router.  astuce If an alert is not relevant (for example because you don't intend on using a specific feature), it is perfectly fine to flag the issue as 'ignored' by going in the webadmin &gt; Diagnosis, and clicking the ignore button for this specifc issue.  attention Especially, installations on WSL or virtual machines will likely not be reachable from outside without further network configuration on Virtualbox and your machine.  (Recommended) From the web interfaceFrom the command line To run a diagnosis, go on Web Admin in the Diagnosis section. Click Run initial diagnosis and you should get a screen like this: Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":" Get a Let's Encrypt certificate‚Äã","type":1,"pageTitle":"On top of Debian","url":"/doc/pr-2675/fr/admin/get_started/install_on/on_top_of_debian#-get-a-lets-encrypt-certificate","content":" Once you configured DNS records and port forwarding (if needed), you should be able to install a Let's Encrypt certificate. This will get rid of the spooky security warning from earlier for new visitors.  For more detailed instructions, or to lean more about SSL/TLS certificates, see the corresponding page here.  From the web interfaceFrom the command line Go in Domains &gt; Click on your domain &gt; Certificate Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":"üéâ Congratz!‚Äã","type":1,"pageTitle":"On top of Debian","url":"/doc/pr-2675/fr/admin/get_started/install_on/on_top_of_debian#-congratz","content":" You now have a pretty well configured server. If you're new to YunoHost, we recommend to have a look at the guided tour. You should also be able to install your favourite applications. Don't forget to plan backups ! ","version":"Next","tagName":"h2"},{"title":"On a Raspberry Pi","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/install_on/raspberry_pi","content":"","keywords":"","version":"Next"},{"title":" Pre-requisites‚Äã","type":1,"pageTitle":"On a Raspberry Pi","url":"/doc/pr-2675/fr/admin/get_started/install_on/raspberry_pi#-pre-requisites","content":" A Raspberry Pi 3, 4 or 5 A power supply (either an adapter or a USB cable) for your board;A microSD card: 16GB capacity (at least), class &quot;A1&quot; highly recommended (such as this SanDisk A1 card);An ethernet cable (RJ-45) to connect your server to your router. A reasonable ISP, preferably with a good and unlimited upstream bandwidthA computer to read this guide, flash the image and access your server.  attention Support for Raspberry Pi 2 was dropped. If you really want to install YunoHost on a Pi 2, download and install &quot;Raspberry Pi OS (32-bit)&quot; from the official websiteand then follow the instructions to install YunoHost on Debian.  ","version":"Next","tagName":"h2"},{"title":" Download the YunoHost image‚Äã","type":1,"pageTitle":"On a Raspberry Pi","url":"/doc/pr-2675/fr/admin/get_started/install_on/raspberry_pi#-download-the-yunohost-image","content":" remarque If you wish to check the validity of our signed images, you can download our public key.    ","version":"Next","tagName":"h2"},{"title":" Flash the YunoHost image‚Äã","type":1,"pageTitle":"On a Raspberry Pi","url":"/doc/pr-2675/fr/admin/get_started/install_on/raspberry_pi#-flash-the-yunohost-image","content":" Now that you downloaded the image of YunoHost, you should flash it on a microSD card  With Etcher (recommended)With USBimagerWith dd Download Etcher for your operating system and install it. Plug your SD card, select your image and click &quot;Flash&quot;  ","version":"Next","tagName":"h2"},{"title":" Power up the board‚Äã","type":1,"pageTitle":"On a Raspberry Pi","url":"/doc/pr-2675/fr/admin/get_started/install_on/raspberry_pi#-power-up-the-board","content":" Put the SD card in your boardConnect your board to your home router via Ethernet For advanced users requiring WiFi instead, please follow the official documentation. If you want to follow the initial boot, connect a screen and keyboard on your board.Power up the board  ","version":"Next","tagName":"h2"},{"title":" Proceed with the initial configuration‚Äã","type":1,"pageTitle":"On a Raspberry Pi","url":"/doc/pr-2675/fr/admin/get_started/install_on/raspberry_pi#-proceed-with-the-initial-configuration","content":" astuce If you are in the process of restoring a server using a YunoHost backup, you should skip this step and instead restore the backup instead of the postinstall step.  remarque This documentation assumes you're on the same local network as your YunoHost installation.Find out its IP address before continuing. For a VPS, please use the public IP address instead of the local domain or address.  From the web interfaceFrom the command line attention During the first visit, you will very likely encounter a security warning related to the certificate used by the server. For now, your server uses a self-signed certificate. You will later be able to add a certificate automatically recognized by web browsers as described in the certificate documentation. For now, you should add a security exception to accept the current certificate. (Though, PLEASE, do not take the habit of blindly accepting this kind of security alert!) You should then land on this page: Preview of the Web initial configuration page  ","version":"Next","tagName":"h2"},{"title":" Main domain‚Äã","type":1,"pageTitle":"On a Raspberry Pi","url":"/doc/pr-2675/fr/admin/get_started/install_on/raspberry_pi#-main-domain","content":" WSL specific configuration You will have to choose a fake domain, since it will not be accessible from outside. For example, ynh.wsl. The tricky part is advertising this domain to your host. Alter your C:\\Windows\\System32\\drivers\\etc\\hosts file. You should have a line starting by ::1, update it or add it if needed to get: ::1 ynh.wsl localhost If you want to create subdomains, do not forget to add them in the hosts file too: ::1 ynh.wsl subdomain.ynh.wsl localhost   This will be the domain used by your server's users to access the authentication portal. You can later add other domains, and change which one is the main domain if needed.  If you're new to self-hosting and do not already have a domain name, we recommend using a .nohost.me / .noho.st / .ynh.fr (e.g. homersimpson.nohost.me). Provided that it's not already taken, the domain will be configured automatically and you won't need any further configuration step. Please note that the downside is that you won't have full-control over the DNS configuration.If you already own a domain name, you probably want to use it here. You will later need to configure DNS records as explained here.  astuce Yes, you have to configure a domain name. If you don't have any domain name and don't want a .nohost.me / .noho.st / .ynh.fr either, you can set up a dummy domain such as yolo.test and tweak your local /etc/hosts file such that this dummy domain points to the appropriate IP, as explained here.  ","version":"Next","tagName":"h3"},{"title":" First user‚Äã","type":1,"pageTitle":"On a Raspberry Pi","url":"/doc/pr-2675/fr/admin/get_started/install_on/raspberry_pi#-first-user","content":" The first user is now created at this stage. You should pick a username and a reasonably complex password. (We cannot stress enough that the password should be robust!) This user will be added to the Admins group, and will therefore be able to access the user portal, the web admin interface, and connect via SSH or SFTP. Admins will also receive emails sent to root@yourdomain.tld and admin@yourdomain.tld: these emails may be used to send technical informations or alerts. You can later add additional users, which you can also add to the Admins group.  This user replaces the old admin user, which some old documentation page may still refer to. In which case: just replace admin with your username.  ","version":"Next","tagName":"h3"},{"title":" Run the initial diagnosis‚Äã","type":1,"pageTitle":"On a Raspberry Pi","url":"/doc/pr-2675/fr/admin/get_started/install_on/raspberry_pi#-run-the-initial-diagnosis","content":" Once the postinstall is done, you should be able to actually log in the web admin interface using the credentials of the first user you just created.  The diagnosis system is meant to provide an easy way to validate that all critical aspects of your server are properly configured - and guide you in how to fix issues. The diagnosis will run twice a day and send an alert if issues are detected.  astuce Don't run away ! The first time you run the diagnosis, it is quite expected to see a bunch of yellow/red alerts because you typically need to configure DNS records (if not using a .nohost.me/noho.st/ynh.fr domain), add a swapfile if not enough ram as well as port forwarding on your home's router.  astuce If an alert is not relevant (for example because you don't intend on using a specific feature), it is perfectly fine to flag the issue as 'ignored' by going in the webadmin &gt; Diagnosis, and clicking the ignore button for this specifc issue.  attention Especially, installations on WSL or virtual machines will likely not be reachable from outside without further network configuration on Virtualbox and your machine.  (Recommended) From the web interfaceFrom the command line To run a diagnosis, go on Web Admin in the Diagnosis section. Click Run initial diagnosis and you should get a screen like this: Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":" Get a Let's Encrypt certificate‚Äã","type":1,"pageTitle":"On a Raspberry Pi","url":"/doc/pr-2675/fr/admin/get_started/install_on/raspberry_pi#-get-a-lets-encrypt-certificate","content":" Once you configured DNS records and port forwarding (if needed), you should be able to install a Let's Encrypt certificate. This will get rid of the spooky security warning from earlier for new visitors.  For more detailed instructions, or to lean more about SSL/TLS certificates, see the corresponding page here.  From the web interfaceFrom the command line Go in Domains &gt; Click on your domain &gt; Certificate Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":"üéâ Congratz!‚Äã","type":1,"pageTitle":"On a Raspberry Pi","url":"/doc/pr-2675/fr/admin/get_started/install_on/raspberry_pi#-congratz","content":" You now have a pretty well configured server. If you're new to YunoHost, we recommend to have a look at the guided tour. You should also be able to install your favourite applications. Don't forget to plan backups ! ","version":"Next","tagName":"h2"},{"title":"On a regular computer","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/install_on/regular_computer","content":"","keywords":"","version":"Next"},{"title":" Pre-requisites‚Äã","type":1,"pageTitle":"On a regular computer","url":"/doc/pr-2675/fr/admin/get_started/install_on/regular_computer#-pre-requisites","content":" A x86-compatible hardware dedicated to YunoHost with at least 512MB of RAM and 16GB of disk a laptop, nettop, netbook, desktop,‚Ä¶ A 1GB+ USB keyA reasonable ISP, preferably with a good and unlimited upstream bandwidthAn ethernet cable (RJ-45) to connect your server to your router.A computer to read this guide, flash the image and access your server.  ","version":"Next","tagName":"h2"},{"title":" Download the YunoHost image‚Äã","type":1,"pageTitle":"On a regular computer","url":"/doc/pr-2675/fr/admin/get_started/install_on/regular_computer#-download-the-yunohost-image","content":" attention If your host OS is 32 bits, be sure to download the 32-bit image.  remarque If you wish to check the validity of our signed images, you can download our public key.    ","version":"Next","tagName":"h2"},{"title":" Flash the YunoHost image‚Äã","type":1,"pageTitle":"On a regular computer","url":"/doc/pr-2675/fr/admin/get_started/install_on/regular_computer#-flash-the-yunohost-image","content":" Flash the image on the USB key or CD/DVD.  With Etcher (recommended)With USBimagerWith ddBurning a CD/DVDUsing Ventoy Download Etcher for your operating system and install it. Plug your USB key, select your image and click &quot;Flash&quot;  ","version":"Next","tagName":"h2"},{"title":" Boot the machine on your USB stick‚Äã","type":1,"pageTitle":"On a regular computer","url":"/doc/pr-2675/fr/admin/get_started/install_on/regular_computer#-boot-the-machine-on-your-usb-stick","content":" Connect your computer to your home router via EthernetBoot up your server with the USB stick or a CD-ROM inserted, and select it as bootable device. Depending on your hardware, you will need to press one of the following keys:&lt;F9&gt;, &lt;F10&gt;, &lt;F11&gt;, &lt;F12&gt;, &lt;DEL&gt;, &lt;ESC&gt; or &lt;Alt&gt;.N.B. : if the server was previously installed with a recent version of Windows (8+), you first need to tell Windows, to &quot;actually reboot&quot;. This can be done somewhere in &quot;Advanced startup options&quot;.  astuce If you can't boot the YunoHost image, try using Ventoy (select &quot;Ventoy&quot; in the section &quot;Flash the YunoHost image&quot; above).  ","version":"Next","tagName":"h2"},{"title":" Launch the graphical install‚Äã","type":1,"pageTitle":"On a regular computer","url":"/doc/pr-2675/fr/admin/get_started/install_on/regular_computer#-launch-the-graphical-install","content":" You should see a screen like this:  Preview of the ISO menu  Classic installation on a whole diskInstallation in expert mode danger Once you have validated the keyboard layout, the installation will be launched and will completely erase the data on your hard disk! Select Graphical installSelect your language, your location, your keyboard layout, and eventually your timezone.The installer will then download and install all required packages.  astuce If the YunoHost installer fails and you can't solve the issue, know that it's also possible to install Debian and then install YunoHost on top. See the specific instructions.  ","version":"Next","tagName":"h2"},{"title":" Proceed with the initial configuration‚Äã","type":1,"pageTitle":"On a regular computer","url":"/doc/pr-2675/fr/admin/get_started/install_on/regular_computer#-proceed-with-the-initial-configuration","content":" astuce If you are in the process of restoring a server using a YunoHost backup, you should skip this step and instead restore the backup instead of the postinstall step.  remarque This documentation assumes you're on the same local network as your YunoHost installation.Find out its IP address before continuing. For a VPS, please use the public IP address instead of the local domain or address.  From the web interfaceFrom the command line attention During the first visit, you will very likely encounter a security warning related to the certificate used by the server. For now, your server uses a self-signed certificate. You will later be able to add a certificate automatically recognized by web browsers as described in the certificate documentation. For now, you should add a security exception to accept the current certificate. (Though, PLEASE, do not take the habit of blindly accepting this kind of security alert!) You should then land on this page: Preview of the Web initial configuration page  ","version":"Next","tagName":"h2"},{"title":" Main domain‚Äã","type":1,"pageTitle":"On a regular computer","url":"/doc/pr-2675/fr/admin/get_started/install_on/regular_computer#-main-domain","content":" WSL specific configuration You will have to choose a fake domain, since it will not be accessible from outside. For example, ynh.wsl. The tricky part is advertising this domain to your host. Alter your C:\\Windows\\System32\\drivers\\etc\\hosts file. You should have a line starting by ::1, update it or add it if needed to get: ::1 ynh.wsl localhost If you want to create subdomains, do not forget to add them in the hosts file too: ::1 ynh.wsl subdomain.ynh.wsl localhost   This will be the domain used by your server's users to access the authentication portal. You can later add other domains, and change which one is the main domain if needed.  If you're new to self-hosting and do not already have a domain name, we recommend using a .nohost.me / .noho.st / .ynh.fr (e.g. homersimpson.nohost.me). Provided that it's not already taken, the domain will be configured automatically and you won't need any further configuration step. Please note that the downside is that you won't have full-control over the DNS configuration.If you already own a domain name, you probably want to use it here. You will later need to configure DNS records as explained here.  astuce Yes, you have to configure a domain name. If you don't have any domain name and don't want a .nohost.me / .noho.st / .ynh.fr either, you can set up a dummy domain such as yolo.test and tweak your local /etc/hosts file such that this dummy domain points to the appropriate IP, as explained here.  ","version":"Next","tagName":"h3"},{"title":" First user‚Äã","type":1,"pageTitle":"On a regular computer","url":"/doc/pr-2675/fr/admin/get_started/install_on/regular_computer#-first-user","content":" The first user is now created at this stage. You should pick a username and a reasonably complex password. (We cannot stress enough that the password should be robust!) This user will be added to the Admins group, and will therefore be able to access the user portal, the web admin interface, and connect via SSH or SFTP. Admins will also receive emails sent to root@yourdomain.tld and admin@yourdomain.tld: these emails may be used to send technical informations or alerts. You can later add additional users, which you can also add to the Admins group.  This user replaces the old admin user, which some old documentation page may still refer to. In which case: just replace admin with your username.  ","version":"Next","tagName":"h3"},{"title":" Run the initial diagnosis‚Äã","type":1,"pageTitle":"On a regular computer","url":"/doc/pr-2675/fr/admin/get_started/install_on/regular_computer#-run-the-initial-diagnosis","content":" Once the postinstall is done, you should be able to actually log in the web admin interface using the credentials of the first user you just created.  The diagnosis system is meant to provide an easy way to validate that all critical aspects of your server are properly configured - and guide you in how to fix issues. The diagnosis will run twice a day and send an alert if issues are detected.  astuce Don't run away ! The first time you run the diagnosis, it is quite expected to see a bunch of yellow/red alerts because you typically need to configure DNS records (if not using a .nohost.me/noho.st/ynh.fr domain), add a swapfile if not enough ram as well as port forwarding on your home's router.  astuce If an alert is not relevant (for example because you don't intend on using a specific feature), it is perfectly fine to flag the issue as 'ignored' by going in the webadmin &gt; Diagnosis, and clicking the ignore button for this specifc issue.  attention Especially, installations on WSL or virtual machines will likely not be reachable from outside without further network configuration on Virtualbox and your machine.  (Recommended) From the web interfaceFrom the command line To run a diagnosis, go on Web Admin in the Diagnosis section. Click Run initial diagnosis and you should get a screen like this: Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":" Get a Let's Encrypt certificate‚Äã","type":1,"pageTitle":"On a regular computer","url":"/doc/pr-2675/fr/admin/get_started/install_on/regular_computer#-get-a-lets-encrypt-certificate","content":" Once you configured DNS records and port forwarding (if needed), you should be able to install a Let's Encrypt certificate. This will get rid of the spooky security warning from earlier for new visitors.  For more detailed instructions, or to lean more about SSL/TLS certificates, see the corresponding page here.  From the web interfaceFrom the command line Go in Domains &gt; Click on your domain &gt; Certificate Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":"üéâ Congratz!‚Äã","type":1,"pageTitle":"On a regular computer","url":"/doc/pr-2675/fr/admin/get_started/install_on/regular_computer#-congratz","content":" You now have a pretty well configured server. If you're new to YunoHost, we recommend to have a look at the guided tour. You should also be able to install your favourite applications. Don't forget to plan backups ! ","version":"Next","tagName":"h2"},{"title":"On a remote server","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/install_on/remote_server","content":"","keywords":"","version":"Next"},{"title":" Pre-requisites‚Äã","type":1,"pageTitle":"On a remote server","url":"/doc/pr-2675/fr/admin/get_started/install_on/remote_server#-pre-requisites","content":" A dedicated or virtual private server with Debian 12 (Bookworm) (with kernel &gt;= 6.1) preinstalled, 512MB RAM and 16GB capacity (at least)A computer or a smartphone to read this guide and access your server.  ","version":"Next","tagName":"h2"},{"title":" Connect to the server‚Äã","type":1,"pageTitle":"On a remote server","url":"/doc/pr-2675/fr/admin/get_started/install_on/remote_server#-connect-to-the-server","content":" You will need to connect to your server via ssh.  ","version":"Next","tagName":"h2"},{"title":" Run the install script‚Äã","type":1,"pageTitle":"On a remote server","url":"/doc/pr-2675/fr/admin/get_started/install_on/remote_server#-run-the-install-script","content":" Open a command line prompt on your server (either directly or through SSH)Make sure you are root (or type sudo -i to become root)Run the following command:  curl https://install.yunohost.org | bash   attention You might need to first install curl and ca-certificates by running: apt install curl ca-certificates   danger Always ensure there's an s at the end of https.  remarque For advanced users concerned with the curl | bash approach: consider reading &quot;Is curl|bash insecure?&quot; on Sandstom's blog, and possibly this discussion on Hacker News.  ","version":"Next","tagName":"h2"},{"title":" Proceed with the initial configuration‚Äã","type":1,"pageTitle":"On a remote server","url":"/doc/pr-2675/fr/admin/get_started/install_on/remote_server#-proceed-with-the-initial-configuration","content":" astuce If you are in the process of restoring a server using a YunoHost backup, you should skip this step and instead restore the backup instead of the postinstall step.  remarque This documentation assumes you're on the same local network as your YunoHost installation.Find out its IP address before continuing. For a VPS, please use the public IP address instead of the local domain or address.  From the web interfaceFrom the command line attention During the first visit, you will very likely encounter a security warning related to the certificate used by the server. For now, your server uses a self-signed certificate. You will later be able to add a certificate automatically recognized by web browsers as described in the certificate documentation. For now, you should add a security exception to accept the current certificate. (Though, PLEASE, do not take the habit of blindly accepting this kind of security alert!) You should then land on this page: Preview of the Web initial configuration page  ","version":"Next","tagName":"h2"},{"title":" Main domain‚Äã","type":1,"pageTitle":"On a remote server","url":"/doc/pr-2675/fr/admin/get_started/install_on/remote_server#-main-domain","content":" WSL specific configuration You will have to choose a fake domain, since it will not be accessible from outside. For example, ynh.wsl. The tricky part is advertising this domain to your host. Alter your C:\\Windows\\System32\\drivers\\etc\\hosts file. You should have a line starting by ::1, update it or add it if needed to get: ::1 ynh.wsl localhost If you want to create subdomains, do not forget to add them in the hosts file too: ::1 ynh.wsl subdomain.ynh.wsl localhost   This will be the domain used by your server's users to access the authentication portal. You can later add other domains, and change which one is the main domain if needed.  If you're new to self-hosting and do not already have a domain name, we recommend using a .nohost.me / .noho.st / .ynh.fr (e.g. homersimpson.nohost.me). Provided that it's not already taken, the domain will be configured automatically and you won't need any further configuration step. Please note that the downside is that you won't have full-control over the DNS configuration.If you already own a domain name, you probably want to use it here. You will later need to configure DNS records as explained here.  astuce Yes, you have to configure a domain name. If you don't have any domain name and don't want a .nohost.me / .noho.st / .ynh.fr either, you can set up a dummy domain such as yolo.test and tweak your local /etc/hosts file such that this dummy domain points to the appropriate IP, as explained here.  ","version":"Next","tagName":"h3"},{"title":" First user‚Äã","type":1,"pageTitle":"On a remote server","url":"/doc/pr-2675/fr/admin/get_started/install_on/remote_server#-first-user","content":" The first user is now created at this stage. You should pick a username and a reasonably complex password. (We cannot stress enough that the password should be robust!) This user will be added to the Admins group, and will therefore be able to access the user portal, the web admin interface, and connect via SSH or SFTP. Admins will also receive emails sent to root@yourdomain.tld and admin@yourdomain.tld: these emails may be used to send technical informations or alerts. You can later add additional users, which you can also add to the Admins group.  This user replaces the old admin user, which some old documentation page may still refer to. In which case: just replace admin with your username.  ","version":"Next","tagName":"h3"},{"title":" Run the initial diagnosis‚Äã","type":1,"pageTitle":"On a remote server","url":"/doc/pr-2675/fr/admin/get_started/install_on/remote_server#-run-the-initial-diagnosis","content":" Once the postinstall is done, you should be able to actually log in the web admin interface using the credentials of the first user you just created.  The diagnosis system is meant to provide an easy way to validate that all critical aspects of your server are properly configured - and guide you in how to fix issues. The diagnosis will run twice a day and send an alert if issues are detected.  astuce Don't run away ! The first time you run the diagnosis, it is quite expected to see a bunch of yellow/red alerts because you typically need to configure DNS records (if not using a .nohost.me/noho.st/ynh.fr domain), add a swapfile if not enough ram as well as port forwarding on your home's router.  astuce If an alert is not relevant (for example because you don't intend on using a specific feature), it is perfectly fine to flag the issue as 'ignored' by going in the webadmin &gt; Diagnosis, and clicking the ignore button for this specifc issue.  attention Especially, installations on WSL or virtual machines will likely not be reachable from outside without further network configuration on Virtualbox and your machine.  (Recommended) From the web interfaceFrom the command line To run a diagnosis, go on Web Admin in the Diagnosis section. Click Run initial diagnosis and you should get a screen like this: Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":" Get a Let's Encrypt certificate‚Äã","type":1,"pageTitle":"On a remote server","url":"/doc/pr-2675/fr/admin/get_started/install_on/remote_server#-get-a-lets-encrypt-certificate","content":" Once you configured DNS records and port forwarding (if needed), you should be able to install a Let's Encrypt certificate. This will get rid of the spooky security warning from earlier for new visitors.  For more detailed instructions, or to lean more about SSL/TLS certificates, see the corresponding page here.  From the web interfaceFrom the command line Go in Domains &gt; Click on your domain &gt; Certificate Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":"üéâ Congratz!‚Äã","type":1,"pageTitle":"On a remote server","url":"/doc/pr-2675/fr/admin/get_started/install_on/remote_server#-congratz","content":" You now have a pretty well configured server. If you're new to YunoHost, we recommend to have a look at the guided tour. You should also be able to install your favourite applications. Don't forget to plan backups ! ","version":"Next","tagName":"h2"},{"title":"In a virtual machine","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/install_on/virtualbox","content":"","keywords":"","version":"Next"},{"title":" Pre-requisites‚Äã","type":1,"pageTitle":"In a virtual machine","url":"/doc/pr-2675/fr/admin/get_started/install_on/virtualbox#-pre-requisites","content":" An x86 computer with VirtualBox installed and enough RAM capacity to be able to run a small virtual machine with 1024MB RAM and 8GB capacity (at least)  ","version":"Next","tagName":"h2"},{"title":" Download the YunoHost image‚Äã","type":1,"pageTitle":"In a virtual machine","url":"/doc/pr-2675/fr/admin/get_started/install_on/virtualbox#-download-the-yunohost-image","content":" attention If your host OS is 32 bits, be sure to download the 32-bit image.  remarque If you wish to check the validity of our signed images, you can download our public key.    ","version":"Next","tagName":"h2"},{"title":"Create a new virtual machine‚Äã","type":1,"pageTitle":"In a virtual machine","url":"/doc/pr-2675/fr/admin/get_started/install_on/virtualbox#create-a-new-virtual-machine","content":"   attention It's okay if you can only have 32-bit versions, just be sure that you downloaded the 32-bit image previously.  ","version":"Next","tagName":"h2"},{"title":"Tweak network settings‚Äã","type":1,"pageTitle":"In a virtual machine","url":"/doc/pr-2675/fr/admin/get_started/install_on/virtualbox#tweak-network-settings","content":" attention This step is important to properly expose the virtual machine on the network  Go to Settings &gt; Network:  Select Bridged adapterSelect your interface's name:wlan0 if you are connected wirelessly, or eth0 otherwise.    ","version":"Next","tagName":"h2"},{"title":" Boot up the virtual machine‚Äã","type":1,"pageTitle":"In a virtual machine","url":"/doc/pr-2675/fr/admin/get_started/install_on/virtualbox#-boot-up-the-virtual-machine","content":" Start the virtual machine after selecting the YunoHost image.    attention If you encounter the error &quot;VT-x is not available&quot;, you probably need to enable Virtualization in the BIOS of your computer.  ","version":"Next","tagName":"h2"},{"title":" Launch the graphical install‚Äã","type":1,"pageTitle":"In a virtual machine","url":"/doc/pr-2675/fr/admin/get_started/install_on/virtualbox#-launch-the-graphical-install","content":" You should see a screen like this:  Preview of the ISO menu  Classic installation on a whole diskInstallation in expert mode danger Once you have validated the keyboard layout, the installation will be launched and will completely erase the data on your hard disk! Select Graphical installSelect your language, your location, your keyboard layout, and eventually your timezone.The installer will then download and install all required packages.  astuce If the YunoHost installer fails and you can't solve the issue, know that it's also possible to install Debian and then install YunoHost on top. See these instructions.  ","version":"Next","tagName":"h2"},{"title":" Proceed with the initial configuration‚Äã","type":1,"pageTitle":"In a virtual machine","url":"/doc/pr-2675/fr/admin/get_started/install_on/virtualbox#-proceed-with-the-initial-configuration","content":" astuce If you are in the process of restoring a server using a YunoHost backup, you should skip this step and instead restore the backup instead of the postinstall step.  remarque This documentation assumes you're on the same local network as your YunoHost installation.Find out its IP address before continuing. For a VPS, please use the public IP address instead of the local domain or address.  From the web interfaceFrom the command line attention During the first visit, you will very likely encounter a security warning related to the certificate used by the server. For now, your server uses a self-signed certificate. You will later be able to add a certificate automatically recognized by web browsers as described in the certificate documentation. For now, you should add a security exception to accept the current certificate. (Though, PLEASE, do not take the habit of blindly accepting this kind of security alert!) You should then land on this page: Preview of the Web initial configuration page  ","version":"Next","tagName":"h2"},{"title":" Main domain‚Äã","type":1,"pageTitle":"In a virtual machine","url":"/doc/pr-2675/fr/admin/get_started/install_on/virtualbox#-main-domain","content":" WSL specific configuration You will have to choose a fake domain, since it will not be accessible from outside. For example, ynh.wsl. The tricky part is advertising this domain to your host. Alter your C:\\Windows\\System32\\drivers\\etc\\hosts file. You should have a line starting by ::1, update it or add it if needed to get: ::1 ynh.wsl localhost If you want to create subdomains, do not forget to add them in the hosts file too: ::1 ynh.wsl subdomain.ynh.wsl localhost   This will be the domain used by your server's users to access the authentication portal. You can later add other domains, and change which one is the main domain if needed.  If you're new to self-hosting and do not already have a domain name, we recommend using a .nohost.me / .noho.st / .ynh.fr (e.g. homersimpson.nohost.me). Provided that it's not already taken, the domain will be configured automatically and you won't need any further configuration step. Please note that the downside is that you won't have full-control over the DNS configuration.If you already own a domain name, you probably want to use it here. You will later need to configure DNS records as explained here.  astuce Yes, you have to configure a domain name. If you don't have any domain name and don't want a .nohost.me / .noho.st / .ynh.fr either, you can set up a dummy domain such as yolo.test and tweak your local /etc/hosts file such that this dummy domain points to the appropriate IP, as explained here.  ","version":"Next","tagName":"h3"},{"title":" First user‚Äã","type":1,"pageTitle":"In a virtual machine","url":"/doc/pr-2675/fr/admin/get_started/install_on/virtualbox#-first-user","content":" The first user is now created at this stage. You should pick a username and a reasonably complex password. (We cannot stress enough that the password should be robust!) This user will be added to the Admins group, and will therefore be able to access the user portal, the web admin interface, and connect via SSH or SFTP. Admins will also receive emails sent to root@yourdomain.tld and admin@yourdomain.tld: these emails may be used to send technical informations or alerts. You can later add additional users, which you can also add to the Admins group.  This user replaces the old admin user, which some old documentation page may still refer to. In which case: just replace admin with your username.  ","version":"Next","tagName":"h3"},{"title":" Run the initial diagnosis‚Äã","type":1,"pageTitle":"In a virtual machine","url":"/doc/pr-2675/fr/admin/get_started/install_on/virtualbox#-run-the-initial-diagnosis","content":" Once the postinstall is done, you should be able to actually log in the web admin interface using the credentials of the first user you just created.  The diagnosis system is meant to provide an easy way to validate that all critical aspects of your server are properly configured - and guide you in how to fix issues. The diagnosis will run twice a day and send an alert if issues are detected.  astuce Don't run away ! The first time you run the diagnosis, it is quite expected to see a bunch of yellow/red alerts because you typically need to configure DNS records (if not using a .nohost.me/noho.st/ynh.fr domain), add a swapfile if not enough ram as well as port forwarding on your home's router.  astuce If an alert is not relevant (for example because you don't intend on using a specific feature), it is perfectly fine to flag the issue as 'ignored' by going in the webadmin &gt; Diagnosis, and clicking the ignore button for this specifc issue.  attention Especially, installations on WSL or virtual machines will likely not be reachable from outside without further network configuration on Virtualbox and your machine.  (Recommended) From the web interfaceFrom the command line To run a diagnosis, go on Web Admin in the Diagnosis section. Click Run initial diagnosis and you should get a screen like this: Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":" Get a Let's Encrypt certificate‚Äã","type":1,"pageTitle":"In a virtual machine","url":"/doc/pr-2675/fr/admin/get_started/install_on/virtualbox#-get-a-lets-encrypt-certificate","content":" Once you configured DNS records and port forwarding (if needed), you should be able to install a Let's Encrypt certificate. This will get rid of the spooky security warning from earlier for new visitors.  For more detailed instructions, or to lean more about SSL/TLS certificates, see the corresponding page here.  From the web interfaceFrom the command line Go in Domains &gt; Click on your domain &gt; Certificate Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":"üéâ Congratz!‚Äã","type":1,"pageTitle":"In a virtual machine","url":"/doc/pr-2675/fr/admin/get_started/install_on/virtualbox#-congratz","content":" You now have a pretty well configured server. If you're new to YunoHost, we recommend to have a look at the guided tour. You should also be able to install your favourite applications. Don't forget to plan backups ! ","version":"Next","tagName":"h2"},{"title":"On WSL","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl","content":"","keywords":"","version":"Next"},{"title":" Pre-requisites‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#-pre-requisites","content":" Windows 10 and aboveAdministration rightsWindows Subsystem for Linux, installed from the Optional Features menu of WindowsRecommended: Windows Terminal (Preview) app, installed from the Microsoft Store. Much better than the standard Terminal, as it offers shortcuts to the WSL distros.  ","version":"Next","tagName":"h2"},{"title":"Introduction‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#introduction","content":" WSL is a nice feature of Windows 10, making Linux pseudo-distributions available through command line. Let's say pseudo, because even though they are not really like virtual machines, they rely on virtualization capacities that make their integration with Windows almost seamless. Docker for Windows can now rely on WSL instead of Hyper-V, for example.  attention Bear in mind, this setup itself is not a container of any kind. If something breaks, there is no rollback capability. You may need to delete the Debian distro altogether and restore it whole.  ","version":"Next","tagName":"h2"},{"title":"Install Debian‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#install-debian","content":" Let's install YunoHost into its own distro, not altering the default one. In a PowerShell terminal:  # Let's go in your home directory and prepare the working directories cd ~ mkdir -p WSL\\YunoHost # Download the Debian appx package and unzip it curl.exe -L -o debian.zip https://aka.ms/wsl-debian-gnulinux Expand-Archive .\\debian.zip -DestinationPath .\\debian # Import the Debian base into a new distro wsl --import YunoHost ~\\WSL\\YunoHost ~\\debian\\install.tar.gz --version 2 # Cleanup rmdir .\\debian -R   You can now access it: run wsl.exe -d YunoHost  It is under Debian 9 Stretch, so let's upgrade it:  # In WSL sudo sed -i 's/stretch/bookworm/g' /etc/apt/sources.list` sudo apt update sudo apt upgrade # optional sudo apt full-upgrade # wget needed for later setup sudo apt install wget -y   ","version":"Next","tagName":"h2"},{"title":"Prevent WSL from tweaking configuration files‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#prevent-wsl-from-tweaking-configuration-files","content":" Edit /etc/wsl.conf and put the following code in it:  [network] generateHosts = false generateResolvConf = false   ","version":"Next","tagName":"h2"},{"title":"Force the use of iptables-legacy‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#force-the-use-of-iptables-legacy","content":" FIXME YunoHost now uses nftables, these instructions might be out of date.  Somehow the YunoHost post-installation does not like nf_tables, the new software replacing iptables. We can still explicitely use the good ol' iptables though:  # In WSL sudo update-alternatives --set iptables /usr/sbin/iptables-legacy sudo update-alternatives --set ip6tables /usr/sbin/ip6tables-legacy   ","version":"Next","tagName":"h2"},{"title":"Install Systemd‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#install-systemd","content":" Debian on WSL does not have systemd, a service configuration software. This is a key element for YunoHost, and for any decent Debian distro (seriously MS, what the heck). Let's install it:  Install dotNET runtime:  # In WSL wget https://packages.microsoft.com/config/debian/12/packages-microsoft-prod.deb -O packages-microsoft-prod.deb sudo dpkg -i packages-microsoft-prod.deb sudo apt update sudo apt install -y apt-transport-https sudo apt update sudo apt install -y dotnet-sdk-3.1   Install Genie:  # In WSL # Add their repository echo &quot;deb [trusted=yes] https://wsl-translinux.arkane-systems.net/apt/ /&quot; &gt; /etc/apt/sources.list.d/wsl-translinux.list # Install Genie sudo apt update sudo apt install -y systemd-genie   ","version":"Next","tagName":"h2"},{"title":"Install YunoHost‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#install-yunohost","content":" # In WSL # Let's switch to the root user, if you were not already sudo su # Initialize the Genie bottle to have systemd running genie -s # Your hostname should have been appended with &quot;-wsl&quot;   ","version":"Next","tagName":"h2"},{"title":" Run the install script‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#-run-the-install-script","content":" Open a command line prompt on your server (either directly or through SSH)Make sure you are root (or type sudo -i to become root)Run the following command:  curl https://install.yunohost.org | bash   attention You might need to first install curl and ca-certificates by running: apt install curl ca-certificates   danger Always ensure there's an s at the end of https.  remarque For advanced users concerned with the curl | bash approach: consider reading &quot;Is curl|bash insecure?&quot; on Sandstom's blog, and possibly this discussion on Hacker News.  ","version":"Next","tagName":"h2"},{"title":"Access the command line‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#access-the-command-line","content":" Always call genie -s while starting your distro.  wsl -d YunoHost -e genie -s   ","version":"Next","tagName":"h3"},{"title":"Backup and restore the distro‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#backup-and-restore-the-distro","content":" ","version":"Next","tagName":"h2"},{"title":"Make your first distro backup‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#make-your-first-distro-backup","content":" As said before, there is no rollback capability. So let's export your fresh distro. In PowerShell:  cd ~ wsl --export YunoHost .\\WSL\\YunoHost.tar.gz   ","version":"Next","tagName":"h3"},{"title":"In case of crash, delete and restore the whole distro‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#in-case-of-crash-delete-and-restore-the-whole-distro","content":" cd ~ wsl --unregister YunoHost wsl --import YunoHost .\\WSL\\YunoHost .\\WSL\\YunoHost.tar.gz --version 2   ","version":"Next","tagName":"h3"},{"title":" Proceed with the initial configuration‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#-proceed-with-the-initial-configuration","content":" astuce If you are in the process of restoring a server using a YunoHost backup, you should skip this step and instead restore the backup instead of the postinstall step.  remarque This documentation assumes you're on the same local network as your YunoHost installation.Find out its IP address before continuing. For a VPS, please use the public IP address instead of the local domain or address.  From the web interfaceFrom the command line attention During the first visit, you will very likely encounter a security warning related to the certificate used by the server. For now, your server uses a self-signed certificate. You will later be able to add a certificate automatically recognized by web browsers as described in the certificate documentation. For now, you should add a security exception to accept the current certificate. (Though, PLEASE, do not take the habit of blindly accepting this kind of security alert!) You should then land on this page: Preview of the Web initial configuration page  ","version":"Next","tagName":"h2"},{"title":" Main domain‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#-main-domain","content":" WSL specific configuration You will have to choose a fake domain, since it will not be accessible from outside. For example, ynh.wsl. The tricky part is advertising this domain to your host. Alter your C:\\Windows\\System32\\drivers\\etc\\hosts file. You should have a line starting by ::1, update it or add it if needed to get: ::1 ynh.wsl localhost If you want to create subdomains, do not forget to add them in the hosts file too: ::1 ynh.wsl subdomain.ynh.wsl localhost   This will be the domain used by your server's users to access the authentication portal. You can later add other domains, and change which one is the main domain if needed.  If you're new to self-hosting and do not already have a domain name, we recommend using a .nohost.me / .noho.st / .ynh.fr (e.g. homersimpson.nohost.me). Provided that it's not already taken, the domain will be configured automatically and you won't need any further configuration step. Please note that the downside is that you won't have full-control over the DNS configuration.If you already own a domain name, you probably want to use it here. You will later need to configure DNS records as explained here.  astuce Yes, you have to configure a domain name. If you don't have any domain name and don't want a .nohost.me / .noho.st / .ynh.fr either, you can set up a dummy domain such as yolo.test and tweak your local /etc/hosts file such that this dummy domain points to the appropriate IP, as explained here.  ","version":"Next","tagName":"h3"},{"title":" First user‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#-first-user","content":" The first user is now created at this stage. You should pick a username and a reasonably complex password. (We cannot stress enough that the password should be robust!) This user will be added to the Admins group, and will therefore be able to access the user portal, the web admin interface, and connect via SSH or SFTP. Admins will also receive emails sent to root@yourdomain.tld and admin@yourdomain.tld: these emails may be used to send technical informations or alerts. You can later add additional users, which you can also add to the Admins group.  This user replaces the old admin user, which some old documentation page may still refer to. In which case: just replace admin with your username.  ","version":"Next","tagName":"h3"},{"title":" Run the initial diagnosis‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#-run-the-initial-diagnosis","content":" Once the postinstall is done, you should be able to actually log in the web admin interface using the credentials of the first user you just created.  The diagnosis system is meant to provide an easy way to validate that all critical aspects of your server are properly configured - and guide you in how to fix issues. The diagnosis will run twice a day and send an alert if issues are detected.  astuce Don't run away ! The first time you run the diagnosis, it is quite expected to see a bunch of yellow/red alerts because you typically need to configure DNS records (if not using a .nohost.me/noho.st/ynh.fr domain), add a swapfile if not enough ram as well as port forwarding on your home's router.  astuce If an alert is not relevant (for example because you don't intend on using a specific feature), it is perfectly fine to flag the issue as 'ignored' by going in the webadmin &gt; Diagnosis, and clicking the ignore button for this specifc issue.  attention Especially, installations on WSL or virtual machines will likely not be reachable from outside without further network configuration on Virtualbox and your machine.  (Recommended) From the web interfaceFrom the command line To run a diagnosis, go on Web Admin in the Diagnosis section. Click Run initial diagnosis and you should get a screen like this: Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":" Get a Let's Encrypt certificate‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#-get-a-lets-encrypt-certificate","content":" Once you configured DNS records and port forwarding (if needed), you should be able to install a Let's Encrypt certificate. This will get rid of the spooky security warning from earlier for new visitors.  For more detailed instructions, or to lean more about SSL/TLS certificates, see the corresponding page here.  From the web interfaceFrom the command line Go in Domains &gt; Click on your domain &gt; Certificate Preview of the diagnostic panel  ","version":"Next","tagName":"h2"},{"title":"üéâ Congratz!‚Äã","type":1,"pageTitle":"On WSL","url":"/doc/pr-2675/fr/admin/get_started/install_on/wsl#-congratz","content":" You now have a pretty well configured server. If you're new to YunoHost, we recommend to have a look at the guided tour. You should also be able to install your favourite applications. Don't forget to plan backups ! ","version":"Next","tagName":"h2"},{"title":"Choisir son mode d'auto-h√©bergement","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/methods","content":"","keywords":"","version":"Next"},{"title":"√Ä la maison, par exemple sur une carte ARM ou un ancien ordinateur‚Äã","type":1,"pageTitle":"Choisir son mode d'auto-h√©bergement","url":"/doc/pr-2675/fr/admin/get_started/methods#√†-la-maison-par-exemple-sur-une-carte-arm-ou-un-ancien-ordinateur","content":" Vous pouvez vous h√©berger chez vous, sur une carte ARM ou un vieil ordinateur, connect√© √† votre box internet.  Avantages : vous aurez un contr√¥le physique sur la machine et avez seulement besoin d'acheter le mat√©riel initial ;Inconv√©nients : il vous faudra configurer manuellement votre box internet et serez possiblement limit√© par certains aspects de votre fournisseur d'acc√®s √† Internet.  ","version":"Next","tagName":"h2"},{"title":"√Ä la maison, derri√®re un VPN‚Äã","type":1,"pageTitle":"Choisir son mode d'auto-h√©bergement","url":"/doc/pr-2675/fr/admin/get_started/methods#√†-la-maison-derri√®re-un-vpn","content":" Un VPN est un tunnel chiffr√© entre deux machines. En pratique, cela permet de faire ¬´ comme si ¬ª une machine √©tait connect√©e depuis ailleurs. Ceci permet de s'auto-h√©berger √† la maison tout en contournant les limitations du fournisseur d'acc√®s √† Internet. Voir aussi le projet Brique Internet et la FFDN.  Avantages : vous aurez un contr√¥le physique sur la machine, et le VPN permettra de cacher votre trafic vis-√†-vis de votre FAI ainsi que de contourner ses limitations ;Inconv√©nients : il vous faudra payer des frais mensuels pour le VPN.  ","version":"Next","tagName":"h2"},{"title":"Sur un serveur distant (VPS ou serveur d√©di√©)‚Äã","type":1,"pageTitle":"Choisir son mode d'auto-h√©bergement","url":"/doc/pr-2675/fr/admin/get_started/methods#sur-un-serveur-distant-vps-ou-serveur-d√©di√©","content":" Vous pouvez louer un serveur priv√© virtuel ou une machine d√©di√©e √† des h√©bergeurs associatifs ou commerciaux.  Avantages : votre serveur sera rapide et la connectivit√© internet sera bonne ;Inconv√©nients : il vous faudra payer des frais mensuels pour la machine, et vous n'aurez pas de contr√¥le physique dessus.  ","version":"Next","tagName":"h2"},{"title":"R√©sum√©‚Äã","type":1,"pageTitle":"Choisir son mode d'auto-h√©bergement","url":"/doc/pr-2675/fr/admin/get_started/methods#r√©sum√©","content":"   \t√Ä la maison (ex. carte ARM, vieil ordinateur)\t√Ä la maison derri√®re un VPN\tSur un serveur distant (VPS ou d√©di√©)Co√ªts mat√©riels\tEnviron 50‚Ç¨ (ex. un Raspberry Pi)\tNon Co√ªts mensuels\tN√©gligeables (√©lectricit√©)\tEnviron 5‚Ç¨ (VPN)\t√Ä partir de ~3‚Ç¨ (VPS) Contr√¥le physique de la machine\tOui\tOui\tNon Routage manuel de ports requis\tOui\tNon\tNon Limitations FAI possibles\tOui (Voir ici)\tContourn√©es par VPN\tEn g√©n√©ral non Connexion internet\tD√©pend de la connexion chez soi\tG√©n√©ralement bonne ","version":"Next","tagName":"h2"},{"title":"Configuration de la zone DNS","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/post_install/dns_config","content":"","keywords":"","version":"Next"},{"title":"Configuration DNS recommand√©e‚Äã","type":1,"pageTitle":"Configuration de la zone DNS","url":"/doc/pr-2675/fr/admin/get_started/post_install/dns_config#configuration-dns-recommand√©e","content":" NB : les exemples utilisent ici le texte votre.domaine.tld, √† remplacer par votre propre domaine (par exemple www.yunohost.org).  YunoHost fournit une configuration DNS recommand√©e, accessible via :  la webadmin, dans Domaines &gt; votre.domain.tld &gt; Configuration DNS ;ou la ligne de commande, yunohost domain dns suggest votre.domaine.tld  Pour certains besoins ou installations particuli√®res, et si vous savez ce que vous faites, il vous faudra peut-√™tre modifier cette recommandation ou ajouter d'autres enregistrements (e.g. pour g√©rer des sous-domaines).  La configuration recommand√©e ressemble typiquement √† :  # # Enregistrements IPv4/IPv6 basiques # @ 3600 IN A 111.222.33.44 * 3600 IN A 111.222.33.44 # (Si votre serveur supporte l'IPv6, il a des enregistrements AAAA) @ 3600 IN AAAA 2222:444:8888:3333:bbbb:5555:3333:1111 * 3600 IN AAAA 2222:444:8888:3333:bbbb:5555:3333:1111 # # XMPP # _xmpp-client._tcp 3600 IN SRV 0 5 5222 votre.domaine.tld. _xmpp-server._tcp 3600 IN SRV 0 5 5269 votre.domaine.tld. muc 3600 IN CNAME @ pubsub 3600 IN CNAME @ vjud 3600 IN CNAME @ xmpp-upload 3600 IN CNAME @ # # Mail (MX, SPF, DKIM et DMARC) # @ 3600 IN MX 10 votre.domaine.tld. @ 3600 IN TXT &quot;v=spf1 a mx -all&quot; mail._domainkey 3600 IN TXT &quot;v=DKIM1; k=rsa; p=uneGrannnnndeClef&quot; _dmarc 3600 IN TXT &quot;v=DMARC1; p=none&quot;   Mais il est peut-√™tre plus facile de la comprendre affich√©e de la fa√ßon suivante :  Type\tNom\tValeurA\t@\t111.222.333.444 (votre IPv4) A\t*\t111.222.333.444 (votre IPv4) AAAA\t@\t2222:444:8888:3333:bbbb:5555:3333:1111 (votre IPv6) AAAA\t*\t2222:444:8888:3333:bbbb:5555:3333:1111 (votre IPv6) SRV\t_xmpp-client._tcp\t0 5 5222 votre.domaine.tld. SRV\t_xmpp-server._tcp\t0 5 5269 votre.domaine.tld. CNAME\tmuc\t@ CNAME\tpubsub\t@ CNAME\tvjud\t@ CNAME\txmpp-upload\t@ MX\t@\tvotre.domaine.tld. (et priorit√©: 10) TXT\t@\t&quot;v=spf1 a mx -all&quot; TXT\tmail._domainkey\t&quot;v=DKIM1; k=rsa; p=uneGrannnndeClef&quot; TXT\t_dmarc\t&quot;v=DMARC1; p=none&quot;  ","version":"Next","tagName":"h2"},{"title":"Quelques notes √† propos de cette table‚Äã","type":1,"pageTitle":"Configuration de la zone DNS","url":"/doc/pr-2675/fr/admin/get_started/post_install/dns_config#quelques-notes-√†-propos-de-cette-table","content":" Tous ces enregistrements ne sont pas n√©cessaires. Pour une installation minimale, seuls les enregistrements en gras sont n√©cessaires ;Le point √† la fin de votre.domaine.tld. est important ;) ;@ correspond √† votre.domaine.tld, et par ex. muc correspond √† muc.votre.domaine.tld ;Les valeurs montr√©es ici sont des valeurs d'exemple ! R√©f√©rez-vous √† la configuration g√©n√©r√©e chez vous pour savoir quelles valeurs utiliser ;Nous recommandons un TTL de 3600 (1 heure). Mais vous pouvez utiliser une autre valeur si vous savez ce que vous fa√Ætes ;Ne mettez pas d'enregistrement IPv6 si vous n'√™tes pas certain que l'IPv6 fonctionne sur votre serveur ! Vous aurez des probl√®mes avec Let's Encrypt si ce n'est pas le cas.Si vous utilisez le registrar Namecheap, les entr√©es SRV sont formatt√©es comme Service: _xmpp-client Protocol: _tcp Priority: 0 Weight: 5 Port: 5222 Target: votre.domaine.tld  ","version":"Next","tagName":"h3"},{"title":"R√©solution DNS inverse‚Äã","type":1,"pageTitle":"Configuration de la zone DNS","url":"/doc/pr-2675/fr/admin/get_started/post_install/dns_config#r√©solution-dns-inverse","content":" Si votre op√©rateur ou votre h√©bergeur le permet, nous vous encourageons √† configurer une r√©solution DNS inversepour vos adresses publiques IPv4 et/ou IPv6. Ceci vous √©vitera d'√™tre marqu√© comme spammeur par les syst√®mes de filtrage anti-spams.  N.B. : la configuration du DNS inverse se passe au niveau de votre fournisseur d'acc√®s √† Internet, ou de votre h√©bergeur de VPS. Elle ne se fait pas sur le registrar de votre nom de domaine.  Cela signifie que si votre adresse IPv4 publique est 111.222.333.444 et que votre nom de domaine est domain.tld, vous devez obtenir le r√©sultat suivant en utilisant la commande nslookup :  nslookup 111.222.333.444 444.333.222.111.in-addr.arpa name = domain.tld.   Le syst√®me de diagnostic pr√©sent dans l'interface d'administration fait cette v√©rification automatiquement (dans la section Email)  ","version":"Next","tagName":"h3"},{"title":"IP Dynamique‚Äã","type":1,"pageTitle":"Configuration de la zone DNS","url":"/doc/pr-2675/fr/admin/get_started/post_install/dns_config#ip-dynamique","content":" Si votre adresse IP publique change constamment, suivez ce tutoriel. ","version":"Next","tagName":"h3"},{"title":"Trouver l‚ÄôIP locale de son serveur","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/post_install/find_ip","content":"","keywords":"","version":"Next"},{"title":"Qu'est ce qu'une IP locale ?‚Äã","type":1,"pageTitle":"Trouver l‚ÄôIP locale de son serveur","url":"/doc/pr-2675/fr/admin/get_started/post_install/find_ip#quest-ce-quune-ip-locale-","content":" L'IP locale d'une machine est utilis√©e pour y faire r√©f√©rence √† l'int√©rieur d'un r√©seau local (typiquement le r√©seau dans une maison) o√π plusieurs appareils se connectent √† un m√™me routeur (votre box internet). Une adresse IP locale ressemble g√©n√©ralement √† 192.168.x.y (ou parfois 10.0.x.y ou 172.16.x.y)  ","version":"Next","tagName":"h2"},{"title":"Comment la trouver ?‚Äã","type":1,"pageTitle":"Trouver l‚ÄôIP locale de son serveur","url":"/doc/pr-2675/fr/admin/get_started/post_install/find_ip#comment-la-trouver-","content":" L'une de ces astuces devrait permettre de trouver l'IP locale de votre serveur : [ui-tabs position=&quot;top-left&quot; active=&quot;0&quot; theme=&quot;lite&quot;] [ui-tab title=&quot;(Recommand√©) Avec AngryIP&quot;]  With AngryIP (Recommended)Avec votre box internetWith arp-scanAvec un acc√®s direct au serveur Vous pouvez utiliser le logiciel AngryIP pour y parvenir. Vous devez juste scanner ces plages d'IP dans cet ordre jusqu'√† trouver l'IP correspondante √† votre serveur : 192.168.0.0 -&gt; 192.168.0.255192.168.1.0 -&gt; 192.168.1.255192.168.2.0 -&gt; 192.168.255.25510.0.0.0 -&gt; 10.0.255.255172.16.0.0 -&gt; 172.31.255.255 astuce vous pouvez ordonner par ping comme dans cette capture d'√©cran, pour voir plus facilement toutes les IP effectivement actives.votre serveur devrait √™tre mont√© comme √©coutant sur les ports 80 et 443en cas de doute, tapez directement dans votre navigateur https://192.168.x.y pour voir si c'est un YunoHost ou non.  ","version":"Next","tagName":"h2"},{"title":"Je ne trouve toujours pas mon IP locale‚Äã","type":1,"pageTitle":"Trouver l‚ÄôIP locale de son serveur","url":"/doc/pr-2675/fr/admin/get_started/post_install/find_ip#je-ne-trouve-toujours-pas-mon-ip-locale","content":" Si vous n'√™tes pas capable de trouver votre serveur avec les m√©thodes pr√©c√©dentes, alors peut-√™tre que votre serveur n'a pas d√©marr√© correctement.  Assurez-vous que le serveur est correctement branch√© ;Si votre serveur a une carte SD, essayez de vous assurer que la connectique n'est pas trop poussi√©reuse ;Branchez un √©cran sur le serveur et essayez de le red√©marrer pour valider que le serveur d√©marre bien ;Assurez-vous que le c√¢ble Ethernet est fonctionnel et correctement branch√© ; ","version":"Next","tagName":"h2"},{"title":"Configurer la redirection des ports","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/post_install/port_forwarding","content":"","keywords":"","version":"Next"},{"title":"1. Diagnostiquer les ports ouverts‚Äã","type":1,"pageTitle":"Configurer la redirection des ports","url":"/doc/pr-2675/fr/admin/get_started/post_install/port_forwarding#1-diagnostiquer-les-ports-ouverts","content":" Une fois les redirections configur√©es, l'outil de diagnostic introduit dans YunoHost 3.8 vous permettra de v√©rifier si les ports sont correctement expos√©s.  ","version":"Next","tagName":"h3"},{"title":"2. Acc√©der √† l'interface d'administration de votre box/routeur‚Äã","type":1,"pageTitle":"Configurer la redirection des ports","url":"/doc/pr-2675/fr/admin/get_started/post_install/port_forwarding#2-acc√©der-√†-linterface-dadministration-de-votre-boxrouteur","content":" L'interface d'administration est g√©n√©ralement accessible via http://192.168.0.1 ou http://192.168.1.1. Ensuite, il vous faudra peut-√™tre vous authentifier avec les identifiants fournis par votre fournisseur d'acc√®s √† Internet (FAI).  ","version":"Next","tagName":"h3"},{"title":"3. Trouver l'IP locale de votre serveur‚Äã","type":1,"pageTitle":"Configurer la redirection des ports","url":"/doc/pr-2675/fr/admin/get_started/post_install/port_forwarding#3-trouver-lip-locale-de-votre-serveur","content":" Identifiez quelle est l'IP locale de votre serveur en utilisant l'une des m√©thodes list√©es sur la page correspondante.  Une adresse IP locale ressemble g√©n√©ralement √† 192.168.xx.yy, ou 10.0.xx.yy.  The local IP address needs to be static, so that the port forwards that you are going to configure in the next step will always reach your server. You should go into your box/router and make sure that the local IP address of your server is static instead of dynamic.  ","version":"Next","tagName":"h3"},{"title":"4. Rediriger les ports‚Äã","type":1,"pageTitle":"Configurer la redirection des ports","url":"/doc/pr-2675/fr/admin/get_started/post_install/port_forwarding#4-rediriger-les-ports","content":" Dans l'interface d'administration de votre box/routeur, il vous faut trouver une cat√©gorie comme 'Configuration du routeur', ou 'Redirections de ports'. Le nom diff√®re suivant le type / marque de la box...  Il vous faut ensuite rediriger chacun des ports list√©s ci-dessous vers l'IP locale de votre serveur pour que les diff√©rents services de YunoHost fonctionnent. Pour chacun d'eux, une redirection 'TCP' est n√©cessaire. Certaines interfaces font r√©f√©rence √† un port ¬´ externe ¬ª et un port ¬´ interne ¬ª : dans notre cas il s'agit du m√™me.  Web : 80 (HTTP), 443 (HTTPS)SSH : 22XMPP : 5222 (clients), 5269 (serveurs)Email : 25, 587 (SMTP), 993 (IMAP)  If you use both a modem and a router, then you need to do the following:  first on the modem (the box closest to the internet) create rules to forward the above ports to your router;then on the router (the box between the modem and your devices) create rules to forward the above ports to the static IP address for your server.  attention Certains fournisseurs d'acc√®s √† Internet bloquent le port 25 (mail SMTP) par d√©faut pour combattre le spam. D'autres (plus rares) ne permettent pas d'utiliser librement les ports 80/443. En fonction de votre FAI, il peut √™tre possible d'ouvrir ces ports dans l'interface... Voir cette page pour plus d'informations.  ","version":"Next","tagName":"h3"},{"title":"Redirection automatique / UPnP‚Äã","type":1,"pageTitle":"Configurer la redirection des ports","url":"/doc/pr-2675/fr/admin/get_started/post_install/port_forwarding#redirection-automatique--upnp","content":" Une technologie nomm√©e UPnP est disponible sur certains routeurs/box et permet de rediriger automatiquement des ports vers une machine qui le demande. Si UPnP est activ√© chez vous, ex√©cuter cette commande devrait automatiquement rediriger les bons ports :  sudo yunohost firewall reload  ","version":"Next","tagName":"h2"},{"title":"Fournisseurs d‚Äôacc√®s √† Internet","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/","content":"Fournisseurs d‚Äôacc√®s √† Internet AfricaAsiaEuropeNorth AmericaSouth AmericaOceania Belgium (nl)Belgium (fr)FinlandFranceHungaryIrelandSwedenSwitzerlandUK Service provider\tBox/ router\tuPnP beschikbaar\tPoort 25 openen mogelijk\tHairpinning\tReverse DNS\tvaste IPProximus\tBBox2\tja (geactiveerd)\tja\tnee\tnee\tnee BBox3\tja (geactiveerd)\tja\tnee\tnee\tnee Scarlet\tBBox2\tja (geactiveerd)\tja\tnee\tnee\tnee attention Proximus zou niet openstaan voor self-hosting. Het openen van de poorten zou moeilijker zijn om SPAM te voorkomen. Het loont de moeite om een vpn te gebruiken.","keywords":"","version":"Next"},{"title":"Free","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/free","content":"","keywords":"","version":"Next"},{"title":"Orange","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/orange","content":"","keywords":"","version":"Next"},{"title":"Le courrier √©lectronique‚Äã","type":1,"pageTitle":"Orange","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/orange#le-courrier-√©lectronique","content":" La box d‚ÄôOrange bloque le port 25 pour limiter l‚Äôenvoi de spam.  La solution restante pour h√©berger son courrier chez soi consiste √† le faire passer par les serveurs SMTP d‚ÄôOrange.  attention YunoHost int√®gre depuis la version 4.1 une int√©gration de la configuration des relais SMTP Cette section devrait donc √™tre retravaill√©e (voire supprim√©e) au profit de cette page  Pour cela, il faut √©diter le fichier de configuration de postfix avec la commande¬†:  sudo nano /etc/postfix/main.cf   puis, rajouter √† la ligne le relai SMTP d‚ÄôOrange¬†:  relayhost = smtp.orange.fr   red√©marrez Postfix :  sudo service postfix restart   ","version":"Next","tagName":"h2"},{"title":"Probl√®mes‚Äã","type":1,"pageTitle":"Orange","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/orange#probl√®mes","content":" Si vous avez une erreur &quot;Authentification requise&quot;, la solution est la suivante : source.  √âditer le fichier de configuration de postfix  sudo nano /etc/postfix/main.cf   puis, rajouter √† la ligne :  smtp_sasl_password_maps = hash:/etc/postfix/sasl/mdp_fai.conf smtp_sasl_auth_enable = yes smtp_sasl_security_options = noanonymous relayhost = [smtp.orange.fr]:25   cr√©er le fichier mdp_fai.conf¬†:  sudo nano /etc/postfix/sasl/mdp_fai.conf   ajouter  # mdp_fai.conf [smtp.orange.fr]:25 adresseemail@chez.orange:son-mot-de-passe   avec votre mot de passe du compte d'orange.  Int√©grer le mot de passe √† Postfix :  sudo postmap /etc/postfix/sasl/mdp_fai.conf sudo postconf -e smtp_sasl_password_maps=hash:/etc/postfix/sasl/mdp_fai.conf   Si vous avez une erreur &quot;(SASL authentication failed; cannot authenticate to server smtp-auth.nowhere.com[38.123.22.160]: no mechanism available)&quot;  V√©rifier la pr√©sence de libsasl2-modules et de sasl2-bin :  apt search libsasl2-modules apt search sasl2-bin   Si ils ne sont pas pr√©sents, installez-les :  apt install libsasl2-modules sasl2-bin   Il est possible que postfix ne prenne pas en compte tout de suite vos modifications. Pour le forcer √† le faire, ex√©cutez  systemctl restart postfix  ","version":"Next","tagName":"h3"},{"title":"Acc√®s √† l‚Äôadministration de la box (v5/v6)‚Äã","type":1,"pageTitle":"Free","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/free#acc√®s-√†-ladministration-de-la-box-v5v6","content":" ","version":"Next","tagName":"h2"},{"title":"Freebox ‚â§ v5‚Äã","type":1,"pageTitle":"Free","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/free#freebox--v5","content":" Rendez-vous sur la console d'administration du site de free.  ","version":"Next","tagName":"h3"},{"title":"Freebox v6 (Revolution / Mini4k)‚Äã","type":1,"pageTitle":"Free","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/free#freebox-v6-revolution--mini4k","content":" Allez √† l‚Äôadresse : mafreebox.freebox.fr puis authentifiez-vous.  ","version":"Next","tagName":"h3"},{"title":"Ouverture des ports‚Äã","type":1,"pageTitle":"Free","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/free#ouverture-des-ports","content":" Liste des ports √† ouvrir.  ","version":"Next","tagName":"h2"},{"title":"Freebox ‚â§ v5‚Äã","type":1,"pageTitle":"Free","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/free#freebox--v5-1","content":" Cela se passe dans la section Ma Freebox / Configurer mon routeur. Il faut :  Rediriger les ports √† ouvrir vers l'adresse locale de votre serveur YunoHost.D√©finir une DMZ vers votre serveur YunoHost.  La pr√©sence conjointe de ces deux r√®gles permettent d'acc√©der √† votre serveur de l'ext√©rieur comme de l'int√©rieur de votre r√©seau local.  ","version":"Next","tagName":"h3"},{"title":"Freebox v6‚Äã","type":1,"pageTitle":"Free","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/free#freebox-v6","content":" Tutoriel d‚Äôouverture des ports sur Freebox  ","version":"Next","tagName":"h3"},{"title":"D√©blocage de l‚Äôenvoi de courriel‚Äã","type":1,"pageTitle":"Free","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/free#d√©blocage-de-lenvoi-de-courriel","content":" Pour pouvoir envoyer des mails, le d√©blocage se fait dans la partie client.  Depuis le menu Ma freebox allez sur ¬´ Blocage SMTP sortant ¬ª.  Pour pouvoir envoyer des mails, passez le blocage en ¬´ inactif ¬ª.  ","version":"Next","tagName":"h2"},{"title":"Fonction NAS de la Freebox‚Äã","type":1,"pageTitle":"Free","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/free#fonction-nas-de-la-freebox","content":" Il faut installer le paquet cifs-utils  sudo apt install cifs-utils   Il faut cr√©er un point de montage (ici /home/monlogin/freebox)  mkdir ~/freebox   On monte le r√©pertoire NAS par d√©faut avec les droits de lecture / √©criture pour tous  sudo mount -t cifs //mafreebox.freebox.fr/Disque\\ dur/ /home/monlogin/freebox -o guest,iocharset=utf8,file_mode=0777,dir_mode=0777   ","version":"Next","tagName":"h2"},{"title":"Automatiser le montage‚Äã","type":1,"pageTitle":"Free","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/free#automatiser-le-montage","content":" Une ligne √† ajouter √† la fin du /etc/fstab :  //mafreebox.freebox.fr/Disque\\040dur/ /home/monlogin/freebox cifs _netdev,guest,uid=monlogin,gid=users,iocharset=utf8 0 0   Le _netdev signale que c'est un p√©riph√©rique r√©seau, afin que le syst√®me ne le monte que s'il a acc√®s au r√©seau. guest est le mode d'identification √† la Freebox : pour une connexion authentifi√©e, placez vos identifiants dans un fichier sous la forme  username=your_user password=your_pass domain=FREEBOX   et remplacez guest par credentials=/path/to/file (c'est aussi possible de sp√©cifier directement username=xx,password=xx dans le fstab, mais d√©conseill√© pour des raisons de s√©curit√©) uid et gid sont pour les id user et group auxquels appartiendra le r√©pertoire une fois mont√©. Par d√©fault (sur la Freebox V5 en tout cas), ils se retrouvent avec les uid/gid de 4242. Il est aussi possible de mettre des droits particuliers avec les param√®tres file_mode=0777,dir_mode=0777. ","version":"Next","tagName":"h3"},{"title":"SFR","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/sfr","content":"","keywords":"","version":"Next"},{"title":"Acc√®s √† l‚Äôadministration de la box‚Äã","type":1,"pageTitle":"SFR","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/sfr#acc√®s-√†-ladministration-de-la-box","content":" Allez √† cette adresse¬†: http://192.168.1.1Authentifiez-vous, soit en appuyant sur le bouton de la box pendant 5 secondes soit avec les identifiants d‚Äôadministration.    ","version":"Next","tagName":"h2"},{"title":"Courrier √©lectronique‚Äã","type":1,"pageTitle":"SFR","url":"/doc/pr-2675/fr/admin/get_started/providers/isp/sfr#courrier-√©lectronique","content":" Pour pouvoir envoyer des mails, il faut d√©sactiver le filtrage.    Source¬†: https://assistance.sfr.fr/sfrmail-appli/sfrmail/envoyer-e-mail-serveur-smtp.html ","version":"Next","tagName":"h2"},{"title":"Registrars","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/providers/registrar/","content":"Registrars Since version 4.3, YunoHost includes a mechanism to interface your server with your DNS registrar API, with the purpose of simplifying and automatizing DNS records registration and maintenance. The procedure requires an initial configuration where you need to generate an API key on your registrar's interface. Not all registrars are supported. So far, the community tested and validated the interface with Gandi and OVH, which are recommended. The interface with other registrars may work, but is still considered experimental until we gather feedback from the community. The list below can help you to choose a registrar if you plan to buy a domain name to use it with YunoHost. Registrar\tCompatibility\tEasy to obtain an API key\tHowtoGandi\t‚úò (broken)\t‚úò\tObtain an API key See bug here OVH\t‚úî (tested)\t‚úò\tObtain an API key Configure manually Namecheap\t‚úò (in lexicon but untested)\t‚úò‚úò‚úò API not available without 50$ on the account\tObtain an API key","keywords":"","version":"Next"},{"title":"Obtenir une clef API de Namecheap","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/providers/registrar/namecheap","content":"Obtenir une clef API de Namecheap Voir la documentation de l'API pour r√©f√©rence. Connectez-vous √† votre compte Namecheap. Allez dans le menu Profil &gt; Outils. Faites d√©filer vers le bas jusqu'√† la section Business &amp; Dev Tools. Cliquez sur MANAGE √† c√¥t√© de Namecheap API Access. Basculez sur ON/OFF, lisez nos Conditions d'utilisation, entrez le mot de passe de votre compte. Apr√®s avoir activ√© l'acc√®s √† l'API, une cl√© API vous sera attribu√©e. Le nom d'utilisateur de votre compte Namecheap servira de nom d'utilisateur pour l'API. Votre acc√®s √† l'API est authentifi√© √† l'aide de ces √©l√©ments.","keywords":"","version":"Next"},{"title":"Obtenir une clef API chez Gandi","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/providers/registrar/gandi","content":"Obtenir une clef API chez Gandi Cette page a pour but de vous guider dans l'obtention d'une cl√© API aupr√®s de Gandi afin de configurer le m√©canisme de configuration automatique des DNS de YunoHost. attention NE partagez vos cl√©fs API avec PERSONNE‚ÄØ! Un attaquant malveillant qui obtiendrait vos jetons pourrait prendre le contr√¥le de votre domaine, et √©ventuellement de votre serveur ! Allez √† https://account.gandi.net/Vous devriez arriver sur cette page. Cliquez ensuite sur 'Security'Dans la page suivante, clickez sur '(re)Generate the API key'.","keywords":"","version":"Next"},{"title":"Obtenir une clef API de OVH","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/providers/registrar/ovh/autodns","content":"Obtenir une clef API de OVH Cette page a pour but de vous guider dans l'obtention d'une cl√© API aupr√®s d'OVH afin de configurer le m√©canisme de configuration automatique des DNS de YunoHost. attention NE partagez vos cl√©fs API avec PERSONNE‚ÄØ! Un attaquant malveillant qui obtiendrait vos jetons pourrait prendre le contr√¥le de votre domaine, et √©ventuellement de votre serveur ! Allez sur la page de demande de jeton OVH Remplissez le formulaire avec les informations requises comme indiqu√© ci-dessous : ID du compte ou adresse email : Il s'agit de votre login OVH habituel Mot de passe : Il s'agit de votre mot de passe OVH habituel Nom du script : par exemple YunoHost Auto DNS Description du script : par exemple YunoHost Auto DNS Validit√© : Unlimited Droits : utilisez le bouton + pour ajouter les lignes suivantes GET : /domaine/zone/*POST : /domaine/zone/*PUT : /domaine/zone/*DELETE : /domaine/zone/* Vous obtiendrez trois jetons (une cl√© d'application, une cl√© d'application secr√®te et une cl√© de consommateur) qui doivent √™tre utilis√©s dans la configuration de YunoHost.","keywords":"","version":"Next"},{"title":"Configuration DNS avec OVH","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/providers/registrar/ovh/manualdns","content":"","keywords":"","version":"Next"},{"title":"IP dynamique‚Äã","type":1,"pageTitle":"Configuration DNS avec OVH","url":"/doc/pr-2675/fr/admin/get_started/providers/registrar/ovh/manualdns#ip-dynamique","content":" Tutoriel g√©n√©ral sur l'IP dynamique.  Vous devez suivre cette partie si vous avez une IP dynamique.  V√©rifiez si votre FAI vous fournit une adresse IP dynamique ici.  Cr√©ons un identifiant DynHost.  Suivez ce tutoriel pour installer ddclient. ddclient se chargera de signaler √† OVH que l'IP a chang√©. Ensuite OVH mettra √† jour l'IP.  Vous devez ajouter dans le fichier de configuration‚ÄØ:  votre login et mot de passe DynHostvotre nom de domaine  Vous pouvez √©galement consulter le Guide OVH sur DynHost. ","version":"Next","tagName":"h3"},{"title":"Fournisseurs de serveurs","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/providers/servers","content":"","keywords":"","version":"Next"},{"title":"Offres avec YunoHost pr√©install√©‚Äã","type":1,"pageTitle":"Fournisseurs de serveurs","url":"/doc/pr-2675/fr/admin/get_started/providers/servers#offres-avec-yunohost-pr√©install√©","content":" Alsace R√©seau Neutre (VPS) FFDN CHATONSECOWAN (VPS)Hosterfy (VPS)Scaleway Dedibox (server d√©di√©)Numericoop (VPS) CHATONS  ","version":"Next","tagName":"h2"},{"title":"Externalisation informatique YunoHost‚Äã","type":1,"pageTitle":"Fournisseurs de serveurs","url":"/doc/pr-2675/fr/admin/get_started/providers/servers#externalisation-informatique-yunohost","content":" ReflexLibre (seulement en France) CHATONSNumericoop (seulement en France) CHATONSLibrezo (seulement en France) ","version":"Next","tagName":"h2"},{"title":"Avantages d‚Äôun VPN pour l‚Äôauto-h√©bergement","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/providers/vpn/vpn_advantage","content":"","keywords":"","version":"Next"},{"title":"Avantages‚Äã","type":1,"pageTitle":"Avantages d‚Äôun VPN pour l‚Äôauto-h√©bergement","url":"/doc/pr-2675/fr/admin/get_started/providers/vpn/vpn_advantage#avantages","content":" ","version":"Next","tagName":"h2"},{"title":"Plug & Play‚Äã","type":1,"pageTitle":"Avantages d‚Äôun VPN pour l‚Äôauto-h√©bergement","url":"/doc/pr-2675/fr/admin/get_started/providers/vpn/vpn_advantage#plug--play","content":" En configurant un VPN sur votre serveur, vous serez en mesure de le rendre accessible au reste d'Internet sans avoir √† modifier la configuration du routeur auquel vous le branchez. Ce point peut √™tre vraiment pratique si vous partez en vacances, que vous d√©m√©nagez ou si vous avez une coupure d'Internet, car vous serez en mesure de le brancher facilement chez une personne de confiance sans avoir besoin de configurer le routeur de la personne qui vous aide.  De la m√™me fa√ßon, vous vous √©conomisez l'ouverture des ports de votre routeur ainsi que le contournement du hairpinning.  ","version":"Next","tagName":"h3"},{"title":"Pas de micro-coupure DNS‚Äã","type":1,"pageTitle":"Avantages d‚Äôun VPN pour l‚Äôauto-h√©bergement","url":"/doc/pr-2675/fr/admin/get_started/providers/vpn/vpn_advantage#pas-de-micro-coupure-dns","content":" Si votre connexion Internet n'a pas d'IP publique fixe, vous serez oblig√© de mettre en place un nom de domaine dynamique (Dynamique DNS). Cette solution peut √™tre acceptable, mais la mise √† jour du DNS ne se fera qu'√† intervalle r√©gulier (Toutes les deux minutes si c'est un nom de domaine en noho.st ou nohost.me). Il y a donc une chance que cela provoque de temps en temps des erreurs d'affichage dans le navigateur, voir m√™me qu'un autre site s'affiche (les risques sont toutefois r√©duits car la pratique de l'auto-h√©bergement n'est pas r√©pandue).  Avec un VPN neutre, ce probl√®me est contourn√© car le VPN peut √™tre compar√© √† une connexion Internet Virtuelle, qui a sa propre adresse IPv4 fixe, d√®s lors plus besoin de mettre √† jour le nom de domaine.  ","version":"Next","tagName":"h3"},{"title":"Le cas du mail‚Äã","type":1,"pageTitle":"Avantages d‚Äôun VPN pour l‚Äôauto-h√©bergement","url":"/doc/pr-2675/fr/admin/get_started/providers/vpn/vpn_advantage#le-cas-du-mail","content":" Le mail est un des protocoles les plus complexes √† auto-h√©berger, en g√©n√©ral c'est ce qu'un utilisateur auto-h√©berge en dernier. En effet, il est tr√®s facile de se retrouver dans une situation o√π les emails envoy√©s par le serveur sont refus√©s par les serveurs SMTP destinataires.  Pour √©viter √ßa il faut entre autre¬†:  configurer le reverse DNS de la connexion Internet (ou du VPN) du serveurune IPv4 fixeque cette IPv4 soit enlevable de toutes les listes noires (notamment l'IP ne doit pas √™tre sur le DUL)pouvoir ouvrir le port 25 (ainsi que les autres ports SMTP)  Malheureusement, aucun des FAI fran√ßais les plus courants ne respecte la totalit√© de ces points.  Pour pallier cela, l'usage d'un VPN respectant ces points peut √™tre une alternative.  ","version":"Next","tagName":"h3"},{"title":"Confiance‚Äã","type":1,"pageTitle":"Avantages d‚Äôun VPN pour l‚Äôauto-h√©bergement","url":"/doc/pr-2675/fr/admin/get_started/providers/vpn/vpn_advantage#confiance","content":" Enfin, si vous ne souhaitez pas que le contenu des communications de votre serveur soit espionnable par des √©quipements pr√©sents sur le r√©seau de votre fournisseur d'acc√®s √† Internet, vous pouvez utiliser un VPN pour chiffrer vos communications et d√©porter votre confiance sur un fournisseur de VPN. Rappel, depuis 2015, le gouvernement d√©ploie officiellement des bo√Ætes noires chez les gros op√©rateurs r√©seau qui ont pour objectif de mettre sur √©coute l'ensemble des communications num√©riques fran√ßaises entre autre pour pr√©server les int√©r√™ts scientifiques, √©conomiques et industrielles de la France.  ","version":"Next","tagName":"h3"},{"title":"Inconv√©nient‚Äã","type":1,"pageTitle":"Avantages d‚Äôun VPN pour l‚Äôauto-h√©bergement","url":"/doc/pr-2675/fr/admin/get_started/providers/vpn/vpn_advantage#inconv√©nient","content":" ","version":"Next","tagName":"h2"},{"title":"Co√ªt‚Äã","type":1,"pageTitle":"Avantages d‚Äôun VPN pour l‚Äôauto-h√©bergement","url":"/doc/pr-2675/fr/admin/get_started/providers/vpn/vpn_advantage#co√ªt","content":" Un VPN neutre a un co√ªt puisque l'op√©rateur qui le fournit doit faire fonctionner un serveur et utiliser de la bande passante. Les prix des VPN associatifs de la FFDN sont autour de 6¬†‚Ç¨ par mois.  ","version":"Next","tagName":"h3"},{"title":"Trajet des paquets‚Äã","type":1,"pageTitle":"Avantages d‚Äôun VPN pour l‚Äôauto-h√©bergement","url":"/doc/pr-2675/fr/admin/get_started/providers/vpn/vpn_advantage#trajet-des-paquets","content":" Lorsque l'on met en place un VPN sur son serveur, si on ne met pas en place de configuration particuli√®re, le transfert d'un fichier d'un ordinateur du r√©seau local vers le serveur utilisant le VPN, passera par le bout du VPN c'est-√†-dire par le serveur du fournisseur de VPN.  Pour pallier ce point, il y a deux solutions¬†:  transformer son serveur en routeur et connecter les √©quipements de la maison √† ce dernier, ces √©quipements b√©n√©ficieront alors de la confidentialit√© du VPN √©galement.utiliser le serveur YunoHost comme r√©solveur DNS lorsque l'on est chez soi, de fa√ßon √† rediriger les noms de domaines du serveur l'IP locale plut√¥t que l'IP publique. Cette op√©ration peut se faire soit sur chaque √©quipement, soit sur le routeur (si ce dernier le permet). ","version":"Next","tagName":"h3"},{"title":"Pourquoi (ne pas?) s'autoh√©berger¬†?","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/why_should_you_not_host_yourself","content":"","keywords":"","version":"Next"},{"title":"Pourquoi s'auto-h√©berger ?‚Äã","type":1,"pageTitle":"Pourquoi (ne pas?) s'autoh√©berger¬†?","url":"/doc/pr-2675/fr/admin/get_started/why_should_you_not_host_yourself#pourquoi-sauto-h√©berger-","content":" Vous croyez en un internet libre, ouvert et d√©centralis√©. Dans un internet centralis√©, les entit√©s priv√©es et les gouvernements peuvent espionner, analyser et influencer les personnes en dictant la fa√ßon dont elle peuvent interagir les unes avec les autres, ainsi qu'en filtrant du contenu. YunoHost est d√©velopp√© par une communaut√© qui croit en un internet ouvert et d√©centralis√©. Nous esp√©rons que vous aussi ! Vous voulez avoir le contr√¥le de vos donn√©es et services. Vos images, vos messages de chat, votre historique de navigation, et votre dissertation pour l'√©cole n'ont rien √† faire sur l'ordinateur de quelqu'un d'autre (a.k.a. le Cloud). Ces donn√©es font partie de votre vie priv√©e, mais √©galement de celle de votre famille, de vos amis, etc. Ces donn√©es devraient √™tre g√©r√©es par vous, et non par une quelconque entreprise am√©ricaine qui cherche √† analyser vos donn√©es pour revendre les r√©sultats. Vous souhaitez apprendre comment fonctionnent les ordinateurs et Internet. Op√©rer son propre serveur est un bon contexte pour apprendre les m√©canismes de base au c≈ìur des syst√®mes d'exploitation (OS) et d'Internet. Il vous faudra possiblement toucher √† la ligne de commande et √† des morceaux de configuration r√©seau et DNS. Vous voulez explorer de nouvelles possibilit√©s et personnaliser votre espace. Avez-vous d√©j√† r√™v√© d'avoir votre propre serveur Minecraft pour vos ami¬∑e¬∑s, ou un client IRC ou XMPP persistant ? Avec votre propre serveur, vous pouvez manuellement installer et faire tourner n'importe quel programme et personnaliser chaque morceau.  ","version":"Next","tagName":"h2"},{"title":"Pourquoi ne pas s'auto-h√©berger ?‚Äã","type":1,"pageTitle":"Pourquoi (ne pas?) s'autoh√©berger¬†?","url":"/doc/pr-2675/fr/admin/get_started/why_should_you_not_host_yourself#pourquoi-ne-pas-sauto-h√©berger-","content":" L'auto-h√©bergement requiert du travail et de la patience. S'auto-h√©berger est un peu comme avoir son propre jardin ou potager : cela demande du travail et de la patience. Bien que YunoHost cherche √† faire tout le travail compliqu√© pour vous, il vous faudra tout de m√™me prendre le temps d'apprendre et configurer quelques d√©tails pour que votre installation marche correctement. Il vous faudra aussi g√©rer quelques t√¢ches de maintenance (telles que les mises √† jour) de temps en temps, et demander de l'aide si des choses ne fonctionnent pas comme pr√©vu. Avec de grands serveurs viennent les grandes responsabilit√©s. Op√©rer un serveur implique d'√™tre responsable des donn√©es que vous h√©bergez : personne ne pourra r√©cup√©rer des donn√©es √† votre place si vous les perdez. YunoHost fournit des fonctionnalit√©s de sauvegarde qu'il est recommand√© d'utiliser pour sauvegarder les configurations et donn√©es importantes. Il vous faut aussi garder un ≈ìil sur les recommandations et les nouvelles √† propos de la s√©curit√© pour que votre serveur ou vos donn√©es ne soient pas compromises. La qualit√© et les performances ne seront probablement pas aussi bonnes que des services premium. YunoHost (et la plupart des applications qui sont packag√©es) sont des logiciels libres et open-source, d√©velopp√©s par des communaut√©s b√©n√©voles. Il n'y a pas de garantie absolue que ces logiciels fonctionneront dans toutes les circonstances possibles. Les performances de votre serveur auto-h√©berg√© sont aussi li√©es au processeur, √† la m√©moire vive et √† la connectivit√© internet. ","version":"Next","tagName":"h2"},{"title":"üêû D√©pannage","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/troubleshooting/","content":"üêû D√©pannage Cette section contiens des informations pour r√©gler des probl√®mes courants. Si vous cherchez de l'aide, jetez un oeil au forum, au salon de support et la page d'aide.","keywords":"","version":"Next"},{"title":"Fournisseurs VPN","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/get_started/providers/vpn/","content":"","keywords":"","version":"Next"},{"title":"Sites anglophones‚Äã","type":1,"pageTitle":"Fournisseurs VPN","url":"/doc/pr-2675/fr/admin/get_started/providers/vpn/#sites-anglophones","content":" Fournisseur VPN\tCompatibilit√© VPNClient\tIPv6\trDNS IPv4\trDNS IPv6\tPrix\tAdh√©sion\tNeutralit√© du netNeutrinet\t‚úî (.cube + internetcube)\t‚úî\t‚úî\t‚úî\t~10‚Ç¨¬π/mois ou 30‚Ç¨/an\tInclus\tFFDN Non Profit  ¬π Payez ce que vous voulez  info Si vous essayez un autre fournisseur de VPN qui inclut l'ipv4 public d√©di√© et la redirection de port, n'h√©sitez pas √† contribuer √† cette documentation. Nous avons besoin de personnes pour tester les offres sp√©cifiques de ces fournisseurs commerciaux : ‚úò VPN area n'autorise pas la redirection du port 80. L'ex√©cution d'un serveur web est contraire √† leurs conditions d'utilisation.Trust zonePureVPNRapidVPN  ","version":"Next","tagName":"h2"},{"title":"Sites francophones‚Äã","type":1,"pageTitle":"Fournisseurs VPN","url":"/doc/pr-2675/fr/admin/get_started/providers/vpn/#sites-francophones","content":" Fournisseurs\tCompatibilit√© VPNClient\tIPv6\trDNS IPv4\trDNS IPv6\tPrix\tAdh√©sion\tNeutralit√© du netAquilenet\t‚úî (.cube)\t‚úî\t‚úî\t‚úî\t3 √† 5 / mois\t~15‚Ç¨¬π /an\tFFDN Non Profit Alsace R√©seau Neutre\t‚úî (.cube + internetcube)\t‚úî\t‚úî\t‚úî\t4 ‚Ç¨ (ou ƒû1) / mois\t15‚Ç¨ / an\tFFDN Non Profit Baionet\t‚úò (wireguard)\t?\t?\t?\t2,5 ‚Ç¨ ou 5 ‚Ç¨ / mois\t5‚Ç¨ ou 40‚Ç¨ / an\tFFDN Non Profit FAImaison\t‚úî (.cube)\t‚úò\t‚úî\t‚úò\tPrix libre\t8 ou 16‚Ç¨ / an\tFFDN Non Profit French Data Network\t‚úî (.cube)\t‚úî\t‚úî\t‚úî\t6,5‚Ç¨ √† 23‚Ç¨ / mois\t15 ou 30‚Ç¨ / an\tFFDN Non Profit Franciliens\t‚úî (.cube + internetcube)\t‚úî\t‚úî\t‚úî\t6,5‚Ç¨ √† 23‚Ç¨ / mois\t15 ou 30‚Ç¨ / an\tFFDN Non Profit Grifon\t‚úî (manuelle) + L2TP/IPSec\t‚úî\t‚úî\t‚úî\t5‚Ç¨ / mois\t15‚Ç¨ / an\tFFDN Non Profit Igwan.net\t‚úò (L2TP/IPSec)\t?\t?\t?\t4 ou 8‚Ç¨ / mois\t? / an\tFFDN Non Profit Illyse\t‚úî (manuelle)\t‚úî\t‚úî\t‚úî\t6 ou 8‚Ç¨ / mois\t20‚Ç¨ / an\tFFDN Non Profit ILOTH\t‚úî (.cube)\t‚úò\t‚úî\t‚úò\t80‚Ç¨ / an\t5 √† 100‚Ç¨ / an\tFFDN Non Profit Milkywan\t‚úî (manuelle)\t‚úî\t‚úî\t‚úî\t5 ‚Ç¨ / mois\tincluse Myc√©lium\t‚úî (manuelle)\t‚úò\t‚úò\t‚úò\tPrix libre\tincluse R√©serv√© aux nordistes(FR 59)\tFFDN Non Profit Neutrinet\t‚úî (.cube + internetcube)\t‚úî\t‚úî\t?\t~8 ‚Ç¨¬π / mois\tincluse\tFFDN Non Profit R√©zine\t‚úî (manuelle)\t‚úî\t‚úî\t‚úî\t5 √† 10‚Ç¨ / mois\tPrix libre\tFFDN Non Profit Swiss Neutral Network\t‚úî (.cube)\t‚úî\t‚úî\t‚úî\t30.- CHF/mois\t50.- CHF / an R√©serv√© aux suisses\tFFDN Non Profit Tetaneutral\t‚úò (wireguard)\t?\t?\t?\t5‚Ç¨¬π / mois\t5 √† 100‚Ç¨¬π / an\tFFDN Non Profit Touraine Data Network\t‚úî (.cube + internetcube)\t‚úî\t?\t?\t5‚Ç¨ / mois\t10 √† 20‚Ç¨ / an\tFFDN Non Profit  ¬π Prix libre  ","version":"Next","tagName":"h2"},{"title":"Sites germanophones‚Äã","type":1,"pageTitle":"Fournisseurs VPN","url":"/doc/pr-2675/fr/admin/get_started/providers/vpn/#sites-germanophones","content":" Fournisseur VPN\tCompatibilit√© VPNClient\tIPv6\trDNS IPv4\trDNS IPv6\tPrix\tAdh√©sion\tNeutralit√© du netIn-Berlin\t‚úî (manuelle)\t‚úî\t‚úî\t‚úî\t9 ou 14‚Ç¨ / mois\t20‚Ç¨ / an\tNon Profit ","version":"Next","tagName":"h2"},{"title":"Formulaires de retrait de liste noire","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/troubleshooting/blacklist_forms","content":"","keywords":"","version":"Next"},{"title":"Testez votre serveur‚Äã","type":1,"pageTitle":"Formulaires de retrait de liste noire","url":"/doc/pr-2675/fr/admin/troubleshooting/blacklist_forms#testez-votre-serveur","content":" To check your Email deliverability, YunoHost provide some tests avilables in the Diagnosis tool. This tools evalutes a lot of configuration and ip reputation points. It gives you also an indicator if some mails are blocked inside the mail queue (waiting to be sent). all the points evaluated by the well known mail-tester.com except for mail content (usefull if you prepare a newsletter).  However, if you have a doubt on the internal diagnosis results, you could check on external tools:  En envoyant des emails : Mail testerEn fournissant l‚Äôadresse ip pulbique : MultiRBL Valli ou Whatismyip  ","version":"Next","tagName":"h2"},{"title":"Check your mail logs‚Äã","type":1,"pageTitle":"Formulaires de retrait de liste noire","url":"/doc/pr-2675/fr/admin/troubleshooting/blacklist_forms#check-your-mail-logs","content":" This command can help you to summarize which emails has been refused by other SMTP server and why.  cat /var/log/mail.log | grep &quot;deferred&quot; | sed -E &quot;s/(:[0-9][0-9]).+&lt;/\\1\\t/g&quot; | sed -E &quot;s/&gt;.+dsn/\\terror/g&quot; | sed -E &quot;s/, status=deferred \\(/ /g&quot; | sed -E &quot;s/\\)$//g&quot;   See the list of SMTP return code from wikipedia.  ","version":"Next","tagName":"h2"},{"title":"Untestable email providers‚Äã","type":1,"pageTitle":"Formulaires de retrait de liste noire","url":"/doc/pr-2675/fr/admin/troubleshooting/blacklist_forms#untestable-email-providers","content":" YunoHost is only able to test generic blacklist using the DNS RBL mechanism. However, Gmail, Microsoft, Yahoo or Free maintains their own blacklisting mechanism, so in some situation you may need to contact their teams through dedicated forms or use dedicated tools.  ","version":"Next","tagName":"h2"},{"title":"Microsoft‚Äã","type":1,"pageTitle":"Formulaires de retrait de liste noire","url":"/doc/pr-2675/fr/admin/troubleshooting/blacklist_forms#microsoft","content":" No way to test easily IP reputationMicrosoft guide for postmasterInformation about SMTP return code from MicrosoftReputation Management tools : Junk Email Reporting Program (JMRP)Smart Network Data Services (SNDS) Get support form for deliverability issues (Sadly you need a Microsoft account :/ )  ","version":"Next","tagName":"h3"},{"title":"Gmail‚Äã","type":1,"pageTitle":"Formulaires de retrait de liste noire","url":"/doc/pr-2675/fr/admin/troubleshooting/blacklist_forms#gmail","content":" No way to test easily IP reputationGoogle guide for postmasterInformation about SMTP return code from GoogleReputation Management tools : Google Postmaster ToolsGet support form for deliverability issues  ","version":"Next","tagName":"h3"},{"title":"Yahoo‚Äã","type":1,"pageTitle":"Formulaires de retrait de liste noire","url":"/doc/pr-2675/fr/admin/troubleshooting/blacklist_forms#yahoo","content":" No way to test easily IP reputationYahoo guide for postmasterInformation about SMTP return code from YahooReputation Management tools : Complaint Feedback LoopGet support form for deliverability issues  ","version":"Next","tagName":"h3"},{"title":"Free‚Äã","type":1,"pageTitle":"Formulaires de retrait de liste noire","url":"/doc/pr-2675/fr/admin/troubleshooting/blacklist_forms#free","content":" You can find a tool to test your IP, advices, explanation of error code and a way to contact Free on this page  ","version":"Next","tagName":"h3"},{"title":"Get alert about emails sent without SPF or DKIM‚Äã","type":1,"pageTitle":"Formulaires de retrait de liste noire","url":"/doc/pr-2675/fr/admin/troubleshooting/blacklist_forms#get-alert-about-emails-sent-without-spf-or-dkim","content":" If you use your own domains and think that some mails are sent by unauthorized servers (so without SPF/DKIM), you get report about this mail with.  _dmarc.DOMAIN 3600 IN TXT &quot;v=DMARC1; p=none; fo=1; rua=mailto:example@domain.tld!10m&quot;  ","version":"Next","tagName":"h2"},{"title":"Changing root's password","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/troubleshooting/change_root_password","content":"","keywords":"","version":"Next"},{"title":"Using the web administration interface‚Äã","type":1,"pageTitle":"Changing root's password","url":"/doc/pr-2675/fr/admin/troubleshooting/change_root_password#using-the-web-administration-interface","content":" First, connect to your web administration.  Then go to Tools &gt; YunoHost settings &gt; Security tab &gt; Change root password  ","version":"Next","tagName":"h2"},{"title":"Using the command line interface‚Äã","type":1,"pageTitle":"Changing root's password","url":"/doc/pr-2675/fr/admin/troubleshooting/change_root_password#using-the-command-line-interface","content":" yunohost tools rootpw  ","version":"Next","tagName":"h2"},{"title":"Execute the basic-space-cleanup tool","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/troubleshooting/cleanup","content":"These are a few guidelines on how to perform some cleanup on the server, for instance when storage space becomes a bit short. Execute the basic-space-cleanup tool One may use the following command, to perform basic space cleanup (apt, journalctl, logs, ...) :sudo yunohost tools basic-space-cleanup Additional steps may be needed, to address current shortcomings : see a logs cleanup issue for instance.","keywords":"","version":"Next"},{"title":"D√©bannir une adresse IP","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/troubleshooting/fail2ban","content":"","keywords":"","version":"Next"},{"title":"D√©bannir une adresse IP‚Äã","type":1,"pageTitle":"D√©bannir une adresse IP","url":"/doc/pr-2675/fr/admin/troubleshooting/fail2ban#d√©bannir-une-adresse-ip","content":" Pour d√©bloquer une adresse IP, vous devez d‚Äôabord acc√©der √† votre serveur par un moyen quelconque (par exemple √† partir d‚Äôune autre adresse IP ou d‚Äôune autre connexion internet que celle bannie).  Ensuite, regardez le journal de Fail2Ban pour identifier dans quelle prison ou jail l‚Äôadresse IP a √©t√© bannie :  sudo tail /var/log/fail2ban.log 2019-01-07 16:24:47 fail2ban.filter [1837]: INFO [sshd] Found 11.22.33.44 2019-01-07 16:24:49 fail2ban.filter [1837]: INFO [sshd] Found 11.22.33.44 2019-01-07 16:24:51 fail2ban.filter [1837]: INFO [sshd] Found 11.22.33.44 2019-01-07 16:24:54 fail2ban.filter [1837]: INFO [sshd] Found 11.22.33.44 2019-01-07 16:24:57 fail2ban.filter [1837]: INFO [sshd] Found 11.22.33.44 2019-01-07 16:24:57 fail2ban.actions [1837]: NOTICE [sshd] Ban 11.22.33.44 2019-01-07 16:24:57 fail2ban.filter [1837]: NOTICE [recidive] Ban 11.22.33.44   Ici, l‚Äôadresse IP 11.22.33.44 a √©t√© bannie dans les jails sshd et recidive.  Puis d√©banissez l‚Äôadresse IP avec les commandes suivantes :  sudo fail2ban-client set sshd unbanip 11.22.33.44 sudo fail2ban-client set recidive unbanip 11.22.33.44   ","version":"Next","tagName":"h2"},{"title":"Passer une adresse IP en liste blanche / whitelist‚Äã","type":1,"pageTitle":"D√©bannir une adresse IP","url":"/doc/pr-2675/fr/admin/troubleshooting/fail2ban#passer-une-adresse-ip-en-liste-blanche--whitelist","content":" Si vous ne voulez plus qu‚Äôune adresse IP ¬´ l√©gitime ¬ª soit bloqu√©e par YunoHost, alors il faut la renseigner dans la liste blanche ou whitelist du fichier de configuration de la prison.  Lors d‚Äôune mise √† jour du logiciel Fail2Ban, le fichier d‚Äôorigine /etc/fail2ban/jail.conf est √©cras√©. C‚Äôest donc dans un nouveau fichier que nous allons stocker les modifications. Elles seront ainsi conserv√©es dans le temps.  Commencez par cr√©er le nouveau fichier de configuration des prisons qui s‚Äôappelera yunohost-whitelist.conf :  sudo touch /etc/fail2ban/jail.d/yunohost-whitelist.conf   √âditez ce nouveau fichier avec votre √©diteur pr√©f√©r√© :  sudo nano /etc/fail2ban/jail.d/yunohost-whitelist.conf   Coller le contenu suivant dans le fichier et adapter l‚Äôadresse IP XXX.XXX.XXX.XXX :  [DEFAULT] ignoreip = 127.0.0.1/8 XXX.XXX.XXX.XXX #&lt;= l'adresse IP (on peut en mettre plusieurs, s√©par√©es par un espace) que vous voulez passer en liste blanche / whitelist   Sauvegardez le fichier et rechargez la configuration de Fail2Ban :  sudo fail2ban-client reload   F√©licitations, plus de risques de se bannir de son propre serveur YunoHost ! ","version":"Next","tagName":"h2"},{"title":"Configuration de l'IPv6","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/troubleshooting/ipv6","content":"","keywords":"","version":"Next"},{"title":"Avec un VPS chez OVH‚Äã","type":1,"pageTitle":"Configuration de l'IPv6","url":"/doc/pr-2675/fr/admin/troubleshooting/ipv6#avec-un-vps-chez-ovh","content":" OVH donne une adresse IPv4 et une IPv6 pour ses VPS, mais par d√©faut, seule l'IPv4 fonctionne. Veuillez regarder The OVH documentation  ","version":"Next","tagName":"h2"},{"title":"Configurer le serveur DNS‚Äã","type":1,"pageTitle":"Configuration de l'IPv6","url":"/doc/pr-2675/fr/admin/troubleshooting/ipv6#configurer-le-serveur-dns","content":" Also check the documentation for subdomains.  ","version":"Next","tagName":"h3"},{"title":"Configurer le serveur‚Äã","type":1,"pageTitle":"Configuration de l'IPv6","url":"/doc/pr-2675/fr/admin/troubleshooting/ipv6#configurer-le-serveur","content":" Sur le panneau de gestion d'OVH, vous aller r√©cup√©rer 3 informations :  l'adresse IPv6 du serveurl'adresse passerelle IPv6le pr√©fixe IPv6. Les offres VPS SSD d'OVH ne fournissent qu'une seule adresse IPV6, le pr√©fixe est donc /128  Sur votre VPS, vous allez cr√©er une sauvegarde de votre fichier de configuration des interfaces r√©seau dans votre r√©pertoire home avec la commande : cp /etc/network/interfaces ~/interfaces. Then, you can edit the configuration file (/etc/network/interfaces) with the following.  remarque D√©couvrir et v√©rifier avec la commande ip a l'interface utilis√©e sur votre VPS ( g√©n√©ralement du type ENS3 chez OVH) Dans cet exemple, nous consid√©rons que votre interface r√©seau est eth0. Vous devez adapter l'exemple pour correspondre √† votre situation.  iface eth0 inet6 static address &lt;votre adresse IPv6&gt; netmask &lt;votre pr√©fixe IPv6&gt; post-up /sbin/ip -6 route add &lt;la passerelle IPv6&gt; dev eth0 post-up /sbin/ip -6 route add default via &lt;la passerelle IPv6&gt; dev eth0 pre-down /sbin/ip -6 route del default via &lt;la passerelle IPv6&gt; dev eth0 pre-down /sbin/ip -6 route del &lt;la passerelle IPv6&gt; dev eth0   Maintenant, enregistrez le fichier et red√©marrez les services r√©seau avec : service networking restart. (TODO : ideally we should find a way to validate the content of the configuration, otherwise it could fuck up the network stack and get disconnected from the VPS ?)  V√©rifiez votre configuration avec les commandes :  ip a pour afficher les adresses IP des interfaceshostname -I pour afficher les adresses IP du syst√®meessayez de faire un test de ping sur un serveur IPv6 (vous pouvez utiliser ping6 ipv6.yunohost.org)essayez de faire un test de ping sur votre server depuis votre PC (cela exige que votre PC puisse utiliser l'IPv6)  Et voil√† ! ","version":"Next","tagName":"h3"},{"title":"R√©cup√©rer l'acc√®s √† son YunoHost","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess","content":"","keywords":"","version":"Next"},{"title":"Vous avez acc√®s au serveur via l'adresse IP, mais pas avec le nom de domaine ?‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#vous-avez-acc√®s-au-serveur-via-ladresse-ip-mais-pas-avec-le-nom-de-domaine-","content":" ","version":"Next","tagName":"h2"},{"title":"Si vous √™tes auto-h√©berg√© √† la maison : il faut configurer les redirection de ports‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#si-vous-√™tes-auto-h√©berg√©-√†-la-maison--il-faut-configurer-les-redirection-de-ports","content":" V√©rifier que vous arrivez √† acc√©der au serveur en utilisant son IP globale (que vous pouvez trouver sur https://ip.yunohost.org). Si cela ne fonctionne pas:  Assurez-vous d'avoir configur√© les redirections de portsCertaines box de FAI ne supportent pas le hairpinning et vous ne pouvez pas acc√©der √† votre serveur depuis l'int√©rieur du r√©seau local (sauf √† passer par l'IP locale). Pour contourner le probl√®me, vous pouvez utiliser un des moyens suivants: utiliser une connexion cellulaire (4/5G)modifier le fichier /etc/hosts sur vos √©quipementsd√©clarer l'ip locale de YunoHost comme resolveur DNS dans votre routeur (partie DHCP) et ouvrir le port 53 UDP sur votre YunoHost en faisant attention de ne pas activer l'upnp sur le port 53. Surtout, n'ouvrez pas le port 53 de votre routeur.  ","version":"Next","tagName":"h3"},{"title":"Il faut configurer vos enregistrement DNS‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#il-faut-configurer-vos-enregistrement-dns","content":" astuce Ce n'est pas n√©cessaire si vous utilisez un domaine de type nohost.me, noho.st ou ynh.fr)  Il vous faut configurer vos enregistrement DNS comme expliqu√© sur cette page (√† minima l'enregistrement A, et AAAA si vous avez de l'IPv6).  Vous pouvez valider que les enregistrements DNS sont corrects en comparant le r√©sultat dethis service avec l'IP globale de votre serveur (si vous √™tes h√©berg√© √† la maison, vous pouvez obtenir cette IP sur IP given by our service.  ","version":"Next","tagName":"h3"},{"title":"Autres causes possibles‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#autres-causes-possibles","content":" Votre nom de domaine nohost.me, noho.st ou ynh.fr est inaccessible suite √† une panne de l'infra YunoHost. V√©rifiez sur le forum si d'autre personnes signalent le m√™me probl√®me.Votre nom de domaine est peut-√™tre expir√©. Vous pouvez v√©rifier que votre nom de domaine a expir√© en vous connectant sur l'interface de votre registrar ou en utilisant le whois par exemple via la commande whois NOM_DE_DOMAINE.Vous avez une IP dynamique. Dans ce cas, il faut mettre en place un script qui se charge de mettre √† jour r√©guli√®rement votre IP (ou d'utiliser un nom de domaine en nohost.me, noho.st ou ynh.fr qui inclue un tel m√©canisme)  ","version":"Next","tagName":"h3"},{"title":"Vous √™tes face √† une erreur de certificat qui vous emp√™che d‚Äôacc√©der √† la webadmin‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#vous-√™tes-face-√†-une-erreur-de-certificat-qui-vous-emp√™che-dacc√©der-√†-la-webadmin","content":" Une erreur de certificat peut √™tre affich√©e dans certain cas o√π vous avez fait une faute de frappe dans la barre d'adresse de votre navigateur. Si vous venez d'installer votre serveur ou d'ajouter un nouveau domaine, il utilise pour le moment un certificat auto-sign√©. Dans ce cas, il devrait √™tre possible et l√©gitime d'ajouter exceptionnellement une exception de s√©curit√© le temps d'installer un certificat Let's Encrypt √† condition d'√™tre sur une connexion internet s√ªre (pas avec Tor Browser par exemple).  ","version":"Next","tagName":"h2"},{"title":"Vous avez acc√®s en SSH mais pas √† la Web admin ou inversement‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#vous-avez-acc√®s-en-ssh-mais-pas-√†-la-web-admin-ou-inversement","content":" ","version":"Next","tagName":"h2"},{"title":"Vous essayez de vous connecter en SSH avec root plut√¥t qu'avec admin‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#vous-essayez-de-vous-connecter-en-ssh-avec-root-plut√¥t-quavec-admin","content":" Par d√©faut, la connexion en SSH doit s'effectuer avec l'utilisateur admin. Il est possible de se connecter √† la machine avec l'utilisateur root seulement depuis le r√©seau local sur lequel se situe le serveur (ou bien via la console web / VNC pour des VPS).  Lorsque vous ex√©cutez des commandes yunohost en tant qu'admin, il faut les pr√©c√©der de la commande sudo (par exemple sudo yunohost user list). Vous pouvez √©galement devenir root en tapant sudo su.  ","version":"Next","tagName":"h3"},{"title":"Vous avez √©t√© banni temporairement‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#vous-avez-√©t√©-banni-temporairement","content":" Votre serveur YunoHost inclut un m√©canisme (Fail2Ban) qui banni automatiquement les IPs qui √©chouent plusieurs fois √† s'authentifier. Dans certains cas, il peut s'agir d'un programme (par exemple un client Nextcloud) qui est configur√© avec un ancien mot de passe ou d'un utilisateur qui utilise la m√™me IP que vous.  Si vous avez √©t√© banni en tentant d'acc√©der √† une page web, seul les pages web sont inaccessibles, vous devriez donc pouvoir acc√©der au serveur en SSH. De m√™me, si vous avez √©t√© banni en SSH vous devriez pouvoir acc√©der √† la webadmin.  Si vous avez √©t√© banni √† la fois en SSH et √† la webadmin, vous pouvez essayer d'acc√©der √† votre serveur avec une autre IP, par exemple en utilisant la 4G d'un smartphone ou en utilisant Tor Browser.  Voir aussi : d√©bannir une IP sur Fail2Ban  remarque Le bannissement dure en g√©n√©ral 10 √† 12 minutes. Le bannissement n'est actif qu'en IPv4.  ","version":"Next","tagName":"h3"},{"title":"Le serveur web NGINX est cass√©‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#le-serveur-web-nginx-est-cass√©","content":" Peut-√™tre que le serveur web NGINX est en panne. Vous pouvez v√©rifier cela en ssh avec yunohost service status nginx. Si il est en panne, v√©rifiez que la configuration ne comporte pas d'erreur avec nginx -t. Si la configuration est cass√©e, ceci est peut-√™tre du √† une l'installation ou d√©sinstallation d'une application de mauvaise qualit√©... Si vous √™tes perdu, demandez de l'aide.  Il se peut √©galement que le serveur web (NGINX) ou le serveur ssh aient √©t√© tu√©s suite √† un manque d'espace disque ou de RAM / swap.  Tentez de relancer le service avec systemctl restart nginx.Vous pouvez contr√¥ler l'espace disque utilis√© avec df -h. Si une de vos partitions est remplie √† 100%, il faut identifier ce qui prend de la place sur votre syst√®me et faire de la place. Il est possible d'installer l'utilitaire ncdu avec apt install ncdu puis de faire ncdu / pour analyser la taille des dossiers de toute l'arborescence.Vous pouvez contr√¥ler l'utilisation de la RAM / swap avec free -h. En fonction des r√©sultats, il peut √™tre n√©cessaire d'optimiser votre serveur pour qu'il utilise moins de RAM (suppression d'app lourdes et inutiles...), d'ajouter de la RAM ou d'ajouter un fichier de swap.  ","version":"Next","tagName":"h3"},{"title":"Votre serveur est accessible en IPv6 mais pas en IPv4 ou inversement‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#votre-serveur-est-accessible-en-ipv6-mais-pas-en-ipv4-ou-inversement","content":" Vous pouvez le v√©rifier en tentant de faire des ping sur votre serveur en IPv4 et en IPv6.  ping -4 yourdomain.tld # or its IPv4 ping -6 yourdomain.tld # or its IPv6   Dans un tel cas, il est possible que vous arriviez √† acc√©der √† votre web admin en IPv6 mais pas en SSH potentiellement en IPv4 par d√©faut...  Dans ce cas il faut r√©soudre votre probl√®me de connectivit√©. Dans certains, cas une mise √† jour de votre box a activ√© l'IPv6, entra√Ænant des probl√®mes de configuration au niveau de votre nom de domaine.  ","version":"Next","tagName":"h3"},{"title":"La webadmin fonctionne, mais certaines applications web me renvoient une erreur 502‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#la-webadmin-fonctionne-mais-certaines-applications-web-me-renvoient-une-erreur-502","content":" Il est fort probablement que le service correspondant √† ces applications soit en panne (typiquement pour les applications PHP, il s'agit de php7.0-fpm ou php7.3-fpm). Vous pouvez alors tenter de relancer le service, et si cela ne fonctionne pas, regarder les logs du service correspondant et/ou demander de l'aide.  ","version":"Next","tagName":"h2"},{"title":"Vous avez perdu votre mot de passe administrateur ? (ou bien le mot de passe est refus√©)‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#vous-avez-perdu-votre-mot-de-passe-administrateur--ou-bien-le-mot-de-passe-est-refus√©","content":" Si vous arrivez √† afficher la page web d'administration (forcez le rafra√Æchissement avec CTRL + F5 pour √™tre sur) et que vous n'arrivez pas √† vous connectez, vous avez probablement un mot de passe erron√©.  Si vous √™tes certain du mot de passe, il est possible que le service SLAPD qui g√®re l'authentification soit en panne. Si c'est le cas, il vous faut vous connecter en root.  Si votre serveur est chez vous, vous avez sans doute acc√®s au r√©seau local du serveur. Depuis ce r√©seau, vous pouvez vous connecter en SSH avec l'utilisateur root.Si vous √™tes sur un VPS, votre h√©bergeur vous fournit peut-√™tre la possibilit√© d'avoir une console sur votre serveur depuis le navigateur web.  Une fois connect√©, il vous faut regarder l'√©tat du service avec la commande yunohost service status slapd et/ou tenter de r√©initialiser votre mot de passe avec la commande yunohost tools adminpw.  Si vous ne pouvez pas ou ne r√©ussissez pas non plus √† vous connecter en root, vous allez devoir op√©rer en mode rescue.  attention √Ä compl√©ter  ","version":"Next","tagName":"h2"},{"title":"Votre VPN a expir√© ou ne se monte plus‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#votre-vpn-a-expir√©-ou-ne-se-monte-plus","content":" Si vous utilisez un VPN a IP fixe, peut √™tre que celui-ci est arriv√© √† expiration ou que l'infrastructure de votre fournisseur est en difficult√©.  Dans ce cas, contactez votre fournisseur VPN pour le renouveller et mettre √† jour ses param√®tres dans l'app VPNclient.  Pendant de temps, il est sans doute possible d'acc√©der √† votre serveur √† la maison via:  son IP locale, en utilisant l'une des m√©thodes list√©es sur la page correspondantevia yunohost.local, si votre client support le Bonjour protocol (ou yunohost-2.local, etc. en fonction de si vous avez plusieurs serveurs YunoHost sur le m√™me r√©seau)  attention √Ä compl√©ter  ","version":"Next","tagName":"h2"},{"title":"Votre serveur est coinc√© au d√©marrage‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#votre-serveur-est-coinc√©-au-d√©marrage","content":" Dans certains cas, votre serveur peut rester coinc√© au d√©marrage. Il peut s'agir d'un probl√®me suite √† l'installation d'un nouveau kernel. Essayez de choisir un autre kernel avec VNC ou avec l'√©cran lors du boot.  Si vous √™tes en mode rescue avec grub, dans ce cas il peut s'agir d'un probl√®me de configuration de grub ou d'un disque corrompu.  Dans ce cas il faut acc√©der au disque avec un autre syst√®me (mode rescue du fournisseur, live USB, lire la carte SD ou le disque dur avec un autre ordinateur) et essayer de v√©rifier l'int√©grit√© des partitions avec smartctl, fsck et mount.  Si les disques sont corrompus et difficiles √† monter, il faut sauvegarder les donn√©es et potentiellement refaire un formatage/r√©installer et/ou changer le disque. Si on arrive √† monter le disque, il est possible d'utiliser systemd-nspawn pour entrer dans la base de donn√©es.  Sinon, relancer grub-update et grub-install en chroot ou avec systemd-nspawn.  ","version":"Next","tagName":"h2"},{"title":"L‚Äôacc√®s en VNC ou via √©cran ne fonctionne pas‚Äã","type":1,"pageTitle":"R√©cup√©rer l'acc√®s √† son YunoHost","url":"/doc/pr-2675/fr/admin/troubleshooting/noaccess#lacc√®s-en-vnc-ou-via-√©cran-ne-fonctionne-pas","content":" Dans ce cas il peut s'agir d'un probl√®me mat√©riel sur votre serveur physique ou d'un probl√®me d'hyperviseur si c'est un VPS.  Si c'est une machine lou√©e contactez le support de votre fournisseur. Sinon, essayez de d√©panner votre machine en retirant les composants qui peuvent √™tre en panne. ","version":"Next","tagName":"h2"},{"title":"Certificats personnalis√©s","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/tutorials/certificate_custom","content":"","keywords":"","version":"Next"},{"title":"Ajout d‚Äôun certificat sign√© par une autorit√© (autre que Let's Encrypt)‚Äã","type":1,"pageTitle":"Certificats personnalis√©s","url":"/doc/pr-2675/fr/admin/tutorials/certificate_custom#ajout-dun-certificat-sign√©-par-une-autorit√©-autre-que-lets-encrypt","content":" Apr√®s cr√©ation du certificat aupr√®s de votre autorit√© d‚Äôenregistrement, vous devez √™tre en possession d‚Äôune cl√© priv√©e, le fichier key et d‚Äôun certificat public, le fichier crt.  attention Attention, le fichier key est tr√®s sensible, il est strictement personnel et doit √™tre tr√®s bien s√©curis√©.  Ces deux fichiers doivent √™tre copi√©s sur le serveur, s‚Äôils ne s‚Äôy trouvent pas d√©j√†.  scp CERTIFICAT.crt admin@DOMAIN.TLD:ssl.crt scp CLE.key admin@DOMAIN.TLD:ssl.key   Depuis Windows, scp est exploitable avec Putty, en t√©l√©chargeant l‚Äôoutil pscp  pscp -P 22 CERTIFICAT.crt admin@DOMAIN.TLD:ssl.crt pscp -P 22 CLE.key admin@DOMAIN.TLD:ssl.key   D√®s lors que les fichiers sont sur le serveur, le reste du travail se fera sur celui-ci. En ssh ou en local. Tout d‚Äôabord, cr√©ez un dossier pour stocker les certificats obtenus.  sudo mkdir /etc/yunohost/certs/DOMAIN.TLD/ae_certs sudo mv ssl.key ssl.crt /etc/yunohost/certs/DOMAIN.TLD/ae_certs/   Puis allez dans le dossier parent pour poursuivre.  cd /etc/yunohost/certs/DOMAIN.TLD/   Faites une sauvegarde des certificats d‚Äôorigine de YunoHost, par pr√©caution.  sudo mkdir yunohost_self_signed sudo mv *.pem *.cnf yunohost_self_signed/   En fonction de l‚Äôautorit√© d‚Äôenregistrement, des certificats interm√©diaires et racines doivent √™tre obtenus.  StartSSL‚Äã  sudo wget http://www.startssl.com/certs/ca.pem -O ae_certs/ca.pem sudo wget http://www.startssl.com/certs/sub.class1.server.ca.pem -O ae_certs/intermediate_ca.pem   Gandi‚Äã  sudo wget https://www.gandi.net/static/CAs/GandiStandardSSLCA2.pem -O ae_certs/intermediate_ca.pem   RapidSSL‚Äã  sudo wget https://knowledge.rapidssl.com/library/VERISIGN/INTERNATIONAL_AFFILIATES/RapidSSL/AR1548/RapidSSLCABundle.txt -O ae_certs/intermediate_ca.pem   Cacert‚Äã  sudo wget http://www.cacert.org/certs/root.crt -O ae_certs/ca.pem sudo wget http://www.cacert.org/certs/class3.crt -O ae_certs/intermediate_ca.pem   Les certificats interm√©diaires et root doivent √™tre r√©unis avec le certificat obtenu pour cr√©er une cha√Æne de certificats unifi√©s.  cat ae_certs/ssl.crt ae_certs/intermediate_ca.pem ae_certs/ca.pem | sudo tee crt.pem   La cl√© priv√©e doit √™tre, elle, convertie au format .pem.  sudo openssl rsa -in ae_certs/ssl.key -out key.pem -outform PEM   Afin de s‚Äôassurer de la syntaxe des certificats, v√©rifiez le contenu des fichiers.  cat crt.pem key.pem   Les certificats et la cl√© priv√©e doivent ressembler √† cela :  -----BEGIN CERTIFICATE----- MIICVDCCAb0CAQEwDQYJKoZIhvcNAQEEBQAwdDELMAkGA1UEBhMCRlIxFTATBgNV BAgTDENvcnNlIGR1IFN1ZDEQMA4GA1UEBxMHQWphY2NpbzEMMAoGA1UEChMDTExC MREwDwYDVQQLEwhCVFMgSU5GTzEbMBkGA1UEAxMSc2VydmV1ci5idHNpbmZvLmZy MB4XDTA0MDIwODE2MjQyNloXDTA0MDMwOTE2MjQyNlowcTELMAkGA1UEBhMCRlIx FTATBgNVBAgTDENvcnNlIGR1IFN1ZDEQMA4GA1UEBxMHQWphY2NpbzEMMAoGA1UE ChMDTExCMREwDwYDVQQLEwhCVFMgSU5GTzEYMBYGA1UEAxMPcHJvZi5idHNpbmZv LmZyMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDSUagxPSv3LtgDV5sygt12 kSbN/NWP0QUiPlksOkF2NkPfwW/mf55dD1hSndlOM/5kLbSBo5ieE3TgikF0Iktj BWm5xSqewM5QDYzXFt031DrPX63Fvo+tCKTQoVItdEuJPMahVsXnDyYHeUURRWLW wc0BzEgFZGGw7wiMF6wt5QIDAQABMA0GCSqGSIb3DQEBBAUAA4GBALD640iwKPMf pqdYtfvmLnA7CiEuao60i/pzVJE2LIXXXbwYjNAM+7Lov+dFT+b5FcOUGqLymSG3 kSK6OOauBHItgiGI7C87u4EJaHDvGIUxHxQQGsUM0SCIIVGK7Lwm+8e9I2X0G2GP 9t/rrbdGzXXOCl3up99naL5XAzCIp6r5 -----END CERTIFICATE-----   Enfin, s√©curisez les fichiers de votre certificat.  sudo chown root:metronome crt.pem key.pem sudo chmod 640 crt.pem key.pem sudo chown root:root -R ae_certs sudo chmod 600 -R ae_certs   Maintenant les certificats (les deux fichiers avec l'extension .pem) doivent √™tre recopi√©s dans /etc/yunohost/certs/DOMAIN.TLD.  cp ae_certs/*.pem ./   Rechargez la configuration de NGINX pour prendre en compte le nouveau certificat.  sudo service nginx reload   Votre certificat est pr√™t √† servir. Vous pouvez toutefois vous assurer de sa mise en place en testant le certificat √† l‚Äôaide du service de geocerts. ","version":"Next","tagName":"h3"},{"title":"DNS with a dynamic IP","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_dynamicip","content":"","keywords":"","version":"Next"},{"title":"Registrars‚Äã","type":1,"pageTitle":"DNS with a dynamic IP","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_dynamicip#registrars","content":" Here are some examples of registrars, companies where you can buy domain names:  OVHGoDaddyGandiNamecheapBookMyName  If you own a domain name at OVH, you may go to step 4 and follow this tutorial, given that OVH proposes a DynDNS service.  1. Create an account to a Dynamic DNS service‚Äã  Here are sites which offer a DynDNS service free of charge:  DNSexitNo-IPChangeIPDynDNS.it (in italian, paid plan)DynDNS with your own domainDuck DNSydns.io  Register to one of them. It should provide you with one (or more) IP address to reach the service, and a login (that you may be able to self-define).  2. Move the DNS zones‚Äã  Copy the DNS zones, except for the NS fields, from the registrar where you bought your domain name from to the dynamic DNS service you registrer at in step 1.  3. Switch the management of your domain name to the dynamic DNS¬†server‚Äã  This step consists in declaring to your registrar that the DNS service will now be managed by the DynDNS service provider.  For this, first declare in the NS field(s) the IP address provided by the DynDNS service.  Then, remove any other item in the DNS zones (except the previous NS fields), from the registrar.  4. Configure the client‚Äã  This client could be your ISP-box, or a package installed on your server, such as ddclient. Here, we will use the client provided by the box, which is the more easy way.  Enter the login of the dynamic DNS and its public IP address in your box (interface details may vary by ISP).    You're good to go ! ","version":"Next","tagName":"h3"},{"title":"Local network access to your server","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_local_network","content":"","keywords":"","version":"Next"},{"title":"Find the local IP address of your server‚Äã","type":1,"pageTitle":"Local network access to your server","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_local_network#find-the-local-ip-address-of-your-server","content":" First you need to find out the local IP of your server  either using the tricks listed hereor if in the webadmin, in the Diagnosis section, under Internet Connectivity, IPv4, click on 'Details' and you should find an entry for 'Local IP'or using the command line on the server : hostname -I  ","version":"Next","tagName":"h3"},{"title":"Configure DNS on your Internet router‚Äã","type":1,"pageTitle":"Local network access to your server","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_local_network#configure-dns-on-your-internet-router","content":" The goal here is to create a network wide redirection handled by your router. The idea is to create a DNS redirection to your server's IP. You should access your router's configuration and look for DNS configuration, then add a redirection to your server's IP (e.g. redirect yunohost.local to 192.168.1.21).  ","version":"Next","tagName":"h2"},{"title":"SFR Box‚Äã","type":1,"pageTitle":"Local network access to your server","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_local_network#sfr-box","content":" If you haven't found your server private IP, you may find it using the SFR box admin panel: Go to Network tab &gt; General    Configure SFR box's DNS‚Äã  Go to Network tab &gt; DNS and add your domain name to the box's DNS.    ","version":"Next","tagName":"h3"},{"title":"Configure hosts file on client workstation‚Äã","type":1,"pageTitle":"Local network access to your server","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_local_network#configure-hosts-file-on-client-workstation","content":" Modifying hosts file should be done only if you cannot alter your box's DNS or router, because hosts file will only impact the workstation where the file was modified.  Windows hosts file is located at:%SystemRoot%\\system32\\drivers\\etc\\ You MUST activate hidden and system file display to see the hosts file. UNIX systems (GNU/Linux, macOS) hosts file is located at:/etc/hosts You MUST have root privileges to modify the file.  Add a line at the end of the file containing your server private IP followed by a space and your domain name  192.168.1.62 domain.tld  ","version":"Next","tagName":"h2"},{"title":"Nohost.me domains","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_nohost_me","content":"","keywords":"","version":"Next"},{"title":"Subdomains‚Äã","type":1,"pageTitle":"Nohost.me domains","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_nohost_me#subdomains","content":" The nohost.me, noho.st and ynh.fr domain service allows the creation of subdomains.  YunoHost allows the installation of applications on subdomains (for example, having the Nextcloud application accessible from the cloud.mydomain.org address), this feature is also allowed with the nohost.me, noho.st and ynh.fr domains and so it is possible to have a subdomain such as my.application.mydomain.nohost.me. To create a subdomain on nohost.me, noho.st and ynh.fr, you just have to add the subdomain to YunoHost like any other domains.  ","version":"Next","tagName":"h3"},{"title":"Adding a nohost.me, noho.st or ynh.fr domain after the post-installation‚Äã","type":1,"pageTitle":"Nohost.me domains","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_nohost_me#adding-a-nohostme-nohost-or-ynhfr-domain-after-the-post-installation","content":" If you already did the postinstall and want to add an automatic domain, you may do so from the &quot;Domains&quot; web interface, selecting the option &quot;I don't have a domain name...&quot;  Alternatively, the following commands can be used.  # Add the domain yunohost domain add whateveryouwant.nohost.me # Subscribe/register to the dyndns service yunohost dyndns subscribe -d whateveryouwant.nohost.me # [ wait ~ 30 seconds ] # Update the DNS conf yunohost dyndns update # Set it as the main domain yunohost domain main-domain -n whateveryouwant.nohost.me   ","version":"Next","tagName":"h3"},{"title":"Retrieve a nohost.me, noho.st or ynh.fr domain‚Äã","type":1,"pageTitle":"Nohost.me domains","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_nohost_me#retrieve-a-nohostme-nohost-or-ynhfr-domain","content":" If you reinstall your server and want to use a domain already used previously, you must request a domain reset on the forum in the dedicated thread.  ","version":"Next","tagName":"h3"},{"title":"Change a nohost.me, noho.st or ynh.fr domain‚Äã","type":1,"pageTitle":"Nohost.me domains","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_nohost_me#change-a-nohostme-nohost-or-ynhfr-domain","content":" If you wish to use a different automatic domain, you first have to remove your present domain registration. This is done in 3 steps:  Remove the domain from your instance (via webadmin or the yunohost domain remove in the CLI).Ask for registration removal in the dedicated forum thread.Remove automatic domain configuration files on your server, via CLI only: sudo rm /etc/cron.d/yunohost-dyndns &amp;&amp; sudo rm -r /etc/yunohost/dyndns  You may then add a new domain. ","version":"Next","tagName":"h3"},{"title":"DNS and subdomains for the applications","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_subdomains","content":"","keywords":"","version":"Next"},{"title":"Subdomains‚Äã","type":1,"pageTitle":"DNS and subdomains for the applications","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_subdomains#subdomains","content":" YunoHost allows the use of subdomains. If one owns a domain name mydomain.com, one first needs to create the subdomains in the DNS configuration (with one's registrar like Gandi).  ","version":"Next","tagName":"h3"},{"title":"Configuration example with Gandi‚Äã","type":1,"pageTitle":"DNS and subdomains for the applications","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_subdomains#configuration-example-with-gandi","content":" The DNS configuration needs an A record with an IPv4 address, an AAAA record with an IPv6 address, and various CNAME records, one for each desired subdomain.  If your DNS configuration looks like:  @ A XYZ.XYZ.XYZ.XYZ @ AAAA 1234:1234:1234:FFAA:FFAA:FFAA:FFAA:AAFF * CNAME mydomain.com. agenda CNAME mydomain.com. blog CNAME mydomain.com. rss CNAME mydomain.com.   then you can access agenda.mydomain.com, blog.mydomain.com and rss.mydomain.com subdomains.  ","version":"Next","tagName":"h3"},{"title":"Install an application on a subdomain‚Äã","type":1,"pageTitle":"DNS and subdomains for the applications","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_subdomains#install-an-application-on-a-subdomain","content":" To install an application on a subdomain in YunoHost, for example blog.mydomain.com, the configuration is done in the administration panel. One first add the subdomain to the available domains list. The creation of a subdomain in YunoHost will create the corresponding configuration files for NGINX (the web server used in YunoHost).  Then, in the applications&gt;install panel, one follows the classic installation process by choosing the desired subdomain as domain (for example blog.mydomain.com). One needs to choose the path / (in place of /wordpress for example). A warning message will appear telling that it won't be possible to install other application to this subdomain. After validation, the installation starts.  The application is then available at blog.mydomain.com (and not mydomain.com/wordpress).  ","version":"Next","tagName":"h3"},{"title":"Moving an application to a subdomain‚Äã","type":1,"pageTitle":"DNS and subdomains for the applications","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_subdomains#moving-an-application-to-a-subdomain","content":" What happens if the application is already installed? For example, one wants to move mydomain.com/wordpress to blog.mydomain.com. It depends on the application. Some applications allow the change of domain. In that case, one can proceed to the change through the administration panel: Applications &gt; the_app_name &gt; change URL. If the application doesn't allow URL change, then there is no easy way to do it. The best solution is to reinstall the application.  ","version":"Next","tagName":"h3"},{"title":"Reinstalling an application‚Äã","type":1,"pageTitle":"DNS and subdomains for the applications","url":"/doc/pr-2675/fr/admin/tutorials/domains/dns_subdomains#reinstalling-an-application","content":" First, save the application data through the backup process. Then uninstall the application with the administration panel. Then reinstall the application to the desired domain. Finally, restore the backup. ","version":"Next","tagName":"h3"},{"title":"Configurer un relais SMTP","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/tutorials/email_configure_relay","content":"","keywords":"","version":"Next"},{"title":"Qu'est-ce qu'un relais SMTP‚Äã","type":1,"pageTitle":"Configurer un relais SMTP","url":"/doc/pr-2675/fr/admin/tutorials/email_configure_relay#quest-ce-quun-relais-smtp","content":" C'est un serveur SMTP tiers qui va envoyer les e-mails aux destinataires √† la place de votre propre serveur SMTP. Une fois correctement install√©, le fonctionnement est transparent pour l‚Äôutilisateur. Vos correspondants verront vos e-mails comme s‚Äôils venaient de votre propre serveur, mais ils seront pass√©s par le relais SMTP que vous aurez choisis et configur√©s.  ","version":"Next","tagName":"h2"},{"title":" Inconv√©nients des relais SMTP‚Äã","type":1,"pageTitle":"Configurer un relais SMTP","url":"/doc/pr-2675/fr/admin/tutorials/email_configure_relay#--inconv√©nients-des-relais-smtp","content":" Il est important de noter que dans le monde de l'auto-h√©bergement, utiliser un relais SMTP est un √©norme compromis ! En effet, le relais SMTP sera non seulement capable d'envoyer les e-mails de votre part, mais il a √©galement acc√®s au contenu int√©gral de vos e-mails et peut √©ventuellement les modifier (Par exemple, par d√©faut, MailJet r√©√©crit les hyperliens html contenus dans vos mails, afin de traquer l'activit√© de vos correspondants). Il faut √©galement savoir qu'une fois mis en place, tout le trafic e-mail sortant de votre serveur passera par ce relais ; il n'est pas possible de choisir de l'utiliser ou pas selon l'exp√©diteur ou la destination.  Au-del√† des consid√©rations de confidentialit√© ci-dessus, un relais SMTP peut imposer des limitations techniques que l'on n'aurait pas si le port 25 √©tait ouvert. Par exemple, avec la plupart des relais, si un utilisateur de votre serveur YunoHost d√©clare une &quot;adresse de transfert&quot; ext√©rieure dans le but de transf√©rer automatiquement les messages re√ßus sur votre serveur YunoHost vers une autre bo√Æte mail, ce transfert ne fonctionnera pas pour les courriels venant de l'ext√©rieur de votre serveur, sans qu'il soit en averti. En effet, les relais exigent g√©n√©ralement que les messages qu'ils transmettent aient une adresse d'exp√©diteur de votre domaine (pour lutter contre le spam et pr√©server la r√©putation de leurs services), ce qui n'est pas le cas pour un &quot;forward automatique&quot; o√π l'exp√©diteur originel du mail est conserv√© ; le message est alors bloqu√© par le relais (qui, normalement, pr√©vient votre admin YunoHost, mais seulement apr√®s coup).  ","version":"Next","tagName":"h2"},{"title":"Comment utiliser un relais SMTP avec YunoHost ?‚Äã","type":1,"pageTitle":"Configurer un relais SMTP","url":"/doc/pr-2675/fr/admin/tutorials/email_configure_relay#comment-utiliser-un-relais-smtp-avec-yunohost-","content":" YunoHost supporte depuis la version 4.1 la configuration d'un relais SMTP. Pour le moment cette fonctionnalit√© n'est pas accessible depuis l'interface d'administration : le param√©trage doit √™tre fait en ligne de commande.  ","version":"Next","tagName":"h2"},{"title":"√âtape 1 : S'inscrire chez un fournisseur de relais SMTP‚Äã","type":1,"pageTitle":"Configurer un relais SMTP","url":"/doc/pr-2675/fr/admin/tutorials/email_configure_relay#√©tape-1--sinscrire-chez-un-fournisseur-de-relais-smtp","content":" Beaucoup de fournisseurs existent dans ce domaine. Certains sont gratuits et d'autres proposent des services payants contre diff√©rentes options. Comme √©crit plus haut, vous devez √™tre s√ªr de pouvoir lui faire confiance, mais cela reste √† votre entier √©gard.  ","version":"Next","tagName":"h3"},{"title":"√âtape 2 : Param√©trer sa zone DNS correctement‚Äã","type":1,"pageTitle":"Configurer un relais SMTP","url":"/doc/pr-2675/fr/admin/tutorials/email_configure_relay#√©tape-2--param√©trer-sa-zone-dns-correctement","content":" Once registered, the SMTP relay provider will usually ask you to modify your DNS. Standard procedure is to add a DKIM key and a SPF key to your DNS records. The way to modify these records and the value of the keys you'll have to add depend both on your domain name provider and SMTP relay provider.  Usually, the SMTP relay provider will provide you with a guide on how to modify these records, together with an automatic check tool that will tell you when your DNS have been setup correctly. That step is mandatory to prove &quot;the world&quot; that you, owner of your domain name, did explicitly authorize your SMTP relay provider to send emails on your behalf.  Please note that modifying your DNS records could sometimes take over 24h to take effect, so be patient!  attention Attention une fois la zone DNS enregistr√©e, le relais SMTP peut envoyer des e-mails √† votre nom sans que vous ne le sachiez  ","version":"Next","tagName":"h3"},{"title":"√âtape 3 : Configurer YunoHost correctement‚Äã","type":1,"pageTitle":"Configurer un relais SMTP","url":"/doc/pr-2675/fr/admin/tutorials/email_configure_relay#√©tape-3--configurer-yunohost-correctement","content":" Il est possible de configurer soit via la webadmin ou en ligne de commande.  From the web interfaceFrom the command line Depuis l'interface d'administration, dans la section Outils &gt; Param√®tres de YunoHost, et l'onglet Email. Il suffit d'activer l'option, et de renseigner les champs n√©cessaires : Adresse du relais SMTP : L'url pour le serveur SMTP.Port du relais SMTP : Le port utilis√© sur le serveur renseign√©.Utilisateur du relais SMTP : Login ou mail d'identification pour le serveur.Mot de passe du relais SMTP : Tout simplement le mot de passe. attention Les mots de passe avec le caract√®re # ne fonctionneront pas proprement √† cause d'une limitation de postfix (d'autres caract√®res sont peut-√™tre interdit, n'h√©sitez pas √† rapporter ce genre de cas pour la mise √† jour de cette doc).  Votre relais SMTP est maintenant configur√© !  attention Maintenant le relais SMTP est capable de lire et d'utiliser toutes les informations contenues dans les emails que vous envoyez sans votre accord. Mais il ne sera pas capable de lire les informations des emails que vous recevez.  Relayer tous les emails m√™me ceux des noms de domaines g√©r√©s par YunoHost‚Äã  Si vous avez une grande confiance dans votre relais SMTP, que vous avez un second serveur IMAP que vous souhaitez ou √™tes contraint d'utiliser en lieu et place de celui de YunoHost, vous pouvez choisir de relayer tous les emails m√™me ceux des noms de domaines g√©r√©s par YunoHost en commentant les deux ligne suivantes dans /etc/postfix/main.cf :  #virtual_mailbox_domains = ldap:/etc/postfix/ldap-domains.cf #virtual_alias_maps = ldap:/etc/postfix/ldap-aliases.cf,ldap:/etc/postfix/ldap-groups.cf   ","version":"Next","tagName":"h3"},{"title":"√âtape 4 : V√©rifier la configuration‚Äã","type":1,"pageTitle":"Configurer un relais SMTP","url":"/doc/pr-2675/fr/admin/tutorials/email_configure_relay#√©tape-4--v√©rifier-la-configuration","content":" You can check your setup by sending emails and try if everything works. Some of the SMTP relay will give you insights about the emails you send so that can also be a good way to check that everythings works as needed. Of course, you can always have a try with mail-tester.com to check for any problem or discrepancy. ","version":"Next","tagName":"h3"},{"title":"Ajouter un stockage externe √† son serveur","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/tutorials/external_storage","content":"","keywords":"","version":"Next"},{"title":"Introduction‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#introduction","content":" En dehors du syst√®me de monitoring qui s'assure que les partitions de votre syst√®me ne sont pas trop petites, YunoHost ne s'occupe pour l'instant pas de l'organisation de vos partitions et de vos disques.  Si vous vous h√©bergez sur une carte ARM avec une carte SD ou sur un serveur avec un petit disque SSD, vous pourriez, pour des raisons de fiabilit√© ou de manque de place, vouloir ajouter un ou des disques √† votre serveur.  attention Si vous n'avez plus du tout de place sur votre serveur, vous pouvez d√®s √† pr√©sent taper apt clean pour essayer d'en gagner un peu le temps de faire le m√©nage ou suivre les op√©rations qui vont suivre.  Ci-dessous, vous trouverez des explications pour parvenir √† d√©placer vos donn√©es sur un disque dur de fa√ßon correcte avec un minimum d'impact vis-√†-vis du fonctionnement de YunoHost. Cette op√©ration peut se faire lors de l'installation ou, a posteriori, lorsque vos besoins de stockage ont augment√© ou lorsque vous n'avez plus confiance dans votre carte SD.  astuce La m√©thode pr√©sent√©e ici va d'abord monter l'unique partition du disque dur, puis utiliser un ou des sous-dossiers de ce disque pour cr√©er diff√©rents points de montage sur l'arborescence de votre syst√®me. Cette m√©thode est pr√©f√©rable √† l'usage de liens symboliques, car ces derniers peuvent perturber certaines applications dont le syst√®me de sauvegarde de YunoHost. On pourrait aussi choisir de monter des partitions plut√¥t que des sous-dossiers, mais il est parfois difficile d'estimer √† l'avance l'√©volution du poids d'un dossier √† l'avance.  ","version":"Next","tagName":"h2"},{"title":" Pr√©-requis‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#-pr√©-requis","content":" Avoir un peu de temps √† un moment o√π les utilisateurs de votre serveur peuvent accepter un arr√™t des services. Les √©tapes √† r√©aliser, m√™me si elles sont relativement simples, peuvent parfois para√Ætre techniques et n√©cessitent dans tous les cas de prendre son temps. Savoir se connecter en root sur votre syst√®me, par exemple via SSH. (Note : en √©tant connect√© en tant qu'utilisateur admin, vous pouvez passer root avec sudo su) Conna√Ætre les commandes basiques cd, ls, mkdir, rm Avoir une sauvegarde au cas o√π √ßa ne se passe pas comme pr√©vu Disposer d'un stockage suppl√©mentaire (disque SSD, disque dur, cl√© USB) branch√© √† votre serveur en USB ou en SATA  ","version":"Next","tagName":"h2"},{"title":"1. Identifier les dossiers √† d√©placer‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#1-identifier-les-dossiers-√†-d√©placer","content":" La commande ncdu / vous permet de naviguer dans les dossiers de votre serveur afin de constater leurs tailles.  Ci-dessous, une explication de certains chemins qui peuvent prendre du poids avec quelques commentaires pour vous aider √† r√©duire leur poids ou √† choisir de les d√©placer.  Chemin\tContenu\tConseils/home\tDossiers utilisateurs accessibles via SFTP\tD√©pla√ßable sur un disque dur /home/yunohost.backup\tSauvegardes YunoHost\tSelon votre strat√©gie de sauvegarde, il peut √™tre pr√©f√©rable de placer ce dossier sur un disque distinct de celui o√π se trouvent vos donn√©es ou vos bases de donn√©es /home/yunohost.app\tDonn√©es lourdes des applications YunoHost (nextcloud, matrix...)\tD√©pla√ßable sur un disque dur /home/yunohost.multimedia\tDonn√©es lourdes partag√©es entre plusieurs applications\tD√©pla√ßable sur un disque dur /var/lib/mysql\tBase de donn√©es utilis√©es par les applications\tA laisser id√©alement sur le SSD pour des raisons de performances /var/lib/postgresql\tBase de donn√©es utilis√©es par les applications\tA laisser id√©alement sur le SSD pour des raisons de performances /var/mail\tMails des usagers\tD√©pla√ßable sur un disque dur /var/www\tProgramme des applications web install√©es\tA laisser id√©alement sur le SSD pour des raisons de performances /var/log\tJournaux des √©v√®nements (pages consult√©es, tentative de connexion, erreurs mat√©riels...).\tCe dossier ne devrait pas prendre trop de place, si il gonfle rapidement, il peut s'agir d'une erreur inscrite en boucle qu'il est pr√©f√©rable de r√©soudre /opt\tProgramme et d√©pendance de certaines applications YunoHost.\tA laisser id√©alement sur le SSD pour des raisons de performances. Pour les applications nodejs il est possible de faire un peu de nettoyage des versions non utilis√©es. /boot\tNoyaux et fichiers de d√©marrage\tNe pas d√©placer sauf si vous savez ce que vous faites. Il peut arriver que trop de noyaux soient conserv√©s, il est possible de faire du nettoyage.  ","version":"Next","tagName":"h2"},{"title":"2. Connecter et identifier le disque‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#2-connecter-et-identifier-le-disque","content":" Commencez par brancher votre disque √† votre syst√®me. Il faut ensuite identifier sous quel nom est d√©sign√© le disque par le syst√®me.  Pour cela, utilisez la commande :  lsblk   Elle peut renvoyer quelque chose comme :  NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sda 8:0 0 931.5G 0 disk ‚îî‚îÄsda1 8:1 0 931.5G 0 part mmcblk0 179:0 0 14.9G 0 disk ‚îú‚îÄmmcblk0p1 179:1 0 47.7M 0 part /boot ‚îî‚îÄmmcblk0p2 179:2 0 14.8G 0 part /   Ici, mmcblk0 correspond √† une carte SD de 16Go (on voit que les partitions mmcblk0p1 et mmcblk0p2 correspondent √† la partition de d√©marrage /boot et √† la partition syst√®me /). Le disque dur branch√© correspond √† sda qui fait environ 1To, et contient une seule partition sda1 qui n'est pas mont√© (pas de &quot;MOUNTPOINT&quot;).  attention Sur un autre syst√®me, il se peut que votre syst√®me soit install√© sur sda et que votre disque soit alors sdb par exemple.  astuce Astuce: si la taille du disque ne vous suffit pas pour le reconna√Ætre, vous pouvez d√©brancher le disque lancer la commande lsblk, puis rebrancher le disque, lancer lsblk et en d√©duire les diff√©rences.  ","version":"Next","tagName":"h2"},{"title":"3. (Optionnel) Formater le disque‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#3-optionnel-formater-le-disque","content":" Cette op√©ration est optionnelle si votre disque est d√©j√† format√© avec un syst√®me de fichiers support√©s par linux (donc pas NTFS ou FAT32).  Cr√©ons une partition sur le disque :  fdisk /dev/VOTRE_DISQUE   puis entrez successivement n, p, 1, Entr√©e, Entr√©e, et w pour cr√©er une nouvelle partition.  V√©rifiez avec lsblk que vous avez bien votre disque contenant une seule partition.  Avant de pouvoir utiliser votre disque, il doit √™tre format√©.  attention Formater un disque implique de supprimer toutes les donn√©es inscrites dessus !. Attention √† ne pas vous tromper de nom, car cela peut avoir pour cons√©quence de formater un autre disque que celui voulu ! Dans l'exemple donn√© pr√©c√©demment, il s'agissait de /dev/sda. Si votre disque est d√©j√† &quot;propre&quot;, vous pouvez passer cette √©tape.  Pour formater la partition :  mkfs.ext4 /dev/VOTRE_DISQUE1 # puis 'y' pour valider   Remplacez VOTRE_DISQUE1 par le nom de la premi√®re partition sur le disque par exemple sda1.  astuce Il est possible d'adapter cette √©tape, pour par exemple cr√©er un volume raid 1 (disques en miroir) ou chiffrer le dossier.  ","version":"Next","tagName":"h2"},{"title":"4. Monter le disque‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#4-monter-le-disque","content":" Contrairement √† Windows o√π les disques sont accessibles avec des lettres (C:/), sous linux, les disques sont rendus accessibles via l'arborescence. &quot;Monter&quot; un disque signifie le rendre effectivement accessible dans l'arborescence des fichiers. Nous allons choisir arbitrairement de monter le disque dans /mnt/hdd mais vous pouvez le nommer diff√©remment (par exemple /mnt/disque ...).  Commen√ßons par cr√©er le r√©pertoire :  mkdir /mnt/hdd   Puis nous pouvons monter le disque manuellement avec :  mount /dev/VOTRE_DISQUE1 /mnt/hdd   (Ici, /dev/VOTRE_DISQUE1 correspond √† la premi√®re partition sur le disque)  ","version":"Next","tagName":"h2"},{"title":"5. Monter un dossier de /mnt/hdd sur un des dossiers dont on veut d√©placer les donn√©es‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#5-monter-un-dossier-de-mnthdd-sur-un-des-dossiers-dont-on-veut-d√©placer-les-donn√©es","content":" Ici on va consid√©rer que vous souhaitez d√©placer les grosses donn√©es des applications qui se trouvent dans /home/yunohost.app ainsi que les mails sur votre disque dur.  ","version":"Next","tagName":"h2"},{"title":"5.1 Cr√©ation des sous-dossiers sur le disque‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#51-cr√©ation-des-sous-dossiers-sur-le-disque","content":" Pour commencer, on cr√©e un dossier dans le disque dur  mkdir -p /mnt/hdd/home/yunohost.app mkdir -p /mnt/hdd/var/mail   ","version":"Next","tagName":"h3"},{"title":"5.2 Passage en mode maintenance‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#52-passage-en-mode-maintenance","content":" Puis, id√©alement on passe en maintenance les applications qui pourraient √™tre en train d'√©crire des donn√©es.  Exemple, pour nextcloud:  sudo -u nextcloud /var/www/nextcloud/occ maintenance:mode --on   Exemple, pour le mail:  systemctl stop postfix systemctl stop dovecot   attention Si vous souhaitez d√©placer les base de donn√©es comme mariadb (mysql), il est imp√©ratif de stopper les services de ces bases de donn√©es sans quoi il est presque s√ªr que vos donn√©es seront corrompues.  ","version":"Next","tagName":"h3"},{"title":"5.3 Cr√©ation des points de montages‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#53-cr√©ation-des-points-de-montages","content":" Ensuite, on va renommer le dossier d'origine et cr√©er un dossier vide √©ponyme.  mv /home/yunohost.app /home/yunohost.app.bkp mkdir /home/yunohost.app mv /var/mail /var/mail.bkp mkdir /var/mail   On peut alors gr√¢ce √† la commande mount --bind monter le dossier de notre disque dur sur le nouvel emplacement vide de l'arborescence.  mount --bind /mnt/hdd/home/yunohost.app /home/yunohost.app mount --bind /mnt/hdd/var/mail /var/mail   ","version":"Next","tagName":"h3"},{"title":"5.4 Copie des donn√©es‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#54-copie-des-donn√©es","content":" Puis, on copie les donn√©es en conservant toutes les propri√©t√©s des dossiers et des fichiers. Cette op√©ration peut prendre un peu de temps, avec un autre terminal, vous pourrez controler l'√©volution en observant le poids associ√© au point de montage avec df -h  cp -a /home/yunohost.app.bkp/. /home/yunohost.app/ cp -a /var/mail.bkp/. /var/mail/   Une fois que c'est fini, v√©rifiez avec ls que le contenu est bien l√†:  ls -la /home/yunohost.app/ ls -la /var/mail/   ","version":"Next","tagName":"h3"},{"title":"5.5 Sortir du mode maintenance‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#55-sortir-du-mode-maintenance","content":" A partir de l√† vous pouvez arr√©ter le mode maintenance, la commande ci-dessous est √† adapter selon les services que vous avez arr√©t√©s.  sudo -u nextcloud /var/www/nextcloud/occ maintenance:mode --off systemctl start postfix systemctl start dovecot   A partir de cette √©tape, vos services tournent avec leurs donn√©es sur le disque, il est donc temps de tester pour voir dans quelle mesure il y a un impact sur les performances (notamment si vus utilisez de l'USB 2.0).  ","version":"Next","tagName":"h3"},{"title":"6. Monter automatiquement au d√©marrage‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#6-monter-automatiquement-au-d√©marrage","content":" Jusqu'ici, nous avons mont√© manuellement le disque et les sous-dossiers. Cependant, il est n√©cessaire de configurer le syst√®me pour qu'il monte automatiquement le disque apr√®s un d√©marrage.  Si vos tests sont concluants, il faut p√©renniser les points de montages, sinon d√©p√™chez-vous de faire machine arri√®re en commen√ßant par remettre en maintenance.  Pour commencer, trouvons l'UUID (identifiant universel) de notre disque avec :  blkid | grep &quot;/dev/VOTRE_DISQUE1:&quot; # Retourne quelque chose comme : # /dev/sda1:UUID=&quot;cea0b7ae-2fbc-4f01-8884-3cb5884c8bb7&quot; TYPE=&quot;ext4&quot; PARTUUID=&quot;34e4b02c-02&quot;   Ajoutons alors une ligne au fichier /etc/fstab qui g√®re le montage des disques au d√©marrage. On ouvre donc le fichier avec nano :  nano /etc/fstab   Puis on ajoute ces lignes √† la fin du fichier :  UUID=&quot;cea0b7ae-2fbc-4f01-8884-3cb5884c8bb7&quot; /mnt/hdd ext4 defaults,nofail 0 0 /mnt/hdd/home/yunohost.app /home/yunohost.app none defaults,bind 0 0 /mnt/hdd/var/mail /var/mail none defaults,bind 0 0   (il faut adapter cette ligne en fonction des informations et choix pr√©c√©dents)  Utiliser Ctrl+X puis o pour sauvegarder.  Vous pouvez ensuite tester de red√©marrer le syst√®me pour v√©rifier si le disque et les sous-dossiers sont mont√©s automatiquement.  ","version":"Next","tagName":"h2"},{"title":"7. Nettoyer les anciennes donn√©es‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#7-nettoyer-les-anciennes-donn√©es","content":" D√®s que votre nouveau setup est valid√©, vous pouvez proc√©der √† la suppression des anciennes donn√©es issues de l'√©tape 6.3:  rm -Rf /home/yunohost.app.bkp rm -Rf /var/mail.bkp   ","version":"Next","tagName":"h2"},{"title":"üéâ F√©licitations !‚Äã","type":1,"pageTitle":"Ajouter un stockage externe √† son serveur","url":"/doc/pr-2675/fr/admin/tutorials/external_storage#-f√©licitations-","content":" Si vous √™tes arriv√© jusqu'ici sans dommage, vous avez d√©sormais un serveur qui tire parti d'un ou de plusieurs disques de stockage. ","version":"Next","tagName":"h2"},{"title":"√âchanger des fichiers avec son serveur √† l'aide d'une interface graphique","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/tutorials/filezilla","content":"","keywords":"","version":"Next"},{"title":"T√©l√©charger et installer FileZilla‚Äã","type":1,"pageTitle":"√âchanger des fichiers avec son serveur √† l'aide d'une interface graphique","url":"/doc/pr-2675/fr/admin/tutorials/filezilla#t√©l√©charger-et-installer-filezilla","content":" Vous pouvez t√©l√©charger FileZilla depuis cette page. Le site devrait d√©tecter automatiquement la version n√©cessaire pour votre ordinateur. Sinon, suivez les instructions pour installer le client  Installez le programme et lancez Filezilla.  ","version":"Next","tagName":"h2"},{"title":"Configuration‚Äã","type":1,"pageTitle":"√âchanger des fichiers avec son serveur √† l'aide d'une interface graphique","url":"/doc/pr-2675/fr/admin/tutorials/filezilla#configuration","content":" Cliquez sur l'ic√¥ne Gestionnaire de Sites en haut √† gauche de sorte √† cr√©er une configuration utilisable ult√©rieurement. Cliquez sur Nouveau site et donnez un nom au serveur que vous allez utiliser. Par exemple &quot;Famille&quot;. Remplissez les param√®tres comme sur la capture d'√©cran (en rempla√ßant l'adresse du serveur par la v√¥tre). Une fois termin√©, cliquez sur Connexion. (N.B. : si vous souhaitez √©diter les fichiers de l'application custom webapp, il vous faudra utiliser un autre utilisateur que admin. Se r√©f√©rer √† la documentation de custom webapp.) Vous recevrez un avertissement. Vous pouvez l'ignorer s'il s'agit de la premi√®re connexion. Filezilla vous demande maintenant le mot de passe admin pour vous connecter √† votre serveur Une fois cette configuration cr√©√©e, elle sera r√©utilisable les fois suivantes.  ","version":"Next","tagName":"h2"},{"title":"Utilisation‚Äã","type":1,"pageTitle":"√âchanger des fichiers avec son serveur √† l'aide d'une interface graphique","url":"/doc/pr-2675/fr/admin/tutorials/filezilla#utilisation","content":" Connectez-vous au Site cr√©√© pr√©c√©demment. Il se peut que le mot de passe soit redemand√©. La partie gauche correspond √† votre ordinateur. La partie droite correspond au serveur YunoHost distant. Vous pouvez naviguer dans les dossiers et faire des glisser-d√©poser entre les deux panneaux. Dans le panneau de droite, vous pouvez aller dans /home/yunohost.backup/archives/ pour trouver les archives de sauvegardes.  attention Assurez-vous de t√©l√©charger √† la fois le fichier .tar.gz et le fichier .json      Sources  Documentation officielleTutoriel g√©n√©ral √† Filezilla  ","version":"Next","tagName":"h2"},{"title":"Alternatives √† Filezilla‚Äã","type":1,"pageTitle":"√âchanger des fichiers avec son serveur √† l'aide d'une interface graphique","url":"/doc/pr-2675/fr/admin/tutorials/filezilla#alternatives-√†-filezilla","content":" ","version":"Next","tagName":"h2"},{"title":"Sous GNU/Linux‚Äã","type":1,"pageTitle":"√âchanger des fichiers avec son serveur √† l'aide d'une interface graphique","url":"/doc/pr-2675/fr/admin/tutorials/filezilla#sous-gnulinux","content":" Depuis n'importe quel GNU/Linux r√©cent, vous devriez pouvoir utiliser le gestionnaire de fichiers pour acc√©der √† votre serveur.  Nautilus de Gnome3 et Dolphin de KDE int√®grent de base des fonctionnalit√©s similaires √† FileZilla :  Nautilus ConnectDolphinTutorial for Nautilus and SFTP  ","version":"Next","tagName":"h3"},{"title":"Sous Windows‚Äã","type":1,"pageTitle":"√âchanger des fichiers avec son serveur √† l'aide d'une interface graphique","url":"/doc/pr-2675/fr/admin/tutorials/filezilla#sous-windows","content":" WinSCP est aussi un bon candidat pour Windows  ","version":"Next","tagName":"h3"},{"title":"Sous macOS‚Äã","type":1,"pageTitle":"√âchanger des fichiers avec son serveur √† l'aide d'une interface graphique","url":"/doc/pr-2675/fr/admin/tutorials/filezilla#sous-macos","content":" Cyberduck logiciel libre pour macOS ","version":"Next","tagName":"h3"},{"title":"D√©placer un dossier d'application vers un autre espace de stockage","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/tutorials/moving_app_folder","content":"D√©placer un dossier d'application vers un autre espace de stockage Les dossiers d'application se trouvent (habituellement) dans /var/www/$nom_application Lorsqu'un dossier d'application devient trop volumineux il peut √™tre int√©ressant de le d√©placer vers un autre espace de stockage (comme un disque dur externe, une carte sd, etc.) Partant du principe que le stockage externe est d√©j√† mont√©, voici un guide pour d√©placer le dossier de l'application wordpress : 1. D√©placer le dossier wordpress et tout son contenu vers le stockage externe‚Äã mv /var/www/wordpress /media/externalharddrive/ 2. Cr√©er un lien symbolique‚Äã Le programme qui va chercher des informations dans le dossier /var/www/wordpress sera redirig√© vers le stockage externe. ln -s /media/externalharddrive/wordpress /var/www/wordpress 3. (peut √™tre) bidouiller les permissions‚Äã Apr√®s tout √ßa, il est possible que vous ayez √† modifier les permissions de /media/externalharddrive pour que www-data (ou l'utilisateur de l'app) puisse y acc√©der. Quelque chose comme : chgrp www-data /media/externalharddrive chmod g+rx /media/externalharddrive (but it depends on your exact setup... Please update this doc page if you figure out what to do exactly)","keywords":"","version":"Next"},{"title":"S√©curit√©","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/tutorials/security","content":"","keywords":"","version":"Next"},{"title":"Am√©liorer la s√©curit√©‚Äã","type":1,"pageTitle":"S√©curit√©","url":"/doc/pr-2675/fr/admin/tutorials/security#am√©liorer-la-s√©curit√©","content":" Si votre serveur YunoHost est dans un environnement de production critique ou que vous souhaitez am√©liorer sa s√©curit√©, il est bon de suivre quelques bonnes pratiques.  attention L‚Äôapplication des conseils suivants n√©cessite une connaissance avanc√©e du fonctionnement et de l‚Äôadministration d‚Äôun serveur. Pensez √† vous renseigner avant de proc√©der √† cette mise en place.  astuce Ne fermez jamais votre connexion SSH initiale sans avoir v√©rifi√© que vos modifications fonctionnent. Testez vos modifications dans une nouvelle fen√™tre ou terminal. Ainsi, vous pourrez d√©faire vos modifications sans vous retrouver bloqu√©s.  ","version":"Next","tagName":"h2"},{"title":"Authentification SSH par cl√©‚Äã","type":1,"pageTitle":"S√©curit√©","url":"/doc/pr-2675/fr/admin/tutorials/security#authentification-ssh-par-cl√©","content":" Par d√©faut, l‚Äôauthentification SSH se fait avec le mot de passe d‚Äôadministration. Il est conseill√© de d√©sactiver ce type d‚Äôauthentification et de le remplacer par un m√©canisme de cl√© de chiffrement.  Sur votre ordinateur de bureau :  ssh-keygen ssh-copy-id -i ~/.ssh/id_rsa.pub &lt;nom_utilisateur@votre.domaine.tld&gt;   astuce Si vous avez des probl√®mes de permissions, donnez √† nom_utilisateur la possession du dossier ~/.ssh avec chown. Attention, pour des raisons de s√©curit√©, ce dossier doit √™tre en mode 700 ! Si vous √™tes sur Ubuntu 16.04 vous devez faire ssh-add pour initialiser l'agent SSH.  Entrez le mot de passe d‚Äôadministration et votre cl√© publique devrait √™tre copi√©e sur votre serveur.  Sur votre serveur, l'√©dition du fichier de configuration SSH pour d√©sactiver l‚Äôauthentification par mot de passe est g√©r√©e par un param√®tre syst√®me :  sudo yunohost settings set security.ssh.ssh_password_authentication -v no     ","version":"Next","tagName":"h3"},{"title":"Modifier le port SSH‚Äã","type":1,"pageTitle":"S√©curit√©","url":"/doc/pr-2675/fr/admin/tutorials/security#modifier-le-port-ssh","content":" Pour √©viter des tentatives de connexion SSH par des robots qui scannent tout Internet pour tenter des connexions SSH avec tout serveur accessible, on peut modifier le port SSH. C'est g√©r√© par un param√®tre syst√®me, qui se charge de configurer les services SSH et Fail2Ban.  Note that changing the port is still useful even if you've disabled password authentication, because that significantly reduces noise from brute force attempts in SSH logs.  attention Si vous modifiez quoi que ce soit dans le fichier /etc/ssh/sshd_config, m√™me si ce n'est que le port, YunoHost ne g√©rera plus ce fichier. Pour cette raison, utilisez toujours les outils d'administration de YunoHost pour effectuer des changements dans les fichiers de configuration du syst√®me !  sudo yunohost settings set security.ssh.ssh_port -v &lt;votre_numero_de_port_ssh&gt;   Lors de la prochaine connexion SSH, vous devrez ajouter le param√®tre -p suivi du port SSH.  Exemple:  ssh -p &lt;votre_numero_de_port_ssh&gt; admin@&lt;votre_serveur_yunohost&gt;     ","version":"Next","tagName":"h3"},{"title":"Durcir la s√©curit√© de la configuration des services‚Äã","type":1,"pageTitle":"S√©curit√©","url":"/doc/pr-2675/fr/admin/tutorials/security#durcir-la-s√©curit√©-de-la-configuration-des-services","content":" La configuration TLS par d√©faut des services tend √† offrir une bonne compatibilit√© avec les vieux appareils. Vous pouvez r√©gler cette politique pour les services SSH et NGINX. Par d√©faut, la configuration du NGINX suit la recommandation de compatibilit√© interm√©diaire de Mozilla. Vous pouvez choisir de passer √† la configuration ¬´ moderne ¬ª qui utilise des recommandations de s√©curit√© plus r√©centes, mais qui diminue la compatibilit√©, ce qui peut poser un probl√®me pour vos utilisateurs et visiteurs qui utilisent de vieux appareils. Plus de d√©tails peuvent √™tre trouv√©s sur cette page.  Changer le niveau de compatibilit√© n'est pas d√©finitif et il est possible de rechanger le param√®tre si vous concluez qu'il faut revenir en arri√®re.  Sur votre serveur, modifiez la politique pour NGINX‚ÄØ:  sudo yunohost settings set security.nginx.nginx_compatibility -v modern   Sur votre serveur, modifiez la politique pour SSH :  sudo yunohost settings set security.ssh.ssh_compatibility -v modern   ","version":"Next","tagName":"h3"},{"title":"D√©sactivation de l‚ÄôAPI YunoHost‚Äã","type":1,"pageTitle":"S√©curit√©","url":"/doc/pr-2675/fr/admin/tutorials/security#d√©sactivation-de-lapi-yunohost","content":" YunoHost est administrable via une API HTTP, servie sur le port 6787 par d√©faut (seulement sur localhost). Elle permet d‚Äôadministrer une grande partie de votre serveur, et peut donc √™tre utilis√©e √† des fins malveillantes. La meilleure chose √† faire si vous √™tes habitu√©s √† la ligne de commande est de d√©sactiver le service yunohost-api, et utiliser la ligne de commande en SSH.  attention Ceci va d√©sactiver √† la fois l'API et l'interface d'administration web de YunoHost qui en d√©pend. Ne continuez que si vous √™tes √† l'aise avec la ligne de commande.  sudo systemctl disable yunohost-api sudo systemctl stop yunohost-api   As yunohost-api is now disabled and not running, Diagnosis will report an error and cannot be ignored from the API. If you want to ignore this error, you can configure YunoHost from the CLI.  sudo yunohost diagnosis ignore --filter services service=yunohost-api  ","version":"Next","tagName":"h3"},{"title":"Donner la permission SFTP d'√©diter une application","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/tutorials/sftp_on_apps","content":"Donner la permission SFTP d'√©diter une application Dans YunoHost, depuis la gestion des permissions par l'interface d'administration web, vous pouvez sp√©cifier quel utilisateur peut acc√©der √† votre syst√®me √† travers SFTP. Go to : Groups and permissions &gt; Individual user permissions.Click on add a permission and select SFTP Cependant ces utilisateurs sont chroot√©s dans leur r√©pertoire home pour des raisons de s√©curit√©. Si vous d√©sirez donner acc√®s √† une application sp√©cifique √† travers SFTP, voici les actions √† faire apr√®s avoir donn√© les droits √† l'utilisateur dans l'interface d'adminstration web. Dans les instructions suivantes: USER est l'utilisateur √† qui sont donn√©es les permissions d'√©diter des fichiers wordpress./var/www/wordpress/wp-config.php est √† remplacer par le chemin du fichier de config de l'app. Par exemple, pour YesWiki (/var/www/yeswiki/wakka.config.php) mkdir -p /home/USER/apps/wordpress touch /home/USER/.nobackup mount --bind /var/www/wordpress /home/USER/apps/wordpress echo &quot;/var/www/wordpress /home/USER/apps/wordpress none defaults,bind 0 0&quot; &gt;&gt; /etc/fstab find /var/www/wordpress -type d -exec chmod g+s {} \\; setfacl -R -m u:wordpress:rwX /var/www/wordpress setfacl -R -d -m u:wordpress:rwX /var/www/wordpress setfacl -m u:wordpress:r-- /var/www/wordpress/wp-config.php setfacl -R -m u:USER:rwX /var/www/wordpress setfacl -R -d -m u:USER:rwX /var/www/wordpress Quick commands explanation : mkdir -p /PATH creates a folder in the specified PATHtouch creates an empty filemount --bind makes the contents of the source file or directory available at the target location without actually moving or copying the data.setfacl set the file permissions","keywords":"","version":"Next"},{"title":"Customize the appearance of the user portal","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/tutorials/theming","content":"","keywords":"","version":"Next"},{"title":"Options for the Portal customization‚Äã","type":1,"pageTitle":"Customize the appearance of the user portal","url":"/doc/pr-2675/fr/admin/tutorials/theming#options-for-the-portal-customization","content":" ","version":"Next","tagName":"h2"},{"title":"Show the list of public apps to visitors‚Äã","type":1,"pageTitle":"Customize the appearance of the user portal","url":"/doc/pr-2675/fr/admin/tutorials/theming#show-the-list-of-public-apps-to-visitors","content":" Visitors will see a 'public apps' page when ending up on the portal instead of just the login form.  ","version":"Next","tagName":"h3"},{"title":"Show other domain's apps‚Äã","type":1,"pageTitle":"Customize the appearance of the user portal","url":"/doc/pr-2675/fr/admin/tutorials/theming#show-other-domains-apps","content":" All apps from all domains will be visible on the portal. Default value is true.  ","version":"Next","tagName":"h3"},{"title":"Custom title‚Äã","type":1,"pageTitle":"Customize the appearance of the user portal","url":"/doc/pr-2675/fr/admin/tutorials/theming#custom-title","content":" Choose a Title for the Portal  ","version":"Next","tagName":"h3"},{"title":"Custom logo‚Äã","type":1,"pageTitle":"Customize the appearance of the user portal","url":"/doc/pr-2675/fr/admin/tutorials/theming#custom-logo","content":" Choose a image. Accept .svg, .png and .jpeg. Prefer a monochrome .svg with fill: currentColor so that the logo adapts to the themes.  ","version":"Next","tagName":"h3"},{"title":"Default color theme‚Äã","type":1,"pageTitle":"Customize the appearance of the user portal","url":"/doc/pr-2675/fr/admin/tutorials/theming#default-color-theme","content":" Choose a color theme. Users are allowed to choose another one in their settings.  App tiles display theme simple = display apps iconsdescripitive = display apps icons and a descpriction of the applicationperiodic = display tiles with name apps.  ","version":"Next","tagName":"h3"},{"title":"Search engine URL‚Äã","type":1,"pageTitle":"Customize the appearance of the user portal","url":"/doc/pr-2675/fr/admin/tutorials/theming#search-engine-url","content":" This is an optional feature, allowing to display a search bar in the portal (for example if you like to use your YunoHost portal as your browser's home page). This should be an URL with an empty query string such as https://duckduckgo.com/?q=, with q= as duckduckgo's empty query parameter  ","version":"Next","tagName":"h3"},{"title":"Custom user intro‚Äã","type":1,"pageTitle":"Customize the appearance of the user portal","url":"/doc/pr-2675/fr/admin/tutorials/theming#custom-user-intro","content":" You can use HTML, basic styles will be applied to generic elements.  ","version":"Next","tagName":"h3"},{"title":"Custom public intro‚Äã","type":1,"pageTitle":"Customize the appearance of the user portal","url":"/doc/pr-2675/fr/admin/tutorials/theming#custom-public-intro","content":" You can use HTML, basic styles will be applied to generic elements.  Custom CSS stylesheet  This is for advanced admins willing to customize the appearance of the portal. ","version":"Next","tagName":"h3"},{"title":"Utiliser YunoHost comme un service cach√© Tor","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/tutorials/torhiddenservice","content":"","keywords":"","version":"Next"},{"title":"Installer Tor‚Äã","type":1,"pageTitle":"Utiliser YunoHost comme un service cach√© Tor","url":"/doc/pr-2675/fr/admin/tutorials/torhiddenservice#installer-tor","content":" apt install tor   ","version":"Next","tagName":"h3"},{"title":"¬†Configurer notre service cach√©‚Äã","type":1,"pageTitle":"Utiliser YunoHost comme un service cach√© Tor","url":"/doc/pr-2675/fr/admin/tutorials/torhiddenservice#configurer-notre-service-cach√©","content":" √âditer le fichier /etc/tor/torrc, et ajouter ces lignes¬†:  HiddenServiceDir /var/lib/tor/hidden_service/ HiddenServicePort 80 127.0.0.1:80 HiddenServicePort 443 127.0.0.1:443   ","version":"Next","tagName":"h3"},{"title":"Red√©marrer Tor‚Äã","type":1,"pageTitle":"Utiliser YunoHost comme un service cach√© Tor","url":"/doc/pr-2675/fr/admin/tutorials/torhiddenservice#red√©marrer-tor","content":" systemctl restart tor   ","version":"Next","tagName":"h3"},{"title":"Obtenir l‚Äôadresse du service cach√©‚Äã","type":1,"pageTitle":"Utiliser YunoHost comme un service cach√© Tor","url":"/doc/pr-2675/fr/admin/tutorials/torhiddenservice#obtenir-ladresse-du-service-cach√©","content":" cat /var/lib/tor/hidden_service/hostname   Le nom de domaine ressemble √† random123456789.onion  ","version":"Next","tagName":"h3"},{"title":"Ajouter le domaine .onion √† YunoHost‚Äã","type":1,"pageTitle":"Utiliser YunoHost comme un service cach√© Tor","url":"/doc/pr-2675/fr/admin/tutorials/torhiddenservice#ajouter-le-domaine-onion-√†-yunohost","content":" yunohost domain add random123456789.onion   ","version":"Next","tagName":"h3"},{"title":"√âviter la redirection vers le SSO (optionnel)‚Äã","type":1,"pageTitle":"Utiliser YunoHost comme un service cach√© Tor","url":"/doc/pr-2675/fr/admin/tutorials/torhiddenservice#√©viter-la-redirection-vers-le-sso-optionnel","content":" Si vous voulez √©viter d‚Äô√™tre redirig√© vers le portail √† la connexion pour des raisons de tra√ßabilit√©, vous pouvez d√©sactiver SSOwat pour le domaine, en √©ditant le fichier /etc/nginx/conf.d/random123456789.onion.conf et en commentant la ligne suivante (elle appara√Æt deux fois dans le fichier)¬†:  #access_by_lua_file /usr/share/ssowat/access.lua;   ","version":"Next","tagName":"h3"},{"title":"V√©rifier que l'on a pas fait d'erreurs dans la configuration de NGINX‚Äã","type":1,"pageTitle":"Utiliser YunoHost comme un service cach√© Tor","url":"/doc/pr-2675/fr/admin/tutorials/torhiddenservice#v√©rifier-que-lon-a-pas-fait-derreurs-dans-la-configuration-de-nginx","content":" nginx -t   ","version":"Next","tagName":"h3"},{"title":"Si tout est OK on applique les modifications de la configuration‚Äã","type":1,"pageTitle":"Utiliser YunoHost comme un service cach√© Tor","url":"/doc/pr-2675/fr/admin/tutorials/torhiddenservice#si-tout-est-ok-on-applique-les-modifications-de-la-configuration","content":" systemctl reload nginx  ","version":"Next","tagName":"h3"},{"title":"‚ú® Mises √† jour","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/upgrade/","content":"","keywords":"","version":"Next"},{"title":"Depuis la webadmin‚Äã","type":1,"pageTitle":"‚ú® Mises √† jour","url":"/doc/pr-2675/fr/admin/upgrade/#depuis-la-webadmin","content":" Dans la partie administration, choisir Mettre √† jour le syst√®me. YunoHost va mettre √† jour le catalogue des paquets syst√®me et le catalogue des applications, et afficher les mise √† jour disponibles.  Cliquez sur les boutons verts pour lancer les mises √† jour du syst√®me et des applications.  ","version":"Next","tagName":"h2"},{"title":"Depuis la ligne de commande‚Äã","type":1,"pageTitle":"‚ú® Mises √† jour","url":"/doc/pr-2675/fr/admin/upgrade/#depuis-la-ligne-de-commande","content":" Voici quelques exemples en ligne de commande correspondants :  # Aller chercher les mises √† jour disponibles yunohost tools update # Mettre √† jour tous les paquets syst√®mes yunohost tools upgrade system # Mettre √† jour toutes les applications yunohost tools upgrade apps # Mettre √† jour une application en particulier yunohost app upgrade wordpress  ","version":"Next","tagName":"h2"},{"title":"Migration isues FAQ","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/issues_faq","content":"","keywords":"","version":"Next"},{"title":"Python apps‚Äã","type":1,"pageTitle":"Migration isues FAQ","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/issues_faq#python-apps","content":" After upgrading, some python apps should be unavailable because their virtual environment (venv) needs to be rebuilt.  To do that you can run the pending migrations in Webadmin &gt; Update.  In addition, the apps below won't be automatically repaired, you need to force-upgrade them manually instead, with yunohost app upgrade -F APP.  Apps which won't be automatically repaired and need a force upgrade:  borgserver and all its instances (eg. borgserver__2, borgserver__3, ...)borg (Borg on the app store) : rebuilt using yunohost app upgrade -F borg (otherwise, will sent emails notifying that &quot;The backup miserably failed to backup&quot;, with error ModuleNotFoundError: No module named 'borg')  TODO: list those apps  FIXME:??!!! If needed, you can disable the automatic rebuild for a specific python app, by removing the dedicated file ending with .requirements_backup_for_bullseye_upgrade.txt before applying the migration. You can find this file near the venv (Python virtual environment) of your app inside /var/www.  ","version":"Next","tagName":"h2"},{"title":"Error 500 everywhere‚Äã","type":1,"pageTitle":"Migration isues FAQ","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/issues_faq#error-500-everywhere","content":" The web server, nginx, might need a restart before being fully operational. Please run this command:  sudo systemctl restart nginx   ","version":"Next","tagName":"h2"},{"title":"Mailman3 failed in diagnostics‚Äã","type":1,"pageTitle":"Migration isues FAQ","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/issues_faq#mailman3-failed-in-diagnostics","content":" A manual change in a configuration file is needed for Mailman3 to work, see the relevant issue. ","version":"Next","tagName":"h2"},{"title":"Migrating from 4.x to 11.x","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye","content":"","keywords":"","version":"Next"},{"title":"Important notes‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#important-notes","content":" The YunoHost team did its best to make sure that the migration is as smooth as possible and was tested over the course of several months in several cases. With that said, please be aware that this is a delicate operation. System administration is a complicated topic and covering every particular case is quite hard. Therefore, if you host critical data and services, please make backups. And in any case, be patient and attentive during the migration. Please don't rush into thinking that you should need to reinstall your system from scratch thinking it would be &quot;simpler&quot; (sigh). (A common attitude is to be willing to reinstall a server at the slightest complication...). Instead, if you happen to run into issues, we encourage you to try to investigate and understand what's going on and reach for help on the chat and the forum. You should watch the known issues at the bottom of this page, to be sure your migrations will work properly.  ","version":"Next","tagName":"h2"},{"title":"Migration procedure‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#migration-procedure","content":" ","version":"Next","tagName":"h2"},{"title":"From the webadmin‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#from-the-webadmin","content":" After upgrading to 4.4.x, go to Tools &gt; Migrations to access the migrations interface. You will have to read carefully and accept the disclaimer then launch the migration.  ","version":"Next","tagName":"h3"},{"title":"From the command line‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#from-the-command-line","content":" After upgrading to 4.4.x, run:  sudo yunohost tools migrations run   then read carefully and accept the disclaimer.  ","version":"Next","tagName":"h3"},{"title":"During the migration‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#during-the-migration","content":" Depending on your hardware and packages installed, the migration might take up to a few hours.  The logs will be shown in the message bar (you can hover it to see the whole history). They will also be available after the migration (like any other operations) in Tools &gt; Logs.  Note that even if you close the webadmin page for some reason, the migration will continue in the background (but the webadmin will be partially unavailable).  ","version":"Next","tagName":"h2"},{"title":"If the migration crashed / failed at some point‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#if-the-migration-crashed--failed-at-some-point","content":" If the migration failed at some point, it should be possible to relaunch it. If it still doesn't work, you can try to get help (please provide the corresponding messages or whatever makes you say that it's not working).  ","version":"Next","tagName":"h3"},{"title":"What to do after the upgrade‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#what-to-do-after-the-upgrade","content":" ","version":"Next","tagName":"h2"},{"title":"Check that you actually are on Debian Bullseye and YunoHost 11.x‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#check-that-you-actually-are-on-debian-bullseye-and-yunohost-11x","content":" For this, go to Diagnosis (category Base system) or look at the footer of the webadmin. In the command line, you can use lsb_release -a and yunohost --version.  ","version":"Next","tagName":"h3"},{"title":"Run the migration to repair your python app‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#run-the-migration-to-repair-your-python-app","content":" After upgrading, your python apps should be unavailable because their virtual environment (venv) needs to be rebuilt.  To do that you can run the pending migrations in Webadmin &gt; Update. The apps below won't be automatically repaired, you need to force-upgrade them manually instead with yunohost app upgrade -F APP.  Apps which won't be automatically repaired and need a force upgrade:  calibrewebdjango-for-runnersffsync (this app is in python2 and no longer maintained, no guarantee)jupiterlablibrephotosmautrixmediadropmopidypgadmintracimsynapseweblate  astuce If needed, you can disable the automatic rebuild for a specific python app, by removing the dedicated file ending with .requirements_backup_for_bullseye_upgrade.txt before applying the migration. You can find this file near the venv (Python virtual environment) of your app inside /opt or /var/www.  ","version":"Next","tagName":"h3"},{"title":"Check that no issue appeared in the diagnosis‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#check-that-no-issue-appeared-in-the-diagnosis","content":" Also in the webadmin Diagnosis section, make sure that no specific issue appeared after running the migration (for example a service that crashed for some reason).  If the service php7.3-fpm appears to be dead, you should upgrade your PHP apps like the custom web app. Next, you can run apt autoremove.  ","version":"Next","tagName":"h3"},{"title":"Check that your applications are working‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#check-that-your-applications-are-working","content":" Test that your applications are working. If they aren't, you should try to upgrade them (it is also a good idea to upgrade them even if they are working anyway).  If your app is broken and you were already with the latest version, you can rerun the upgrade thanks to the -F|--force option:  yunohost app upgrade --force APP_NAME   ","version":"Next","tagName":"h3"},{"title":"Current known issues after the migration‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#current-known-issues-after-the-migration","content":" ","version":"Next","tagName":"h2"},{"title":"Can't run the migration due to libc6-dev : Breaks: libgcc-8-dev issue‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#cant-run-the-migration-due-to-libc6-dev--breaks-libgcc-8-dev-issue","content":" Note: This issue should be resolved in yunohost_version: 4.4.2.13You have an app that depends on the build-essential package.  See this solution to fix it manually  ","version":"Next","tagName":"h3"},{"title":"DNSmasq is not running anymore‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#dnsmasq-is-not-running-anymore","content":" We haven't yet found solution for this issue.  ","version":"Next","tagName":"h3"},{"title":"No ethernet connexion after rebooting following a migration on a Raspberry Pi 4‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#no-ethernet-connexion-after-rebooting-following-a-migration-on-a-raspberry-pi-4","content":" attention If you have not yet rebooted your server, don't do it (we are looking for a solution). This will avoid you the use of a keyboard and screen.  We found this in the Raspberry Pi documentation  when the dhcpcd5 package is updated to the latest version (1:8.1.2-1+rpt1 -&gt; 1:8.1.2-1+rpt2), the Raspberry Pi will fail to obtain a DHCP IP address following the next reboot or startup. This problem can be avoided by disabling and re-enabling the &quot;System Options -&gt; Network at Boot&quot; option using the latest raspi-config after the dhcpcd5 package has been updated and prior to the system being shutdown or rebooted  If you are using a Raspberry Pi 4 (or maybe 3), see this solution  ","version":"Next","tagName":"h3"},{"title":"Restore ynh4 backup onto a fresh ynh11‚Äã","type":1,"pageTitle":"Migrating from 4.x to 11.x","url":"/doc/pr-2675/fr/admin/upgrade/11.0-bullseye#restore-ynh4-backup-onto-a-fresh-ynh11","content":" If you can't restore your app but your system has been restored, you probably should use the regen conf to fix the nginx issues:  yunohost tools regenconf nginx --force   After that you should be able to restore your apps. Don't forget to force upgrade them if you have 502 errors. ","version":"Next","tagName":"h3"},{"title":"Migrer de 11.x vers 12.x","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/","content":"","keywords":"","version":"Next"},{"title":"Notes importantes‚Äã","type":1,"pageTitle":"Migrer de 11.x vers 12.x","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/#notes-importantes","content":" L'√©quipe de YunoHost a fait de son mieux pour que cette migration se passe autant en douceur que possible. Elle a √©t√© test√©e durant plusieurs mois et sur plusieurs types d'installations. Faites des sauvegardes de votre serveur et de vos donn√©es ! Cette migration est une op√©ration complexe et √©viter tous les probl√®mes possibles est difficile. Dans tous les cas, soyez patients et attentifs durant la migration. Ne vous pr√©cipitez pas √† vouloir faire une r√©installation de votre syst√®me en pensant que cela serait &quot;plus simple&quot; (sigh). (Une attitude qui revient r√©guli√®rement est de vouloir r√©installer son syst√®me √† la moindre complication...). √Ä la place, si vous rencontrez des probl√®mes, nous vous encourageons √† investiguer, chercher √† comprendre et trouver de l'aide sur le chat ou le forum. You should watch the known issues at the bottom of this page, to be sure your migrations will work properly.  ","version":"Next","tagName":"h2"},{"title":"Proc√©dure de migration‚Äã","type":1,"pageTitle":"Migrer de 11.x vers 12.x","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/#proc√©dure-de-migration","content":" Vous devez d'abord vous assurer que votre syst√®me est √† jour. La migration est disponible √† partir de la version 11.3.  Il est recommend√© de lancer la migration depuis la ligne de commande, mais elle peut tr√®s bien √™tre effectu√©e depuis la webadmin.  ","version":"Next","tagName":"h2"},{"title":"Depuis la webadmin‚Äã","type":1,"pageTitle":"Migrer de 11.x vers 12.x","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/#depuis-la-webadmin","content":" Allez dans Outils &gt; Migrations pour acc√©der √† l'interface de migration. Il vous faudra ensuite lire l'avertissement attentivement et l'accepter pour lancer la migration.  Notez que m√™me si vous fermez la page d'admin, la migration continuera (par contre l'interface d'admin sera partiellement indisponible).  ","version":"Next","tagName":"h3"},{"title":"Depuis la ligne de commande‚Äã","type":1,"pageTitle":"Migrer de 11.x vers 12.x","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/#depuis-la-ligne-de-commande","content":" Lancez simplement :  sudo yunohost tools migrations migrate   puis lisez attentivement l'avertissement et les instructions.  ","version":"Next","tagName":"h3"},{"title":"Pendant la migration‚Äã","type":1,"pageTitle":"Migrer de 11.x vers 12.x","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/#pendant-la-migration","content":" En fonction de votre mat√©riel et des paquets install√©s, la migration peut prendre jusqu'√† une ou deux heures.  Les logs seront affich√©s dans la barre de message au centre de la page (vous pouvez approcher la souris dessus pour voir l'historique en entier). Ils seront √©galement consultable apr√®s coup (comme les autres op√©rations) dans Outils &gt; Journaux.  ","version":"Next","tagName":"h2"},{"title":"Si la migration √©choue‚Äã","type":1,"pageTitle":"Migrer de 11.x vers 12.x","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/#si-la-migration-√©choue","content":" Si la migration a √©chou√© a un moment donn√©, la premi√®re chose √† faire est de tenter de la relancer. Si cela ne fonctionne toujours pas, il vous faut trouver de l'aide (pri√®re de fournir le/les messages correspondants ou tout √©l√©ment qui vous fait penser que √ßa n'a pas march√©).  ","version":"Next","tagName":"h2"},{"title":"Apr√®s la migration‚Äã","type":1,"pageTitle":"Migrer de 11.x vers 12.x","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/#apr√®s-la-migration","content":" ","version":"Next","tagName":"h2"},{"title":"V√©rifier la version de Debian et YunoHost‚Äã","type":1,"pageTitle":"Migrer de 11.x vers 12.x","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/#v√©rifier-la-version-de-debian-et-yunohost","content":" Pour cela allez dans l'outil de diagnostics ou regardez en bas √† droite de la webadmin pour trouver la version de YunoHost.  En ligne de commande vous pouvez utiliser lsb_release -a et yunohost --version.  ","version":"Next","tagName":"h3"},{"title":"Ex√©cuter les nouvelles migrations‚Äã","type":1,"pageTitle":"Migrer de 11.x vers 12.x","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/#ex√©cuter-les-nouvelles-migrations","content":" Apr√®s la mise √† niveau, de nouvelles migrations sont apparues :  La recr√©ation des virtualenvs de vos applis PythonLa migration de PostgreSQL 13 √† 15  Vous devez les lancer le plus t√¥t possible pour garantir le bon fonctionnement de vos applis.  Agreeing to the new Terms of Service via command line‚Äã  YunoHost 12.x now requires that you agree to the new Terms of Service. After reading and accepting them you can run:  yunohost tools migrations run 0031_terms_of_services --accept-disclaimer   ","version":"Next","tagName":"h3"},{"title":"V√©rifiez que le diagnostic ne rapporte pas de probl√®me particulier‚Äã","type":1,"pageTitle":"Migrer de 11.x vers 12.x","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/#v√©rifiez-que-le-diagnostic-ne-rapporte-pas-de-probl√®me-particulier","content":" Dans l'outil de diagnostics de la webadmin, v√©rifiez qu'il n'y a pas de probl√®me apparu suite √† la migration (par exemple un service qui ne tournerais plus...)  ","version":"Next","tagName":"h3"},{"title":"V√©rifiez que les applications fonctionnent‚Äã","type":1,"pageTitle":"Migrer de 11.x vers 12.x","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/#v√©rifiez-que-les-applications-fonctionnent","content":" V√©rifiez que vos applications install√©es fonctionnent... Si elles ne fonctionnent pas, il est recommand√© de tenter de les mettre √† jour. (ou bien de mani√®re g√©n√©rale, il est recommand√© de les mettre √† jour m√™me si elles fonctionnent !).  Si votre app est cass√©e et que vous √©tiez d√©j√† sur la derni√®re version d'une application, vous pouvez relancer la mise √† jour gr√¢ce √† l'option --force:  yunohost app upgrade --force NOM_APP   ","version":"Next","tagName":"h3"},{"title":"Soucis connus apr√®s la migration‚Äã","type":1,"pageTitle":"Migrer de 11.x vers 12.x","url":"/doc/pr-2675/fr/admin/upgrade/12.0-bookworm/#soucis-connus-apr√®s-la-migration","content":" Veuillez consulter la FAQ des probl√®mes de migration (en anglais). ","version":"Next","tagName":"h2"},{"title":"Groupes et permissions","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/users/groups_and_permissions","content":"","keywords":"","version":"Next"},{"title":"Gestion des groupes‚Äã","type":1,"pageTitle":"Groupes et permissions","url":"/doc/pr-2675/fr/admin/users/groups_and_permissions#gestion-des-groupes","content":" Le m√©canisme de groupe peut √™tre utilis√© pour d√©finir des groupes d'utilisateurs qui peuvent ensuite √™tre utilis√©s pour restreindre les autorisations pour les applications et autres services (tels que l'email ou XMPP). Notez qu'il n'est pas obligatoire de cr√©er un groupe pour ce faire : vous pouvez √©galement restreindre l'acc√®s √† une application ou √† un service de mani√®re individuelle.  L'utilisation de groupes est cependant utile pour la s√©mantique, par exemple si vous h√©bergez plusieurs groupes d'amis, des associations ou des entreprises sur votre serveur, vous pouvez cr√©er des groupes comme association1 et association2 et ajouter les membres de chaque association au groupe concern√©.  Il est √©galement possible de d√©finir des alias mail pour un groupe, afin que les mails envoy√©s √† groupe@domain.tld soient redirig√©s vers tous les membres du groupe.  ","version":"Next","tagName":"h2"},{"title":"Groupes par d√©faut‚Äã","type":1,"pageTitle":"Groupes et permissions","url":"/doc/pr-2675/fr/admin/users/groups_and_permissions#groupes-par-d√©faut","content":" Par d√©faut, deux groupes sp√©ciaux sont cr√©√©s :  all_users, qui contient tous les utilisateurs enregistr√©s sur YunoHost,visitors, c'est-√†-dire les personnes qui consultent le serveur sans √™tre connect√©es.admins, ce groupe permet de g√©rer les administrateurs de la machine, chaque utilisateur aura alors (selon la configuration du serveur) acc√®s en SSH ainsi que la webadmin.  Vous ne pouvez pas changer le contenu de ces groupes, seulement les permissions qui leur sont accord√©es.  ","version":"Next","tagName":"h3"},{"title":"Lister les groupes existants‚Äã","type":1,"pageTitle":"Groupes et permissions","url":"/doc/pr-2675/fr/admin/users/groups_and_permissions#lister-les-groupes-existants","content":" From the web interfaceFrom the command line Les groupes existants sont list√©s en haut de la page groupes et autorisations.  ","version":"Next","tagName":"h3"},{"title":"Cr√©er un nouveau groupe‚Äã","type":1,"pageTitle":"Groupes et permissions","url":"/doc/pr-2675/fr/admin/users/groups_and_permissions#cr√©er-un-nouveau-groupe","content":" From the web interfaceFrom the command line Pour cr√©er un nouveau groupe, il suffit de cliquer sur le bouton &quot;Nouveau groupe&quot; en haut de la page. Vous ne pouvez choisir qu'un nom form√© de lettres (majuscules et minuscules) et d'espaces. Le groupe est cr√©√© vide et sans aucune permission.  ","version":"Next","tagName":"h3"},{"title":"Mettre √† jour un groupe‚Äã","type":1,"pageTitle":"Groupes et permissions","url":"/doc/pr-2675/fr/admin/users/groups_and_permissions#mettre-√†-jour-un-groupe","content":" From the web interfaceFrom the command line Ajoutons un premier utilisateur √† ce groupe : dans le panneau du groupe, cliquez sur le bouton &quot;Ajouter un utilisateur&quot; et faites d√©filer jusqu'√† l'utilisateur souhait√©, puis cliquez dessus. Pour supprimer un utilisateur, cliquez sur la croix √† c√¥t√© de son nom d'utilisateur, dans le panneau du groupe.  ","version":"Next","tagName":"h3"},{"title":"Supprimer un groupe‚Äã","type":1,"pageTitle":"Groupes et permissions","url":"/doc/pr-2675/fr/admin/users/groups_and_permissions#supprimer-un-groupe","content":" From the web interfaceFrom the command line Pour supprimer un groupe, cliquez sur la croix rouge en haut √† droite du panneau du groupes. Une confirmation vous sera demand√©e.  ","version":"Next","tagName":"h3"},{"title":"Gestion des permissions‚Äã","type":1,"pageTitle":"Groupes et permissions","url":"/doc/pr-2675/fr/admin/users/groups_and_permissions#gestion-des-permissions","content":" Le m√©canisme de permissions permet de restreindre l'acc√®s aux services (par exemple mail, XMPP...) et aux applications, ou m√™me √† des parties sp√©cifiques des applications (par exemple l'interface d'administration de WordPress).  ","version":"Next","tagName":"h2"},{"title":"Liste des permissions‚Äã","type":1,"pageTitle":"Groupes et permissions","url":"/doc/pr-2675/fr/admin/users/groups_and_permissions#liste-des-permissions","content":" From the web interfaceFrom the command line La page des groupes liste les permissions donn√©es √† chaque groupe, y compris les groupes sp√©ciaux all_users et visitors.  ","version":"Next","tagName":"h3"},{"title":"Ajouter des permissions √† un groupe ou un utilisateur‚Äã","type":1,"pageTitle":"Groupes et permissions","url":"/doc/pr-2675/fr/admin/users/groups_and_permissions#ajouter-des-permissions-√†-un-groupe-ou-un-utilisateur","content":" From the web interfaceFrom the command line Pour ajouter une permission √† un groupe, il suffit de cliquer sur le bouton &quot;+&quot; dans le panneau du groupe, de faire d√©filer jusqu'√† la permission souhait√©e, puis de cliquer dessus. Notez que vous pouvez √©galement autoriser un seul utilisateur, en utilisant le panneau sp√©cifique en bas de la page.  Notez que certaines permissions peuvent √™tre ¬´ prot√©g√©es ¬ª, ce qui signifie que vous ne pourrez pas les ajouter/enlever du groupe Visiteurs. Ce m√©canisme est g√©n√©ralement l√† car ajouter/enlever la permission n'a pas de sens (ou est un risque de s√©curit√©).  La webadmin √©mettra un avertissement si vous d√©finissez une permission qui est remplac√©e par une permission plus large.    ","version":"Next","tagName":"h3"},{"title":"Montrer/cacher les tuiles dans le portail utilisateur‚Äã","type":1,"pageTitle":"Groupes et permissions","url":"/doc/pr-2675/fr/admin/users/groups_and_permissions#montrercacher-les-tuiles-dans-le-portail-utilisateur","content":" Depuis YunoHost 4.1, il est possible de montrer/cacher certaines tuiles dans le portail.  From the web interfaceFrom the command line Depuis la webadmin, vous pouvez changer cela en allant dans la vue de l'application √† manipuler, puis dans G√©rer les √©tiquettes et les tuiles, et cocher/d√©cocher l'option Montrer la tuile dans le portail utilisateur pour la permission correspondante.  ","version":"Next","tagName":"h3"},{"title":"G√©rer les alias des groupes‚Äã","type":1,"pageTitle":"Groupes et permissions","url":"/doc/pr-2675/fr/admin/users/groups_and_permissions#g√©rer-les-alias-des-groupes","content":" Chaque groupe peut utiliser des alias de mail, bien que leur configuration se fasse actuellement uniquement depuis la CLI. Par d√©faut, le groupe admins dispose ainsi de admins@domain.tld, root@domain.tld ... : les messages envoy√©s √† ces adresses sont redirig√©s vers tous les membres du groupe admins.  L'utilisation de la commande yunohost user group info permet de lister tous les alias pour le groupe renseign√©.  yunohost user group info admins [...] mail-aliases: - root@maindomain.tld - admin@maindomain.tld - admins@maindomain.tld - webmaster@maindomain.tld - postmaster@maindomain.tld - abuse@maindomain.tld [...]   Il est possible de les ajouter avec l'action add-mailalias ou de les enlever avec remove-mailalias.  yunohost user group add-mailalias &lt;groupe&gt; &lt;adresse@domaine.tld&gt;  ","version":"Next","tagName":"h3"},{"title":"üë• Comptes et portail d'apps","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/users/","content":"","keywords":"","version":"Next"},{"title":"Comptes‚Äã","type":1,"pageTitle":"üë• Comptes et portail d'apps","url":"/doc/pr-2675/fr/admin/users/#comptes","content":" Les comptes permettent aux utilisateurices sont les √™tres humains qui ont acc√®s aux applications et autres services sur votre serveur. L'administrateur peut ajouter et g√©rer des comptes via l'administration web (dans la cat√©gorie Utilisateurs) ou via la cat√©gorie yunohost user de la ligne de commande. Apr√®s cela, les utilisateurs obtiennent une adresse e-mail personnelle (choisie par l'administrateur), et peuvent se connecter au portail utilisateur (SSO) pour acc√©der aux applications pour lesquelles ils ont des permissions et configurer d'autres param√®tres.  Le premier utilisateur cr√©√© re√ßoit aussi automatiquement les alias email root@main.domain.tld et admin@main.domain.tld, de sorte que le courrier envoy√© √† ces adresses se retrouvera dans la bo√Æte aux lettres de cet utilisateur.  attention Vous devriez faire attention √† qui vous donnez l'acc√®s √† votre serveur. En termes de s√©curit√©, cela augmente consid√©rablement la surface d'attaque pour quelqu'un qui veut perturber le serveur d'une mani√®re ou d'une autre.  ","version":"Next","tagName":"h2"},{"title":"Le portail utilisateur, ou SSO‚Äã","type":1,"pageTitle":"üë• Comptes et portail d'apps","url":"/doc/pr-2675/fr/admin/users/#le-portail-utilisateur-ou-sso","content":" Le portail utilisateur, √©galement appel√© SSO pour 'Single Sign On', permet √† l'utilisateur de naviguer facilement entre les diff√©rentes applications auxquelles il a acc√®s. En particulier, le terme 'Single Sign On' vient du fait que l'utilisateur n'a qu'√† se connecter au portail pour √™tre automatiquement connect√© √† toutes les applications qui n√©cessitent une authentification (ou du moins celles qui sont int√©gr√©es avec le SSO/LDAP, car cela est parfois techniquement compliqu√© ou pas possible du tout).  Dans le portail, les utilisateurs peuvent √©galement cliquer sur l'avatar en haut √† gauche pour configurer d'autres param√®tres tels que leur identit√©, les alias de messagerie, les transferts automatiques de courrier ou leur mot de passe.  info Vous devez √™tre conscient que le SSO ne peut √™tre atteint que par le nom de domaine (c.-√†-d. https://the.domain.tld/yunohost/sso), et non pas en utilisant l'IP du serveur (c.-√†-d. https://11.22.33.44/yunohost/sso), contrairement √† la webadmin ! C'est un peu d√©routant dans certaines situations, mais c'est n√©cessaire pour des raisons techniques. Si vous √™tes dans une situation o√π vous avez besoin d'acc√©der au SSO sans avoir votre DNS correctement configur√© pour une raison quelconque, vous pouvez envisager de modifier votre /etc/hosts comme d√©crit dans cette page.  ","version":"Next","tagName":"h2"},{"title":"Creating new users‚Äã","type":1,"pageTitle":"üë• Comptes et portail d'apps","url":"/doc/pr-2675/fr/admin/users/#creating-new-users","content":" Only the administrator can create new users. From the webadmin, open the Users menu and click on the + New user main button. Fill in all the whole form.  Users are created with an associated email address with the format username@domain.tld. Additional email aliases and email forwards can later be added by the admin and the user.  The password should be at least 8 characters - though it is good practice to use longer password (i.e. a passphrase) and/or to use various kind of characters (uppercase, lowercase, digits and special characters).  Finalize the user creation by clicking on the Save button.  From the main menu of the webadmin, open `Users`.  From the top of the users list, click on `+ New user`.  Fill in the form.  ","version":"Next","tagName":"h2"},{"title":"User groups and permissions‚Äã","type":1,"pageTitle":"üë• Comptes et portail d'apps","url":"/doc/pr-2675/fr/admin/users/#user-groups-and-permissions","content":" See this dedicated page.  ","version":"Next","tagName":"h2"},{"title":"SSH access‚Äã","type":1,"pageTitle":"üë• Comptes et portail d'apps","url":"/doc/pr-2675/fr/admin/users/#ssh-access","content":" Voir cette page de documentation d√©di√©e. ","version":"Next","tagName":"h2"},{"title":"‚≠ê Interface d'admin web","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/webadmin","content":"‚≠ê Interface d'admin web YunoHost est fourni avec une interface graphique d‚Äôadministration (aussi appel√©e webadmin). L‚Äôautre m√©thode d'administration est d‚Äôutiliser la ligne de commande. La webadmin est accessible √† l‚Äôadresse https://votredomaine.tld/yunohost/admin ou via l'adresse IP locale ou globale (https://1.2.3.4/yunohost/admin)","keywords":"","version":"Next"},{"title":"Qu‚Äôest-ce que YunoHost?","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/what_is_yunohost/","content":"","keywords":"","version":"Next"},{"title":"Fonctionnalit√©s‚Äã","type":1,"pageTitle":"Qu‚Äôest-ce que YunoHost?","url":"/doc/pr-2675/fr/admin/what_is_yunohost/#fonctionnalit√©s","content":"  bas√© sur Debian, pour une base de confiance et famili√®re; administration via une interface web simple et claire ou en ligne de commande; d√©ployez des applications en quelques clics, parmi un catalogue de plus de 500‚ÄØ!; ajoutez des utilisateurs (g√©r√©s via un annuaire LDAP); g√©rez des noms de domaine; cr√©ez et restaurez des sauvegardes; connexion simultan√©e √† toutes les apps via un portail utilisateur (nginx, SSOwat); fourni avec un serveur mail complet (Postfix, Dovecot, Rspamd, DKIM); g√®re les certificats SSL (bas√© sur Let's Encrypt); ... et des syst√®mes de s√©curit√© (fail2ban, yunohost-firewall).  ","version":"Next","tagName":"h2"},{"title":"Origine‚Äã","type":1,"pageTitle":"Qu‚Äôest-ce que YunoHost?","url":"/doc/pr-2675/fr/admin/what_is_yunohost/#origine","content":" YunoHost est un projet n√© en f√©vrier 2012 √† la suite d‚Äô√† peu pr√®s √ßa¬†:  ¬´¬†Merde, j‚Äôai la flemme de me reconfigurer un serveur mail... Beudbeud, comment t‚Äôas fait pour configurer ton joli serveur sous LDAP‚Äâ?¬†¬ªKload, f√©vrier 2012  Il ne manquait en fait qu‚Äôune interface d‚Äôadministration au serveur de Beudbeud pour en faire quelque chose d‚Äôexploitable, alors Kload a d√©cid√© de la d√©velopper. Finalement, apr√®s l‚Äôautomatisation de quelques configurations et le packaging de quelques applications web, la premi√®re version de YunoHost √©tait sortie.  Constatant l‚Äôengouement croissant autour de YunoHost et de l‚Äôauto-h√©bergement en g√©n√©ral, les d√©veloppeurs et les nouveaux contributeurs ont alors d√©cid√© de prendre le cap d‚Äôune version 2, plus accessible, plus extensible, plus puissante, et qui pr√©pare du bon caf√© commerce √©quitable pour les lutins de Laponie.  Le nom YunoHost vient de l‚Äôargot Internet anglais ¬´¬†Y U NO Host¬†¬ª signifiant approximativement ¬´¬†Pourquoi toi ne pas h√©berger¬†¬ª. Le m√®me Internet qui l‚Äôillustre est √† peu pr√®s celui-ci¬†:    ","version":"Next","tagName":"h2"},{"title":"Qu‚Äôest-ce que YunoHost n‚Äôest pas‚Äâ?‚Äã","type":1,"pageTitle":"Qu‚Äôest-ce que YunoHost?","url":"/doc/pr-2675/fr/admin/what_is_yunohost/#quest-ce-que-yunohost-nest-pas","content":" YunoHost n'est pas une entreprise ou une entit√© √† but lucratif. Le projet est d√©velopp√© et maintenu par des b√©n√©voles. Nous ne vendons pas de services, nous n'h√©bergeons ni ne contr√¥lons vos donn√©es ou services d'aucune mani√®re, et nous n'avons aucune intention ni aucun int√©r√™t √† mon√©tiser quoi que ce soit. Nous n'offrons pas non plus de garanties formelles. Notre objectif est simplement de d√©velopper et de maintenir YunoHost dans l'espoir qu'il contribue √† un internet plus d√©centralis√© et qu'il permette aux plus grand nombre d'obtenir la ma√Ætrise et l'autonomie sur leurs services num√©riques et la technologie. Ceci √©tant dit, nous faisons de notre mieux pour fournir un support communautaire, et un support commercial peut √™tre disponible par l'interm√©diaire de tiers si n√©cessaire.  YunoHost en tant que projet n'est pas apolitique. Par sa nature m√™me, YunoHost promeut un internet d√©centralis√© et des technologies qui donnent du pouvoir au plus grand nombre. Nous rejetons l'id√©e selon laquelle la technologie serait intrins√®quement neutre, ou que les projets logiciels devraient rester neutres. De nombreux contributeurices au projet restent vigilant‚ãÖe‚ãÖs quant aux implications sociales et politiques de l'√©volution des technologies, et soulignent l'importance d'√™tre solidaire et de converger avec d'autres luttes telles que le f√©minisme, les droits et la visibilit√© des personnes LGBTQIA+, la justice environnementale et la justice sociale. Nous nous opposons fermement au fascisme, au sexisme, au racisme, √† la x√©nophobie, √† la bigoterie, au validisme, √† l'imp√©rialisme, √† l'extractivisme, √† l'eug√©nisme et au libertarianisme de droite. Si vous n'√™tes pas en accord avec ces valeurs, nous vous encourageons √† ne pas utiliser YunoHost et √† chercher un autre syst√®me.  YunoHost n'est pas con√ßu pour ¬´ passer √† l'√©chelle ¬ª au sens traditionnel du terme. Il est con√ßu pour un nombre relativement modeste de comptes et d'utilisateurices simultan√©s. Bien qu'il n'y ait pas de limite stricte - puisque les performances d√©pendent fortement de votre configuration sp√©cifique - nous estimons que des ajustements techniques peuvent s'av√©rer n√©cessaires √† partir de 250 √† 500 comptes, ou de ~50 utilisateur‚ãÖice‚ãÖs simultan√©s sur des applications gourmandes. Ceci √©tant dit, YunoHost peut ais√©ment h√©berger des sites web ou autres services l√©gers recevant des milliers de visites quotidiennes.  YunoHost est avant tout con√ßu pour les personnes qui veulent que √ßa &quot;juste marche&quot;. √âvidemment, le projet n'est pas parfait - nous travaillons constamment √† l'am√©lioration de l'exp√©rience utilisateurice, √† la robustesse et √† la simplicit√© du syst√®me. Bien que YunoHost soit &quot;bidouillable&quot;, la cible principale n'est pas les &quot;power users&quot; qui ont en t√™te des cas d'utilisation complexes ou hautement avanc√©s. Nous vous encourageons √† garder votre installation aussi simple que possible. Ceci √©tant dit, vous √™tes les bienvenu‚ãÖe‚ãÖs √† exp√©rimenter et √† nous faire part de vos retours !  YunoHost n'est pas con√ßu pour √™tre une solution de mutualisation lourde fournissant des services √† de multiples organisations compl√®tement s√©par√©es √† travers diff√©rents domaines. Bien qu'il soit possible d'h√©berger des services pour des amis, des coll√®gues, une association - le tout sous des domaines diff√©rents -, vous devez garder √† l'esprit qu'il n'y a pas d'isolation stricte entre les applications. Sous le capot, toutes les applications partagent le m√™me syst√®me et le m√™me environnement.  (Note pour les utilisateurs exp√©riment√©s) YunoHost n'utilise pas de technologie de conteneurisation &quot;dure&quot; telles que Docker pour les applications. Ceci d√©coule √† la fois de raisons historiques, mais aussi pour garder le syst√®me l√©ger - √† la fois en termes de ressources et de complexit√© technique. Cela dit, nous prenons la s√©curit√© au s√©rieux : les applications fonctionnent sous des comptes d'utilisateurs d√©di√©s avec des privil√®ges et des capacit√©s limit√©s, et nous travaillons continuellement √† l'am√©lioration de la s√©curit√© du syst√®me.  ","version":"Next","tagName":"h2"},{"title":"Logo‚Äã","type":1,"pageTitle":"Qu‚Äôest-ce que YunoHost?","url":"/doc/pr-2675/fr/admin/what_is_yunohost/#logo","content":" Logo YunoHost noir et blanc r√©alis√© par ToZz. Licence: CC-BY-SA 4.0. Les logos et autres artwork sont disponibles dans le r√©pertoire Github.     ","version":"Next","tagName":"h2"},{"title":"Essayer YunoHost sur un serveur de d√©monstration","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/what_is_yunohost/demo","content":"Essayer YunoHost sur un serveur de d√©monstration attention Cette d√©mo est r√©initialis√©e toutes les 30 minutes et peut cesser de fonctionner de temps en temps, mais au moins vous pouvez tester, et √ßa c‚Äôest vraiment chouette :) Interface utilisateur Utilisateur‚ÄØ: demo Mot de passe‚ÄØ: demo Interface d‚Äôadministration Utilisateur‚ÄØ: demo Mot de passe‚ÄØ: demo info Le serveur de d√©mo est fourni g√©n√©reusement par Gitoyen ","keywords":"","version":"Next"},{"title":"Structure d'un serveur YunoHost","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/admin/what_is_yunohost/structure","content":"Structure d'un serveur YunoHost Cette page survole l'√©cosyst√®me d'un serveur YunoHost. Bien qu'elle contienne des approximations, son intention est d'introduire une image globale avant de creuser ses diff√©rents aspects. Tout d√©bute avec le compte sp√©cial admin. C'est l'administrateur‚ãÖice de la machine qui peut installer, configurer et g√©rer tout sur le serveur au travers de l'interface d'administation web, ou bien via SSH et les lignes de commandes. ( Si vous √™tes d√©j√† familiaris√©‚ãÖe avec GNU/Linux, c'est similaire √† root. YunoHost a ce compte additionnel 'admin' pour plusieurs raisons techniques.) L'admin peut cr√©er des comptes et installer des applications, pour citer quelques actions d'administration. Les utilisateur‚ãÖice‚ãÖs obtiennent une adresse qui leur est propre lors de leur cr√©ation. Iels auront alors aussi la possibilit√© de se connecter au portail utilisateur (SSO) pour acc√®der aux applications. Typiquement certaines applications seront install√©es soit en acc√®s public soit en acc√®s priv√©, c'est-√†-dire dont l'acc√®s sera restreint aux personnes ayant des comptes membres d'un groupe. Les applications et leur fonctions s'appuient sur diff√©rents services pour fonctionner correctement. Les services (aussi nomm√©s d√©mons) sont des programmes qui fonctionnent de fa√ßon continue sur le serveur et s'assurent que des t√¢ches vari√©es sont r√©alis√©es, telles que r√©pondre aux requ√™tes web des navigateurs, ou relayer des mails.","keywords":"","version":"Next"},{"title":"Community","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/community/","content":"Community The YunoHost community is centered around Github, the forum and chat rooms on Matrix. üìÑÔ∏è Foire aux questions Sous quelle licence est distribu√© YunoHost‚Äâ? üìÑÔ∏è Besoin d‚Äôaide‚ÄØ? How to ask for help üìÑÔ∏è Forum ‚Üó The Forum for support and news üìÑÔ∏è Salons de discussions Parmi d‚Äôautres outils, le projet YunoHost se sert de salons de discussions pour communiquer. üìÑÔ∏è Project organisation ‚Üó The human organization behind the code üìÑÔ∏è Budget du projet Revenus attendus üìÑÔ∏è √âquipe s√©curit√© Contactez l'√©quipe s√©curit√© par email : security@yunohost.org. üìÑÔ∏è Media Media and conferences üìÑÔ∏è M√©c√®nes et partenaires Afin d'avancer et de faire fonctionner le projet, en plus du travail des b√©n√©voles et des dons, YunoHost b√©n√©ficie du soutien de m√©c√®nes et de partenaires. üìÑÔ∏è Create a CHATONS ‚Üó See the tutorial on chatons.org üìÑÔ∏è Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost 01/02/2024","keywords":"","version":"Next"},{"title":"Create a CHATONS ‚Üó","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/community/chatons","content":"Create a CHATONS ‚Üó You will be redirected soon to the CHATONS documentation. If that doesn't work, please go to: https://wiki.chatons.org/doku.php/heberger/administration_systeme/yunohost","keywords":"","version":"Next"},{"title":"Foire aux questions","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/community/faq","content":"Foire aux questions Sous quelle licence est distribu√© YunoHost‚Äâ?‚Äã Les paquets qui composent YunoHost sont sous licence libre GNU AGPL v.3. YunoHost est bas√© sur Debian, donc sur les licences des √©l√©ments sur lesquels Debian est bas√©. Les applications et leurs paquets ont leurs licences respectives. Quel est l‚Äôobjectif de YunoHost ?‚Äã Nous pensons que la d√©centralisation d‚ÄôInternet, et la reprise du contr√¥le et de la responsabilit√© des donn√©es et services par les personnes est un enjeu crucial pour garantir une soci√©t√© libre et d√©mocratique. Le projet YunoHost cherche √† d√©mocratiser l‚Äôauto-h√©bergement. Nous fournissons un logiciel qui cherche √† rendre simple le fait de g√©rer et d‚Äôadministrer un serveur soi-m√™me, en minimisant les comp√©tences et le temps requis. Mais qu‚Äôest-ce que √ßa fait vraiment ?‚Äã YunoHost est √† la fois une distribution, dans le sens o√π c'est une version de GNU/Linux-Debian d√©di√© √† un objectif pr√©cis et que YunoHost distribue un ensemble d'applications via son catalogue, mais c'est aussi un ¬´ simple ¬ª programme qui configure Debian de mani√®re automatique, et g√®re les manipulations p√©nibles √† votre place. Par exemple, pour installer un WordPress √† la main, il vous faudrait taper toute une s√©rie de commandes pour cr√©er des utilisateurs, mettre en place un serveur web, mettre en place un serveur SQL, t√©l√©charger l‚Äôarchive de WordPress, la d√©compresser, configurer le serveur web, configurer la base de donn√©es SQL, et finalement configurer WordPress. YunoHost g√®re toute cette partie technique et ¬´ tape les commandes √† votre place ¬ª, pour que vous puissiez vous concentrer sur ce qui compte vraiment. Plus d‚Äôinformations sur cette page ! Puis-je g√©rer mon propre site web avec YunoHost ?‚Äã Oui ! Il faut regarder du c√¥t√© de cette app. Elle fournit une ¬´ coquille vide ¬ª : apr√®s l‚Äôinstallation, il suffit d‚Äôenvoyer vos fichiers (via SSH/SCP ou SFTP) au bon endroit. Il est aussi possible d‚Äôavoir du PHP et une base de donn√©e SQL si besoin. Peut-on h√©berger plusieurs sites ind√©pendants avec des noms de domaines diff√©rents‚Äâ?‚Äã On peut tout √† fait h√©berger plusieurs sites web car YunoHost est multi-domaine et que certaines applications de gestion de sites web, comme WordPress ou My Webapp, sont multi-instances, c‚Äôest-√†-dire que l‚Äôapplication peut-√™tre install√©e plusieurs fois. Pourquoi je ne peux pas acc√©der √† mes applications avec l‚Äôadresse IP‚Äâ?‚Äã Pour des raisons techniques, le SSO ne permet pas aux utilisateurs de se connecter √† l‚Äôespace utilisateur lorsque l‚Äôon acc√®de au serveur uniquement avec l‚ÄôIP. Si vous ne pouvez r√©ellement pas configurer un nom de domaine, une solution temporaire peut √™tre de modifier le fichier hosts (dernier ¬ß) de son ordinateur. Quel est le mod√®le √©conomique de YunoHost ?‚Äã YunoHost est maintenu par une √©quipe de b√©n√©voles travaillant pendant leur temps libre. Le projet re√ßoit r√©guli√®rement des dons qui financent principalement des frais de serveurs et de communication (stickers ;P). Le projet a re√ßu dans le pass√© (ou continue de recevoir) des subventions de la part d'organismes comme NLnet ou CodeLutin pour financer des d√©veloppements pr√©cis. Les dons au projet √©tant de plus en plus important, des initiatives sont en cours pour tenter de redistribuer l'argent aux contributeur¬∑ice¬∑s principales et ainsi aider √† p√©renniser le projet. Des contributeur¬∑ice¬∑s m√®nent par ailleurs des activit√©s professionnelles bas√©es partiellement sur YunoHost. Puis-je faire un don au projet ?‚Äã Oui, c'est possible ! YunoHost a besoin de payer des serveurs et noms de domaine, et nous souhaitons permettre aux contributeur¬∑ice¬∑s de continuer √† d√©velopper YunoHost plut√¥t que de chercher un emploi ailleurs. Pour faire un don √ßa se passe via notre interface de don Si vous le pouvez, vous pouvez aussi faire des contributions en nature (une partie de notre infrastructure vient d'associations qui nous fournissent des serveurs). Comment puis-je contribuer au projet ?‚Äã Il existe [plusieurs fa√ßons de contribuer](/dev :). N‚Äôh√©sitez pas √† venir nous parler de vos id√©es ! Le syndrome de l'imposteur (ne pas se sentir ¬´ assez comp√©tent¬∑e ¬ª) est assez r√©pandu, mais en pratique, croyez-le, personne ne se sent comp√©tent m√™me 10 ans apr√®s sa premi√®re contrib' :). Ce qui compte vraiment est : d‚Äôaimer ce que vous faites, √™tre sympathique avec les autres √™tres humains du projet, √™tre patient et t√™tu avec les machines, et avoir du temps libre. √Ä part √ßa, juste faire ce que vous pouvez, c‚Äôest d√©j√† trop cool ! Quelle est l'organisation politique du projet YunoHost ?‚Äã Elle est d√©crite dans ce document :). Pouvez-vous porter YunoHost sur [ma distro pr√©f√©r√©e] ?‚Äã Si vous vous pr√©occupez des gu√©guerres de distro, ou pensez que ¬´ Debian c‚Äôest sale ¬ª, vous n‚Äô√™tes pas le public de YunoHost. YunoHost vise un public de non-technophiles ou de bidouilleur¬∑euse¬∑s qui veulent simplement que ¬´ √ßa marche ¬ª sans devoir investir des semaines enti√®res. Debian a probablement des d√©fauts, mais c‚Äôest une (la ?) distribution la plus connue et utilis√©e pour g√©rer des serveurs. C‚Äôest une distribution stable. La plupart des services auto-h√©bergeables sont compatibles d‚Äôune mani√®re ou d‚Äôune autre avec Debian. Elle est facilement bidouillable par quelqu‚Äôun qui a d√©j√† utilis√© la ligne de commande sur son ordinateur personnel. Il n‚Äôy a pas de ¬´ killer feature ¬ª particuli√®re dans les autres distributions qui rendrait pertinent de porter YunoHost dessus. Si cela ne vous convient pas, il existe d‚Äôautres projets sous d‚Äôautres distributions ou avec d‚Äôautres philosophies. J‚Äôai regard√© comment le packaging des apps fonctionne. Pourquoi r√©inventez-vous [mon format de paquet pr√©f√©r√©] ?‚Äã Des personnes ont √©t√© tent√©es de comparer le syst√®me de packaging de YunoHost aux .deb de Debian. Pourtant, l‚Äôobjectif des paquets d‚Äôapplication YunoHost est de celui des paquets traditionnels (comme les .deb de Debian) qui remplissent le r√¥le d‚Äôinstaller des √©l√©ments bas-niveau tels que des fichiers, commandes, programmes ou services sur le syst√®me. Il est √† la charge de l‚Äôadministrateur de les configurer ensuite proprement, simplement parce qu‚Äôil n‚Äôexiste pas d‚Äôenvironnement standard. Typiquement, les applications web requi√®rent beaucoup de configuration car elles ont besoin de s‚Äôinterfacer avec un serveur web et une base de donn√©es (et le syst√®me de connexion unique / SSO). YunoHost manipule des abstractions haut-niveau (apps, domaines, utilisateurs‚Ä¶) et d√©finit un environnement standard (NGINX, Postfix, Metronome, SSOwat...) et, gr√¢ce √† cela, peut g√©rer la configuration √† la place de l‚Äôadministrateur. Quand est-ce que [cette fonctionnalit√©] sera ajout√©e ? Pourquoi [cette app] n'a pas encore √©t√© packag√©e ? Je n'en reviens pas que vous ne fassiez pas encore [cela] !‚Äã Nous ne donnons pas de calendrier. Nous sommes une poign√©e de volontaires travaillant sur notre temps libre pour maintenir et d√©velopper YunoHost. Nous n'avons pas de responsable produit ou de chef de projet, nous ne sommes pas une entreprise. Nous faisons ce que nous pouvons, parce que nous aimons ce logiciel, quand nous le pouvons. Si vous souhaitez vraiment voir une fonctionnalit√© cod√©e ou document√©e, ou une application packag√©e, [envisagez de contributer](/dev! Nous adorerions vous aider √† vous mettre en selle. Quelle est la politique d'inclusion des apps dans le catalogue officiel ?‚Äã Voir cette page Pourquoi n'incluez-vous pas [fonctionnalit√© X] ?‚Äã YunoHost est principalement con√ßu pour un public peu technicien et vise √† rester relativement simple en termes d'UI/UX. En m√™me temps, le projet dispose d'un temps et d'une √©nergie limit√©s pour sa maintenance et son d√©veloppement. C'est pourquoi nous pouvons r√©duire la priorit√© de certaines fonctionnalit√©s, ou refuser compl√®tement de les inclure, au titre des crit√®res suivants : ne seraient utiles qu'√† des personnes exp√©riment√©es/avanc√©es et vont au dela du p√©rim√®tre vis√© par le projet ;introduiraient trop de bloat dans l'UI/UX ;ne couvriraient que des mod√®les de menace irr√©alistes ;ne seraient l√† que pour satisfaire les puristes ;ou globalement ne vaudrait pas la peine en termes de temps de d√©veloppement/maintenance/√©nergie pour ce qu'elles apportent au projet.","keywords":"","version":"Next"},{"title":"Forum ‚Üó","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/community/forum","content":"Forum ‚Üó You will be redirected soon to the forum. If that doesn't work, please go to: https://forum.yunohost.org","keywords":"","version":"Next"},{"title":"Salons de discussions","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/community/chat_rooms","content":"Salons de discussions Parmi d‚Äôautres outils, le projet YunoHost se sert de salons de discussions pour communiquer. Vous pouvez rejoindre ces salons avec : un Client Matrixun Client XMPPun Client IRC par exemple KiwiIRC (attention, le salon IRC est d√©pr√©ci√©, pr√©f√©rez Matrix) NB: Currently, the IRC bridge (due to Matrix) is disabled. So while the XMPP and Matrix are bridged, the IRC channel is not. Salon d'entraide et de support‚Äã Le salon d‚Äôentraide est l√† pour permettre aux utilisateurs de YunoHost de s'aider mutuellement. Matrix : #yunohost:matrix.orgXMPP : support@conference.yunohost.orgIRC : #yunohost sur libera.chat (voir KiwiIRC ci-dessus) (attention, le salon IRC est d√©pr√©ci√©, pr√©f√©rez Matrix) D√©veloppement‚Äã Salon de d√©veloppement du c≈ìur de YunoHost : Matrix : #yunohost-dev:matrix.orgXMPP : dev@conference.yunohost.orgIRC : #yunohost-dev sur libera.chat (attention, le salon IRC est d√©pr√©ci√©, pr√©f√©rez Matrix) C'est le salon principal pour les contributions autour du projet. Pour chercher de l‚Äôaide, merci d'aller sur le salon d‚Äôentraide ci-dessus. Applications‚Äã Salon de d√©veloppement du packaging d‚Äôapplication. Il permet aux packageurs de s‚Äôentraider. Il sert √©galement √† discuter de l‚Äô√©volution du packaging, des outils d‚Äôint√©gration continue sur les applications. Matrix : #yunohost-apps:matrix.orgXMPP : apps@conference.yunohost.orgIRC : #yunohost-apps sur libera.chat (attention, le salon IRC est d√©pr√©ci√©, pr√©f√©rez Matrix) Documentation‚Äã Le salon de documentation du projet YunoHost. Il permet aux contributeurs d'√©changer, pour synchroniser et maintenir une documentation √† jour sur les diff√©rents aspects du projet : backend, frontend, apps, projet, communaut√©... Vous pouvez aussi y partager vos communications au public √† propos de YunoHost (pr√©sentations, vid√©os...) pour permettre leur r√©f√©rencement dans la documentation. Matrix : #yunohost-doc:matrix.orgXMPP : doc@conference.yunohost.orgIRC : #yunohost-doc sur libera.chat (attention, le salon IRC est d√©pr√©ci√©, pr√©f√©rez Matrix)","keywords":"","version":"Next"},{"title":"Besoin d‚Äôaide‚ÄØ?","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/community/help","content":"","keywords":"","version":"Next"},{"title":"How to ask for help‚Äã","type":1,"pageTitle":"Besoin d‚Äôaide‚ÄØ?","url":"/doc/pr-2675/fr/community/help#how-to-ask-for-help","content":" astuce Be courteous: help in the chatrooms or on the forum is given by our users and contributors, all volunteers.Explain the context of your request in a complete but concise way.It is paramount to share the error logs with YunoPaste (green buttons in your webadmin, then share the link to the generated page).Be patient, as your messages might not be seen instantly. danger Do not ask about your attempted solution but rather your actual problem (see XY problem).Avoid phrases like &quot;server does not want&quot;, &quot;the app does not load&quot;, or other meaningless sentences.Do not trim error messages, but do not paste a wall of illegible unformatted code either. (Use YunoPaste)Do not ask your question like a poll (&quot;does anyone else succeeded in...?&quot;).  ","version":"Next","tagName":"h2"},{"title":"Connect to the support chatroom‚Äã","type":1,"pageTitle":"Besoin d‚Äôaide‚ÄØ?","url":"/doc/pr-2675/fr/community/help#connect-to-the-support-chatroom","content":" Please change your username, as we got legions of ynhusers.    astuce this room is available via Matrix (#yunohost:matrix.org using Element)IRC (#yunohost on libera.chat, using kiwiirc)XMPP (support@conference.yunohost.org)  NB : Actuellement, le bridge IRC (grace √† Matrix) est d√©sactiv√©. Ainsi, alors que les canaux XMPP et Matrix sont connect√©s, le canal IRC ne l'est pas.  ","version":"Next","tagName":"h2"},{"title":"... or ask on the forum!‚Äã","type":1,"pageTitle":"Besoin d‚Äôaide‚ÄØ?","url":"/doc/pr-2675/fr/community/help#-or-ask-on-the-forum","content":" Please follow the Support section post template. It helps everyone understand the context of your request.   Go to the forum  ","version":"Next","tagName":"h2"},{"title":"You've found a bug ?‚Äã","type":1,"pageTitle":"Besoin d‚Äôaide‚ÄØ?","url":"/doc/pr-2675/fr/community/help#youve-found-a-bug-","content":" astuce Please report bugs on our bugtrackers or contact the developers   Report a bug in YunoHost's core Report a bug in one of YunoHost's apps Contact the developers ","version":"Next","tagName":"h2"},{"title":"Media","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/community/press_kit","content":"","keywords":"","version":"Next"},{"title":"Talks / conf‚Äã","type":1,"pageTitle":"Media","url":"/doc/pr-2675/fr/community/press_kit#talks--conf","content":" (EN) BattleMeshV12 - YunoHost and the Internet Cube (Brique Internet)(EN) FOSDEM 2019 - The operating system to build the decentralized Internet (slides)(FR) Capitole du libre 2018 - YunoHost: un des chemins vers la d√©centralisation - Bram (slides)(FR) Journ√©es du logiciel libre 2018 - YunoHost : vers l‚Äôauto-h√©bergement et au-del√† - Bram (slides)(FR) Ubuntu Party Novembre 2017 - De Framasoft √† YunoHost, r√©approprions nous le cloud (slides)(FR) Capitole du libre 2017 - YunoHost : vers l'auto-h√©bergement et au-del√† - JimboJoe (slides)(FR) PSES 2017 ‚Äì Construire l‚ÄôInternet du Futur avec YunoHost ‚Äì Aleks, ljf (slides)(FR) Universit√© de technologie de compi√®gne 2017 ‚Äì Agir pour un internet √©thique ‚Äì LJF(EN) FOSDEM¬†2017 ‚Äì Internet Cube ‚Äì kload(EN) FOSDEM¬†2017 ‚Äì YunoHost ‚Äì Bram(FR) Capitole du libre 2016 ‚Äì 1 an et ¬Ω de Brique Internet ‚Äì Bram(FR) PSES 2015 - La Brique Internet(FR) THSF 2015 ‚Äì beudbeud(FR) RMLL 2014 - H√©bergez-vous¬†! ‚Äì kload &amp; beudbeud(FR) Capitole du libre 2013 - L‚Äôauto-h√©bergement pour tous avec YunoHost - beudbeud(EN) FOSDEM 2013 ‚Äî kload  ","version":"Next","tagName":"h2"},{"title":"Articles / Press review‚Äã","type":1,"pageTitle":"Media","url":"/doc/pr-2675/fr/community/press_kit#articles--press-review","content":"       LinuxFr (french): YunoHost 2.0 : self hosting at click rangeInternet cube and YunoHost projects evolutions (FR) Linux Pratique n¬∞96 ‚Äì YunoHost, l‚Äôauto-h√©bergement √† port√©e de main ‚Äì juillet 2016(EN) Linux Magazine n¬∞208 ‚Äì YunoHost, Personal server for a private cloud ‚Äì Mars 2018(FR) Linux Pratique HS n¬∞ 044 f√©vrier 2019 - Le choix de l‚Äôauto-h√©bergement avec YunoHost : rencontre avec l‚Äô√©quipe du projet(FR) Duhaz.fr: Devenir votre propre h√©bergeur(FR) Faimaison.net: au revoir Google, bonjour libert√©!(FR) Tineternet.net: Reprendre la main sur ses donn√©es avec l'auto-h√©bergement(DE) YunoHost Serverinstallation auf Laptop(FR) Cenabumix: Retour d‚Äôexp√©rience YunoHost sur Raspberry(FR) Geber.ga: YunoHost, ou l'auto-h√©bergement √† port√©e de main...(EN) Nequalsonelifestyle.com: Self Hosting Without Self Owning(EN) Skysilk.com: How to Install YunoHost On a Debian VPS(FR) Alternativelibertaire.org: Auto-h√©bergement(ES) Sololinux.es: Instalar YunoHost en Debian 9 Stretch(FR) Bog.hugopoi.net: Le cloud maison  ","version":"Next","tagName":"h2"},{"title":"Past Events / Workshops‚Äã","type":1,"pageTitle":"Media","url":"/doc/pr-2675/fr/community/press_kit#past-events--workshops","content":" (FR) INFOTHEMA: Pr√©sentation de l‚Äôavanc√©e du projet YunoHost INFOTHEMA + Pr√©sentation du collectif CHATONS(FR) Normandie-libre.fr: H√©berger ses sites web √† la maison(FR) Viregul.fr: Auto-h√©bergement, pour un Internet d√©centralis√©(EN) 35C3: Hands-on introduction to self-Hosting with YunoHos(FR) Journ√©es du Logiciel Libre 2019: l'auto-h√©bergement avec YunoHost  ","version":"Next","tagName":"h2"},{"title":"YunoHost was cited in‚Äã","type":1,"pageTitle":"Media","url":"/doc/pr-2675/fr/community/press_kit#yunohost-was-cited-in","content":" EXPERIMENTA 2018 at 57.47 (depuis le site d'Experimenta)Capitole du libre 2017 - ¬´ Contributopia ¬ª, D√©googliser ne suffit pasContributopia - Essaimage (Framasoft)(FR) Triple A: √âmission Underscore #144 du 19 mai 2019 ","version":"Next","tagName":"h2"},{"title":"Budget pr√©visionnel pour 2019/2020","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/community/project_budget","content":"","keywords":"","version":"Next"},{"title":"Revenus attendus‚Äã","type":1,"pageTitle":"Budget pr√©visionnel pour 2019/2020","url":"/doc/pr-2675/fr/community/project_budget#revenus-attendus","content":" Dons via Liberapay : 3000 ‚Ç¨Subvention de NLNet : 20K ‚Ç¨  ","version":"Next","tagName":"h2"},{"title":"D√©penses pr√©vues‚Äã","type":1,"pageTitle":"Budget pr√©visionnel pour 2019/2020","url":"/doc/pr-2675/fr/community/project_budget#d√©penses-pr√©vues","content":" Developpement : 20K ‚Ç¨Location Serveur : ~500 ‚Ç¨ VPS Scaleway: 20.33*12: 243.96 ‚Ç¨/yearVPS Digital O. (forum): 172.80 ‚Ç¨/year Noms de domaine : ~150 ‚Ç¨ nohost.me : 11.99 ‚Ç¨HT/ansynh.fr : 6.99 ‚Ç¨HT/ans (doit √™tre confirm√© avec frju ?)noho.st : ~35 ‚Ç¨TTC/ansyunohost.org : 13.99 ‚Ç¨HT/ansyunohost.com : 9.99 ‚Ç¨HT/anslabriqueinter.net : 12.49 ‚Ç¨Ht/ansinternetcu.be : 17.99 ‚Ç¨HT/ans Communication : ~400 ‚Ç¨ Stickers : 100 ‚Ç¨Tracts : 100 ‚Ç¨T-shirt : 200 ‚Ç¨ D√©placements (ex. : aller aux conf√©rences) : ~700 ‚Ç¨ AG FFDN 2020 : 225 ‚Ç¨ (en tout)Event colibris : 150 ‚Ç¨FOSDEM ou autre conf : 300 ‚Ç¨ Compte bancaire fees : 7√ó12 ‚Ç¨ soit ~100 ‚Ç¨Brique Camp : 500 ‚Ç¨  Balance 2020-2021 : +650 ‚Ç¨ ","version":"Next","tagName":"h2"},{"title":"√âquipe s√©curit√©","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/community/security_team","content":"√âquipe s√©curit√© Contactez l'√©quipe s√©curit√© par email : security@yunohost.org. Nous vous recommandons fortement de chiffrer votre mail avec GPG. Notre cl√© publique est disponible sur les serveurs de cl√©s. L'empreinte est ci-dessous : gpg --fingerprint security@yunohost.org pub 4096R/17351899 2016-07-01 Empreinte de la clef = 6CBC 45EB A625 FBF3 513D 1227 749D 8972 1735 1899 uid YunoHost Security &lt;security@yunohost.org&gt; sub 4096R/446838AF 2016-07-01 Voyez a gist on Github pour d'autres empreintes de confiance","keywords":"","version":"Next"},{"title":"M√©c√®nes et partenaires","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/community/sponsors_partners","content":"M√©c√®nes et partenaires Afin d'avancer et de faire fonctionner le projet, en plus du travail des b√©n√©voles et des dons, YunoHost b√©n√©ficie du soutien de m√©c√®nes et de partenaires. Une liste des m√©c√®nes de YunoHost, fournissant l'infrastructure et des services aux projets : GITOYEN : association regroupant plusieurs entreprises et associations intervenant comme fournisseur d‚Äôinfrastructure d‚Äôh√©bergement et d‚Äôacc√®s √† Internet.GLOBENET : association militante, au service de la libert√© d‚Äôexpression, proposant des services Internet.LDN-NET : association pour la d√©fense d‚Äôun Internet libre, neutre et d√©centralis√© dont le moyen d‚Äôaction principale est d‚Äô√™tre un fournisseur d‚Äôacc√®s √† Internet (FAI) assocatif et local.NBS System: soci√©t√© sp√©cialis√©e dans l‚Äôh√©bergement, la s√©curisation des Clouds, l‚Äôinfog√©rance (Syst√®mes d‚Äôinformation, Applications SaaS, Plateformes web) et les services manag√©s.NLNET : La Fondation NLnet soutient les organisations et les personnes qui contribuent √† une soci√©t√© de l'information ouverte.TETANEUTRAL-NET : fournisseur d'acc√®s √† Internet associatif op√©rant actuellement un r√©seau radio sur Toulouse et ses environs et un h√©bergeur. Une liste des partenaires de YunoHost : FFDN : La f√©d√©ration FDN regroupe des fournisseurs d'acc√®s √† Internet associatifs se reconnaissant dans des valeurs communes : b√©n√©volat, solidarit√©, fonctionnement d√©mocratique et √† but non lucratif ; d√©fense et promotion de la neutralit√© du Net.Framasoft : association d‚Äô√©ducation populaire, un groupe d‚Äôami¬∑es convaincu¬∑es qu‚Äôun monde num√©rique √©mancipateur est possible, persuad√©¬∑es qu‚Äôil adviendra gr√¢ce √† des actions concr√®tes sur le terrain et en ligne avec vous et pour vous !","keywords":"","version":"Next"},{"title":"Project organisation ‚Üó","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/community/yunohost_project_organization","content":"Project organisation ‚Üó You will be redirected soon to the project organization repository on Github. If that doesn't work, please go to: https://github.com/YunoHost/project-organization","keywords":"","version":"Next"},{"title":"Contributing to YunoHost","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/","content":"","keywords":"","version":"Next"},{"title":"üì¢ Spread the word‚Äã","type":1,"pageTitle":"Contributing to YunoHost","url":"/doc/pr-2675/fr/dev/#-spread-the-word","content":" Talk about software freedom, self-hosting and YunoHost around you! &lt;3  ","version":"Next","tagName":"h2"},{"title":"üí∞ Donate‚Äã","type":1,"pageTitle":"Contributing to YunoHost","url":"/doc/pr-2675/fr/dev/#-donate","content":" YunoHost is a volunteer-driven, non-profit community project. Donations help us stay afloat and dedicate more time to the project. Checkout our donation page!  ","version":"Next","tagName":"h2"},{"title":"üõü Help others‚Äã","type":1,"pageTitle":"Contributing to YunoHost","url":"/doc/pr-2675/fr/dev/#-help-others","content":" Our support relies on contributors like you. Join the support chatroom to assist new users, or see if you can help someone on the forum!  ","version":"Next","tagName":"h2"},{"title":"üìù Improve documentation‚Äã","type":1,"pageTitle":"Contributing to YunoHost","url":"/doc/pr-2675/fr/dev/#-improve-documentation","content":" Great projects require great documentation! You can contribute to this documentation by improving existing pages or adding new ones!  ","version":"Next","tagName":"h2"},{"title":"üåê Translate‚Äã","type":1,"pageTitle":"Contributing to YunoHost","url":"/doc/pr-2675/fr/dev/#-translate","content":" Help make YunoHost accessible to more people by translating its interface into your language on our translation platform!  ","version":"Next","tagName":"h2"},{"title":"üí° Help us with design‚Äã","type":1,"pageTitle":"Contributing to YunoHost","url":"/doc/pr-2675/fr/dev/#-help-us-with-design","content":" As a tech project, it's easy for us to get caught up in the technical details and forget about making everything intuitive and accessible for non-tech-savvy users. If you have skills in communication, visual identity, design, UX, or just general feedback on the website, documentation, installation process, or everyday use of YunoHost, we‚Äôd love to hear from you! Gget in touch with us on the forum, the chat rooms or the issue tracker!  ","version":"Next","tagName":"h2"},{"title":"‚öóÔ∏è Participate in testings‚Äã","type":1,"pageTitle":"Contributing to YunoHost","url":"/doc/pr-2675/fr/dev/#Ô∏è--participate-in-testings","content":" We regularly need testers for new versions of YunoHost or app updates. Checkout the project announcements on the forum, or if there is a pending testing for your favourite apps on the packaging dashboard.  ","version":"Next","tagName":"h2"},{"title":"üè∑Ô∏è Refine the app catalog‚Äã","type":1,"pageTitle":"Contributing to YunoHost","url":"/doc/pr-2675/fr/dev/#Ô∏è-refine-the-app-catalog","content":" The app catalog is an important aspect of YunoHost. We always need help to improve the app catalog experience, for example ensuring that apps are in the appropriate category, with an appropriate logo and screenshot, that their description is relevant and accurate, that they do provide relevant information in the context of YunoHost, etc. Checkout for example this issue with guidelines on how to contribute on this. We're also open to feedback regarding how the whole design of the catalog could be improved!  ","version":"Next","tagName":"h2"},{"title":"üì¶ Package applications‚Äã","type":1,"pageTitle":"Contributing to YunoHost","url":"/doc/pr-2675/fr/dev/#-package-applications","content":" You can extend YunoHost capabilities by packaging new applications. Have a look at the current catalog, the packaging documentation, and join us on the app packaging chat room!  ","version":"Next","tagName":"h2"},{"title":"‚öôÔ∏è Develop‚Äã","type":1,"pageTitle":"Contributing to YunoHost","url":"/doc/pr-2675/fr/dev/#Ô∏è-develop","content":" YunoHost is built mainly using Python, Bash, and VueJS. Checkout the developer documentation, and join us on the development chat room! You can also look for good first issues on our issue tracker! ","version":"Next","tagName":"h2"},{"title":"‚öôÔ∏è Core development","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/core/","content":"","keywords":"","version":"Next"},{"title":"Contribution workflow‚Äã","type":1,"pageTitle":"‚öôÔ∏è Core development","url":"/doc/pr-2675/fr/dev/core/#contribution-workflow","content":" When you want to contribute your changes, you need to:  Fork the relevant(s) repo(s) on GitHubPush your changes to a new branch, with a well-chosen name, for example: For an enhancement or new feature: enh-ISSUENUMBER-name-of-featureFor a bugfix fix-ISSUENUMBER-description-of-fixISSUENUMBER is optional and is the id of a corresponding ticket on the bug tracker. Once you're ready, open a Pull Request (PR) on GitHub. Please include [fix] or[enh] at the beginning of the title of your PR. You can open a draft PR if you are expecting feedback / comments.After reviewing, testing and validation by other contributors, your branch should be merged in unstable! ","version":"Next","tagName":"h2"},{"title":"YunoHost architecture","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/core/architecture","content":"","keywords":"","version":"Next"},{"title":"Moulinette‚Äã","type":1,"pageTitle":"YunoHost architecture","url":"/doc/pr-2675/fr/dev/core/architecture#moulinette","content":" It is a small &quot;homemade&quot; framework. Its major roleis to allow us to build both a web API and a command-line API from the same Python code thanks to a YAML schema which we callthe actionmap.  It handles other mechanisms like authentication, internationalization and small technical utilitary functions (e.g. reading/writing JSON).  Moulinette has its own documentation available here.  ","version":"Next","tagName":"h2"},{"title":"YunoHost‚Äã","type":1,"pageTitle":"YunoHost architecture","url":"/doc/pr-2675/fr/dev/core/architecture#yunohost","content":" This piece is the very core of YunoHost. It contains:  The Python code that manages users, domains, apps, services and other thingsBash helpers mainly used by application packagers to package applicationsHooks and templates that are used to configure the various pieces of the ecosystem such as NGINX, Postfix...Internationalized stringsTests  ","version":"Next","tagName":"h2"},{"title":"SSOwat‚Äã","type":1,"pageTitle":"YunoHost architecture","url":"/doc/pr-2675/fr/dev/core/architecture#ssowat","content":" This is the single sign-on backend of YunoHost. It is based on Lua scripts that are directly interfaced with NGINX and handle all the &quot;technical&quot; aspects of authentication and route accesses.  SSOwat is configured through /etc/ssowat/conf.json which is generated by YunoHost.  ","version":"Next","tagName":"h2"},{"title":"YunoHost-portal‚Äã","type":1,"pageTitle":"YunoHost architecture","url":"/doc/pr-2675/fr/dev/core/architecture#yunohost-portal","content":" This is the web user portal used to log in and browse installed apps.  ","version":"Next","tagName":"h2"},{"title":"YunoHost-admin‚Äã","type":1,"pageTitle":"YunoHost architecture","url":"/doc/pr-2675/fr/dev/core/architecture#yunohost-admin","content":" It is an optional dependency of YunoHost and corresponds to an interface for the web API created by YunoHost and Moulinette (c.f. the yunohost-api service).  It essentially contains:  View templatesCorresponding JavaScript controllers that interact with the YunoHost APIInternationalized strings ","version":"Next","tagName":"h2"},{"title":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/community/terms_of_services","content":"","keywords":"","version":"Next"},{"title":"Pr√©ambule‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#pr√©ambule","content":" Le projet YunoHost est anim√© par une √©quipe de personnes b√©n√©voles qui ont fait cause commune pour cr√©er un syst√®me d'exploitation libre pour les serveurs, appel√© YunoHost. YunoHost est publi√© sous licence GNU Affero General Public License v3. En lien avec ce logiciel, le projet administre et met √† disposition plusieurs services techniques et communautaires √† des fins diverses.  En utilisant ces services, vous acceptez d‚Äô√™tre li√©¬∑e par les conditions suivantes.  ","version":"Next","tagName":"h2"},{"title":"Version courte (TL;DR)‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#version-courte-tldr","content":" Clause ¬´ Ceci est un projet communautaire ¬ª : vous acceptez et respectez le fait que le projet est maintenu par une √©quipe b√©n√©vole, et que le temps et l'√©nergie b√©n√©vole sont la force motrice du projet. Les contributions au projet sont les bienvenues, ponctuelles ou dans la dur√©e, par le moyen de votre choix (que ce soit en parler autour de vous, nous faire des retours constructifs, aider les autres, faire coucou, traduire, tester, coder, donner, ...).Clause ¬´ On fait ce qu'on peut ¬ª : vous acceptez que l'√©quipe b√©n√©vole fait du mieux qu'elle peut et n'est assujettie √† aucune obligation, ni de moyen, ni de r√©sultat. Le projet ne peut √™tre tenu pour responsable des dommages ou pr√©judices indirects si un service cesse de fonctionner. L'√©quipe peut d√©cider d'arr√™ter un service √† tout moment.Clause ¬´ On n'est pas un GAFAM ¬ª : nous essayons de minimiser le plus possible les donn√©es personnelles qui peuvent transiter, √™tre stock√©es sur notre infrastructure ou √™tre transf√©r√©e vers des tiers. Nous publions le code qui fait tourner nos services. Nous nous interdisons toute revente de donn√©es personnelles. Nous n'exploitons les donn√©es qu'√† des fin de statistiques internes et anonymis√©es.Clause ¬´ On n'aime pas les personnes toxiques ¬ª : vous devez respecter les autres membres de la communaut√© en faisant preuve de civisme, de politesse et bienveillance.Clause ¬´ Le logiciel libre, ce n'est pas des b√©n√©voles √† vos ordres ¬ª : les messages se contentant de demander quand une fonctionnalit√©, correctif ou mise √† jour sera disponible, volontairement ou involontairement insistants, sans aucune forme de politesse, de bienveillance ou d'intention de contribution, ne sont pas les bienvenus. Si vous souhaitez qu'un point en particulier soit trait√©, demandez-vous comment contribuer, ou a minima parlez-en avec bienveillance.Clause ¬´ On ne lit pas dans les boules de cristal ¬ª : le forum et chat d'entraide stipulent clairement que pour esp√©rer obtenir de l'aide, il est n√©cessaire de fournir les informations de base (type de mat√©riel, version de YunoHost), des √©l√©ments de contexte et les journaux complets. Ne pas le faire est extr√™mement aga√ßant pour les b√©n√©voles qui tentent de vous aider.Clause ¬´‚ÄØOn ne veut pas finir en taule‚ÄØ¬ª : vous devez respecter la loi (que celle-ci soit bien faite ou idiote).Clause ¬´‚ÄØTout abus sera puni‚ÄØ¬ª : abuser techniquement ou humainement des services peut entra√Æner la fermeture de vos comptes et l'interdiction de l'acc√®s √† une partie ou √† l'ensemble des services, possiblement sans avertissement ni n√©gociation.  ","version":"Next","tagName":"h2"},{"title":"Distinction entre YunoHost en tant que projet, en tant que services, en tant que logiciel, et en tant que distribution‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#distinction-entre-yunohost-en-tant-que-projet-en-tant-que-services-en-tant-que-logiciel-et-en-tant-que-distribution","content":" Ce document d√©taille les CGS qui s'appliquent aux services fournis par le projet YunoHost, mais pas √† YunoHost en tant que logiciel ni aux applications propos√©es dans le catalogue de YunoHost.  YunoHost en tant que logiciel est publi√© sous licence AGPLv3 et est donc fourni sans garantie d'aucune sorte et n'est pas responsable des dommages r√©sultant de son utilisation, ni de l'utilisation des applications qu'il permet d'installer.  Si vous utilisez YunoHost pour fournir des services √† d'autres personnes, il est de votre responsabilit√© de d√©finir et publier les conditions g√©n√©rales d'utilisation de votre souhait pour vos propres services √† l'attention de ces personnes, et de vous renseigner sur toutes les implications l√©gales des applications que vous installez.  ","version":"Next","tagName":"h2"},{"title":"√âvolution des conditions g√©n√©rales et sp√©cifiques de service‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#√©volution-des-conditions-g√©n√©rales-et-sp√©cifiques-de-service","content":" Le projet YunoHost se r√©serve le droit de mettre √† jour et modifier ces conditions. Dans ce cas, le projet YunoHost informe les personnes concern√©es par un affichage sur le forum ou √† d√©faut sur le site.  Un historique dat√© des versions de ces conditions peut √™tre retrouv√© ici  ","version":"Next","tagName":"h2"},{"title":"Vue d'ensemble des services‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#vue-densemble-des-services","content":" Les services administr√©s et maintenus par le projet sont, √† ce jour :  un site web public, destin√© √† pr√©senter le projet et √† fournir de la documentation ;l'h√©bergement de scripts d'installation, d'images, de paquets et de cl√©s cryptographiques li√©s √† l'installation et √† la mise √† jour de YunoHost ;un forum communautaire public, destin√© √† s'entraider et discuter des probl√®mes ou de tout autre sujet li√© au projet ;un catalogue d'application public pour permettre de pr√©senter et voter pour les applications disponibles, et une API permettant √† des programmes de r√©cup√©rer cette liste ;un service pastebin, destin√© √† partager facilement les logs et autres informations techniques ;un service de nom de domaine gratuit, destin√© √† r√©duire les frictions pour les personnes qui ne poss√®dent pas encore de nom de domaine ou qui souhaitent une solution simple et rapide dans le contexte de YunoHost ;des services d'auto-diagnostic utilis√©s par le logiciel YunoHost et destin√©s √† aider les utilisateurices √† diagnostiquer de mani√®re autonome les probl√®mes techniques ;un service de d√©monstration d'un serveur YunoHost en libre service ;d'autres services li√©s au d√©veloppement et √† la maintenance.  En outre, le projet d√©pend, utilise, ou encourage l'utilisation de services g√©r√©s par des tiers, tels que :  des briques logicielles et recettes d'installations automatiques (apps) h√©berg√©es chez des tiers tels que (liste non-exhaustive) github.com, npmjs.org, pypi.org, debian.org, sury.org, ‚Ä¶plusieurs salons de discussion communautaires publics utilisant les protocoles Matrix, XMPP et IRC, h√©berg√©s par des tiers tels que (liste non-exhaustive) matrix.org et libera.chat ;l'autorit√© de certification Let's Encrypt ;une interface de dons, dont les paiements sont g√©r√©s par Stripe et √† destination de Support Self-Hosting, l'association qui r√©colte et g√®re les dons. Le cas √©ch√©ant, il est de votre responsabilit√© de consulter les conditions d'utilisations de ces services g√©r√©s par des tiers.  ","version":"Next","tagName":"h2"},{"title":"Acc√®s aux services‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#acc√®s-aux-services","content":" ","version":"Next","tagName":"h2"},{"title":"P√©rim√®tre g√©ographique‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#p√©rim√®tre-g√©ographique","content":" Les services du projet YunoHost s‚Äôadressent √† l'ensemble des utilisateurices et contributeurices de YunoHost dans le monde tant que la r√©glementation de leur pays ne contrevient pas √† leur usage ou fourniture.  ","version":"Next","tagName":"h3"},{"title":"Permission d'utilisation des services‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#permission-dutilisation-des-services","content":" Sauf mentions contraires, l'usage des services du projet YunoHost est limit√© √† une utilisation dans le cadre attendu :  d√©couverte ou utilisation du syst√®me d'exploitation YunoHostcontribution au projet YunoHost  Tout autre usage (par exemple: utilisation dans une autre distribution, cr√©ation d'intelligence artificielle, etc.) doit √™tre pr√©alablement valid√© par le projet YunoHost, √† moins qu'il ne soit explicitement permis dans les conditions sp√©cifiques du service ci-dessous.  ","version":"Next","tagName":"h3"},{"title":"Services accessibles via un compte et r√©siliation‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#services-accessibles-via-un-compte-et-r√©siliation","content":" Les fonctionnalit√©s suivantes sont accessibles via un compte :  l'√©criture sur le forum ;le vote pour les applications du catalogue (sur apps.yunohost.org) ;la r√©servation et la gestion de noms de domaines dynamiques fournit par le projet YunoHost (nohost.me, noho.st et ynh.fr).  Le compte sur le forum et le compte g√©rant votre nom de domaine peuvent √™tre r√©sili√©s gr√¢ce aux identifiants associ√©s.  ","version":"Next","tagName":"h3"},{"title":"Fonctionnement‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#fonctionnement","content":" ","version":"Next","tagName":"h2"},{"title":"Conditions financi√®res‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#conditions-financi√®res","content":" L‚Äôensemble des services est fournie gratuitement. N‚Äôh√©sitez pas √† soutenir le projet YunoHost en faisant un don.  ","version":"Next","tagName":"h3"},{"title":"Intervention en cas de panne‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#intervention-en-cas-de-panne","content":" En cas de panne constat√©e, et si aucun message n‚Äôatteste sur le forum que le projet YunoHost est en train de corriger le dysfonctionnement, nous vous encourageons √† faire un signalement via le chat ou le forum.  Le projet YunoHost propose l‚Äôensemble de ces services gr√¢ce √† des b√©n√©voles qui feront de leur mieux pour r√©soudre les probl√®mes techniques qui pourraient subvenir. Les b√©n√©voles n'ont aucune obligation √† r√©parer un service cass√©.  En cas d‚Äôincapacit√© √† r√©soudre un probl√®me technique, le projet YunoHost pourra prendre la d√©cision de fermer le service.  ","version":"Next","tagName":"h3"},{"title":"Devenir des services‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#devenir-des-services","content":" Le projet YunoHost ne garanti pas que les services continueront √† fonctionner √©ternellement, et peut choisir d‚Äôarr√™ter des services si le projet estime ne plus √™tre en mesure de fournir lesdits services.  Si le collectif qui anime le projet YunoHost en a la possibilit√©, il fera de son mieux pour laisser un d√©lai suffisant pour permettre √† tout le monde de migrer ou de s'adapter sereinement.  ","version":"Next","tagName":"h3"},{"title":"Responsabilit√© du projet YunoHost‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#responsabilit√©-du-projet-yunohost","content":" En aucun cas, un ou une utilisatrice ne pourra se pr√©valoir de dommages ou indemnit√©s r√©sultant de probl√®mes techniques de quelque nature que ce soit.  Le projet YunoHost n'est assujetti √† aucune obligation (ni de moyen, ni de r√©sultat). En cas de d√©faillance ou d'arr√™t des services, le projet YunoHost ne peut √™tre tenu pour responsable des dommages indirects tels que pertes de donn√©es, pertes d‚Äôexploitation, pr√©judices commerciaux, perte de client√®le, de chiffre d‚Äôaffaires, de b√©n√©fices ou d‚Äô√©conomies pr√©vus, ou de tout autre pr√©judice indirect.  En particulier, le projet YunoHost ne pourra √™tre tenu responsable si vous avez fait d√©pendre de ses services des int√©r√™ts vitaux.  ","version":"Next","tagName":"h3"},{"title":"M√©susage des services‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#m√©susage-des-services","content":" Tout abus peut entra√Æner la fermeture de vos comptes et l'interdiction de l'acc√®s √† une partie ou √† l'ensemble des services.  Le projet se r√©serve le droit de mettre en place les mesures jug√©es n√©cessaires pour mettre fin aux abus constat√©s. Le projet YunoHost reste seul juge de cette notion ¬´‚ÄØd‚Äôabus‚ÄØ¬ª dans le but de fournir le meilleur service possible √† l‚Äôensemble des usagers et usag√®res. Le projet YunoHost pourra d√©cider d'agir sans avertissement ni n√©gociation.  ","version":"Next","tagName":"h2"},{"title":"Usage ill√©gal des services‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#usage-ill√©gal-des-services","content":" Le projet YunoHost n‚Äôest pas l√† pour vous couvrir et prendre des risques l√©gaux √† votre place. M√™me si votre action est l√©gitime, vous √™tes enti√®rement responsable de ce que vous faites.  Vous devez respecter les lois et r√©glementations en vigueur lors de l‚Äôusage des services propos√©s par le projet YunoHost (notamment sur le forum, les chats, le paste et le service de noms de domaines) que ce soit en mati√®re de respect de la vie priv√©e, d‚Äôenvoi de mails en grande quantit√©, de propri√©t√© intellectuelle, de propos discriminatoires, d‚Äôappel √† la haine, de harc√®lement, d‚Äôatteinte aux libert√©s fondamentales de personnes, etc.  En cas d‚Äôusage prohib√©, le projet YunoHost peut se trouver dans l‚Äôobligation de d√©clencher la suspension totale ou partielle du service, le retrait de contenu, ou toute autre mesure que les lois et r√©glementations lui imposent.  ","version":"Next","tagName":"h3"},{"title":"Respect de la communaut√© et des b√©n√©voles‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#respect-de-la-communaut√©-et-des-b√©n√©voles","content":" Vous acceptez et respectez le fait que le projet YunoHost est un projet communautaire maintenu par une √©quipe b√©n√©vole, et que le temps et l'√©nergie b√©n√©vole sont la force motrice du projet. Vous comprenez que les b√©n√©voles du projet font de leur mieux, et qu'abuser de leur temps ou de leur √©nergie √©quivaut √† saboter le projet.  Vous devez respecter les autres utilisateurices et l'√©quipe du projet en faisant preuve de civisme, de politesse et bienveillance. Toute forme de pression, insistance, harc√®lement ou toxicit√© est prohib√©e. Le projet YunoHost se r√©serve le droit de vous bannir et de supprimer tout contenu paraissant non pertinent ou contrevenant √† ces principes, selon son seul jugement et sans qu'un avertissement pr√©alable ne soit n√©cessaire.  En particulier, le projet YunoHost sera intransigeant d√®s lors que votre comportement consommera trop d'√©nergie des contributeur‚ãÖices r√©gulier‚ãÖes du projet.  ","version":"Next","tagName":"h3"},{"title":"Utilisation raisonnable‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#utilisation-raisonnable","content":" Les services et ressources √©tant partag√©es avec le reste des utilisateurices, leur utilisation doit √™tre raisonnable et prendre en compte l'aspect mutualis√©.  Si vous abusez du service, par exemple en monopolisant des ressources machines partag√©es, son contenu ou son acc√®s pourra √™tre supprim√©.  ","version":"Next","tagName":"h3"},{"title":"Nos engagements‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#nos-engagements","content":" ","version":"Next","tagName":"h2"},{"title":"Charte CHATONS‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#charte-chatons","content":" Le projet YunoHost vise √† long-terme √† respecter la charte du Collectif des H√©bergeurs, Alternatifs, Transparents, Ouverts, Neutres et Solidaires dans le cadre de son activit√© de fourniture de services.  Compte tenu de sa port√©e internationale, le projet YunoHost n'est pas, √† ce jour, candidat √† l‚Äôint√©gration au sein de ce collectif. Toutefois √† ce jour des membres du collectif C.H.A.T.O.N.S utilisent YunoHost.  Plus d‚Äôinformation sur la charte C.H.A.T.O.N.S..  ","version":"Next","tagName":"h3"},{"title":"Respect de vos donn√©es personnelles et de votre vie priv√©e‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#respect-de-vos-donn√©es-personnelles-et-de-votre-vie-priv√©e","content":" Nous essayons de minimiser le plus possible les donn√©es personnelles qui peuvent transiter, √™tre stock√©es sur notre infrastructure ou √™tre transf√©r√©e vers des tiers.  Le projet YunoHost s'interdit toute revente ou transfert de donn√©es personnelles √† des tiers.  Ci-dessous, le d√©tail des informations personnelles susceptibles de transiter ou d'√™tre stock√©es sur les services du projet YunoHost:  informations techniques (IP, User agent) utilis√©es pour interagir avec les services. Elles sont utilis√©es dans le but de fournir le service, d'en assurer la maintenance et la s√©curit√© et de cr√©er des statistiques agr√©g√©es tr√®s basiques ;email et pseudonyme utilis√©s sur le forum ;informations personnelles figurant dans les messages √©chang√©es via le forum ou le chat ;informations personnelles incluses dans les noms de domaines fournit par le projet ;informations figurant dans des logs que vous avez partag√©s via l'outil d√©di√© ;informations bancaires et personnelles dans le cadre d'un don via Stripe ou Liberapay.  Sauf mentions contraires dans les conditions sp√©cifiques, ces donn√©es se trouvent √† Paris, Strasbourg et Toulouse.  Pour plus d'informations, se r√©f√©rer aux conditions sp√©cifiques de services.  ","version":"Next","tagName":"h3"},{"title":"Exercice de vos droits‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#exercice-de-vos-droits","content":" Conform√©ment √† l‚Äôarticle 34 de la loi ¬´ Informatique et Libert√©s ¬ª, vous pouvez exercer les droits suivant en envoyant un mail √† data CHEZ yunohost.org :  droits d‚Äôacc√®s, de rectification, d‚Äôeffacement et d‚Äôopposition ;droit √† la limitation du traitement ;droit √† la portabilit√© des donn√©es ;droit de ne pas faire l‚Äôobjet d‚Äôune d√©cision individuelle automatis√©e.  ","version":"Next","tagName":"h3"},{"title":"R√®glement g√©n√©ral sur la protection des donn√©e (RGPD)‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#r√®glement-g√©n√©ral-sur-la-protection-des-donn√©e-rgpd","content":" Le projet YunoHost s‚Äôengage, vis √† vis des services qu'il met √† disposition, √† respecter la r√©glementation en vigueur applicable au traitement de donn√©es √† caract√®re personnel et, en particulier, le r√®glement (UE) 2016/679 du Parlement europ√©en et du Conseil du 27 avril 2016 applicable √† compter du 25 mai 2018, dite RGPD.  N√©anmoins ceci ne signifie en aucun cas que le logiciel YunoHost, ni les applications propos√©es √† l'installation, seraient certifi√©s avec une quelconque conformit√© au RGPD (quoi que cela puisse signifier pour vous).  ","version":"Next","tagName":"h3"},{"title":"Litige et juridiction comp√©tente‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#litige-et-juridiction-comp√©tente","content":" Le droit applicable aux pr√©sentes est le droit fran√ßais. En cas de diff√©rend, les parties recherchent une solution amiable. Si la d√©marche √©choue, le litige sera tranch√© par le Tribunal de Grande Instance de Toulouse (FRANCE).  Le fait que l‚Äôusager ou le projet YunoHost ne se pr√©vale pas √† un moment donn√© de l‚Äôune des pr√©sentes conditions g√©n√©rales et/ou tol√®re un manquement par l‚Äôautre partie ne peut √™tre interpr√©t√© comme valant renonciation par l‚Äôusager ou le projet YunoHost √† se pr√©valoir ult√©rieurement de ces conditions.  La nullit√© d‚Äôune des clauses de ces conditions en application d‚Äôune loi, d‚Äôune r√©glementation ou d‚Äôune d√©cision de justice n‚Äôimplique pas la nullit√© de l‚Äôensemble des autres clauses. Par ailleurs l‚Äôesprit g√©n√©ral de la clause sera √† conserver en accord avec le droit applicable.    ","version":"Next","tagName":"h2"},{"title":"Conditions Sp√©cifiques de Services‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#conditions-sp√©cifiques-de-services","content":" ","version":"Next","tagName":"h2"},{"title":"Site web et documentation‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#site-web-et-documentation","content":" Adresse du service‚Äã  yunohost.org  Contribution‚Äã  Si vous rep√©rez une erreur, n'h√©sitez pas √† proposer une correction, via le bouton &quot;√âditer&quot; (n√©cessite un compte GitHub) ou via un message sur le forum.  Donn√©es personnelles‚Äã  A notre connaissance, aucune page de ce site web ne comporte de traqueurs.  Comme n'importe quel service web, un journal technique existe enregistrant l'IP et le User Agent des requ√™tes.  ","version":"Next","tagName":"h3"},{"title":"Dons‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#dons","content":" Adresse du service‚Äã  donate.yunohost.org  Arr√™t d'un don r√©curent‚Äã  Pour demander l'arr√™t de votre don r√©current, merci d'envoyer un mail √† donate-5542 CHEZ yunohost.org et d'indiquer les informations qui permettront d'identifier votre don (email utilis√©, nom, montant).  Donn√©es personnelles‚Äã  Pour fournir ce service, l'association Support Self-Hosting utilise Stripe comme infrastructure de paiement.  Il est n√©cessaire d'utiliser une carte bancaire ainsi que de son identit√©, mais ces donn√©es ne sont pas stock√©es, ni m√™me ne transite, par l'infrastructure du projet YunoHost, sauf dans les mails √©chang√©s dans le cadre d'une r√©siliation de don r√©curent.  Comme n'importe quel service web, un journal technique existe enregistrant l'IP et le User Agent des requ√™tes.  ","version":"Next","tagName":"h3"},{"title":"Supports d'installations (image ISO, ARM, script d'installation, ...)‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#supports-dinstallations-image-iso-arm-script-dinstallation-","content":" Vous utilisez ce service dans 2 situations:  installation ou restauration de YunoHost ;(plus rare) installation, mise √† jour, ou restauration d'une app dont le binaire n'est pas fournis par son √©diteur et dont sa compilation sur votre propre machine est jug√©e trop longue ou trop co√ªteuse en ressources.  Adresse du service‚Äã  repo.yunohost.org  Donn√©es personnelles‚Äã  Comme n'importe quel service web, un journal technique existe enregistrant l'IP et le User Agent des requ√™tes.  ","version":"Next","tagName":"h3"},{"title":"IP‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#ip","content":" Ce service est utilis√© automatiquement par vos instances YunoHost pour d√©terminer leurs IP publiques et permettre ainsi l'automatisation et le diagnostique de certaines op√©rations.  Adresses des services‚Äã  ip.yunohost.org et ip6.yunohost.org  Service en libre acc√®s‚Äã  Exceptionnellement, le service de r√©cup√©ration d'IP publiques peut √™tre utilis√© dans d'autres cadres tant que la charge induite est minime relativement √† celle de YunoHost.  Donn√©es personnelles‚Äã  Comme n'importe quel service web, un journal technique existe enregistrant l'IP et le User Agent des requ√™tes.  ","version":"Next","tagName":"h3"},{"title":"Noms de domaines gratuits et dynamiques‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#noms-de-domaines-gratuits-et-dynamiques","content":" Il s'agit du service utilis√© si vous demandez un nom de domaine terminant par nohost.me, noho.st ou ynh.fr dans l'interface de YunoHost.  Adresses des services‚Äã  dyndns.yunohost.org, dynette.yunohost.org, ns0.yunohost.org, ns1.yunohost.org  Limite d'usage‚Äã  Ce service est propos√© dans la limite d'un seul domaine par serveur YunoHost (bien qu'il soit possible de configurer des sous-domaine de ce domaine). Si des abus sont constat√©s (par exemple cr√©ation de trop nombreux domaines depuis la m√™me machine ou IP, ou cr√©ation automatis√©e √† large √©chelle), le projet se r√©serve le droit de supprimer les domaines concern√©s sans pr√©venir.  Suppression automatique‚Äã  Le projet YunoHost se r√©serve le droit de supprimer le domaine si aucun serveur ne semble y √™tre associ√© et que l'adresse IP n'a pas √©t√© mise √† jour depuis 1 an.  R√©siliation‚Äã  Vous pouvez supprimer votre domaine √† l'aide du mot de passe choisi lors de sa cr√©ation.  Donn√©es personnelles‚Äã  Si votre nom contient des donn√©es personnelles, celles-ci se retrouveront forc√©ment sur les serveurs faisant fonctionner le service.  Notez que, pour fonctionner, ce service stocke et transmet n√©cessairement les adresses IP publiques de votre serveur.  Comme n'importe quel service web, un journal technique existe enregistrant l'IP et le User Agent des requ√™tes.  ","version":"Next","tagName":"h3"},{"title":"Diagnostique‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#diagnostique","content":" Il s'agit d'un service permettant de tester automatiquement si vos services semblent correctement expos√©s sur internet et ainsi r√©soudre en autonomie les probl√®mes li√©s √† la configuration r√©seau.  Ce service est utilis√© automatiquement deux fois par jour, d√®s lors que vous activez la fonctionnalit√© de diagnostique.  Adresse du service‚Äã  diagnosis.yunohost.org  Limite d'usage‚Äã  En raison de la consommation de ressources induites, le service de diagnostique est limit√©s √† 60 domaines √† diagnostiquer par requ√™tes.  Si vous d√©passez cette limite, le projet recommande de diagnostiquer le bon fonctionnement de vos domaines par vos propres moyens.  Donn√©es personnelles‚Äã  Pour fonctionner ce service transmet les noms de domaines et les ports √† diagnostiquer. Toute donn√©e personnelle figurant dans les noms de domaines est donc transf√©r√©e √©galement, mais n'est pas conserv√©e.  Comme n'importe quel service web, un journal technique existe enregistrant l'IP et le User Agent des requ√™tes.  ","version":"Next","tagName":"h3"},{"title":"Catalogue d'applications‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#catalogue-dapplications","content":" Ce service permet de consulter (via un navigateur ou un programme) la liste des applications disponibles √† l'installation dans YunoHost. Il permet √©galement de voter pour les apps afin d'orienter les efforts de contribution.  De plus, les serveurs fonctionnant sous YunoHost r√©cup√®rent automatiquement le catalogue d'application une fois par jour.  Adresses du service‚Äã  apps.yunohost.org et app.yunohost.org  M√©susage des services‚Äã  Toute tentative de falsifier les votes sur les apps du catalogue ou de la liste de souhaits sera consid√©r√© comme un abus et peut faire l'objet d'annulation, de bannissement et de suppression de compte.  Donn√©es personnelles‚Äã  Pour participer √† la popularit√© des apps, il est n√©cessaire d'utiliser son compte sur le forum. Voir le service Forum.  Le stockage de vos votes est li√© √† votre identit√© sur le forum.  Comme n'importe quel service web, un journal technique existe enregistrant l'IP et le User Agent des requ√™tes.  Statistiques‚Äã  Afin de dimensionner nos services et planifier les nouvelles versions, nous utilisons le logs techniques de t√©l√©chargement de la liste des apps pour estimer le nombre d'instances YunoHost en fonctionnement dans la nature, et le ratio des versions majeures.  ","version":"Next","tagName":"h3"},{"title":"D√©p√¥t de paquet Debian‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#d√©p√¥t-de-paquet-debian","content":" Il s'agit du canal par lequel les mises √† jour de YunoHost en tant que logiciel sont mises √† disposition. Le projet YunoHost maintient √©galement des &quot;builds&quot; de certaines briques logicielles dont YunoHost d√©pends ou √† la p√©riph√©rie du projet.  Adresse du service‚Äã  forge.yunohost.org  Autorisation de cr√©er des d√©p√¥ts miroirs‚Äã  Il est autoris√© (et m√™me encourag√©) de cr√©er des d√©p√¥ts miroirs du d√©p√¥t de paquet Debian de YunoHost.  Donn√©es personnelles‚Äã  Comme n'importe quel service web, un journal technique existe enregistrant l'IP et le User Agent des requ√™tes.  ","version":"Next","tagName":"h3"},{"title":"Tickets et contributions au code‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#tickets-et-contributions-au-code","content":" En l'√©tat, le d√©veloppement, les rapports de bug et les demandes de fonctionnalit√©s s'effectuent sur les d√©p√¥ts des organisations &quot;YunoHost&quot; et &quot;YunoHost-Apps&quot; sur la plateforme GitHub.  Respect des b√©n√©voles‚Äã  Nous ne pouvons que r√©-insister sur ce qui est d√©j√† mentionn√© dans la section 'Respect de la communaut√© et des b√©n√©voles' plus haut : le projet est maintenu par une √©quipe b√©n√©vole, le temps et l'√©nergie b√©n√©vole est la force motrice du projet, et les b√©n√©voles font de leur mieux. Vous √™tes les bienvenues pour contribuer au projet (et le cas √©ch√©ant √† poser des questions sur comment contribuer) √† l'√©quipe.  En revanche, abuser de leur temps ou de leur √©nergie √©quivaut √† saboter le projet. En particulier, YunoHost n'est pas une communaut√© de b√©n√©voles √† vos ordres sur les priorit√©s de correctifs, fonctionnalit√©s ou mises √† jour, ni pour YunoHost en tant que logiciel, ni pour le catalogue d'applications maintenues par le projet. Les b√©n√©voles ne promettent ni support, ni correctifs, ni fonctionnalit√©s, ni mise √† jour, et ne fournissent pas non plus d'estimation sur &quot;quand&quot; une fonctionnalit√©, correctif ou mise √† jour sera disponible. Les messages se contentant de demander quand une fonctionnalit√©, correctif ou mise √† jour sera disponible, sans aucune forme de politesse, de bienveillance ou d'intention de contribution, ne sont pas les bienvenus et sapent le moral des b√©n√©voles. Tout abus pourra √™tre sanctionn√© par un bannissement des organisations GitHub du projet, voir de l'enti√®ret√© des services du projet.  ","version":"Next","tagName":"h3"},{"title":"Paste‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#paste","content":" Ce service sert √† partager les journaux des op√©rations r√©alis√©es avec YunoHost pour permettre l'√©tude et la r√©solution des probl√®mes.  Adresse du service‚Äã  paste.yunohost.org  Donn√©es personnelles‚Äã  Les logs que vous partagez sont susceptible de contenir des informations personnelles ou, dans le pire des cas, des secrets qui peuvent compromettre la s√©curit√© d'une partie ou de l'enti√®ret√© de votre serveur. Lors de la publication, le logiciel YunoHost essaie de retirer automatiquement et du mieux qu'il peut ces informations. N√©anmoins, le syst√®me est loin d'√™tre parfait, et il est de votre responsabilit√© de relire les informations avant de partager le lien g√©n√©r√© avec d'autres personnes.  Comme n'importe quel service web, un journal technique existe enregistrant l'IP et le User Agent des requ√™tes.  ","version":"Next","tagName":"h3"},{"title":"Forum (et chat) d'entraide‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#forum-et-chat-dentraide","content":" Adresse du service‚Äã  forum.yunohost.org et chats list√©s dans la documentation  Demander de l'aide‚Äã  Le forum et chat d'entraide stipulent clairement (par exemple ici, ici et ici) que pour esp√©rer obtenir de l'aide, il est n√©cessaire de fournir les informations de base (type de mat√©riel, version de YunoHost), des √©l√©ments de contexte et les journaux complets. Ne pas le faire est extr√™mement aga√ßant pour les personnes qui tentent de vous aider, d'autant plus que nous nous effor√ßons de simplifier au maximum le partage de ces informations. De plus c'est contre-productif car cela fait perdre du temps √† tout le monde : on ne peux pas r√©soudre un probl√®me qu'on ne peut diagnostiquer.  Si ces r√®gles ne sont pas respect√©es, l'√©quipe se r√©serve le droit de fermer votre sujet sans pr√©avis.  Donn√©es personnelles‚Äã  Le forum permet d'indiquer des informations personnelles (email, compte GitHub, pseudo). √Ä partir de l'interface du forum, vous avez la main pour modifier et supprimer ces donn√©es.  Comme n'importe quel service web, un journal technique existe enregistrant l'IP et le User Agent des requ√™tes. De plus, le forum est susceptible d'envoyer ou recevoir des emails, qui sont √©galement journalis√©s.  Localisation des donn√©es‚Äã  Paris  ","version":"Next","tagName":"h3"},{"title":"Service de d√©monstration‚Äã","type":1,"pageTitle":"Conditions G√©n√©rales et sp√©cifiques des Services op√©r√©s par le projet YunoHost","url":"/doc/pr-2675/fr/community/terms_of_services#service-de-d√©monstration","content":" Adresse du service‚Äã  demo.yunohost.org  Objectif et fonctionnement‚Äã  Ce service permet de tester les interfaces de YunoHost (webadmin et portail utilisateur) pour d√©couvrir et se faire une id√©e de YunoHost sans l'installer. Les donn√©es de ce serveur sont d√©truites et r√©initialis√©es toutes les 30 minutes environ.  Donn√©es personnelles‚Äã  Comme n'importe quel service web, un journal technique existe enregistrant l'IP et le User Agent des requ√™tes. ","version":"Next","tagName":"h3"},{"title":"How is used the main domain","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/core/maindomain","content":"How is used the main domain Here is a list of situations in which we use the main domain concept: to expose the web portal: currently the web portal is only reachable through the main domain address (could be changed for multi tenant support in future)to define the hostname of the machine: we believe we do this to avoid some sudo errors (may be it's not relvant anymore or could be made in /etc/hosts)to TLS encrypt SMTP and dovecot: so user should define the main domain in their email client to avoid TLS warningTo be able to do mail forwarding using the main domain as Sender Rewriting Scheme Domainto define default email as (root@ abuse@) but we probably should do it on all parent domain insteadto define myhostname in postfix config, used as EHLO and reverseDNS (refering to MX Toolbox test it should be a FQDN, so a subdomain)to generate the self-signed Local Authority: having just one allow to upload it in a browser and get an x509 authenticated https connexion.to define default xmpp DNS field: dns field are only set on the main domain by default Finally we can imagine some apps use the main domain too, see Refs to main_domain in the YunoHost-Apps codeRefs to current_host in the YunoHost-Apps code","keywords":"","version":"Next"},{"title":"Development environment","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/core/devenv","content":"","keywords":"","version":"Next"},{"title":"Incus‚Äã","type":1,"pageTitle":"Development environment","url":"/doc/pr-2675/fr/dev/core/devenv#incus","content":" The recommended testing and development environment is based on Incus, a system container manager.  Its usage is very similar to Docker and Podman, but its main difference is its ability to run full operating systems, with their own network interfaces and init system. There is no virtualization here.  The YunoHost project provides Incus images on the Incus repository.  For each Debian release and for each branch (stable, testing, unstable) are provided multiple images:  before-install: tools and dependencies are installed but not Yunohostdev: YunoHost is installed but the post-install step was not runappci: YunoHost is installed, post-install was run and you can install appscore-tests: YunoHost is installed and post-installed, and development and testing tools are installed.  The appci and core-tests images are used by the project's testing infrastructure.  The Incus images are built by our incus_builder tool, but not automatically, so please feel free to ask us to regenerate images.  ","version":"Next","tagName":"h2"},{"title":"Install and configure Incus‚Äã","type":1,"pageTitle":"Development environment","url":"/doc/pr-2675/fr/dev/core/devenv#install-and-configure-incus","content":" Incus can be installed on Debian with:  apt install incus   Then you need to add users to the incus-admin group:  sudo usermod -a -G incus-admin $(whoami) newgrp incus-admin   and initialize Incus:  incus admin init   You will want to add the YunoHost repository (do NOT run this as root but as your user):  incus remote add yunohost https://repo.yunohost.org/incus --protocol simplestreams --public   and to download an image:  incus image copy yunohost:yunohost/bookworm-stable/dev local: --copy-aliases --auto-update   ","version":"Next","tagName":"h3"},{"title":"Install a custom YunoHost version‚Äã","type":1,"pageTitle":"Development environment","url":"/doc/pr-2675/fr/dev/core/devenv#install-a-custom-yunohost-version","content":" When testing an unreleased YunoHost version, or installation script, you might want to run the installation script from its Git repository on a freshly installed Debian.  For example to install the unreleased Debian 13 Trixie version:  curl https://raw.githubusercontent.com/YunoHost/install_script/main/trixie | bash   You might also want to pass arguments to the script:  curl https://raw.githubusercontent.com/YunoHost/install_script/main/trixie | bash -s -- -d unstable   ","version":"Next","tagName":"h2"},{"title":"ynh-dev‚Äã","type":1,"pageTitle":"Development environment","url":"/doc/pr-2675/fr/dev/core/devenv#ynh-dev","content":" ynh-dev is the recommended tool that automates:  downloading Incus imagesdownload YunoHost's projects source codeInstall and symlink YunoHost stuff inside the container  That way, you will be able to edit files, test your changes in real time, commit and push/pull your changes directly from your development environment.  Please see the ynh-dev README for installation and usage instructions. ","version":"Next","tagName":"h2"},{"title":"Technical details for config panel structure and form option types","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/core/forms","content":"","keywords":"","version":"Next"},{"title":"Glossary‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#glossary","content":" You may encounter some named types which are used for simplicity.  Translation: a translated property used for properties: ask, help and Pattern.error a dict with locales as keys and translations as values: ask.en = &quot;The text in english&quot; ask.fr = &quot;Le texte en fran√ßais&quot; It is not currently possible for translators to translate those string in weblate. a single str for a single english default string help = &quot;The text in english&quot; JSExpression: a str JS expression to be evaluated to true or false: used for properties: visible and enabledoperators availables: ==, !=, &gt;, &gt;=, &lt;, &lt;=, !, &amp;&amp;, ||, +, -, *, /, % and match() Binding: bind a value to a file/property/variable/getter/setter/validator save the value in settings.yaml when not definednothing at all with &quot;null&quot;a custom getter/setter/validator with &quot;null&quot; + a function starting with get__, set__, validate__ in scripts/configa variable/property in a file with :__FINALPATH__/my_file.phpa whole file with __FINALPATH__/my_file.php Pattern: a dict with a regex to match the value against and an error message pattern.regexp = '^[A-F]\\d\\d$' pattern.error = &quot;Provide a room number such as F12: one uppercase and 2 numbers&quot; # or with translated error pattern.error.en = &quot;Provide a room number such as F12: one uppercase and 2 numbers&quot; pattern.error.fr = &quot;Entrez un num√©ro de salle comme F12: une lettre majuscule et deux chiffres.&quot; IMPORTANT: your pattern.regexp should be between simple quote, not double.  ","version":"Next","tagName":"h2"},{"title":"Configuration panel structure‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#configuration-panel-structure","content":" ","version":"Next","tagName":"h2"},{"title":"ConfigPanel‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#configpanel","content":" This is the 'root' level of the config panel toml file  Examples‚Äã  version = 1.0 [config] # ‚Ä¶refer to Panels doc   Properties‚Äã  version: float (default: 1.0), version that the config panel supports in terms of features.i18n (optional): str, an i18n property that let you internationalize options text. However this feature is only available in core configuration panel (like yunohost domain config), prefer the use Translation in name, help, etc.    ","version":"Next","tagName":"h3"},{"title":"Panel‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#panel","content":" Panels are, basically, sections grouped together. Panels are dicts defined inside a ConfigPanel file and require a unique id (in the below example, the id is main). Keep in mind that this id will be used in CLI to refer to the panel, so choose something short and meaningfull.  Examples‚Äã  [main] name.en = &quot;Main configuration&quot; name.fr = &quot;Configuration principale&quot; help = &quot;&quot; services = [&quot;__APP__&quot;, &quot;nginx&quot;] [main.customization] # ‚Ä¶refer to Sections doc   Properties‚Äã  name: Translation or str, displayed as the panel titlehelp (optional): Translation or str, text to display before the first sectionservices (optional): list of services names to reload-or-restart when any option's value contained in the panel changes &quot;__APP__ will refer to the app instance name actions: FIXME not sure what this does    ","version":"Next","tagName":"h3"},{"title":"Section‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#section","content":" Sections are, basically, options grouped together. Sections are dicts defined inside a Panel and require a unique id (in the below example, the id is customization prepended by the panel's id main). Keep in mind that this combined id will be used in CLI to refer to the section, so choose something short and meaningfull. Also make sure to not make a typo in the panel id, which would implicitly create an other entire panel.  If at least one button is present it then become an action section. Options in action sections are not considered settings and therefor are not saved, they are more like parameters that exists only during the execution of an action. FIXME i'm not sure we have this in code.  Examples‚Äã  [main] [main.customization] name.en = &quot;Advanced configuration&quot; name.fr = &quot;Configuration avanc√©e&quot; help = &quot;Every form items in this section are not saved.&quot; services = [&quot;__APP__&quot;, &quot;nginx&quot;] [main.customization.option_id] type = &quot;string&quot; # ‚Ä¶refer to Options doc   Properties‚Äã  name (optional): Translation or str, displayed as the section's title if anyhelp: Translation or str, text to display before the first optionservices (optional): list of services names to reload-or-restart when any option's value contained in the section changes &quot;__APP__ will refer to the app instance name optional: bool (default: true), set the default optional prop of all Options in the sectionvisible: bool or JSExpression (default: true), allow to conditionally display a section depending on user's answers to previous questions. Be careful that the visible property should only refer to previous options's value. Hence, it should not make sense to have a visible property on the very first section.    ","version":"Next","tagName":"h3"},{"title":"List of all option types‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#list-of-all-option-types","content":" ","version":"Next","tagName":"h2"},{"title":"Common properties‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#common-properties","content":" Options are fields declaration that renders as form items, button, alert or text in the web-admin and printed or prompted in CLI. They are used in app manifests to declare the before installation form and in config panels.  Have a look at the app config panel doc for details about Panels and Sections.  ! IMPORTANT: as for Panels and Sections you have to choose an id, but this one should be unique in all this document, even if the question is in an other panel.  Example‚Äã  [section.my_option_id] type = &quot;string&quot; # ask as `str` ask = &quot;The text in english&quot; # ask as `dict` ask.en = &quot;The text in english&quot; ask.fr = &quot;Le texte en fran√ßais&quot; # advanced props visible = &quot;my_other_option_id != 'success'&quot; readonly = true # much advanced: config panel only? bind = &quot;null&quot;   Properties‚Äã  type: the actual type of the option, such as 'markdown', 'password', 'number', 'email', ...ask: Translation (default to the option's id if not defined): text to display as the option's label for inputs or text to display for readonly optionsin config panels, questions are displayed on the left side and therefore have not much space to be rendered. Therefore, it is better to use a short question, and use the help property to provide additional details if necessary. visible (optional): bool or JSExpression (default: true) define if the option is diplayed/askedif false and used alongside readonly = true, you get a context only value that can still be used in JSExpressions readonly (optional): bool (default: false, forced to true for readonly types): If true for input types: forbid mutation of its value bind (optional): Binding, config panels only! A powerful feature that let you configure how and where the setting will be read, validated and written if not specified, the value will be read/written in the app settings.ymlif &quot;null&quot;: the value will not be stored at all (can still be used in context evaluations)if in scripts/config there's a function named: get__my_option_id: the value will be gathered from this custom getterset__my_option_id: the value will be passed to this custom setter where you can do whatever you want with the valuevalidate__my_option_id: the value will be passed to this custom validator before any custom setter if bind is a file path: if the path starts with :, the value be saved as its id's variable/property counterpart this only works for first level variables/properties and simple types (no array) else the value will be stored as the whole content of the fileyou can use __FINALPATH__ or __INSTALL_DIR__ in your path to point to dynamic install paths FIXME are other global variables accessible? refer to bind doc for explaination and examples    ","version":"Next","tagName":"h3"},{"title":"Common inputs properties‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#common-inputs-properties","content":" Rest of the option types available are considered inputs.  Example‚Äã  [section.my_option_id] type = &quot;string&quot; # ‚Ä¶any common props‚Ä¶ + optional = false redact = false default = &quot;some default string&quot; help = &quot;You can enter almost anything!&quot; example = &quot;an example string&quot; placeholder = &quot;write something‚Ä¶&quot;   Properties‚Äã  common propertiesoptional: bool (default: false, but true in config panels)redact: bool (default: false), to redact the value in the logs when the value contain private informationdefault: depends on type, the default value to assign to the option in case of readonly values, you can use this default to assign a value (or return a dynamic default from a custom getter) help (optional): Translation, to display a short help message in cli and web-adminexample (optional): str, to display an example value in web-admin onlyplaceholder (optional): str, shown in the web-admin fields only    ","version":"Next","tagName":"h3"},{"title":"markdown (readonly)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#markdown-readonly","content":" Display markdown multi-line content. Markdown is currently only rendered in the web-admin  Example‚Äã  [section.my_option_id] type = &quot;display_text&quot; ask = &quot;Text **rendered** in markdown.&quot;   Properties‚Äã  common properties    ","version":"Next","tagName":"h3"},{"title":"alert (readonly)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#alert-readonly","content":" Alerts displays a important message with a level of severity. You can use markdown in ask but will only be rendered in the web-admin.  Example‚Äã  [section.my_option_id] type = &quot;alert&quot; ask = &quot;The configuration seems to be manually modified...&quot; style = &quot;warning&quot; icon = &quot;warning&quot;   Properties‚Äã  common propertiesstyle: any of &quot;success|info|warning|danger&quot; (default: &quot;info&quot;)icon (optional): any icon name from Fork Awesome Currently only displayed in the web-admin    ","version":"Next","tagName":"h3"},{"title":"button (readonly)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#button-readonly","content":" Triggers actions. Available only in config panels. Renders as a button in the web-admin and can be called with yunohost [app|domain|settings] action run &lt;action_id&gt; in CLI.  Every options defined in an action section (a config panel section with at least one button) is guaranted to be shown/asked to the user and available in scripts/config's scope.check examples in advanced use cases.  Example‚Äã  [section.my_option_id] type = &quot;button&quot; ask = &quot;Break the system&quot; style = &quot;danger&quot; icon = &quot;bug&quot; # enabled only if another option's value (a `boolean` for example) is positive enabled = &quot;aknowledged&quot;   To be able to trigger an action we have to add a bash function starting with run__ in your scripts/config  run__my_action_id() { ynh_print_info &quot;Running 'my_action_id' action&quot; }   Properties‚Äã  common properties bind: forced to &quot;null&quot; style: any of &quot;success|info|warning|danger&quot; (default: &quot;success&quot;)enabled: JSExpression or bool (default: true) when used with JSExpression you can enable/disable the button depending on context icon (optional): any icon name from Fork Awesome Currently only displayed in the web-admin    ","version":"Next","tagName":"h3"},{"title":"string (string)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#string-string","content":" Ask for a simple string.  Example‚Äã  [section.my_option_id] type = &quot;string&quot; default = &quot;E10&quot; pattern.regexp = '^[A-F]\\d\\d$' pattern.error = &quot;Provide a room like F12 : one uppercase and 2 numbers&quot;   Properties‚Äã  common inputs properties default: &quot;&quot; pattern (optional): Pattern, a regex to match the value against    ","version":"Next","tagName":"h3"},{"title":"text (string)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#text-string","content":" Ask for a multiline string. Renders as a textarea in the web-admin and by opening a text editor on the CLI.  Example‚Äã  [section.my_option_id] type = &quot;text&quot; default = &quot;multi\\nline\\ncontent&quot;   Properties‚Äã  common inputs properties default: &quot;&quot; pattern (optional): Pattern, a regex to match the value against    ","version":"Next","tagName":"h3"},{"title":"password (input)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#password-input","content":" Ask for a password. The password is tested as a regular user password (at least 8 chars)  Example‚Äã  [section.my_option_id] type = &quot;password&quot;   Properties‚Äã  common inputs properties default: forced to &quot;&quot;redact: forced to trueexample: forbidden    ","version":"Next","tagName":"h3"},{"title":"color (input)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#color-input","content":" Ask for a color represented as a hex value (with possibly an alpha channel). Renders as color picker in the web-admin and as a prompt that accept named color like yellow in CLI.  Example‚Äã  [section.my_option_id] type = &quot;color&quot; default = &quot;#ff0&quot;   Properties‚Äã  common inputs properties default: &quot;&quot;    ","version":"Next","tagName":"h3"},{"title":"number (input)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#number-input","content":" Ask for a number (an integer).  Example‚Äã  [section.my_option_id] type = &quot;number&quot; default = 100 min = 50 max = 200 step = 5   Properties‚Äã  common inputs properties type: number or range (input or slider in the web-admin) min (optional): minimal int value inclusivemax (optional): maximal int value inclusivestep (optional): currently only used in the webadmin as the &lt;input/&gt; step jump    ","version":"Next","tagName":"h3"},{"title":"boolean (input)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#boolean-input","content":" Ask for a boolean. Renders as a switch in the web-admin and a yes/no prompt in CLI.  Example‚Äã  [section.my_option_id] type = &quot;boolean&quot; default = 1 yes = &quot;agree&quot; no = &quot;disagree&quot;   Properties‚Äã  common inputs properties default: 0 yes (optional): (default: 1) define as what the thruthy value should output can be true, True, &quot;yes&quot;, etc. no (optional): (default: 0) define as what the thruthy value should output can be 0, &quot;false&quot;, &quot;n&quot;, etc.    ","version":"Next","tagName":"h3"},{"title":"date (input)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#date-input","content":" Ask for a date in the form &quot;2025-06-14&quot;. Renders as a date-picker in the web-admin and a regular prompt in CLI.  Can also take a timestamp as value that will output as an ISO date string.  Example‚Äã  [section.my_option_id] type = &quot;date&quot; default = &quot;2070-12-31&quot;   Properties‚Äã  common inputs properties default: &quot;&quot;    ","version":"Next","tagName":"h3"},{"title":"time (input)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#time-input","content":" Ask for an hour in the form &quot;22:35&quot;. Renders as a date-picker in the web-admin and a regular prompt in CLI.  Example‚Äã  [section.my_option_id] type = &quot;time&quot; default = &quot;12:26&quot;   Properties‚Äã  common inputs properties default: &quot;&quot;    ","version":"Next","tagName":"h3"},{"title":"email (input)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#email-input","content":" Ask for an email. Validation made with python-email-validator  Example‚Äã  [section.my_option_id] type = &quot;email&quot; default = &quot;Abc.123@test-example.com&quot;   Properties‚Äã  common inputs properties default: &quot;&quot;    ","version":"Next","tagName":"h3"},{"title":"path (string)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#path-string","content":" Ask for an web path (the part of an url after the domain). Used by default in app install to define from where the app will be accessible.  Example‚Äã  [section.my_option_id] type = &quot;path&quot; default = &quot;/&quot;   Properties‚Äã  common inputs properties default: &quot;&quot; pattern (optional): Pattern, a regex to match the value against    ","version":"Next","tagName":"h3"},{"title":"url (string)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#url-string","content":" Ask for any url.  Example‚Äã  [section.my_option_id] type = &quot;url&quot; default = &quot;https://example.xn--zfr164b/@handle/&quot;   Properties‚Äã  common inputs properties default: &quot;&quot; pattern (optional): Pattern, a regex to match the value against    ","version":"Next","tagName":"h3"},{"title":"file (input)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#file-input","content":" Ask for file. Renders a file prompt in the web-admin and ask for a path in CLI.  Example‚Äã  [section.my_option_id] type = &quot;file&quot; accept = &quot;.json&quot; # bind the file to a location to save the file there bind = &quot;/tmp/my_file.json&quot;   Properties‚Äã  common inputs properties default: &quot;&quot; accept: a comma separated list of extension to accept like &quot;.conf, .ini /!\\ currently only work on the web-admin    ","version":"Next","tagName":"h3"},{"title":"select (choices)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#select-choices","content":" Ask for value from a limited set of values. Renders as a regular &lt;select/&gt; in the web-admin and as a regular prompt in CLI with autocompletion of choices.  Example‚Äã  [section.my_option_id] type = &quot;select&quot; choices = [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;] choices = &quot;one,two,three&quot; default = &quot;two&quot;   Properties‚Äã  common inputs properties default: &quot;&quot;, obviously the default has to be empty or an available choices item. choices: a (coma separated) list of values    ","version":"Next","tagName":"h3"},{"title":"tags (choices)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#tags-choices","content":" Ask for series of values. Optionally from a limited set of values. Renders as a multi select in the web-admin and as a regular prompt in CLI without autocompletion of choices.  This output as a coma separated list of strings &quot;one,two,three&quot;  Example‚Äã  [section.my_option_id] type = &quot;tags&quot; default = &quot;word,another word&quot; [my_other_option_id] type = &quot;tags&quot; choices = [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;] # choices = &quot;one,two,three&quot; default = &quot;two,three&quot;   Properties‚Äã  common inputs properties default: &quot;&quot;, obviously the default has to be empty or an available choices item. pattern (optional): Pattern, a regex to match all the values againstchoices (optional): a (coma separated) list of valuesicon (optional): any icon name from Fork Awesome Currently only displayed in the web-admin    ","version":"Next","tagName":"h3"},{"title":"domain (choices)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#domain-choices","content":" Ask for a user domain. Renders as a select in the web-admin and as a regular prompt in CLI with autocompletion of registered domains.  Example‚Äã  [section.my_option_id] type = &quot;domain&quot;   Properties‚Äã  common inputs properties default: forced to the instance main domain    ","version":"Next","tagName":"h3"},{"title":"app (choices)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#app-choices","content":" Ask for a user app. Renders as a select in the web-admin and as a regular prompt in CLI with autocompletion of installed apps.  Example‚Äã  [section.my_option_id] type = &quot;app&quot; filter = &quot;is_webapp&quot;   Properties‚Äã  common inputs properties default: &quot;&quot; filter (optional): JSExpression with what yunohost app info &lt;app_id&gt; --full returns as context (only first level keys)    ","version":"Next","tagName":"h3"},{"title":"user (choices)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#user-choices","content":" Ask for a user. Renders as a select in the web-admin and as a regular prompt in CLI with autocompletion of available usernames.  Example‚Äã  [section.my_option_id] type = &quot;user&quot;   Properties‚Äã  common inputs properties default: the first admin user found    ","version":"Next","tagName":"h3"},{"title":"group (choices)‚Äã","type":1,"pageTitle":"Technical details for config panel structure and form option types","url":"/doc/pr-2675/fr/dev/core/forms#group-choices","content":" Ask for a group. Renders as a select in the web-admin and as a regular prompt in CLI with autocompletion of available groups.  Example‚Äã  [section.my_option_id] type = &quot;group&quot; default = &quot;visitors&quot;   Properties‚Äã  common inputs properties default: &quot;all_users&quot;, &quot;visitors&quot; or &quot;admins&quot; (default: &quot;all_users&quot;) ","version":"Next","tagName":"h3"},{"title":"Working on the YunoHost web admin","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/core/ynh_admin","content":"Working on the YunoHost web admin When using ynh-dev, run in the container: ./ynh-dev use-git yunohost-admin FIXME The rest of this section is completely outdated and should be rewritten from scratch... It launches gulp, such as each time you modify sources, it recompiles the code and you can use it by refreshing (Ctrl+F5) your web administration. To stop the command, just do Ctrl+C. attention You might need to force-clear the cache of your browser sometimes to refresh the JavaScript and/or HTML (so each time you edit something in js or views). The web interface uses the API to interact with YunoHost. The API commands/requests are also defined via the actionsmap. For instance, accessing the page https://domain.tld/yunohost/api/users corresponds to a GET /users requests on the YunoHost API. It is mapped to the functionuser_list(). Accessing the URL should display the JSON returned by this function. 'GET' requests are typically meant to ask information to the server. 'POST' requests are meant to ask the server to edit/change some information, or to execute some actions. js/yunohost/controllers contains the JavaScript parts, and define which requests to make to the API when loading a specific page of the interface, and how to process the data to generate the page, using templates. views contains the various templates for the pages of the interface. In the template, data coming from the JavaScript part can be used with the syntax{{some-variable}}, which will be replaced when building/accessing the page. It is also possible to have conditions using thehandlebars.js syntax: {{#if some-variable}}&lt;p&gt;Some conditional HTML code here !&lt;/p&gt;{{/if}} For internationalized strings, use y18n.t('some-string-code') in the JavaScript, or {{t 'some-string-code'}} in the HTML template, and put your string in locales/en.json. Don't edit other locales files, this will be done using Weblate!","keywords":"","version":"Next"},{"title":"Working on the API and CLI","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/core/ynh_core","content":"","keywords":"","version":"Next"},{"title":"The actionsmap‚Äã","type":1,"pageTitle":"Working on the API and CLI","url":"/doc/pr-2675/fr/dev/core/ynh_core#the-actionsmap","content":" The actionsmap file (data/actionsmap/yunohost.yml) defines the command line andthe API structure. It is structured as &quot;categories&quot;, &quot;actions&quot;, and &quot;arguments&quot;.  For example for the command line yunohost domain add some.domain.tld, the category is domain, the action is add, and some.domain.tld is an argument.  Moulinette will automatically map commands in the actionsmap to Python functions (and their arguments) located in src/yunohost/. For example, typingyunohost domain add some.domain.tld will call the function domain_add(domainName)in domain.py, with the argument domainName equal to &quot;some.domain.tld&quot;.  attention Each time you edit the actionsmap or the Python code, you should restart the YunoHost api with: systemctl restart yunohost-api You'll need to retype your admin and password in the web interface.  ","version":"Next","tagName":"h2"},{"title":"Coding style‚Äã","type":1,"pageTitle":"Working on the API and CLI","url":"/doc/pr-2675/fr/dev/core/ynh_core#coding-style","content":" Please follow the standard PEP8 rules, add Python typing, and run the usual linting tools for Python and Bash.  Github Actions will run the linting tools and report errors.  ","version":"Next","tagName":"h2"},{"title":"YunoHost specific rules‚Äã","type":1,"pageTitle":"Working on the API and CLI","url":"/doc/pr-2675/fr/dev/core/ynh_core#yunohost-specific-rules","content":" To handle exceptions, you should raise some YunohostError() To help with internationalizing the messages, use m18n.n('some-message-id')and put your string in locales/en.json. You can also put arguments and use them in the string with {{some-argument:s}}. Don't edit other locales files, this will be done using weblate ! Name of &quot;private&quot; functions should start with a _ ","version":"Next","tagName":"h3"},{"title":"üìù Working on the documentation","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/doc/","content":"","keywords":"","version":"Next"},{"title":"Markdown‚Äã","type":1,"pageTitle":"üìù Working on the documentation","url":"/doc/pr-2675/fr/dev/doc/#markdown","content":" The YunoHost project extensively uses Markdown for its documentation and other things. Documenting how Markdown works is beyond the scope of this documentation, but we can recommend this guide to get familiar with its syntax.  Note that Docusaurus has some additional, special syntax (hence why the files are .mdx and not just .md).  ","version":"Next","tagName":"h2"},{"title":"Applications documentation‚Äã","type":1,"pageTitle":"üìù Working on the documentation","url":"/doc/pr-2675/fr/dev/doc/#applications-documentation","content":" The apps documentation (description, special admin instructions, ..) lives in each app's repository. Check the corresponding section in the packaging documentation.  ","version":"Next","tagName":"h2"},{"title":"Working locally on the documentation‚Äã","type":1,"pageTitle":"üìù Working on the documentation","url":"/doc/pr-2675/fr/dev/doc/#working-locally-on-the-documentation","content":" Using Git, you can clone the documentation locally, edit several pages, add new ones or add new images, and then propose your changes using a Pull Request.  To get started, you will need to clone the repo  git clone https://github.com/yunohost/doc cd doc   If you want to preview your changes, you will need to install npm/nodejs to build the doc. The documentation is built using Docusaurus. It generates static pages that can be served by a simple server which can be deployed in production using for example My Webapp or Github Pages. Check the official Docusaurus doc for more info.  Here, we'll only build locally and checkout the result using a local dev server.  # Clone &quot;n&quot; which will be used to fetch a recent version of nodejs git clone https://github.com/tj/n --single-branch --depth 1 # Install the latest node/npm export N_PREFIX=&quot;$PWD&quot; n/bin/n install latest # Make sure to use the nodejs/npm we installed NODE_BIN_PATH=$(dirname $(n/bin/n which latest)) export PATH=&quot;$NODE_BIN_PATH:$PATH&quot; # Then inside your &quot;doc&quot; clone: npm install npm run start # Open http://localhost:3000 while the dev server is running   ","version":"Next","tagName":"h2"},{"title":"Contents of the repository‚Äã","type":1,"pageTitle":"üìù Working on the documentation","url":"/doc/pr-2675/fr/dev/doc/#contents-of-the-repository","content":" The actual documentation content is inside the docs/ folder, for example docs/admin/02.what_is_yunohost/index.mdx is the &quot;What is YunoHost&quot; page.Images are in static/imgTranslations are inside i18n folders, for example the &quot;What is YunoHost&quot; page translated to french is in i18n/fr/docusaurus-plugin-content-docs/current/admin/02.what_is_yunohost/index.mdx  ","version":"Next","tagName":"h2"},{"title":"Special pages‚Äã","type":1,"pageTitle":"üìù Working on the documentation","url":"/doc/pr-2675/fr/dev/doc/#special-pages","content":" Some pages of the documentation are automatically or dynamically generated. Please do not try to edit them manually...  See the generation script. ","version":"Next","tagName":"h2"},{"title":"üõ†Ô∏è Working with Git / Github","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/git/","content":"üõ†Ô∏è Working with Git / Github The YunoHost project extensively uses Git and GitHub (though we hope to move to a different platform oneday‚Ñ¢) In particular: the YunoHost organization hosts the &quot;core&quot; of YunoHost, along with tools that are transversal to the project such that the app store, this very documentation, etc.the YunoHost-Apps organization hosts the repo corresponding to the different apps Explaining how Git and GitHub works is beyond the scope of this documentation, but we can recommend: this super quick introthis Youtube tutorialthis guide, on how to make you very first Pull Request in GitHub - also available in other languages - c.f. the flags at the top, for example in french!There are plenty of tutorials about Git and GitHub on the internets, find one that works for you, and come talk with other folks!","keywords":"","version":"Next"},{"title":"üì¶ Application packaging","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/","content":"","keywords":"","version":"Next"},{"title":"Packaging philosophy‚Äã","type":1,"pageTitle":"üì¶ Application packaging","url":"/doc/pr-2675/fr/dev/packaging/#packaging-philosophy","content":" The simplicity of using apps is a key feature of YunoHost. As a packager, you should remember these principles:  The admin should not have a PhD in computer science to be able to install, configure and use your application: try to assume that the admin doesn't know about advanced computer concepts; Less is more, Keep it simple: don't overcrowd the admin with a dozens technical questions; Things should work out of the box: for example, the admin should not have to manually finish the installation process by manually filling in database credentials; YunoHost app packaging is not just about installing sources and dependencies: it's also about maintenance (upgrade, backup...) and integrating the app in the YunoHost ecosystem (NGINX, SSO/LDAP, Fail2Ban, application catalog, UI/UX...)  ","version":"Next","tagName":"h2"},{"title":"2. Prerequisites‚Äã","type":1,"pageTitle":"üì¶ Application packaging","url":"/doc/pr-2675/fr/dev/packaging/#2-prerequisites","content":" Before diving in, this documentation assumes that:  You already are a YunoHost admin yourself and already know what the install workflow looks like;)You are somewhat familiar with (or are willing to learn) system administration and bash programming;You are somewhat familiar with (or are willing to learn) Git;You are comfortable with tinkering and debugging computer stuff in general.  You are also encouraged to join the app packaging chatroom to ask any question you may have!  At some point, you will also want to have a dev/test environment, either using VirtualBox or LXC/ynh-dev which is meant for the core but can totally be used for developping apps. You can also setup a dev/test VPS on your favourite hosting provider, or even develop on your prod if you like to live dangerously;).  ","version":"Next","tagName":"h2"},{"title":"3. Notes about the history of YunoHost's app packaging‚Äã","type":1,"pageTitle":"üì¶ Application packaging","url":"/doc/pr-2675/fr/dev/packaging/#3-notes-about-the-history-of-yunohosts-app-packaging","content":" Many things in YunoHost, and YunoHost app packaging format, are historical or were designed in an organic fashion. Thus some aspects may legitimately feel old.  The &quot;v0&quot; of app packaging consisted in writing raw bash scripts with no real standardization/constrain.  Over time, recurrent steps (such as installing dependencies with apt, or setting up the NGINX config) where formalized into standardized bash functions, aka &quot;helpers&quot;. This pretty much marked the beginning of the &quot;v1&quot; packaging era.  Various tools were implemented to test the app and standardize their behavior.  After a while, a set of common practices and conventions emerged and is somewhat reflected and maintain in the example_ynh template application. While it is tempting for dev-oriented folks to change variable naming schemes or refactorize the structure of scripts, it turns out that it is even more important to stick to the common set of practices (even though arbitrary and not elegant) to ease the maintenance of all apps by any member of the packaging community accross all repos!  Nevertheless, even though helpers existed, the inherent structure of apps was hard and boring to maintain with too many redundant pieces of code or filled with funky historical conventions. A new v2 format has been designed and added to YunoHost 11.1 in early 2023 in the hope to modernize and simplify app packaging and improve the UI/UX of YunoHost.  However, a future v3 format has yet to come to further simplify app packaging (such as taking care of NGINX/systemd/... configurations, removing the need to manually write remove/backup/restore scripts, etc.) ","version":"Next","tagName":"h2"},{"title":"Packaging v2","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/advanced/packaging_v2","content":"","keywords":"","version":"Next"},{"title":"Motivation‚Äã","type":1,"pageTitle":"Packaging v2","url":"/doc/pr-2675/fr/dev/packaging/advanced/packaging_v2#motivation","content":" The motivations for this new format is:  to get rid of some boring or unecessarily complex or duplicateds stuff such as saving/loading settings, creating a system user, etc.. during the install/upgrade/restore script, which are common things accross many apps.to get rid of funky historical, not-super-semantic stuff such as __FINALPATH__ being replaced by $final_path (with underscore), or __PATH__ being replaced by $path_url, etc.formalize some aspects such as the existence of the install dir, data dir, apt dependencies, database, etc. which in turn unlock possible future developments such as computing the space used by an app at one given moment, auto-upgrading apt dependencies during Debian major migration, etc.formalize some meta-info such as LDAP/SSO support, architectures supports, and other pre-install / post-install, pre-upgrade / post-upgrade notifications (replacing the infamous ynh_send_readme_to_admin) for better UI/UX during the install and upgrade process.  However, this &quot;v2&quot; is not the end of the story and should be seen as an intermediate stage before a &quot;v3&quot; packaging. In particular this &quot;v3&quot; packaging should also formalize the handling of the system and app configurations files and ultimately rework the entire paradigm of the install/remove/upgrade/backup/restore scripts.  ","version":"Next","tagName":"h3"},{"title":"Adapting a v1 app to v2‚Äã","type":1,"pageTitle":"Packaging v2","url":"/doc/pr-2675/fr/dev/packaging/advanced/packaging_v2#adapting-a-v1-app-to-v2","content":" A script is available in the apps_tools repository and will attempt to convert what it can from the v1 format to the v2 format, in particular:  initializing a manifest.toml and prefilling it with info scrapped from the various scriptscomment out now-unecessary lines in the various scripts  Usage: python3 convert_app_to_packaging_v2.py /path/yo/your/app  This will edit the file in place and you should then carefully review and iterate over what the script did for you.  ","version":"Next","tagName":"h3"},{"title":"Highlights of the new format‚Äã","type":1,"pageTitle":"Packaging v2","url":"/doc/pr-2675/fr/dev/packaging/advanced/packaging_v2#highlights-of-the-new-format","content":" The example repo illustrates the below.  The manifest is now written as toml (manifest.toml) instead of json (manifest.json). The structure of the manifest itself has been reworked and now include: The upstream section (now mandatory)An integration section meant to formalize what minimum YunoHost version is required, the list of supported architectures, declare if SSO/LDAP is supported, typical resource usage. This is meant to be displayed both in the catalog (similar to app stores) and on the app info page after installing the app - though this is still work in progress.A resource section (detailed below) Install questions are now automatically saved as settings (except user-provided password and other specific infos)All settings are now automatically loaded in app script environments (so e.g. directly define $domain, etc.)Auto-enable set -eu a.k.a. ynh_abort_if_errors in appropriate scriptsThe safety-backup-before-upgrade is now automatically handled by the coreSimplify writing change-url scripts: old the new/old/change domain/path are now automatically available in the context and a new helper ynh_change_url_nginx_config takes care of tweaking the nginx conf. Your script should essentially just call that helper and possibly tweak the app's conf and possibly restart the app's serviceIntroduce a new resource mechanism Resources are declared in the manifest.toml.They are meant to formalize recurring app needs that are to be provisioned/deprovisioned by the core.They include for example: system user, apt dependencies, install dir, data dir, port, permissions, SQL database...Each resource is to be provisioned before running the install script, deprovisioned after the remove script, and automatically upgraded if needed before running the upgrade script (or provisionned if introduced in the new app version, or deprovisioned if removed w.r.t. the previous app version)More infos about resources and their options and behavior are available in the dedicated doc page Permissions are automatically initialized using the answer to the init_main_permission install question (replacing the is_public question). No need to write a boring if $is_public ... in the install script to add visitors anymore ! There is a similar mechanism to init other permissions, eg init_admin_permission (cf also the doc about the permission resource)The content of the doc/ folder is now meant to be integrated in the webadmin (though this is still WIP as of writing this). In particular: DESCRIPTION.md and the screenshots/ folder are expected to be displayed prior to the app install form (similar to app stores on mobile)ADMIN.md is expected to be made available somewhere in the info page and should contain technical admin notes. Other pages can be defined (just name it WHATEVER.md). Lang codes are also supported following the existing scheme for the README, eg README_fr.md is the French version, hence you can create ADMIN_fr.md, etc.Note that the ADMIN.md page supports the __FOOBAR__ notation that will be automatically replaced with the app's foobar setting Special files called 'notifications' are meant to replace the ynh_send_readme_to_admin mechanics. They are also to be added to the doc folder: doc/PRE_INSTALL.md: a note to be displayed prior to the app install. Typically to warn of something unusual, such as &quot;the app install will automatically add 1GB swap to the system&quot;.doc/POST_INSTALL.md: a note to be displayed after the app install. Typically to explain post-install operations to be performed manually by the admin and that cannot be automated.doc/PRE_UPGRADE.md: a note to be displayed prior to any upgrade of this app.doc/PRE_UPGRADE.d/{version}.md: a note to be displayed prior to a specific version upgrade.doc/POST_UPGRADE.md: a note to be displayed after the app upgrade. For example in the context of Nextcloud, the fact that you may need to re-enable custom modules manually?Note that the notifications, like ADMIN.md, supports the __FOOBAR__ notation that will be automatically replaced with the app's foobar setting Replace some historical names with more sensible ones, or homogenize some practices: final_path is now install_dir (this migration should be automatically handled by the core and the convert_app_to_packaging_v2.py script)datadir is now data_dir to be consistent with install_dir (this migration should be automatically handled by the core and the convert_app_to_packaging_v2.py script)path is now always loaded as $path, no funky $path_url-but-it-is-saved-as-path anymore (this migration should be automatically handled by the core and the convert_app_to_packaging_v2.py script)mysqldbpwd and psqlpwd or whatever are now always saved as db_pwd (cf the database resource) (this migration should be automatically handled by the core and the convert_app_to_packaging_v2.py script)ports settings are now always named either $port or $port_foo_bar instead of $foo_bar_port (cf the port resource) (this migration should be automatically handled by the core and the convert_app_to_packaging_v2.py script)the install dir is to be set to /var/www/$app by default for web apps (or can be changed to /opt/???? for non-webapps). Note that YunoHost will automatically move the old install dir to the new install_dir during the corresponding upgrade. ","version":"Next","tagName":"h3"},{"title":"Advanced packagers","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/advanced/advanced_packagers","content":"","keywords":"","version":"Next"},{"title":"Building your infrastructure‚Äã","type":1,"pageTitle":"Advanced packagers","url":"/doc/pr-2675/fr/dev/packaging/advanced/advanced_packagers#building-your-infrastructure","content":" First idea is to build several VMs, LXCs or VirtualBoxs with YunoHost to let you parallelize actions, like having the first one installing an app, the second installing another app, the third one debugging an app upgrade, etc...  After first installation of those VMs/LXCs, each one has to be reacheable with its domain name, like for example:  ynh1.mydomain.orgynh2.mydomain.orgynh3.mydomain.org  For that you will need a public IP for each one or reverse proxy... If your are lucky enough to have IPV6 and a /64 IPV6 scope, it won't be a problem to assign a public IPV6 to each YunoHost.  Another way the DNS stuff is to simply use an hosts file.  In addition, it's helpfull to have several domains names for each YunoHost, for example:  ynh1.mydomain.org test11.mydomain.orgtest12.mydomain.orgtest13.mydomain.org ynh2.mydomain.org test21.mydomain.orgtest22.mydomain.orgtest23.mydomain.org ynh3.mydomain.org test31.mydomain.orgtest32.mydomain.orgtest33.mydomain.org  With that you will be able to install two apps on the same YunoHost first one at https://test11.mydomain.org and a second app at https://test12.mydomain.org (let say the first app is nextcloud_ynh the second one is collabora_ynh or onlyoffice_ynh)  When your infrastructure is up and ready, you will have to do snapshots of each VMs/LXCs. Doing that, you will be able to revert back to an happy and healthy YunoHost after doing install/backup/restore/upgrade of and app...  Don't forget to regularly upgrade your YunoHosts VMs/LXCs to the last release doing: revert back to last happy/healthy YunoHost snapshot and doing yunohost domain cert renew --no-check &amp;&amp; yunohost tools update &amp;&amp; yunohost tools upgrade --apps &amp;&amp; yunohost tools upgrade --system &amp;&amp; apt autoremove. Take a snapshot after that successfull full upgrade. And after some testings or one week later, remove old snapshot. PS: that can be automated...  Example of a script to upgrade a master VirtualBox VM  #!/bin/bash # printers normal=&quot;\\e[0m&quot; bold=&quot;\\e[1m&quot; white=&quot;\\e[97m&quot; blue=&quot;\\e[34m&quot; echo_info() { echo -e &quot;[${bold}${blue}INFO${normal}] ${bold}${white}$1${normal}&quot; } echo_info &quot;### Update host&quot; sudo apt update sudo apt dist-upgrade sudo yunohost settings set security.password.user.strength -v -1 sudo yunohost settings set security.password.admin.strength -v -1 echo_info &quot;### Update package_check&quot; ( cd package_check; git pull) echo_info &quot;### Update LXC container&quot; package_check/sub_scripts/lxc_upgrade.sh echo_info &quot;### Clean hosts&quot; sudo apt autoclean sudo apt autoremove echo_info &quot;### Fill free space with zero&quot; cat /dev/zero &gt; zeros ; sync ; rm zeros echo_info &quot;### Run 'VBoxManage modifyhd --compact file.vdi' to reduce the size of this VM&quot;   Example of a script to customize a cloned VM  #!/bin/bash master_domain=domain1.fr domainX=domain2.fr master_ip=70 ipX=68 sudo yunohost --admin-password admin domain add $domainX sudo yunohost --admin-password admin domain add sous.$domainX sudo yunohost --admin-password admin tools maindomain -n $domainX sudo yunohost --admin-password admin domain remove $master_domain sudo yunohost --admin-password admin domain remove sous.$master_domain sudo sed -i &quot;s/address 192.168.1.$master_ip/address 192.168.1.${ipX}/&quot; /etc/network/interfaces sudo reboot   Doing that you will have all the time a full/ready to go YunoHosts infrastructure for advanced packagers. And if require, you can have some VMs/LXCs runnning the YunoHost testing or YunoHost next Debian main version.  ","version":"Next","tagName":"h2"},{"title":"Having your packages/commits available in each VMs/LXCs‚Äã","type":1,"pageTitle":"Advanced packagers","url":"/doc/pr-2675/fr/dev/packaging/advanced/advanced_packagers#having-your-packagescommits-available-in-each-vmslxcs","content":" There are several ways to have your freshly created package available from each VMs/LXCs 1- Do an ssh from the YunoHost VM/LXC to a central repository on your computer 2- Having a shared directory available from each VMs, LXCs VirtualBoxs 3- Rsync you central repository to each VM/LXC 4- Use syncthing to syncrhonise you main repository on each VM/LXC  Example of a script to mount as shared directory a packaging directory into a VirtualBox VM  #!/bin/bash shared_folder=my_directory # printers normal=&quot;\\e[0m&quot; bold=&quot;\\e[1m&quot; white=&quot;\\e[97m&quot; blue=&quot;\\e[34m&quot; echo_info() { echo -e &quot;[${bold}${blue}INFO${normal}] ${bold}${white}$1${normal}&quot; } # Create the main directory for the mount sudo mkdir -p &quot;./$shared_folder&quot; # Mount ynh-dev directory from the host echo_info &quot;Mount shared directory $shared_folder&quot; sudo mount -o defaults -t vboxsf $shared_folder &quot;./$shared_folder&quot;   ","version":"Next","tagName":"h2"},{"title":"Shortcuts‚Äã","type":1,"pageTitle":"Advanced packagers","url":"/doc/pr-2675/fr/dev/packaging/advanced/advanced_packagers#shortcuts","content":" Use and abuse of yunohost app install --args argument  You can do ugly thing considering mynewapp is the name/REPLACEBYYOURAPP of your app  To install your mynewapp app:  YNHAPP=mynewapp yunohost app install /mycentralrepo/${YNHAPP}_ynh/ --debug --force --args domain=test11.mydomain.org&amp;path=/myapp&amp;admin=alice&amp;is_public=true&amp;language=en&amp;password=awesomepassword   To remove your mynewapp app and reinstall it  YNHAPP=mynewapp yunohost app remove ${YNHAPP} --debug &amp;&amp; yunohost app install /mycentralrepo/${YNHAPP}_ynh/ --debug --force --args domain=test11.mydomain.org&amp;path=/myapp&amp;admin=alice&amp;is_public=true&amp;language=en&amp;password=awesomepassword   To backup your mynewapp app  YNHAPP=mynewapp yunohost backup create --apps ${YNHAPP} --debug   To restore your mynewapp app from the backup just made  YNHAPP=mynewapp yunohost backup restore XXXXXXXX-XXXXXX --apps ${YNHAPP} --debug   To upgrade your mynewapp  YNHAPP=mynewapp yunohost app upgrade ${YNHAPP} -f /mycentralrepo/${YNHAPP}_ynh/ --debug   With that, you will be able to launch different actions on differents YunoHost VMs/LXCs  ","version":"Next","tagName":"h2"},{"title":"Package_check‚Äã","type":1,"pageTitle":"Advanced packagers","url":"/doc/pr-2675/fr/dev/packaging/advanced/advanced_packagers#package_check","content":" With advanced packaging comes CI_package_check, it lets you serialize and automate package_check.  ","version":"Next","tagName":"h2"},{"title":"Managing all the parallel packaging you are working on‚Äã","type":1,"pageTitle":"Advanced packagers","url":"/doc/pr-2675/fr/dev/packaging/advanced/advanced_packagers#managing-all-the-parallel-packaging-you-are-working-on","content":" When you do several things at the same time, sometimes you don't remember what is the next step for this or that app. A good tool to keep your TODO list organized is to use a kaban like apps:  KanboardWekan ","version":"Next","tagName":"h2"},{"title":"Hooks","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks","content":"","keywords":"","version":"Next"},{"title":"How to add a custom hook on a specific instance‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#how-to-add-a-custom-hook-on-a-specific-instance","content":" astuce Below we imagine we want to run a command after each user creation to add the user to samba user.  You should create a directory with the name of the hooks into /etc/yunohost/hooks.d/:  mkdir -p /etc/yunohost/hooks.d/post_user_create   Next create a bash script inside this directory prefixed by 2 numbers and a dash:  nano /etc/yunohost/hooks.d/post_user_create/05-add-user-to-samba   By default, the directory must be readable and traversable by root, but if you notice your hook is not run at all by YunoHost, you can check permissions with ls -l /etc/yunohost/hooks.d/ and apply these commands if needed:  chown root:root /etc/yunohost/hooks.d/post_user_create chmod u+rx /etc/yunohost/hooks.d/post_user_create   ","version":"Next","tagName":"h2"},{"title":"How to add a hook in an app package‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#how-to-add-a-hook-in-an-app-package","content":" If you are packaging an app, you should not set by yourself the hook into /etc/yunohost/hooks.d instead you should create a hooks dir at the root of your package.  . ‚îú‚îÄ‚îÄ conf ‚îú‚îÄ‚îÄ hooks ‚îú‚îÄ‚îÄ scripts   In the hooks dir, create a bash script called with the type of hook you want to create for example post_create_user.  ","version":"Next","tagName":"h2"},{"title":"Hooks referencies‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#hooks-referencies","content":" ","version":"Next","tagName":"h2"},{"title":"User and permissions‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#user-and-permissions","content":" post_user_create‚Äã  Triggered after user creation This hook is run at the end of the command yunohost user create or equivalent action in webadmin. Environment variables‚Äã YNH_USER_USERNAME: The username of the created userYNH_USER_MAIL: The mail of the created userYNH_USER_PASSWORD: The clear password of the created userYNH_USER_FIRSTNAME: The firstname of the created user (should be removed in future)YNH_USER_LASTNAME: The lastname of the created user (should be removed in future) Positionnal arguments (deprecated)‚Äã $1: The username of the created user$2: The mail of the created user No waited return‚Äã Examples‚Äã Send automatically a mail to new user‚Äã #!/bin/bash domain=$(cat /etc/hostname) message=&quot;Hello $YNH_USER_FIRSTNAME, Welcome on $domain ! Feel free to &lt;a href='https://$domain/yunohost/sso/edit.html'&gt;change your password&lt;/a&gt;. Let me know if you have a problem, The admin of $domain &quot; echo $message | mail -s &quot;Welcome on $domain !&quot; $YNH_USER_MAIL   post_user_delete‚Äã  Triggered at the end of user deletion This hook is run at the end of the command yunohost user delete or equivalent action in webadmin. No environment variables‚Äã Positionnal arguments‚Äã $1: The username of the user deleted$2: True if --purge option is used No waited return‚Äã Examples‚Äã #!/bin/bash   ","version":"Next","tagName":"h3"},{"title":"post_user_update‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#post_user_update","content":" Triggered at the end of the user update This hook is run at the end of the command yunohost user update or equivalent action in webadmin. Environment variables‚Äã attention Only arguments given to the cli/api are given as environment variable. YNH_USER_USERNAME: The username of the updated userYNH_USER_FIRSTNAME: The firstname of the updated user (should be removed in future)YNH_USER_LASTNAME: The lastname of the updated user (should be removed in future)YNH_USER_PASSWORD: The new password of the updated userYNH_USER_MAILS: The mail and mail aliases of the updated user seperated by commaYNH_USER_MAILFORWARDS: The list of forward mails of the updated user separated by commaYNH_USER_MAILQUOTA: The quota of the updated user (could be 0 or a number following by one of this unit: b, k, M, G or T) No positionnal arguments‚Äã No waited return‚Äã Examples‚Äã Send a mail on password changing‚Äã #!/bin/bash &quot; domain=$(cat /etc/hostname) message=&quot;Hello, Your password has been successfully changed on $domain. If you have not asked for changing your password, you probably should contact the admin of $domain. &quot; echo $message | mail -s &quot;Your password has been changed on $domain !&quot; $YNH_USER_USERNAME   ","version":"Next","tagName":"h3"},{"title":"post_app_addaccess‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#post_app_addaccess","content":" Triggered after adding a permission to users or groups This hook is run at the end of the command yunohost user permission add or equivalent action in webadmin. No environment variables‚Äã Positionnal arguments (deprecated)‚Äã $1: The app name$2: The list of users added separated by comma$3: The name of the sub permission (main, admin, etc.)$4: The list of groups added separated by comma No waited return‚Äã Examples‚Äã  ","version":"Next","tagName":"h3"},{"title":"post_app_removeaccess‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#post_app_removeaccess","content":" Triggered after removing a pemission to users or groups This hook is run at the end of the command yunohost user permission remove or equivalent action in webadmin. No environment variables‚Äã Positionnal arguments (deprecated)‚Äã $1: The app name$2: The list of users removed from the permission separated by comma$3: The name of the sub permission (main, admin, etc.)$4: The list of groups removed from the permission separated by comma No waited return‚Äã Examples‚Äã  ","version":"Next","tagName":"h3"},{"title":"Domain, certificates and DNS‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#domain-certificates-and-dns","content":" ","version":"Next","tagName":"h2"},{"title":"post_domain_add‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#post_domain_add","content":" Triggered at the end of the domain add operation This hook is run at the end of the command yunohost domain add or equivalent action in webadmin. No environment variable‚Äã Positionnal arguments (deprecated)‚Äã $1: The domain added No waited return‚Äã Examples‚Äã ‚Äã  ","version":"Next","tagName":"h3"},{"title":"post_domain_remove‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#post_domain_remove","content":" Triggered after removing the domain This hook is run at the end of the command yunohost domain remove or equivalent action in webadmin. No environment variable‚Äã Positionnal arguments (deprecated)‚Äã $1: The domain removed No waited return‚Äã Examples‚Äã  ","version":"Next","tagName":"h3"},{"title":"post_cert_update‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#post_cert_update","content":" Triggered after Let's encrypt certificate update This hook is run at the end of the command yunohost domain cert update or equivalent action in webadmin. No environment variable‚Äã Positionnal arguments‚Äã $1: The domain for which we have updated the certificate No waited return‚Äã Examples‚Äã Restart a service after cert renewal‚Äã #!/bin/bash systemctl restart gemserv   ","version":"Next","tagName":"h3"},{"title":"custom_dns_rules‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#custom_dns_rules","content":" Customized your DNS rules for your domains This hook is run at the end of the command yunohost domain dns suggest or equivalent action in webadmin. Thanks to This hook you can customize Environment variables‚Äã base_domain: the top-level part of the domainsuffix: the subdomain part of the domain Positionnal arguments‚Äã $1: The base domain for which we want to build a DNS suggestion Waited return‚Äã The script should return a JSON array with dictionnary in this format: [ { 'type': 'SRV', 'name': 'stuff.foo.bar', 'value': 'yoloswag', 'ttl': 3600 } ] Examples‚Äã Validate Let's Encrypt DNS challenge with a YunoHost DynDNS domain‚Äã #!/bin/bash if [[ &quot;$1&quot; == &quot;XXXX.nohost.me&quot; ]] ; then echo &quot;[ { 'type': 'TXT', 'name': '_acme-challenge', 'value': 'LETSENCRYPT_VALUE', 'ttl': 3600 } ]&quot; fi   ","version":"Next","tagName":"h3"},{"title":"Apps‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#apps","content":" ","version":"Next","tagName":"h2"},{"title":"post_app_change_url‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#post_app_change_url","content":" Triggered after an app has changed of URL This hook is run at the end of the command yunohost app change-url or equivalent action in webadmin. Environment variables‚Äã YNH_APP_OLD_DOMAIN: The old domain of the appYNH_APP_OLD_PATH: The old path of the appYNH_APP_NEW_DOMAIN: The new domain of the appYNH_APP_NEW_PATH: The new path of the app No positionnal arguments‚Äã No waited return‚Äã Examples‚Äã  ","version":"Next","tagName":"h3"},{"title":"post_app_upgrade‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#post_app_upgrade","content":" Triggered on app upgrade This hook is run at the end of the command yunohost app upgrade or equivalent action in webadmin. Environment variables‚Äã YNH_APP_ID: The app id (for example nextcloud)YNH_APP_INSTANCE_NAME: The app instance name (for example nextcloud__2)YNH_APP_INSTANCE_NUMBER: The app instance number (for example 2)YNH_APP_MANIFEST_VERSION: The app manifest version (for example 1 or ?)YNH_ARCH: The arch as returned by dpkg --print-architectureYNH_APP_UPGRADE_TYPE: The type of upgrade (UPGRADE_PACKAGE, UPGRADE_APP, UPGRADE_FULL)YNH_APP_MANIFEST_VERSION: The version numberYNH_APP_CURRENT_VERSION: The version number of the app (in the YunoHost format)NO_BACKUP_UPGRADE: 1 if we don't want to backup else 0 No positionnal arguments‚Äã No waited return‚Äã Examples‚Äã Change a settings in an app config file (unmanaged by config panel)‚Äã #!/bin/bash source /usr/share/yunohost/helpers app=$YNH_APP_INSTANCE_NAME if [[ &quot;$app&quot; == &quot;etherpad_mypads&quot; ]]; then ynh_write_var_in_file --file=/var/www/etherpad_mypads/settings.json --key=max --value=100 --after=importExportRateLimiting systemctl restart etherpad_mypads fi   ","version":"Next","tagName":"h3"},{"title":"post_app_install‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#post_app_install","content":" Triggered at the end of an app installation This hook is run at the end of the command yunohost app install or equivalent action in webadmin. Environment variables‚Äã YNH_APP_ID: The app id (for example nextcloud)YNH_APP_INSTANCE_NAME: The app instance name (for example nextcloud__2)YNH_APP_INSTANCE_NUMBER: The app instance number (for example 2)YNH_APP_MANIFEST_VERSION: The app manifest version (for example 1 or ?)YNH_ARCH: The arch as returned by dpkg --print-architectureYNH_APP_ARG_XXXXXXX: The argument of the manifest No positionnal arguments‚Äã No waited return‚Äã Examples‚Äã  ","version":"Next","tagName":"h3"},{"title":"post_app_remove‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#post_app_remove","content":" Triggered after removing an app This hook is run at the end of the command yunohost app remove or equivalent action in webadmin. Environment variables‚Äã YNH_APP_ID: The app id (for example nextcloud)YNH_APP_INSTANCE_NAME: The app instance name (for example nextcloud__2)YNH_APP_INSTANCE_NUMBER: The app instance number (for example 2)YNH_APP_MANIFEST_VERSION: The app manifest version (for example 1 or ?)YNH_ARCH: The arch as returned by dpkg --print-architectureYNH_APP_PURGE: 1 if the --purge option has been activated No positionnal arguments‚Äã No waited return‚Äã Examples‚Äã  ","version":"Next","tagName":"h3"},{"title":"Backup / Restore‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#backup--restore","content":" ","version":"Next","tagName":"h2"},{"title":"backup‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#backup","content":" Add some files to backup This hook is run at the end of the command yunohost backup create or equivalent action in webadmin. Environment variables‚Äã YNH_BACKUP_DIR: The work dir in which we can store temporary data to backup like database dumpYNH_BACKUP_CSV: The CSV in which we add the things to backup. Don't use this directly and use ynh_backup helper instead.YNH_APP_BACKUP_DIR: To document Positionnal arguments‚Äã $1: The work dir in which we can store temporary data to backup like database dump No waited return‚Äã Examples‚Äã Backup some files in more (for example your custom hooks)‚Äã #!/bin/bash # Source YNH helpers source /usr/share/yunohost/helpers ynh_backup_dest (){ YNH_CWD=&quot;${YNH_BACKUP_DIR%/}/$1&quot; mkdir -p $YNH_CWD cd &quot;$YNH_CWD&quot; } # Exit hook on subcommand error or unset variable ynh_abort_if_errors # MISC ynh_backup_dest &quot;conf/custom/misc&quot; ynh_backup &quot;/etc/sysctl.d/noipv6.conf&quot; ynh_backup &quot;/usr/local/bin/&quot; ynh_backup &quot;/etc/yunohost/hooks.d/backup/99-conf_custom&quot; ynh_backup &quot;/etc/yunohost/hooks.d/restore/99-conf_custom&quot;   ","version":"Next","tagName":"h3"},{"title":"restore‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#restore","content":" Restore some files This hook is run at the end of the command yunohost backup restore or equivalent action in webadmin. Environment variables‚Äã YNH_BACKUP_DIR: The work dir in which we can store temporary data to backup like database dumpYNH_BACKUP_CSV: The CSV in which we add the things to backup. Don't use this directly and use ynh_backup helper instead. Positionnal arguments‚Äã $1: The work dir in which we can store temporary data to backup like database dump No waited return‚Äã Examples‚Äã restore custom files‚Äã #!/bin/bash # Source YNH helpers source /usr/share/yunohost/helpers ynh_restore_dest (){ YNH_CWD=&quot;${YNH_BACKUP_DIR%/}/$1&quot; cd &quot;$YNH_CWD&quot; } # Exit hook on subcommand error or unset variable ynh_abort_if_errors # MISC ynh_restore_dest &quot;conf/custom/misc&quot; ynh_restore_file &quot;/etc/sysctl.d/noipv6.conf&quot; ynh_restore_file &quot;/usr/local/bin/&quot; ynh_restore_file &quot;/etc/yunohost/hooks.d/backup/99-conf_custom&quot; ynh_restore_file &quot;/etc/yunohost/hooks.d/restore/99-conf_custom&quot;   ","version":"Next","tagName":"h3"},{"title":"backup_method‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#backup_method","content":" Define a new way to backup and restore files This hook is run during the command yunohost backup create or equivalent action in webadmin. This hook is called several times with different action keywords. No environment variables‚Äã Positionnal arguments‚Äã $1: The action (&quot;need_mount&quot;, &quot;backup&quot;, &quot;mount&quot;)$2: The work dir$3: The name of the backup$4: The repository in which the backup should be done$5: An estimation size of the files to backup$6: A description of the archive No waited return‚Äã Examples‚Äã A very simple backup on rotationnal disks‚Äã #!/bin/bash set -euo pipefail work_dir=&quot;$2&quot; name=&quot;$3&quot; repo=&quot;$4&quot; size=&quot;$5&quot; description=&quot;$6&quot; case &quot;$1&quot; in need_mount) # Set false if your method can itself put files in good place in your archive true ;; backup) mount /dev/sda1 /mnt/hdd if [[ &quot;$(df /mnt/hdd | tail -n1 | cut -d&quot; &quot; -f1)&quot; != &quot;/dev/sda1&quot; ]] then exit 1 fi pushd &quot;$work_dir&quot; current_date=$(date +&quot;%Y-%m-%d_%H:%M&quot;) cp -a &quot;${work_dir}&quot; &quot;/mnt/hdd/${current_date}_$name&quot; popd umount /mnt/hdd ;; *) echo &quot;hook called with unknown argument \\`$1'&quot; &gt;&amp;2 exit 1 ;; esac exit 0   ","version":"Next","tagName":"h3"},{"title":"Configuration and firewall‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#configuration-and-firewall","content":" ","version":"Next","tagName":"h2"},{"title":"post_iptable_rules‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#post_iptable_rules","content":" Triggered after reloaded the firewall rules This hook is run at the end of the command yunohost firewall reload or equivalent action in webadmin. No environment variables‚Äã Positionnal arguments‚Äã $1: True if upnp has succeeded$2: True if ipv6 is available No waited return‚Äã Examples‚Äã Forbid completely the outgoing 25 port except for postfix user‚Äã #!/bin/bash iptables -A OUTPUT -p tcp --dport 25 -m owner --uid-owner postfix -j ACCEPT iptables -A OUTPUT -p tcp --dport 25 -m tcp -j REJECT --reject-with icmp-port-unreachable   ","version":"Next","tagName":"h3"},{"title":"conf_regen‚Äã","type":1,"pageTitle":"Hooks","url":"/doc/pr-2675/fr/dev/packaging/advanced/hooks#conf_regen","content":" Change configuration suggested as default config in regen-conf mechanism This hook is run during the command yunohost tools regen-conf or equivalent action in webadmin. This hook is called several times with different actions keywords (pre and post operations). In order to be taken into account, the conf_regen hooks must: be present in the folder /etc/yunohost/hooks.d/conf_regenfollow the naming convention dd-sss_xxx.dd are 2 digits and should be higher than the ones from the default hook (present in /usr/share/yunohost/hooks/conf_regen).sss is a string that defines the kind of hook (eg. ssh or postfix).xxx is a free field to help remind what is inside that hook. Environment variables‚Äã YNH_DOMAINS: The list of domains managed by YunoHost separated by commaYNH_MAIN_DOMAINS: The list of main domains separated by comma Positionnal arguments‚Äã $1: The pre or post action$2: Empty string due to legacy$3: Empty string due to legacy$4: In post mode the list of file which should be modified. In pre mode the dir in which we store pending configuration No waited return‚Äã Examples‚Äã Fix the warning about postfix compatibility mode in postfix logs‚Äã #!/bin/bash action=$1 pending_dir=$4 postfix_conf=$pending_dir/../postfix/etc/postfix/main.cf [[ &quot;$action&quot; == &quot;pre&quot; ]] || exit 0 [[ -e $postfix_conf ]] || exit 0 echo ' compatibility_level = 2' &gt;&gt; $postfix_conf  ","version":"Next","tagName":"h3"},{"title":"SSO/LDAP integration","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/advanced/sso_ldap_integration","content":"","keywords":"","version":"Next"},{"title":"LDAP integration‚Äã","type":1,"pageTitle":"SSO/LDAP integration","url":"/doc/pr-2675/fr/dev/packaging/advanced/sso_ldap_integration#ldap-integration","content":" LDAP is a de-facto standard when it comes to sharing a common user account database between multiple applications, hence its use in the context of YunoHost.  However, each app does implement LDAP support in its own specific way (or doesn't), and needs to be provided with parameters to actually talk to YunoHost's LDAP database, usually via its config file. It is advise to look for real-life example of apps implementing these (such as Nextcloud, Wekan...) but you will usually need to provide:  LDAP host: localhost / 127.0.0.1LDAP port: 389Base DN : dc=yunohost,dc=orgUser DN : ou=users,dc=yunohost,dc=orgSearch filter: (&amp;(|(objectclass=posixAccount))(uid=%uid)(permission=cn=__APP__.main,ou=permission,dc=yunohost,dc=org)) (this makes sure that only people with the appropriate YunoHost/SSowat permission can access the app)Username attribute: uidDisplay name attribute: displaynameEmail attribute: mail  TODO/FIXME: moar explanations? What is missing?  ","version":"Next","tagName":"h2"},{"title":"SSO integration‚Äã","type":1,"pageTitle":"SSO/LDAP integration","url":"/doc/pr-2675/fr/dev/packaging/advanced/sso_ldap_integration#sso-integration","content":" This documentation apply to YunoHost&gt;=12. On YunoHost &lt;12 the header was a bit different but the idea was the same.  Internally, SSOwat will on-the-fly inject theses different headers:  Name\tDescription\tProtected over header injection from clients (a client try with a request to override the header and be logged in with a different user)\tHeader name for app which provide HTTP server and nginx transfert the request\tHow to get with php AppThe username\tthe username of the authenticated user\tYes\tYNH_USER\twith getallheaders()[&quot;Ynh-User&quot;] or $_SERVER[&quot;HTTP_YNH_USER&quot;] User email\tthe email of the authenticated user. Could be usefull for some app which require an email for the username. Can be also used by some apps which populate all user infomration from the HTTP header instead of LDAP.\tYes\tYNH_USER_EMAIL\twith getallheaders()[&quot;Ynh-User-Email&quot;] or $_SERVER[&quot;HTTP_YNH_USER_EMAIL&quot;] User full name\tThe full name of the user. The full name of the user. Which is mostly used by some apps which populate all user infomration from the HTTP header instead of LDAP.\tYes\tYNH_USER_FULLNAME\twith getallheaders()[&quot;Ynh-User-Fullname&quot;] or $_SERVER[&quot;HTTP_YNH_USER_FULLNAME&quot;] The HTTP Basic Auth Headers\tLike Authorization: Basic &lt;base64credentials&gt;. If used we should be sure that the app check the credential (user and password) before to validate the authentication. It's mainly used by apps which need the credential to authenticate to a internal service. By example most of webmail need the credential to pass the correct credential to the mail server.\tNo. A client can send a header and will be passed to the application. It's why the application must check the credential to be sure that the passed passord are correct.\tAuthorization\twith getallheaders()[&quot;Authorization&quot;] or $_SERVER[&quot;HTTP_AUTHORIZATION&quot;]  ","version":"Next","tagName":"h2"},{"title":"Usage‚Äã","type":1,"pageTitle":"SSO/LDAP integration","url":"/doc/pr-2675/fr/dev/packaging/advanced/sso_ldap_integration#usage","content":" For many application, like django, you will need configure the YNH_USER header, as the header to trust, to authenticate the user. For php apps it will be most of case the header Ynh-User.  And for some app which need the auth basic header, you generally don't need to set the header name as the Authorization header name is normalized.  ","version":"Next","tagName":"h3"},{"title":"Specific case‚Äã","type":1,"pageTitle":"SSO/LDAP integration","url":"/doc/pr-2675/fr/dev/packaging/advanced/sso_ldap_integration#specific-case","content":" App which reuse the auth basic header to authenticate to an internal service‚Äã  Currently you don't need any specific setup on YunoHost side. Since YunoHost provide the header needed, the application should be able to use it correclty. Depending of the application, some configuration could be needed.  Application which provide an API‚Äã  Some app, like Nextcloud or SOGo provide an service like Caldav, Cardav or Webdav, the client will need to send the basic authentication and the nginx must transmit this authentication header to the serivice which will validate the authentication. Currently to make it working correctly you need to set a following app settings this way:  ynh_app_setting_set --key=protect_against_basic_auth_spoofing --value=false   This will say to YunoHost that for this app we can safely transmit auth basic header from the client to the application.  If you need to change this behavior after the application installation, you can set the option with:  sudo yunohost app setting &lt;my_app&gt; protect_against_basic_auth_spoofing -v false   Then you must regenerate the SSOwat configuration with:  sudo yunohost app ssowatconf   And, finally, you need to reload NGINX configuration with:  sudo systemctl reload nginx.service   ","version":"Next","tagName":"h3"},{"title":"Configuring SSOwat permissions for the app‚Äã","type":1,"pageTitle":"SSO/LDAP integration","url":"/doc/pr-2675/fr/dev/packaging/advanced/sso_ldap_integration#configuring-ssowat-permissions-for-the-app","content":" SSOwat permissions are configured using the 'permission' resource in your app's manifest.toml  If relevant, you can create &quot;sub&quot; permissions for your app, for instance to only allow a specific group of people to access the admin UI of the app. For example:  [resources.permissions] # This configures the main permission, i.e. general access to `https://domain.tld/$app/` # Initial access is defined using the `init_main_permission` install question. main.url = &quot;/&quot; # This configures an additional &quot;admin&quot; permission regarding access to `https://domain.tld/$app/admin` admin.url = &quot;/admin&quot; admin.show_tile = false # This means that this permission won't correspond to a tile in YunoHost's user portal admin.allowed = &quot;admins&quot; # Initialize the access for the &quot;admins&quot; group ... You can also use an install question called `init_admin_permission` to let the server admin choose this.   See the page about app resources for the full description of behavior and properties.  ","version":"Next","tagName":"h2"},{"title":"Logging out on the app vs. Logging out of YunoHost‚Äã","type":1,"pageTitle":"SSO/LDAP integration","url":"/doc/pr-2675/fr/dev/packaging/advanced/sso_ldap_integration#logging-out-on-the-app-vs-logging-out-of-yunohost","content":" A common known issue is that sometimes, logging out of YunoHost apps will not log people out of every app. This is for example the case for Nextcloud, because it uses its own authentication cookies which are not cleared when people log out of YunoHost. This is not trivial to fix.  Similarly, logging out of the app doesn't necessarily log people from YunoHost entirely (which is more acceptable that clicking Log out and... not being logged out at all because you're still logged-in on the SSO, hence logged in on the app). Some YunoHost app do integrate custom patches such that the logout process of the app does automatically redirects to https://domain.tld/yunohost/sso/?action=logout which logs them out. ","version":"Next","tagName":"h2"},{"title":"Documenting apps","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/doc","content":"","keywords":"","version":"Next"},{"title":"Extensive description : doc/DESCRIPTION.md and doc/screenshots/‚Äã","type":1,"pageTitle":"Documenting apps","url":"/doc/pr-2675/fr/dev/packaging/doc#extensive-description--docdescriptionmd-and-docscreenshots","content":" You are encouraged to add a doc/DESCRIPTION.md which should contain a more extensive description than the short description contained in manifest.toml. This usually corresponds to listing the key features of the app.  You are also encouraged to add a .png or .jpg screenshot of what the app looks like in doc/screenshots/. The filename is arbitrary but must not start with a dot. Also the file weight should be kept below 512kb.  This description and screenshot will be shown when the admin open the catalog page for this app and the app info page in the webadmin after the admin installs this app.  You can add subfolders such as doc/screenshots/subfolder to add pictures in your documentation without showing them on the app info page.  You can also add translated versions of the .md file in, for example, doc/DESCRIPTION_fr.md, _es.md, _it.md, etc.  If your app repository is part of the YunoHost-Apps org, the provided description will be used to auto-regenerate the README.md of your GitHub repo via yunohost-bot.  ","version":"Next","tagName":"h2"},{"title":"Specific notes for admins : doc/ADMIN.md, doc/<whatever>.md‚Äã","type":1,"pageTitle":"Documenting apps","url":"/doc/pr-2675/fr/dev/packaging/doc#specific-notes-for-admins--docadminmd-docwhatevermd","content":" Sometimes, you may want to ship YunoHost-specific notes regarding the administration of this app. For example, integrating OnlyOffice inside Nextcloud.  You can do so by adding a doc/ADMIN.md file or even a doc/&lt;whatever&gt;.md page for each specific topic - and similarly add _&lt;lang&gt; suffix for translations.  Note that you can even use the __FOOBAR__ syntax which will automatically be replaced with the foobar setting.  These notes will be available in the app info page in the webadmin after the app installation.  ","version":"Next","tagName":"h2"},{"title":"Pre/post-install notes, pre/post-upgrade notes‚Äã","type":1,"pageTitle":"Documenting apps","url":"/doc/pr-2675/fr/dev/packaging/doc#prepost-install-notes-prepost-upgrade-notes","content":" Sometimes, you may want to display important information to the admin at key points in the app's life cycle. You can do so by providing special markdown files:  doc/PRE_INSTALL.md: displayed right before the installation (for example to warn that ¬´ This app install is expected to take around 30 minutes, be patient! ¬ª or ¬´ This app will automatically add 1GB swap to your system ¬ª). NB: try to not overlap with the anti-feature tags from the catalog (cf. Publishing your app in the catalog) which can be used to warn that the app's upstream is alpha-stage or deprecated among other things. doc/POST_INSTALL.md: displayed in a popup after the installation AND a dismissable note in the webadmin app info view.doc/PRE_UPGRADE.md: displayed right before any upgrade of this app. NB: the pre-upgrade note from the NEW version will be used, not the one from the installed version. doc/POST_UPGRADE.md: displayed in a popup after the upgrade AND a dismissable note in the webadmin app info view.  In these files you can use the __FOOBAR__ syntax which will automatically be replaced with the foobar setting.  These notes are displayed both in WebUI and CLI contexts. In the CLI context, admin is prompted to press a key to dismiss the note and continue the install/upgrade process.  ","version":"Next","tagName":"h2"},{"title":"Display notes only for a specific version‚Äã","type":1,"pageTitle":"Documenting apps","url":"/doc/pr-2675/fr/dev/packaging/doc#display-notes-only-for-a-specific-version","content":" To display such note only for a specific version, you can create a markdown file named after the version inside a folder named after the targeted hook as such: doc/{hook}.d/{version}.md, where:  {hook} corresponds to PRE_UPGRADE or POST_UPGRADE{version} corresponds to the version defined in the manifest.  Example: doc/PRE_UPGRADE.d/1.2.1~ynh1.md.  With the above example, the user will be notified with the content of this markdown file when they upgrade from a lower version of 1.2.1~ynh1 to this latter version or higher.  astuce You can easily increase the package version directly from a comment in a Pull Request on Github by posting !bump. The YunoHost bot will automatically add 1 to the package version (~ynh1 to ~ynh2, for instance).  astuce You can add a PRE_UPGRADE message directly from a comment in a Pull Request on Github by posting !changelog &lt;text&gt;, !pre_upgrade &lt;text&gt;, or !preupgrade &lt;text&gt;. The YunoHost bot will automatically create the appropriate file with the &lt;text&gt; you wrote.  ","version":"Next","tagName":"h3"},{"title":"Localization‚Äã","type":1,"pageTitle":"Documenting apps","url":"/doc/pr-2675/fr/dev/packaging/doc#localization","content":" All notes' markdown file can optionally be localized using via a filename suffix with the following format: doc/{hook}_{locale}.md or doc/{hook}.d/{version}_{locale}.md. Without locale suffix, a file will be considered to be the English locale (i.e. doc/PRE_UPGRADE.md is equivalent to doc/PRE_UPGRADE_en.md).  Examples:  doc/POST_INSTALL_fr.md will be displayed after each install of the given app where the Yunohost instance's language is set to French.doc/POST_UPGRADE.d/2025.04.02~ynh1_es.md will be displayed after upgrading to version 2025.04.02~ynh1 or newer of the given app where the Yunohost instance's language is set to Spanish. ","version":"Next","tagName":"h3"},{"title":"Config Panels","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels","content":"","keywords":"","version":"Next"},{"title":"Community examples‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#community-examples","content":" Check the example_ynh app toml and the basic scripts/config exampleCheck config panels of other appsCheck scripts/config of other apps  ","version":"Next","tagName":"h2"},{"title":"Overview‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#overview","content":" From an app packager perspective, config panels are defined in config_panel.toml at the root of the app repository. It is coupled to the scripts/config script, which may be used to define custom getters/setters/validations/actions. However, most use cases should be covered automagically by the core, thus it may not be necessary to define such a config script at all!  The config_panel.toml describes one or several panels, containing sections, each containing questions generally binded to a params in the app's actual configuration files.  Let's imagine that the upstream app is configured using this simple config.yml file stored in the app's install directory (typically /var/www/$app/config.yml):  title: 'My dummy app' theme: 'white' max_rate: 10 max_age: 365   A simple configuration panel can be created with this syntax:  version = &quot;1.0&quot; [main] [main.main] [main.main.title] ask.en = &quot;Title&quot; type = &quot;string&quot; bind = &quot;:__INSTALL_DIR__/config.yml&quot; [main.main.theme] ask.en = &quot;Theme&quot; type = &quot;select&quot; choices = [&quot;white&quot;, &quot;dark&quot;] bind = &quot;:__INSTALL_DIR__/config.yml&quot; [main.limits] [main.limits.max_rate] ask.en = &quot;Maximum display rate&quot; type = &quot;number&quot; bind = &quot;:__INSTALL_DIR__/config.yml&quot; [main.limits.max_age] ask.en = &quot;Duration of a dummy&quot; type = &quot;number&quot; bind = &quot;:__INSTALL_DIR__/config.yml&quot;   Here, a main panel is created, containing the main and limits sections, containing questions corresponding to app options in config.yml file. Thanks to the bind property, all those questions are read/written to their values in the actual config.yml file.  ","version":"Next","tagName":"h2"},{"title":"Supported questions types and properties‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#supported-questions-types-and-properties","content":" You can learn more about the full list of option types and their properties in their dedicated page.  ","version":"Next","tagName":"h2"},{"title":"The \"bind\" statement‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#the-bind-statement","content":" Without any bind statement attached to a config panel property, values are only read/written from/to the app's settings file (/etc/yunohost/$app/settings.yml). This is usually not very useful in practice.  Using bind = &quot;:/some/config/file&quot;, one declares that the actual truth used by the app lives in /some/config/file. The config panel will read/write the value from/to this file. YunoHost will automagically adapt to classic formats such as YAML, TOML, JSON, INI, PHP, .env-like and .py. (At least, assuming we're dealing with simple key&lt;-&gt;value mappings)  A simple real-life example looks like:  [main.main.theme] type = &quot;string&quot; bind = &quot;:__INSTALL_DIR__/config.yml&quot;   In which case, YunoHost will look for something like a key/value, with the key being theme inside the app's config.yml.  If the question id in the config panel (here, theme) differs from the key in the actual conf file (let's say it's not theme but css_theme), then the syntax becomes:  [main.main.theme] type = &quot;string&quot; bind = &quot;css_theme:__FINALPATH__/config.yml&quot;   You may also encounter situations such as:  { &quot;foo&quot;: { &quot;max&quot;: 123 }, &quot;bar&quot;: { &quot;max&quot;: 456 } }   In which case if we want to interface with foo's max value, let's write:  bind = &quot;foo&gt;max:__INSTALL_DIR__/conf.json&quot;   ","version":"Next","tagName":"h2"},{"title":"\"Binding\" to an entire file‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#binding-to-an-entire-file","content":" Useful when using a question file or text for which you want to save the raw content directly as a file on the system.  For example to be able to manipulate an image:  [panel.section.logo] type = &quot;file&quot; bind = &quot;__INSTALL_DIR__/assets/logo.png&quot;   Or an entire text file:  [panel.section.config_content] type = &quot;text&quot; bind = &quot;__INSTALL_DIR__/config.ini&quot; default = &quot;This is the default content&quot;   ","version":"Next","tagName":"h3"},{"title":"Custom getters/setters/validators (a.k.a bind=null)‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#custom-getterssettersvalidators-aka-bindnull","content":" More complex use-case may appear, such as:  you want to expose some &quot;dynamic&quot; information in the config panel, such as computed health status, computed disk usage, dynamic list of options, ...password handling, where the data may be written but can't be readthe config file format is not supported (e.g. xml, csv, ...)...  You can create specific getter/setters functions inside the config script of the app to customize how the information is read/written. The basic structure of the script is:  #!/bin/bash source /usr/share/yunohost/helpers ynh_abort_if_errors # Put your getter, setter, validator or action here # Keep this last line ynh_app_config_run $1   Custom getters‚Äã  A question's getter is the function used to read the current value/state. Custom getters are defined using bash functions called getter__QUESTION_SHORT_KEY() which returns data through stdout.  Stdout can be generated into one of those formats:  either just the raw value,or a YAML message, containing the value and other metadata and properties (for example the style of an alert, the list of available choices of a select, etc.) Note that in the first case, if the raw value contains any yaml-sensitive character (e.g. # which is interpreted as a comment in yaml), make sure it is returned between escaped quotes (cf. dedicated example below) as it will be converted to yaml by YunoHost core in the end.  Basic example with raw stdout: get the timezone on the system config_panel.toml [main.main.timezone] ask = &quot;Timezone&quot; type = &quot;string&quot; scripts/config get__timezone() { echo &quot;$(cat /etc/timezone)&quot; }   Basic example with raw stdout containing a yaml-sensitive character: return a HTML color code matched in a file config_panel.toml [main.default_colors.background] ask = &quot;Default background color&quot; type = &quot;color&quot; default = &quot;#cccccc&quot; scripts/config get__background() { current_color=$(grep 'id=&quot;backgroundColorPicker' &quot;$install_dir/index.html&quot; | grep -oP 'value=&quot;\\K[^&quot;]*') # e.g. #2B748B # explicitely add escaped quotes to protect YAML-sensitive comment char ('#') echo &quot;\\&quot;$current_color\\&quot;&quot; }   Basic example with yaml-formated stdout : Display a list of available plugins config_panel.toml [main.plugins.plugins] ask = &quot;Plugin to activate&quot; type = &quot;tags&quot; choices = [] scripts/config get__plugins() { echo &quot;choices: [$(ls $install_dir/plugins/ | tr '\\n' ',')]&quot; }   Advanced example with yaml-formated stdout : Display the status of a VPN config_panel.toml [main.cube.status] ask = &quot;Custom getter alert&quot; type = &quot;alert&quot; style = &quot;info&quot; bind = &quot;null&quot; # no behaviour on scripts/config get__status() { if [ -f &quot;/sys/class/net/tun0/operstate&quot; ] &amp;&amp; [ &quot;$(cat /sys/class/net/tun0/operstate)&quot; == &quot;up&quot; ] then cat &lt;&lt; EOF style: success ask: en: Your VPN is running :) EOF else cat &lt;&lt; EOF style: danger ask: en: Your VPN is down EOF fi }   Custom setters‚Äã  A question's setter is the function used to set new value/state. Custom setters are defined using bash functions called setter__QUESTION_SHORT_KEY(). In the context of the setter function, variables named with the various quetion's short keys are avaible ... for example the user-specified date for question [main.main.theme] is available as $theme.  When doing non-trivial operations to set a value, you may want to use ynh_print_info to inform the admin about what's going on.  Basic example : Set the system timezone config_panel.toml [main.main.timezone] ask = &quot;Timezone&quot; type = &quot;string&quot; scripts/config set__timezone() { echo &quot;$timezone&quot; &gt; /etc/timezone ynh_print_info &quot;The timezone has been changed to $timezone&quot; }   ","version":"Next","tagName":"h3"},{"title":"User input validations‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#user-input-validations","content":" You will sometimes need to validate data provided by the user before saving it.  Simple validation can be achieved using a regex pattern:  pattern.regexp = '^.+@.+$' pattern.error = 'An email is required for this field'   You can also restrict the accepted values using a choices list.  choices.foo = &quot;Foo (some explanation)&quot; choices.bar = &quot;Bar (moar explanation)&quot; choices.loremipsum = &quot;Lorem Ipsum Dolor Sit Amet&quot;   Some other type specific argument exist like  type\tvalidation argumentsnumber, range\tmin, max, step file\taccept boolean\tyes no  See also : custom validators  ","version":"Next","tagName":"h2"},{"title":"Custom validators‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#custom-validators","content":" In addition to the &quot;simple&quot; validation mechanism (see the 'option' doc), custom validators can be defined in a similar fashion as custom getters/setters:  validate__login_user() { if [[ &quot;${#login_user}&quot; -lt 4 ]] then echo 'User login is too short, should be at least 4 chars' fi }   ","version":"Next","tagName":"h3"},{"title":"visible & enabled expression evaluation‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#visible--enabled-expression-evaluation","content":" Sometimes we may want to conditionaly display a message or prompt for a value, for this we have the visible prop. And we may want to allow a user to trigger an action only if some condition are met, for this we have the enabled prop.  Expressions are evaluated against a context containing previous values of the current section's options. This quite limited current design exists because on the web-admin or on the CLI we cannot guarantee that a value will be present in the form if the user queried only a single panel/section/option. In the case of an action, the user will be shown or asked for each of the options of the section in which the button is present.  The expression has to be written in javascript (this has been designed for the web-admin first and is converted to python on the fly on the cli).  Available operators are: ==, !=, &gt;, &gt;=, &lt;, &lt;=, !, &amp;&amp;, ||, +, -, *, /, % and match().  ","version":"Next","tagName":"h2"},{"title":"Examples‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#examples","content":" # simple &quot;my_option_id&quot; is thruthy/falsy visible = &quot;my_option_id&quot; visible = &quot;!my_option_id&quot; # misc visible = &quot;my_value &gt;= 10&quot; visible = &quot;-(my_value + 1) &lt; 0&quot; visible = &quot;!!my_value || my_other_value&quot;   For a more complete set of examples, check the tests at the end of the file.  ","version":"Next","tagName":"h3"},{"title":"match()‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#match","content":" For more complex evaluation we can use regex matching.  [my_string] default = &quot;Lorem ipsum dolor et si qua met!&quot; [my_boolean] type = &quot;boolean&quot; visible = &quot;my_string &amp;&amp; match(my_string, '^Lorem [ia]psumE?')&quot;   Match the content of a file.  [my_file] type = &quot;file&quot; accept = &quot;.txt&quot; bind = &quot;/etc/random/lorem.txt&quot; [my_boolean] type = &quot;boolean&quot; visible = &quot;my_file &amp;&amp; match(my_file, '^Lorem [ia]psumE?')&quot;   with a file with content like:  Lorem ipsum dolor et si qua met!   ","version":"Next","tagName":"h3"},{"title":"Actions‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#actions","content":" &quot;Actions&quot; correspond to config panel buttons triggering specific pieces of code. For example, one could implement an action to trigger a scan of Nextcloud files, or install a plugin inside an app that does not already provide an interface to do so. In core config panels, buttons are for example used to trigger certificate renewal.  The most basic example looks like this, using type = 'button':  [panel.section.my_action] type = &quot;button&quot; ask = &quot;Run action&quot; # (NB: no need to set `bind` to &quot;null&quot;)   And then defining the controller, prefixed by run__ inside the app's config script:  run__my_action() { ynh_print_info &quot;Running 'my_action'...&quot; }   You may build more complex actions, where the actions uses other form inputs:  [panel.my_action_section] name = &quot;Action section&quot; [panel.my_action_section.my_repo] type = &quot;url&quot; bind = &quot;null&quot; # this value won't be saved as a setting, it's ephemeral and only relevant for the action ask = &quot;gimme a repo link&quot; [panel.my_action_section.my_repo_name] type = &quot;string&quot; bind = &quot;null&quot; # this value won't be saved as a setting, it's ephemeral and only relevant for the action ask = &quot;gimme a custom folder name&quot; [panel.my_action_section.my_action] type = &quot;button&quot; ask = &quot;Clone the repo&quot; # the button is clickable only once the previous values are provided enabled = &quot;my_repo &amp;&amp; my_repo_name&quot;   run__my_action() { ynh_print_info &quot;Cloning '$my_repo'...&quot; cd /tmp git clone &quot;$my_repo&quot; &quot;$my_repo_name&quot; }   ","version":"Next","tagName":"h2"},{"title":"Overwrite config panel mechanism‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#overwrite-config-panel-mechanism","content":" All main configuration helpers are overwritable, example:  ynh_app_config_apply() { # Stop vpn client touch /tmp/.ynh-vpnclient-stopped systemctl stop ynh-vpnclient _ynh_app_config_apply # Start vpn client systemctl start ynh-vpnclient rm -f /tmp/.ynh-vpnclient-stopped }   List of main configuration helpers:  ynh_app_config_getynh_app_config_showynh_app_config_validateynh_app_config_applyynh_app_config_run  More info on this can be found by reading vpnclient_ynh config script  ","version":"Next","tagName":"h2"},{"title":"Important technical notes‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#important-technical-notes","content":" ","version":"Next","tagName":"h2"},{"title":"Options short keys have to be unique‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#options-short-keys-have-to-be-unique","content":" For performance reasons, questions short keys have to be unique in all the config_panel.toml file, not just inside its panel or its section. Hence it's not possible to have:  [manual.vpn.server_ip] [advanced.dns.server_ip]   In which two questions have &quot;real variable name&quot; is server_ip and therefore conflict with each other.  attention Some short keys are forbidden cause it can interfer with config scripts (old, file_hash, types, binds, formats, changed) and you probably should avoid to use common settings name to avoid to bind your question to this settings (e.g. id, install_time, mysql_pwd, path, domain, port, db_name, current_revision, admin)  ","version":"Next","tagName":"h3"},{"title":"bind versus app settings‚Äã","type":1,"pageTitle":"Config Panels","url":"/doc/pr-2675/fr/dev/packaging/advanced/config_panels#bind-versus-app-settings","content":" attention IMPORTANT: with the exception of bind = &quot;null&quot; options, options ids should almost always correspond to an app setting initialized/reused during install/upgrade.  Not doing so may result in inconsistencies between the config panel mechanism and the use of ynh_add_config. See also the relevant issue. ","version":"Next","tagName":"h3"},{"title":"manifest.toml","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/manifest","content":"","keywords":"","version":"Next"},{"title":"General information‚Äã","type":1,"pageTitle":"manifest.toml","url":"/doc/pr-2675/fr/dev/packaging/manifest#general-information","content":" packaging_format = 2 id = &quot;helloworld&quot; name = &quot;Hello World&quot; description.en = &quot;A dummy basic app to illustrate YunoHost's app packaging.&quot; description.fr = &quot;Une app simple et bidon pour illustrer comme le packaging d'app de YunoHost fonctionne&quot; version = &quot;0.1~ynh1&quot; maintainers = [&quot;alexAubin&quot;]   packaging_format (int) is the packaging version format used to package this app. Newly packaged apps are strongly encouraged to use the new &quot;v2&quot; format (starting with YunoHost 11.1) while older apps may still be in &quot;v1&quot; format.id (str) is expected to be lower-case alphanumeric (and possibly -). This is what will be used for instance in the syntax yunohost app install &lt;app_id&gt;. This will also be the name of various folder or conf files such as /etc/yunohost/apps/&lt;app_id&gt; or /etc/nginx/conf.d/&lt;domain&gt;.d/&lt;app_id&gt;.conf (if applicable), and a dedicated system user.name (str) is the display name of the app, shown for example in the webadmin UI or user portal. It is limited to 23 chars (though not sure why this number?).description (dict of lang code-&gt;str) contains short, concise descriptions of the app in different languages (at least en). It is limited to 150 chars. It will be displayed on the app catalog and should allow people to understand what this app is about at a glance. A more extensive description of the app can be provided in doc/DESCRIPTION.md.version (str) is composed of the upstream version of the app shipped, and an ~ynhX suffix. Changing this version is what effectively triggers an available upgrade for YunoHost instances which installed this package (hence no upgrade will be displayed as available if you forget to change it). The point of the ~ynhX suffix is to have a way to increment the version when commiting changes unrelated to the upstream but still trigger an upgrade.maintainers (list or str) may allow to declare which person should be the referring person for this package (though packages are often maintained collectively and not really used in practice). This should contain a list of easily identifiable persons (eg your GitHub or Matrix username)  ","version":"Next","tagName":"h2"},{"title":"Upstream section‚Äã","type":1,"pageTitle":"manifest.toml","url":"/doc/pr-2675/fr/dev/packaging/manifest#upstream-section","content":" This section is meant to provide various metadata about the app upstream such that YunoHost admins can easily obtain further information regarding this app (or, kinda important, try the upstream's demo before deciding to install it).  Apart from the license, all fields are optional and should only be provided if they are relevant (e.g. don't provide website if the upstream project has no website...)  [upstream] license = &quot;WTFPL&quot; website = &quot;https://www.hello-world.com/&quot; code = &quot;https://github.com/octocat/Hello-World&quot; demo = ... admindoc = ... userdoc = ...   license (str) : the license code of the upstream project. (Note that only apps based on free software will be accepted in the official YunoHost app catalog.). The license code should be a valid SPDX identified.(optional) website (url) : the url of the upstream project's website, if there is indeed a website (please don't just copypasta the git repo url)(optional) demo (url) : an url where people can try out the app before installing it (ideally maintained by the upstream project)(optional) code (url) : the url of the upstream project's code repository, which is very much expected to exist for free software ... but may not exist for special &quot;no upstream&quot; apps ;)(optional) admindoc (url) : the url of the upstream project's admin documentation, which may help YunoHost admins with adminstrating the app (YunoHost-specific documentation can be provided in doc/ADMIN.md).(optional) userdoc (url) : the url of the upstream project's user documentation, which may help YunoHost end-users with effectively using the app.(optional) cpe (str) corresponds to the Common Platform Enumerations code in NIST db. For example for Wekan this is cpe:2.3:a:wekan_project:wekan. Not really used at the moment, but may be used in the future to check for known vulnerabilities (CVE) in the app catalog.  ","version":"Next","tagName":"h2"},{"title":"Integration section‚Äã","type":1,"pageTitle":"manifest.toml","url":"/doc/pr-2675/fr/dev/packaging/manifest#integration-section","content":" This section is meant to contain info related to the relation between the app and YunoHost, or things like typical resource usage.  [integration] yunohost = &quot;&gt;= 11.1&quot; helpers_version = &quot;2.1&quot; architectures = &quot;all&quot; multi_instance = false ldap = &quot;not_relevant&quot; sso = &quot;not_relevant&quot; disk = &quot;1M&quot; ram.build = &quot;1M&quot; ram.runtime = &quot;1M&quot;   yunohost (str) contains the minimum YunoHost version required for this app to work.helpers_version (str) contains the version of the package helpers used by the application; supported versions are 2.0 and 2.1architectures : &quot;all&quot; OR a list of supported archs using the dpkg --print-architecture nomenclature, i.e. among : amd64 (= x86 64bit), i386 (= x86 32bit), armhf (= ARM 32bit), arm64 (= ARM 64bit)multi_instance (bool) : wether or not the app supports being installed multiple time (in which case, during installation, the actual app id is not just the id of the manifest, but something like hellowold__2, helloworld__3, etc. for subsequent installs)ldap (bool OR &quot;not_relevant&quot;) : not to confused with the sso key : this corresponds to wether or not the app is configured to use YunoHost's LDAP DB as the user account DB. This should be set to &quot;not_relevant&quot; if and only if there is no notion of user account for this app (for example, Hextris). LDAP integration is often a prerequisite for the SSO to work.sso (bool OR &quot;not_relevant&quot;) : not to be confused with the ldap key : this corresponds to wether or not a user is automatically logged-in on the app when logged-in on the YunoHost portal. This should be set to &quot;not_relevant&quot; if and only if there is no notion of user account for this app (for example, Hextris).disk (size) : an estimate minimum disk requirement. For example: 20M, 400M, 1G, ...ram.build (size) : an estimate minimum ram requirement when building the app (this may be way different than ram.runtime because some apps have a peak 1~2G RAM when building sometimes...). For example: 50M, 400M, 1G, ...ram.runtime (size) : an estimate minimum ram requirement when the app is active and running. For example: 50M, 400M, 1G, ...  ","version":"Next","tagName":"h2"},{"title":"Antifeatures‚Äã","type":1,"pageTitle":"manifest.toml","url":"/doc/pr-2675/fr/dev/packaging/manifest#antifeatures","content":" This section is completely optional and, for most apps, doesn't exist at all.  Some applications have limitations, they might be due to non-free dependencies, arbitrary limitations, etc. YunoHost provides UI in the catalog to show such antifeatures.  The declaration of antifeatures is a 3-steps process:  Find the relevant antifeature in the list of supported antifeatures Declare the app's antifeature in the app catalog Describe the app's antifeature in its manifest.toml: [antifeatures] arbitrary-limitations.en = &quot;Some description about the specific limitations of this app.&quot;   The format of this section is a dict where keys are antifeature IDs, and the values are translated strings (dict of lang code-&gt;str).  ","version":"Next","tagName":"h2"},{"title":"Install questions‚Äã","type":1,"pageTitle":"manifest.toml","url":"/doc/pr-2675/fr/dev/packaging/manifest#install-questions","content":" This section contains questions that should be asked to the admin prior to starting the actual install  [install] [install.domain] # this is a generic question - ask strings are automatically handled by YunoHost's core type = &quot;domain&quot; [install.path] # this is a generic question - ask strings are automatically handled by YunoHost's core type = &quot;path&quot; default = &quot;/helloworld&quot; [install.init_main_permission] # this is a generic question - ask strings are automatically handled by YunoHost's core type = &quot;group&quot; default = &quot;visitors&quot; [install.prefered_pet] ask.en = &quot;Do you prefer cats or dogs?&quot; help.en = &quot;Think carefully!&quot; type = &quot;string&quot; choices.cat = &quot;Cats :3 !&quot; choices.dog = &quot;Doggos &lt;3&quot; choices.both = &quot;OMG Both ! I can't choose !&quot;   domain and path (with type = &quot;domain&quot;/&quot;path&quot;) are classic questions to allow the admin to choose where the app is installed (in terms of web url endpoint) e.g. if the admin answers domain.tld and /foobar, the app will be available under domain.tld/foobarsome webapp do require a full dedicated domain and do not support the &quot;subpath&quot; install scheme. In that case, you typically want to remove the path question entirelythese questions are part of YunoHost's generic app questions and therefore you do not need to define the ask.en strings that contain the actual question displayed in the UI along the line of &quot;Choose a domain to install this app on&quot; init_main_permission is also a classic question (similar to is_public in v1 packaging) and define what user group will be able to access the app after it is installed. Typical answer are : visitors (= everybody including anonymous users, the app is &quot;public&quot;), all_users (= only people with a YunoHost account, the app is &quot;private&quot;), or any custom user group that may have been defined by the YunoHost admins prior to the install.prefered_pet is a custom question: ask.en defines the human-readable question to be asked (at least the english version)help.en is an optional additional message to provide further info about this questiontype is the type of question, in this case stringin this example, we don't want a free user input but choosing between cat, dog or both (with proper human-readable versions of these choices)this will later automatically create a YunoHost app setting named prefered_pet.. and in the bash install script, the bash variable will automatically be available $prefered_pet with the chosen value  ","version":"Next","tagName":"h2"},{"title":"Regarding install question types‚Äã","type":1,"pageTitle":"manifest.toml","url":"/doc/pr-2675/fr/dev/packaging/manifest#regarding-install-question-types","content":" FIXME : This should be way more documented in a separate section (and is also related to config panels...)  The full list of question types is : string, text, select, tags, email, url, date, time, color, password, path, boolean, domain, user, group, number, range, alert, markdown, file, app.  password-type questions have special behavior and are NOT automatically saved as setting (user-chosen password should ideally not be stored, at least not hashed...)  Every install question is not necessarily mandatory (e.g. a question to propose to add an api key for a better user experience, although the app still works without). To make those questions optional, just write optional = true.  ","version":"Next","tagName":"h3"},{"title":"Resource system‚Äã","type":1,"pageTitle":"manifest.toml","url":"/doc/pr-2675/fr/dev/packaging/manifest#resource-system","content":" The resource section corresponds to recurring app needs that are to be provisioned/deprovisioned by the core of YunoHost. They include for example: downloading the app's sources, creating a system user, installing apt dependencies, creating the install dir, creating the data dir, finding an available internal port, configuring permissions, initializing an SQL database... Each resource is to be provisioned before running the install script, deprovisioned after the remove script, and automatically upgraded if needed before running the upgrade script (or provisionned if introduced in the new app version, or deprovisioned if removed w.r.t. the previous app version)  [resources] ```toml [resources.sources.main] url = &quot;https://some.domain/url/where/to/download/the/app/sources.tar.gz&quot; sha256 = &quot;0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef&quot; [resources.system_user] [resources.install_dir] [resources.permissions] main.url = &quot;/&quot; [resources.apt] packages = &quot;nyancat, lolcat, sl&quot;   In this example:  sources.main: the URL+checksum from which the app sources will be downloaded + validatedsystem_user: a system (unix) user will be created for this app, using the app id as username.install_dir: an install dir will be initialized, named /var/www/$app by default. Additional owner and group property allow to change the owner/group and r/w/x permissions on the created folder.permissions: an SSOwat $app.main permission will be initialized such that the SSO allows access to the app's endpoint according to the chosen init_main_permission question. The main.url = &quot;/&quot; is here to tell that the main endpoint is the &quot;root&quot; of the app, that is https://domain.tld/helloworld/ if the app is installed with domain=domain.tld and path=/helloworldapt: the packages nyancat, lolcat, sl will be installed with apt. These are just dummy apt dependencies to illustrate the syntax.  ","version":"Next","tagName":"h2"},{"title":"List of app resources‚Äã","type":1,"pageTitle":"manifest.toml","url":"/doc/pr-2675/fr/dev/packaging/manifest#list-of-app-resources","content":" The full documentation on resources is available here. ","version":"Next","tagName":"h3"},{"title":"Use Git to package apps","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git","content":"","keywords":"","version":"Next"},{"title":"Working with GitHub‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#working-with-github","content":" Let's go first for the easy part, GitHub comes with an &quot;easy&quot; web interface to deal with.  First things first, unfortunately there's no way around, you need an account on GitHub.  ","version":"Next","tagName":"h2"},{"title":"Branches‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#branches","content":" Then, probably one of the most important thing, do not work directly on the master branch. Sorry, it has to be said !  Branches are, as GitHub explains, &quot;a parallel version of a repository. It is contained within the repository, but does not affect the other branches. Allowing you to work freely without disrupting the &quot;live&quot; version.&quot;  The master branch is the branch that contains the version of the app users will actually install and use. The usual thing to do is to work from the testing branch, and when everything is settled and tested, you can merge the testing branch in master, so users will enjoy the new release of your package.  To see and change the current branch, use this button:   ","version":"Next","tagName":"h3"},{"title":"Edit a file‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#edit-a-file","content":" Now that you're on the right branch, let's see how to edit a file on GitHub.  You can edit any file by using the small pencil icon:   If you don't have the permission to write on the repository, you will see (as on the picture) that you're going to create a fork (we'll see below what a fork is). If you have the permission to write, you will just edit the file, without forking.  ","version":"Next","tagName":"h3"},{"title":"Commit your changes‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#commit-your-changes","content":" When you're done with your modification on the file, you can commit your changes. Behind that word, the idea is quite simple, you're just going to save your changes...   The first field is the name of your commit, a very short sentence to explain why you did this modification. The second field is a large one for a more complete explanation, if you need it.  Finally, if you're editing a repository on which you have permission to write, you can either commit directly to the current branch or create a new branch. It's usually better to create a new branch, that way you keep your modifications on a parallel version of the repository. Your modifications will be discussed in a pull request (explained below) then finally merged into the original branch.  ","version":"Next","tagName":"h3"},{"title":"To fork or not to fork‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#to-fork-or-not-to-fork","content":" A fork is a copy of a repository into your own account. We have seen before that if you don't have permission to write into a repository, editing a file will automatically create a fork. Because the fork is on your account, you always have the permission to write on it. But even if a fork is not the real repository, but just a copy, a fork is always linked to its parent. We'll see later that to create a fork is really useful when opening a pull request.  When you create a new package, it's common to use the example app as a base. But, because you don't want to keep that link to the example app, you should not fork the example app. You will rather clone the app. Unfortunately, to clone an app is a little bit trickier on GitHub. We will see later how to clone to a local repository instead.  We have seen how to edit a file, and how this could fork the app. But, when you want to edit multiple files, the GitHub interface isn't really the best way. In such situation, you would rather clone the repository and work on a local repository. You may still need to fork on your own account to be able to save your modifications if you don't have the permission on the distant repository.  ","version":"Next","tagName":"h3"},{"title":"Pull request‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#pull-request","content":" After you have committed your changes, whether on a branch or a fork, you want to propose your modifications to be integrated into the main repository, or the original branch. To do so, you're going to create a pull request. GitHub usually ask you directly if you want to do so. Otherwise, you'll find the button to create a pull request just here:   When creating a pull request from a fork, to ease the work of the reviewers, do never uncheck the checkbox Allow edits from maintainers. That option simply allow the maintainers of the original repository to edit directly your work.  ","version":"Next","tagName":"h3"},{"title":"YunoHost-Apps organization‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#yunohost-apps-organization","content":" Following the guide for packaging application within YunoHost, your app has to be into the YunoHost-Apps organization, but if you have never contributed to an app before or never had any app into this organization you may not have the permission.  First, you need the permission to write into the organization, to do so, ask to the Apps group on the Apps XMPP room.  To transfer your app to the YunoHost-Apps organization, go to your repository and to Settings tab. At the bottom of the page, you will find Transfer ownership. Into the field New owner‚Äôs GitHub username or organization name, type YunoHost-Apps. Your repo will be moved into the organization, you don't have to remove the original repository.  ","version":"Next","tagName":"h3"},{"title":"Working with Git locally‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#working-with-git-locally","content":" As we have seen, you can do a lot of things directly on GitHub. But when you need to edit multiple files, or when you need to work on your code on your own, it's better to work directly on your computer.  Before going to the hellish part of Git, let's see two different ways to start working with Git.  ","version":"Next","tagName":"h2"},{"title":"First case: Creating a new package‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#first-case-creating-a-new-package","content":" You have shockingly discovered that the wonderful app you love to use everyday does not yet have its YunoHost package. And because you're nice, you decided to create yourself the package, so everyone will enjoy that app the way you do. What a good idea!  The best is to start from the example app. But as we have explained before, you don't want to fork, because if you do so, you're going to keep that link to the example app and it's really annoying. So, you're going to do it differently. You're going to clone!  git clone‚Äã  To clone, you're going to do:  git clone https://github.com/YunoHost/example_ynh   git clone will download a copy of the repository. You will have the complete repository, with its branches, commits, and everything (into that apparently little .git directory).  To git clone is usually the starting point of any local work with Git.  A side note though, if you expect to send your modifications back to the distant repository on GitHub, be sure to have the permission to write on this repository. Otherwise, fork before and clone your fork, on which you do have the permission.  My brand new package, continued‚Äã  In the context of a new package, you will also need to create a repository on GitHub to nest your package. Which is as simple as a big green New button. Don't bother with README, .gitignore or license. Just create the repository itself. you can now git clone that new repository.   You now have 2 repositories cloned on your computer. Copy all the files from the example_ynh app, except the .git directory (You just want the files themselves) to your new package.  If you want, you can remove the example_ynh app. We don't need it anymore.  You're ready to work on your new package !  ","version":"Next","tagName":"h3"},{"title":"Second case: Working locally on a repository‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#second-case-working-locally-on-a-repository","content":" You already have a repository, but what you want is just to work locally, so you can modify multiple files. Simply clone the repository, the .git directory is the link to the distant repository. Nothing else to do than a git clone.  ","version":"Next","tagName":"h3"},{"title":"Branches‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#branches-1","content":" You do have your local copy of the repository, but because you have read carefully this documentation until then, you know that you should be sure to be on the testing branch before starting to work.  To see the branches, and to know on which you actually are, while into the directory of your repository, type git branch. The current branch is highlighted and preceded by a *.  ","version":"Next","tagName":"h3"},{"title":"git checkout‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#git-checkout","content":" If it appears that you're not on the branch you wanted to be, or you're actually on master (which is bad !), you can move to another branch with git checkout  git checkout testing   Read carefully what Git says when you validate a command, do never forget that Git is sneaky...  ","version":"Next","tagName":"h3"},{"title":"git pull before anything else‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#git-pull-before-anything-else","content":" You're finally on the right branch, and ready to work. Wait ! A nasty trap is waiting for you... Before ending up in an inextricable situation. Start with a git pull to update your branch to the latest change from the distant repository.  Sometimes, you will encounter an impossible situation where Git is saying that you can't pull because you have local changes. But you don't care of those local modifications, you just want to get the last version of the distant branch. But Git don't care about what YOU want... I have to admit that my only solution is as highly efficient as dirty... A good old rm -r of the repository and a git clone  ","version":"Next","tagName":"h3"},{"title":"Let's work‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#lets-work","content":" Eventually, you can work on your code. When you are finally ok with what you have done, it's time to validate your work.  The first step is to inform Git about which file(s) to validate. To do so, we'll use git add  git add my_file git add my_other_file and_also_this_one   If you want to validate all your work, you can also simply do  git add --all   To check the current status of your validation, you can use git status. It will show you which files will be included into your commit, and which files are modified, but not yet included. git status -v will show also which part of the files are modified. A good way to be sure that you didn't make a mistake before committing.  ","version":"Next","tagName":"h3"},{"title":"git checkout -b‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#git-checkout--b","content":" Before committing, or after, or before starting to work. Whenever you feel like it ! You should consider adding your work to a separate branch, that way, it will be easy to create a pull request to merge into the testing branch and discuss with the other packagers what you suggest to change.  To create a new branch and move to this branch, you can use git checkout -b my_new_branch.  ","version":"Next","tagName":"h3"},{"title":"git commit‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#git-commit","content":" To commit is simply to validate your work in Git. As you can do in GitHub. To have the same fields that you had on GitHub, with the name of the commit, and a longer explanation. You can simply use git commit. The first line, before the comments, is for the name of the commit. After all the comments, you can add an explanation if you want to.  If you want to commit with only a name for your commit, you can use a simple command:  git commit -m &quot;My commit name&quot;   ","version":"Next","tagName":"h3"},{"title":"Push to the distant repository‚Äã","type":1,"pageTitle":"Use Git to package apps","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_git#push-to-the-distant-repository","content":" Your changes are validated, but only on your local clone of the repository. Now, you have to send those modifications back to the distant repository on GitHub. In order to do that, you need to know what is your current branch. (If you don't know, git branch will give you that info). Then you can git push  git push -u origin BRANCH_NAME  ","version":"Next","tagName":"h3"},{"title":"Create a development environment with VirtualBox","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_virtualbox","content":"","keywords":"","version":"Next"},{"title":"Why use VirtualBox rather than an actual YunoHost production server to package an application?‚Äã","type":1,"pageTitle":"Create a development environment with VirtualBox","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_virtualbox#why-use-virtualbox-rather-than-an-actual-yunohost-production-server-to-package-an-application","content":" There are mostly two reasons why one should prefer a virtual server rather than their own server:  You can freely torture a virtual server without any risk of breaking it, since you can always restore it to a former working state. It would really be a pity to break your own real server!In a typical workflow, a virtual server state would be restored from a known snapshot before starting any work on it, so as to always keep a clean system, without any residues of a former installation. This allows to always be as close a possible to a user first installation.  We will discuss VirtualBox in this guide, as it comes with an easy to use GUI. If you prefer a pure commandline approach to handling your virtual machine, you should use ynh-dev instead.  ","version":"Next","tagName":"h2"},{"title":"Installing VirtualBox‚Äã","type":1,"pageTitle":"Create a development environment with VirtualBox","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_virtualbox#installing-virtualbox","content":" From a GNU/Linux system, simply install the virtualbox-qt package. From a Windows or macOS machine, you'd have to refer to the VirtualBox download page to fetch the appropriate installation package. The virtualbox package is deprecated since Debian 9, a .deb installation package is available on the abovementioned referenced page.  Whatever your system, there should be no need to install the extension pack or the guest addons.  ","version":"Next","tagName":"h2"},{"title":"Installing YunoHost on VirtualBox‚Äã","type":1,"pageTitle":"Create a development environment with VirtualBox","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_virtualbox#installing-yunohost-on-virtualbox","content":" Simply follow the appropriate documentation for installing on VirtualBox then the post-installation guide.  During post-install, there is no need to use an actual domain name in .nohost.me or .noho.st, as your virtual server won't be reachable from outside your local network. We prefer using a fake domain name which will remain associated with your local network, for instance yunohost.packaging.  This domain name, not being registered with any DNS server, will be stored in the hosts file of the computer which will need to access it. Please refer to the documentation about using a local DNS for more information.  Your virtual server is now installed. Before starting to use it, we'll see how to create a first snapshot and how to use that feature.  ","version":"Next","tagName":"h2"},{"title":"Using snapshots‚Äã","type":1,"pageTitle":"Create a development environment with VirtualBox","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_virtualbox#using-snapshots","content":" VirtualBox becomes even more interesting with its snapshotting feature, which allow to store the virtualized machine state and restore it quickly. We'll also see how to use multiple snapshot branches to work on different apps on the same machine.  ","version":"Next","tagName":"h2"},{"title":"Now, let's create a first snapshot‚Äã","type":1,"pageTitle":"Create a development environment with VirtualBox","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_virtualbox#now-lets-create-a-first-snapshot","content":" Before starting to play with the virtual machine, now is a good time to take a first snapshot, so that we don't have to redo the full install process every time. First, stop the virtual machine.  Managing snapshots is done in the 'Snapshots' tab  Here, we're creating a first snapshot  We can now start to work on the virtual machine and create as many snapshots as desired for each milestone of our modifications.    In this example, after having validated our particular package removal works fine, we can easily get back in time by restoring the virtual machine to its previous state with the package still installed. Once the package will be fully functional, it will just be a matter of deleting the snaphots associated with this package work to get the virtual machine back to its initial state. For our next test, we will then be back to a freshly installed YunoHost serveur, without any trace of package installation.  ","version":"Next","tagName":"h3"},{"title":"Using multiple snapshot branches‚Äã","type":1,"pageTitle":"Create a development environment with VirtualBox","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_virtualbox#using-multiple-snapshot-branches","content":" In addition to successive snapshots, it is also possible to create a new machine state and additional snapshots from an older machine snapshot/state.    In this example, I have created two branches since my successful package installation, so as to independently test just the application removal, upgrade and backup/restore steps. I eventually got back to the virtual machine base state to start a new test on another package, without dropping my former test whatsoever. At any time, it is possible to get back to a previous snapshot simply by restoring it. The machine always start on the &quot;Current state&quot; state.    It is always possible to create a new snapshot, whether the machine is stopped or not. To restore a snapshot however, the machine cannot be running.  ","version":"Next","tagName":"h3"},{"title":"How do we connect to the virtual machine?‚Äã","type":1,"pageTitle":"Create a development environment with VirtualBox","url":"/doc/pr-2675/fr/dev/packaging/misc/packaging_apps_virtualbox#how-do-we-connect-to-the-virtual-machine","content":" Virtual machine connection is similar to any YunoHost server connection, that is by using SSH.  ssh admin@my.domain   Or, if the domain has not been added to the hosts file, via its IP address.  ssh admin@11.22.33.44   We can now work on the virtual machine using the commandline.  To easily copy the package files or use a graphical text editor, one can also connect via SFTP using a file explorer.  It's a simple matter of using the sftp://admin@my.domain/ address.  Note: on Windows or macOS, the file explorer does not natively support the SFTP protocol... ","version":"Next","tagName":"h2"},{"title":"YunoHost's policy regarding the apps included in the official catalog","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/policy","content":"","keywords":"","version":"Next"},{"title":"License‚Äã","type":1,"pageTitle":"YunoHost's policy regarding the apps included in the official catalog","url":"/doc/pr-2675/fr/dev/packaging/policy#license","content":" The rule of thumb is that we only include software licensed under a free-software license in the official app catalog.  As YunoHost grew, some gray area cases appeared with software that would be relevant for YunoHost's goal and match its spirit, while not being strictly-speaking free-software. These applications may be:  promoting the use of centralized services, though precisely to avoid their direct usage ;relying on non-free dependencies or assets ;released under &quot;new&quot; post-open-source or ethical-yet-not-free licenses such as the ACSL, the HL3 or the CoopCycle License ;released under &quot;open-core&quot; models, trademark clauses, or business-related license clauses (such as the BSL) which are meant to ensure the project's sustainability while remaining ethical.  While we believe free software principles are an essential footstep towards YunoHost's goal, we believe they are a means and not an end. We reject the purist vision according to which software is either free or proprietary, and the flawed premise that technology is fundamentally neutral. We believe that ethical software and technology can and should exist beyond the definition of free software layed 40 years ago (see also: Freedom isn't Free and Post-Open Source).  The project therefore allows the inclusion inside the official app catalog, on a case-by-case basis, of apps which does not qualify as &quot;free software&quot;, yet considered to be ethical and worthy of interest for YunoHost's goal. Such apps are tagged in the catalog, such that an explicit message displayed before their installation.  If you notice an app is missing such a tag/disclaimer, feel free to open a discussion or pull requet on the app catalog.  If you run YunoHost for your business, you are responsible for doing your due diligence by checking the licenses of the software you want to install on your server.  ","version":"Next","tagName":"h3"},{"title":"Nature of the app‚Äã","type":1,"pageTitle":"YunoHost's policy regarding the apps included in the official catalog","url":"/doc/pr-2675/fr/dev/packaging/policy#nature-of-the-app","content":" In addition, the YunoHost team decided to not include apps in the official catalog if they:  are overly complex to deploy or resource-hungry compared to their features ;only apply to super niche use cases ;promote cryptocurrencies ;promote AI for purposes deemed futile compared to the ecological and sociological costs involved behind the scenes ;promote shady activities such as tracking/stalking people.  The team may make exceptions to these criteria on a case-by-case basis, on its own volition. The team may also amend this list with other criteria in the future.  ","version":"Next","tagName":"h3"},{"title":"What to do if you're not happy with these criterias‚Äã","type":1,"pageTitle":"YunoHost's policy regarding the apps included in the official catalog","url":"/doc/pr-2675/fr/dev/packaging/policy#what-to-do-if-youre-not-happy-with-these-criterias","content":" These editorial choices do not mean that apps infringing them cannot be created, merely that they won't be included in the official catalog. You are free to:  Develop your own application packages (though support may be limited due to aforementioned criteria)Manually install any application by using yunohost app install &lt;url_to_git_repo_ynh&gt;Create and add a custom catalog source within /etc/yunohost/apps_catalog.yml ","version":"Next","tagName":"h3"},{"title":"Publishing your app on the catalog","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/publish","content":"Publishing your app on the catalog The official YunoHost's app catalog is maintained in this repository, in particular the apps.toml file. For your app to be made available to everybody, you should make a pull request that adds your app inside the apps.toml(see the detailed instructions in the README). Before doing so, please make sure to check that your app is compatible with the official app catalog policy. Note that the &quot;real&quot; catalog used by YunoHost servers is https://app.yunohost.org/default/v3/apps.json which is rebuilt every 4 hours. NB: The level key is not to be set manually by maintainers. The yunohost-bot will automatically create a pull request every Friday evening with results from the official CI, which are then to be manually reviewed and merged by the community.","keywords":"","version":"Next"},{"title":"App scripts","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/scripts/","content":"","keywords":"","version":"Next"},{"title":"Variables available in a script context‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#variables-available-in-a-script-context","content":" Special variables are automatically defined in the context of a script:  $app is the app ID. It will typically be the ID from the app's manifest.toml, for example helloworld, but will be helloworld__2, __3 etc for multi-instance installs.During install, answers to install questions are automatically available as bash variables. Typically, $domain and $path will contain the answers to the default install questions assuming they are defined in the manifest.toml. Answer values associated to any custom install questions will be available the same way, e.g. $prefered_pet for the custom question [install.prefered_pet] that would be defined in the manifest. Note that - apart from special questions such as init_main_permission or user-provided passwords - they are also automatically saved as settings (cf. next section).During other scripts, all app settings are also loaded and automatically available.Note that some settings are automatically created/updated by app ressources. For example, the install_dir setting will automatically be available too and corresponds to typically /var/www/$appIn the change_url context, variables called new_domain, new_path, old_domain, old_path will be available, as well as change_domain and change_path equal to 0 (false) or 1 (true) depending if the domain / path changed  ","version":"Next","tagName":"h2"},{"title":"Setting system‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#setting-system","content":" Application often need to store long term information in between scripts triggered by the admin. For this, YunoHost has a key-value store for each application called &quot;setting&quot; and is stored in /etc/yunohost/apps/$app/settings.yml.  Apps can interact with this key value store in this way:  # Retrieve a setting into variable &quot;db_name&quot; db_name=$(ynh_app_setting_get --app=$app --key=db_name) # Update a setting ynh_app_setting_set --app=$app --key=db_name --value=$db_name   ","version":"Next","tagName":"h2"},{"title":"Helper system‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#helper-system","content":" We call helpers a set of custom bash function created by the YunoHost project to standardize common operations accross all apps. They are all prefixed with ynh_. The full list and documentation of these helpers is available on this page. Some of these helpers are now partially obsolete as they are now handled by the core via app resources.  Here is the list of the major ones:  ynh_app_setting_get / ynh_app_setting_setynh_script_progressionynh_setup_sourcenginx: ynh_add_nginx_config / ynh_remove_nginx_configphp: ynh_add_fpm_config / ynh_remove_fpm_configsystemd: ynh_add_systemd_config / ynh_remove_systemd_configfail2ban: ynh_add_fail2ban_config / ynh_remove_fail2ban_configcustom: ynh_add_confignodejs: ynh_install_nodejs / ynh_use_nodejsynh_exec_warn_lessynh_local_curlynh_secure_removeynh_backup / ynh_restore_file  ","version":"Next","tagName":"h2"},{"title":"Configuration/template system‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#configurationtemplate-system","content":" App scripts will often need to create a bunch of configuration files.  Configuration templates are canonically stored provided in the conf/ folder of the app, such as nginx.conf, extra_php-fpm.conf, systemd.conf, or some-custom-app-conf.env ...  In these templates, you can use the syntax __FOOBAR__ which will automatically be replaced by the variable $foobar during runtime, when the conf is installed via the ynh_add_*_config helpers.  For example, an app's NGINX conf snippet may look like:  # The next line starting with '#sub_path_only' is automatically uncommented only when $path is not / #sub_path_only rewrite ^__PATH__$ __PATH__/ permanent; location __PATH__/ { alias __INSTALL_DIR__/; # Some headers and tweaks }   ","version":"Next","tagName":"h2"},{"title":"App sources‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#app-sources","content":" App sources were historically defined in conf/app.src files containing the URL + checksum of assets to download.  This is now integrated in manifest.toml using the sources resource, which pre-download the assets prior to entering the install or upgrade scripts. The sources can then be effectively deployed using ynh_setup_source.  For example, for YesWiki, the sources are defined in manifest.toml using:  [resources.sources.main] url = &quot;https://github.com/YesWiki/yeswiki/archive/refs/tags/v4.4.0.tar.gz&quot; sha256 = &quot;5ceb12d225c20de2ba3cb4ce483348ed1a8ad5b1789d4f4f8f89dc4871524007&quot;   More infos on the source resource in the resource system documentation.  ","version":"Next","tagName":"h2"},{"title":"Common operations (TODO/FIXME)‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#common-operations-todofixme","content":" ","version":"Next","tagName":"h2"},{"title":"installing/upgrading app sources‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#installingupgrading-app-sources","content":" ","version":"Next","tagName":"h3"},{"title":"adding configurations‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#adding-configurations","content":" ","version":"Next","tagName":"h3"},{"title":"adding a systemd service‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#adding-a-systemd-service","content":" ","version":"Next","tagName":"h3"},{"title":"curl / automatizing install forms‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#curl--automatizing-install-forms","content":" ","version":"Next","tagName":"h3"},{"title":"classic stuff for nodejs apps‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#classic-stuff-for-nodejs-apps","content":" ","version":"Next","tagName":"h3"},{"title":"classic stuff for php apps‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#classic-stuff-for-php-apps","content":" ","version":"Next","tagName":"h3"},{"title":"classic stuff for python apps‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#classic-stuff-for-python-apps","content":" ","version":"Next","tagName":"h3"},{"title":"classic stuff for ??? apps‚Äã","type":1,"pageTitle":"App scripts","url":"/doc/pr-2675/fr/dev/packaging/scripts/#classic-stuff-for--apps","content":"","version":"Next","tagName":"h3"},{"title":"Resources","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/resources","content":"","keywords":"","version":"Next"},{"title":"Apt‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#apt","content":" Create a virtual package in apt, depending on the list of specified packages that the app needs. The virtual packages is called $app-ynh-deps (with _ being replaced by - in the app name, see ynh_install_app_dependencies)  ","version":"Next","tagName":"h2"},{"title":"Example‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#example","content":" [resources.apt] packages = [&quot;nyancat&quot;, &quot;lolcat&quot;, &quot;sl&quot;] # (this part is optional and corresponds to the legacy ynh_install_extra_app_dependencies helper) extras.yarn.repo = &quot;deb https://dl.yarnpkg.com/debian/ stable main&quot; extras.yarn.key = &quot;https://dl.yarnpkg.com/debian/pubkey.gpg&quot; extras.yarn.packages = [&quot;yarn&quot;]   ","version":"Next","tagName":"h3"},{"title":"Properties‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#properties","content":" packages: List of packages to be installed via aptpackages_from_raw_bash: A multi-line bash snippet (using triple quotes as open/close) which should echo additional packages to be installed. Meant to be used for packages to be conditionally installed depending on architecture, debian version, install questions, or other logic.extras: A dict of (repo, key, packages) corresponding to &quot;extra&quot; repositories to fetch dependencies from  ","version":"Next","tagName":"h3"},{"title":"Provision/Update‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#provisionupdate","content":" The code literally calls the bash helpers ynh_install_app_dependencies and ynh_install_extra_app_dependencies, similar to what happens in v1.Note that when packages contains some phpX.Y-foobar dependencies, this will automagically define a phpversion setting equal to X.Y which can therefore be used in app scripts ($phpversion) or templates (__PHPVERSION__)  ","version":"Next","tagName":"h3"},{"title":"Deprovision‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#deprovision","content":" The code literally calls the bash helper ynh_remove_app_dependencies    ","version":"Next","tagName":"h3"},{"title":"Composer‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#composer","content":" Installs a composer version to be used by the app  You may then use ynh_composer_exec in your script to run composer actions  Note that this resource requires that the app requires an install_dir, and installs php dependencies via the apt resource.  ","version":"Next","tagName":"h2"},{"title":"Example‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#example-1","content":" [resources.composer] version = &quot;2.7.7&quot;   ","version":"Next","tagName":"h3"},{"title":"Properties‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#properties-1","content":" version: The composer version needed by the app  ","version":"Next","tagName":"h3"},{"title":"Provision/Update‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#provisionupdate-1","content":" Download composer.phar for the corresponding version from getcomposer.orgcomposer.phar is placed in the $install_dir of the appDefine composer_version as the requested version  ","version":"Next","tagName":"h3"},{"title":"Deprovision‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#deprovision-1","content":" Delete composer.pharDelete the composer_verison setting    ","version":"Next","tagName":"h3"},{"title":"Data Dir‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#data-dir","content":" Creates a directory to be used by the app as the data store directory, typically where the app multimedia or large assets added by users are located. The corresponding path is stored in the settings as data_dir. This resource behaves very similarly to install_dir.  ","version":"Next","tagName":"h2"},{"title":"Example‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#example-2","content":" [resources.data_dir] # (empty - defaults are usually okay)   ","version":"Next","tagName":"h3"},{"title":"Properties‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#properties-2","content":" dir: (default: /home/yunohost.app/__APP__) The full path of the data dirsubdirs: (default: empty list) A list of subdirs to initialize inside the data dir. For example, ['foo', 'bar']owner: (default: __APP__:rwx) The owner (and owner permissions) for the data dirgroup: (default: __APP__:rx) The group (and group permissions) for the data dir  ","version":"Next","tagName":"h3"},{"title":"Provision/Update‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#provisionupdate-2","content":" if the dir path changed and a folder exists at the old location, the folder will be mv'ed to the new locationotherwise, creates the directory if it doesn't exists yetcreate each subdir declared and which do not exist already(re-)apply permissions (only on the folder itself and declared subdirs, not recursively)save the value of dir as data_dir in the app's settings, which can be then used by the app scripts ($data_dir) and conf templates (__DATA_DIR__)  ","version":"Next","tagName":"h3"},{"title":"Deprovision‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#deprovision-2","content":" (only if the purge option is chosen by the user) recursively deletes the directory if it existsalso delete the corresponding setting  ","version":"Next","tagName":"h3"},{"title":"Legacy management‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#legacy-management","content":" In the past, the setting may have been called datadir. The code will automatically rename it as data_dir.As explained in the 'Provision/Update' section, the folder will also be moved if the location changed    ","version":"Next","tagName":"h3"},{"title":"Database‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#database","content":" Initialize a database, either using MySQL or Postgresql. Relevant DB infos are stored in settings $db_name, $db_user and $db_pwd.  NB: only one DB can be handled in such a way (is there really an app that would need two completely different DB ?...)  NB2: no automagic migration will happen in an suddenly change type from mysql to postgresql or viceversa in its life  ","version":"Next","tagName":"h2"},{"title":"Example‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#example-3","content":" [resources.database] type = &quot;mysql&quot; # or : &quot;postgresql&quot;. Only these two values are supported   ","version":"Next","tagName":"h3"},{"title":"Properties‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#properties-3","content":" type: The database type, either mysql or postgresql  ","version":"Next","tagName":"h3"},{"title":"Provision/Update‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#provisionupdate-3","content":" (Re)set the $db_name and $db_user settings with the sanitized app name (replacing - and . with _)If $db_pwd doesn't already exists, pick a random database password and store it in that settingIf the database doesn't exists yet, create the SQL user and DB using ynh_mysql_create_db or ynh_psql_create_db.  ","version":"Next","tagName":"h3"},{"title":"Deprovision‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#deprovision-3","content":" Drop the DB using ynh_mysql_remove_db or ynh_psql_remove_dbDeletes the db_name, db_user and db_pwd settings  ","version":"Next","tagName":"h3"},{"title":"Legacy management‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#legacy-management-1","content":" In the past, the sql passwords may have been named mysqlpwd or psqlpwd, in which case it will automatically be renamed as db_pwd    ","version":"Next","tagName":"h3"},{"title":"Go‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#go","content":" Installs a go version to be used by the app, using &quot;goenv&quot;  Sourcing the helpers will then automatically tweak the PATH variable such that you may call go directly.  Sourcing the helpers will also automatically define:  $go_dir, the directory containing the specific version of Go  ","version":"Next","tagName":"h2"},{"title":"Example‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#example-4","content":" [resources.go] version = &quot;1.20&quot;   ","version":"Next","tagName":"h3"},{"title":"Properties‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#properties-4","content":" version: The go version needed by the app  ","version":"Next","tagName":"h3"},{"title":"Provision/Update‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#provisionupdate-4","content":" Fetch/update a copy of the goenv tool and xxenv-latestCompute the actual &quot;latest&quot; version for the requested version, e.g. 1.20 may corresponds to 1.20.2This &quot;actual version&quot; is stored as go_version in the app settingsInstall the corresponding Go versionGarbage-collect unused versions  ","version":"Next","tagName":"h3"},{"title":"Deprovision‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#deprovision-4","content":" Delete the go_version settingGarbage-collect unused versions    ","version":"Next","tagName":"h3"},{"title":"Install Dir‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#install-dir","content":" Creates a directory to be used by the app as the installation directory, typically where the app sources and assets are located. The corresponding path is stored in the settings as install_dir  ","version":"Next","tagName":"h2"},{"title":"Example‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#example-5","content":" [resources.install_dir] # (empty - defaults are usually okay)   ","version":"Next","tagName":"h3"},{"title":"Properties‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#properties-5","content":" dir: (default: /var/www/__APP__) The full path of the install dirowner: (default: __APP__:rwx) The owner (and owner permissions) for the install dirgroup: (default: __APP__:rx) The group (and group permissions) for the install dir  ","version":"Next","tagName":"h3"},{"title":"Provision/Update‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#provisionupdate-5","content":" during install, the folder will be deleted if it already exists (FIXME: is this what we want?)if the dir path changed and a folder exists at the old location, the folder will be mv'ed to the new locationotherwise, creates the directory if it doesn't exists yet(re-)apply permissions (only on the folder itself, not recursively)save the value of dir as install_dir in the app's settings, which can be then used by the app scripts ($install_dir) and conf templates (__INSTALL_DIR__)  ","version":"Next","tagName":"h3"},{"title":"Deprovision‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#deprovision-5","content":" recursively deletes the directory if it exists  ","version":"Next","tagName":"h3"},{"title":"Legacy management‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#legacy-management-2","content":" In the past, the setting was called final_path. The code will automatically rename it as install_dir.As explained in the 'Provision/Update' section, the folder will also be moved if the location changed    ","version":"Next","tagName":"h3"},{"title":"Nodejs‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#nodejs","content":" Installs a nodejs version using &quot;n&quot; to be used by the app  Sourcing the helpers will then automatically tweak the PATH variable such that you may call npm directly.  Sourcing the helpers will also automatically define:  $path_with_nodejs to be used in the systemd config (Environment=&quot;PATH=__PATH_WITH_NODEJS__&quot;)$nodejs_dir, the directory containing the specific version of nodejs, which may be used in the systemd config too (e.g. ExecStart=__NODEJS_DIR__/node foo bar)  ","version":"Next","tagName":"h2"},{"title":"Example‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#example-6","content":" [resources.nodejs] version = &quot;18.2&quot;   ","version":"Next","tagName":"h3"},{"title":"Properties‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#properties-6","content":" version: The nodejs version needed by the app  ","version":"Next","tagName":"h3"},{"title":"Provision/Update‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#provisionupdate-6","content":" Call &quot;n&quot; to install the corresponding nodejs versionResolve the &quot;actual version&quot; installed (typically if version 20 is requested, the actual version may be 20.1.2)This &quot;actual version&quot; is stored as nodejs_version in the app settingsGarbage-collect unused versions  ","version":"Next","tagName":"h3"},{"title":"Deprovision‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#deprovision-6","content":" Delete the nodejs_version settingGarbage-collect unused versions    ","version":"Next","tagName":"h3"},{"title":"Permissions‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#permissions","content":" Configure the SSO permissions/tiles. Typically, webapps are expected to have a 'main' permission mapped to '/', meaning that a tile pointing to the $domain/$path will be available in the SSO for users allowed to access that app.  Additional permissions can be created, typically to have a specific tile and/or access rules for the admin part of a webapp.  The list of allowed user/groups may be initialized using the content of the init_{perm}_permission question from the manifest, hence init_main_permission replaces the is_public question and shall contain a group name (typically, all_users or visitors).  ","version":"Next","tagName":"h2"},{"title":"Example‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#example-7","content":" [resources.permissions] main.url = &quot;/&quot; # (these two previous lines should be enough in the majority of cases) admin.url = &quot;/admin&quot; admin.show_tile = false admin.allowed = &quot;admins&quot; # Assuming the &quot;admins&quot; group exists (cf future developments ;))   ","version":"Next","tagName":"h3"},{"title":"Properties (for each perm name)‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#properties-for-each-perm-name","content":" url: The relative URI corresponding to this permission. Typically / or /something. This property may be omitted for non-web permissions. Can also be a regex, prefixed by re: like re:/api/[A-Z]*$.show_tile: (default: true if url is defined) Wether or not a tile should be displayed for that permission in the user portalallowed: (default: nobody) The group initially allowed to access this perm, if init_{perm}_permission is not defined in the manifest questions. Note that the admin may tweak who is allowed/unallowed on that permission later on, this is only meant to initialize the permission.auth_header: (default: true) Define for the URL of this permission, if SSOwat pass the authentication header to the application. Default is trueprotected: (default: false) Define if this permission is protected. If it is protected the administrator won't be able to add or remove the visitors group of this permission. Defaults to 'false'.additional_urls: (default: none) List of additional URL for which access will be allowed/forbidden  ","version":"Next","tagName":"h3"},{"title":"Provision/Update‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#provisionupdate-7","content":" Delete any permissions that may exist and be related to this app yet is not declared anymoreLoop over the declared permissions and create them if needed or update them with the new values  ","version":"Next","tagName":"h3"},{"title":"Deprovision‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#deprovision-7","content":" Delete all permission related to this app  ","version":"Next","tagName":"h3"},{"title":"Legacy management‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#legacy-management-3","content":" Legacy is_public setting will be deleted if it exists    ","version":"Next","tagName":"h3"},{"title":"Ports‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#ports","content":" Book port(s) to be used by the app, typically to be used to the internal reverse-proxy between nginx and the app process.  Note that because multiple ports can be booked, each properties is prefixed by the name of the port. main is a special name and will correspond to the setting $port, whereas for example xmpp_client will correspond to the setting $port_xmpp_client.  ","version":"Next","tagName":"h2"},{"title":"Example‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#example-8","content":" [resources.ports] # (empty should be fine for most apps... though you can customize stuff if absolutely needed) main.default = 12345 # if you really want to specify a prefered value .. but shouldnt matter in the majority of cases xmpp_client.default = 5222 # if you need another port, pick a name for it (here, &quot;xmpp_client&quot;) xmpp_client.exposed = &quot;TCP&quot; # here, we're telling that the port needs to be publicly exposed on TCP on the firewall   ","version":"Next","tagName":"h3"},{"title":"Properties (for every port name)‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#properties-for-every-port-name","content":" default: The prefered value for the port. If this port is already being used by another process right now, or is booked in another app's setting, the code will increment the value until it finds a free port and store that value as the setting. If no value is specified, a random value between 10000 and 60000 is used.exposed: (default: false) Wether this port should be opened on the firewall and be publicly reachable. This should be kept to false for the majority of apps than only need a port for internal reverse-proxying! Possible values: false, true(=Both), Both, TCP, UDP. This will result in the port being opened on the firewall, and the diagnosis checking that a program answers on that port.fixed: (default: false) Tells that the app absolutely needs the specific value provided in default, typically because it's needed for a specific protocol  ","version":"Next","tagName":"h3"},{"title":"Provision/Update (for every port name)‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#provisionupdate-for-every-port-name","content":" If not already booked, look for a free port, starting with the default value (or a random value between 10000 and 60000 if no default set)If exposed is not false, open the port in the firewall accordingly - otherwise make sure it's closed.The value of the port is stored in the $port setting for the main port, or $port_NAME for other NAMEs  ","version":"Next","tagName":"h3"},{"title":"Deprovision‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#deprovision-8","content":" Close the ports on the firewall if relevantDeletes all the port settings  ","version":"Next","tagName":"h3"},{"title":"Legacy management‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#legacy-management-4","content":" In the past, some settings may have been named NAME_port instead of port_NAME, in which case the code will automatically rename the old setting.    ","version":"Next","tagName":"h3"},{"title":"Ruby‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#ruby","content":" Installs a ruby version to be used by the app, using &quot;rbenv&quot;  Note that ruby is compiled on the target system, and therefore requires the following dependencies to be installed : gcc, make, libjemalloc-dev, libffi-dev, libyaml-dev, zlib1g-dev  Sourcing the helpers will then automatically tweak the PATH variable such that you may call ruby and gem directly.  Sourcing the helpers will also automatically define:  $path_with_ruby to be used in the systemd config (Environment=&quot;PATH=__PATH_WITH_RUBY__&quot;)$ruby_dir, the directory containing the specific version of ruby, which may be used in the systemd config too (e.g. ExecStart=__RUBY_DIR__/ruby foo bar)  ","version":"Next","tagName":"h2"},{"title":"Example‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#example-9","content":" [resources.ruby] version = &quot;3.2&quot;   ","version":"Next","tagName":"h3"},{"title":"Properties‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#properties-7","content":" version: The ruby version needed by the app  ","version":"Next","tagName":"h3"},{"title":"Provision/Update‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#provisionupdate-8","content":" Fetch/update a copy of the rbenv tool as well as ruby-build, rbenv-aliases and xxenv-latestCompute the actual &quot;latest&quot; version for the requested version, e.g. 3.2 may corresponds to 3.2.1This &quot;actual version&quot; is stored as ruby_version in the app settingsInstall (compile) Ruby (may take some time)Garbage-collect unused versions  ","version":"Next","tagName":"h3"},{"title":"Deprovision‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#deprovision-9","content":" Delete the ruby_version settingGarbage-collect unused versions    ","version":"Next","tagName":"h3"},{"title":"Sources‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#sources","content":" Declare what are the sources / assets used by this app. Typically, this corresponds to some tarball published by the upstream project, that needs to be downloaded and extracted in the install dir using the ynh_setup_source helper.  This resource is intended both to declare the assets, which will be parsed by ynh_setup_source during the app script runtime, AND to prefetch and validate the sha256sum of those asset before actually running the script, to be able to report an error early when the asset turns out to not be available for some reason.  Various options are available to accomodate the behavior according to the asset structure  ","version":"Next","tagName":"h2"},{"title":"Example‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#example-10","content":" [resources.sources] [resources.sources.main] url = &quot;https://github.com/foo/bar/archive/refs/tags/v1.2.3.tar.gz&quot; sha256 = &quot;01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b&quot; autoupdate.strategy = &quot;latest_github_tag&quot;   Or more complex examples with several element, including one with asset that depends on the CPU architecture. With packaging format v2.x, YunoHost currently supports amd64, armhf (armv7), arm64 and i386 architectures.  [resources.sources] [resources.sources.main] in_subdir = false amd64.url = &quot;https://github.com/foo/bar/archive/refs/tags/v1.2.3.amd64.tar.gz&quot; amd64.sha256 = &quot;01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b&quot; i386.url = &quot;https://github.com/foo/bar/archive/refs/tags/v1.2.3.386.tar.gz&quot; i386.sha256 = &quot;53c234e5e8472b6ac51c1ae1cab3fe06fad053beb8ebfd8977b010655bfdd3c3&quot; armhf.url = &quot;https://github.com/foo/bar/archive/refs/tags/v1.2.3.arm.tar.gz&quot; armhf.sha256 = &quot;4355a46b19d348dc2f57c046f8ef63d4538ebb936000f3c9ee954a27460dd865&quot; autoupdate.strategy = &quot;latest_github_release&quot; autoupdate.asset.amd64 = &quot;.*\\\\.amd64.tar.gz&quot; autoupdate.asset.i386 = &quot;.*\\\\.386.tar.gz&quot; autoupdate.asset.armhf = &quot;.*\\\\.arm.tar.gz&quot; [resources.sources.zblerg] url = &quot;https://zblerg.com/download/zblerg&quot; sha256 = &quot;1121cfccd5913f0a63fec40a6ffd44ea64f9dc135c66634ba001d10bcf4302a2&quot; format = &quot;script&quot; rename = &quot;zblerg.sh&quot;   ","version":"Next","tagName":"h3"},{"title":"Properties (for each source)‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#properties-for-each-source","content":" prefetch : true (default) or false, wether or not to pre-fetch this asset during the provisioning phase of the resource. If several arch-dependent url are provided, YunoHost will only prefetch the one for the current system architecture.url : the asset's URL If the asset's URL depend on the architecture, you may instead provide amd64.url, i386.url, armhf.url and arm64.url (depending on what architectures are supported), using the same dpkg --print-architecture nomenclature as for the supported architecture key in the manifest sha256 : the asset's sha256sum. This is used both as an integrity check, and as a layer of security to protect against malicious actors which could have injected malicious code inside the asset... Same as url : if the asset's URL depend on the architecture, you may instead provide amd64.sha256, i386.sha256, ... format : The &quot;format&quot; of the asset. It is typically automatically guessed from the extension of the URL (or the mention of &quot;tarball&quot;, &quot;zipball&quot; in the URL), but can be set explicitly: tar.gz, tar.xz, tar.bz2 : will use tar to extract the archivezip : will use unzip to extract the archivedocker : useful to extract files from an already-built docker image (instead of rebuilding them locally). Will use docker-image-extractwhatever: whatever arbitrary value, not really meaningful except to imply that the file won't be extracted (eg because it's a .deb to be manually installed with dpkg/apt, or a script, or ...) in_subdir: true (default) or false, depending on if there's an intermediate subdir in the archive before accessing the actual files. Can also be N (an integer) to handle special cases where there's N level of subdir to get rid of to actually access the filesextract : true or false. Defaults to true for archives such as zip, tar.gz, tar.bz2, ... Or defaults to false when format is not something that should be extracted. When extract = false, the file will only be mved to the location, possibly renamed using the rename valuerename: some string like whatever_your_want, to be used for convenience when extract is false and the default name of the file is not practicalplatform: for example linux/amd64 (defaults to linux/$YNH_ARCH) to be used in conjonction with format = &quot;docker&quot; to specify which architecture to extract for  Regarding autoupdate‚Äã  Strictly speaking, this has nothing to do with the actual app install. autoupdate is expected to contain metadata for automatic maintenance / update of the app sources info in the manifest. It is meant to be a simpler replacement for &quot;autoupdate&quot; GitHub workflow mechanism.  The infos are used by this script which is ran by the YunoHost infrastructure periodically and will create the corresponding pull request automatically.  autoupdate property is meant to be associated to the main ressource (i.e. the source declared under [resources.sources.main]). Failing to do so will result in incorrect versioning in manifest's autoupdate - only the YunoHost package version (the number after ~) will get incremented.  The script will rely on the code repo specified in code in the upstream section of the manifest.  The autoupdate.strategy is expected to be constructed like this: latest_&lt;gitforge&gt;_&lt;strategy&gt;  You need to replace the &lt;gitforge&gt; in the strategy name by either github, gitlab, gitea or forgejo, as the autoupdater supports:  GitHubGitLab (official and self-hosted instances)Gitea &amp; Forgejo instances  And choose one strategy in the following ones:  latest_&lt;gitforge&gt;_release : similar to latest_&lt;gitforge&gt;_tag, but starting from the list of releases. Note that it's the only strategy that provides the changelog link in the PR message. Pre- or draft releases are ignored. Releases may have assets attached to them, in which case you can define: autoupdate.asset = &quot;some regex&quot; (when there's only one asset to use). The regex is used to find the appropriate asset among the list of all assetsor several autoupdate.asset.$arch = &quot;some_regex&quot; (when the asset is arch-specific). The regex is used to find the appropriate asset for the specific arch among the list of assets latest_&lt;gitforge&gt;_tag : look for the latest tag (by sorting tags and finding the &quot;largest&quot; version). Then using the corresponding tar.gz url. Tags containing rc, beta, alpha, start are ignored, and actually any tag which doesn't look like x.y.z or vx.y.zlatest_&lt;gitforge&gt;_commit : will use the latest commit on GitHub, and the corresponding tarball. If this is used for the 'main' source, it will also assume that the version is YYYY.MM.DD corresponding to the date of the commit.  It is also possible to define autoupdate.upstream to use a different Git repository instead of the code repository from the upstream section of the manifest. This can be useful when, for example, the app uses other assets such as plugin from a different repository.  If the upstream project provides non-standard tag or release names, you can fix this, with a regex with a matching group.  For example, if tags look like release-v4.1, put:  autoupdate.version_regex = &quot;^release-v(.*)$&quot;   And the autoupdater will use the matched group (here: 4.1) as the version.  You can make sure that your autoupdate strategy is working well immediately (without waiting for the next check on the infra) by doing the following:  Clone the apps_tools repository: https://github.com/YunoHost/apps_tools In apps_tools open a terminal to run the following commands: # Create test branch git checkout -b localtest # Create a Python virtual environment python -m venv venv source venv/bin/activate # Install dependencies (if you don't have pip already installed on your system, check https://pip.pypa.io/en/stable/installation) pip install -r requirements.txt # Run autoupdate script - replace '/path/to/myapp_ynh' with your actual local app path ./autoupdate_app_sources/autoupdate_app_sources.py '/path/to/myapp_ynh' If the return output includes: Apps udpated, it ran successfully. Note that it will automatically make local changes in your app's manifest.toml (which can be discarded as they will be made automatically later online by the YNH infra);Apps failed, the autoupdate stragegy is not working properly - check the debug info;none of the above but apps -&gt; Autoupdater just ran, here are the results:, it ran successfully but the app was already up to date.  ","version":"Next","tagName":"h3"},{"title":"Provision/Update‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#provisionupdate-9","content":" For elements with prefetch = true, will download the asset (for the appropriate architecture) and store them in /var/cache/yunohost/download/$app/$source_id, to be later picked up by ynh_setup_source. (NB: this only happens during install and upgrade, not restore)  ","version":"Next","tagName":"h3"},{"title":"Deprovision‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#deprovision-10","content":" Nothing (just cleanup the cache)    ","version":"Next","tagName":"h3"},{"title":"System User‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#system-user","content":" Provision a system user to be used by the app. The username is exactly equal to the app id  ","version":"Next","tagName":"h2"},{"title":"Example‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#example-11","content":" [resources.system_user] # (empty - defaults are usually okay)   ","version":"Next","tagName":"h3"},{"title":"Properties‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#properties-8","content":" allow_ssh: (default: False) Adds the user to the ssh.app group, allowing SSH connection via this userallow_sftp: (default: False) Adds the user to the sftp.app group, allowing SFTP connection via this userallow_email: (default: False) Enable authentication on the mail stack for the system user and send mail using __APP__@__DOMAIN__. A mail_pwd setting is automatically defined (similar to db_pwd for databases). You can then configure the app to use __APP__ and __MAIL_PWD__ as SMTP credentials (with host 127.0.0.1). You can also tweak the user-part of the domain-part of the email used by manually defining a custom setting mail_user or mail_domainhome: (default: /var/www/__APP__) Defines the home property for this user. NB: unfortunately you can't simply use __INSTALL_DIR__ or __DATA_DIR__ for now  ","version":"Next","tagName":"h3"},{"title":"Provision/Update‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#provisionupdate-10","content":" will create the system user if it doesn't exists yetwill add/remove the ssh/sftp.app groups  ","version":"Next","tagName":"h3"},{"title":"Deprovision‚Äã","type":1,"pageTitle":"Resources","url":"/doc/pr-2675/fr/dev/packaging/resources#deprovision-11","content":" deletes the user and group ","version":"Next","tagName":"h3"},{"title":"General scope of variables","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/scripts/shell_variables_scope","content":"","keywords":"","version":"Next"},{"title":"Functions inside a script‚Äã","type":1,"pageTitle":"General scope of variables","url":"/doc/pr-2675/fr/dev/packaging/scripts/shell_variables_scope#functions-inside-a-script","content":" Use a function would not change the scope of variables.  var1=value1 export var2=value2 set_variable () { var3=value3 export var4=value4 echo &quot;$var1&quot; echo &quot;$var2&quot; echo &quot;$var3&quot; echo &quot;$var4&quot; # All variables exists here # Because the function inherite its variables from the script. } set_variable echo &quot;$var1&quot; echo &quot;$var2&quot; echo &quot;$var3&quot; echo &quot;$var4&quot; # var1 var2, var3 and var4 exist # var3 exist because the function is executed in the same shell than the script itself. echo &quot;-&quot; echo &quot; echo \\&quot;\\$var1\\&quot; echo \\&quot;\\$var2\\&quot; echo \\&quot;\\$var3\\&quot; echo \\&quot;\\$var4\\&quot;&quot; &gt; other_script.sh chmod +x other_script.sh ./other_script.sh # Here, var1 and var3 don't exist, only var2 and var4 still exist. # Because they're environment variables.   ","version":"Next","tagName":"h3"},{"title":"The usage of locales variables‚Äã","type":1,"pageTitle":"General scope of variables","url":"/doc/pr-2675/fr/dev/packaging/scripts/shell_variables_scope#the-usage-of-locales-variables","content":" Locales variables are limited to the function and its children.  var1=value1 export var2=value2 set_variable () { var3=value3 export var4=value4 local var5=value5 echo &quot;$var1&quot; echo &quot;$var2&quot; echo &quot;$var3&quot; echo &quot;$var4&quot; echo &quot;$var5&quot; # All variables exists here # Because the function inherite its variables from the script. } set_variable echo &quot;-&quot; echo &quot;$var1&quot; echo &quot;$var2&quot; echo &quot;$var3&quot; echo &quot;$var4&quot; echo &quot;$var5&quot; # var1 var2, var3 and var4 exist # var3 exist because the function is executed in the same shell than the script itself. # var5 doesn't exist, because its scope is limited to the function which declare it. echo &quot;-&quot; echo &quot; echo \\&quot;\\$var1\\&quot; echo \\&quot;\\$var2\\&quot; echo \\&quot;\\$var3\\&quot; echo \\&quot;\\$var4\\&quot; echo \\&quot;\\$var5\\&quot;&quot; &gt; other_script.sh chmod +x other_script.sh ./other_script.sh # Here, var1, var3 and var5 don't exist, only var2 and var4 still exist. # Because they're environment variables.   Using a local variable is usefull for limit it scope to the function only. And not bother the script in its globality with useless variables. But there's also another advantage with local variable, do not modify the content of a global variable.  var1=value1 var2=value2 var3=value3 set_variable () { echo &quot;$var1&quot; echo &quot;$var2&quot; echo &quot;$var3&quot; echo &quot;-&quot; var2=new_value2 local var3=new_value3 echo &quot;$var1&quot; echo &quot;$var2&quot; echo &quot;$var3&quot; # Values of var2 and var3 are modified in the function. } set_variable echo &quot;-&quot; echo &quot;$var1&quot; echo &quot;$var2&quot; echo &quot;$var3&quot; # var3 retake is original value, # because in the function, var3 was declared as a new locale variable. # But var2 was directly modified, so its value still changed. # Because, var2 in the function is still a global variable.   As seen previously, modified or created variables in a function can affect the main script because the function is executed in the same shell. But, the things are different if the function is executed in a sub shell, the function become a child which only inherite from its parent.  var1=value1 var2=value2 var3=value3 fonction2 () { echo &quot;-&quot; echo &quot;var1=$var1&quot; echo &quot;var2=$var2&quot; echo &quot;var3=$var3&quot; echo &quot;var4=$var4&quot; echo &quot;var5=$var5&quot; # Even var3, which is local, is inherited from the parent function. } set_variable () { echo &quot;var1=$var1&quot; echo &quot;var2=$var2&quot; echo &quot;var3=$var3&quot; # Variables are inherited from the parent. echo &quot;-&quot; var2=new_value2 local var3=new_value3 var4=new_value4 export var5=new_value5 echo &quot;var1=$var1&quot; echo &quot;var2=$var2&quot; echo &quot;var3=$var3&quot; echo &quot;var4=$var4&quot; echo &quot;var5=$var5&quot; # Values of var2 and var3 are modified in the function. (fonction2) } (set_variable) # Start the function in a sub shell. echo &quot;-&quot; echo &quot;var1=$var1&quot; echo &quot;var2=$var2&quot; echo &quot;var3=$var3&quot; echo &quot;var4=$var4&quot; echo &quot;var5=$var5&quot; # var2 and var3 retake their original values. # Because the function is in a child shell which never affect its parent. # Likewise, var4 and var5 don't exist, because they're been declared in child shell. # The parent never inherite from its children shell.   ","version":"Next","tagName":"h3"},{"title":"Conclusion‚Äã","type":1,"pageTitle":"General scope of variables","url":"/doc/pr-2675/fr/dev/packaging/scripts/shell_variables_scope#conclusion","content":" The scope of a variable is always the current shell and its children, never its parent shell.An environment variable may be exported to a new shell, detached from the first one. If the last one executed the second one. But, it can't affect the parents.A locale variable in a function, executed in the current shell, can't affect the environment outside of the function. End allow also to not affect a global variable with the same name.A function executed in a sub shell will never affect its parent, with global or local variables.A parent can NEVER be affected by variables defined or modified in its children shell. ","version":"Next","tagName":"h3"},{"title":"App helpers (v2)","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0","content":"","keywords":"","version":"Next"},{"title":"Sources‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#sources","content":" This is coupled to the 'sources' resource in the manifest.toml  ","version":"Next","tagName":"h2"},{"title":"Sources‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#sources-1","content":" ynh_setup_source Download, check integrity, uncompress and patch the source from app.src Usage: ynh_setup_source --dest_dir=dest_dir [--source_id=source_id] [--keep=&quot;file1 file2&quot;] [--full_replace] Arguments: -d, --dest_dir=: Directory where to setup sources-s, --source_id=: Name of the source, defaults to main (when the sources resource exists in manifest.toml) or (legacy) app otherwise-k, --keep=: Space-separated list of files/folders that will be backup/restored in $dest_dir, such as a config file you don't want to overwrite. For example 'conf.json secrets.json logs' (no trailing / for folders)-r, --full_replace=: Remove previous sources before installing new sources (can be 1 or 0, default to 0) Details: New 'sources' resources‚Äã (See also the resources documentation which may be more complete?) This helper will read infos from the 'sources' resources in the manifest.toml of the app and expect a structure like: [resources.sources] [resources.sources.main] url = &quot;https://some.address.to/download/the/app/archive&quot; sha256 = &quot;0123456789abcdef&quot; # The sha256 sum of the asset obtained from the URL Optional flags‚Äã format = &quot;tar.gz&quot;/xz/bz2 # automatically guessed from the extension of the URL, but can be set explicitly. Will use `tar` to extract &quot;zip&quot; # automatically guessed from the extension of the URL, but can be set explicitly. Will use `unzip` to extract &quot;docker&quot; # useful to extract files from an already-built docker image (instead of rebuilding them locally). Will use `docker-image-extract` to extract &quot;whatever&quot; # an arbitrary value, not really meaningful except to imply that the file won't be extracted in_subdir = true # default, there's an intermediate subdir in the archive before accessing the actual files false # sources are directly in the archive root n # (special cases) an integer representing a number of subdirs levels to get rid of extract = true # default if file is indeed an archive such as .zip, .tar.gz, .tar.bz2, ... = false # default if file 'format' is not set and the file is not to be extracted because it is not an archive but a script or binary or whatever asset. # in which case the file will only be `mv`ed to the location possibly renamed using the `rename` value rename = &quot;whatever_your_want&quot; # to be used for convenience when `extract` is false and the default name of the file is not practical platform = &quot;linux/amd64&quot; # (defaults to &quot;linux/$YNH_ARCH&quot;) to be used in conjonction with `format = &quot;docker&quot;` to specify which architecture to extract for You may also define assets url and checksum per-architectures such as: [resources.sources] [resources.sources.main] amd64.url = &quot;https://some.address.to/download/the/app/archive/when/amd64&quot; amd64.sha256 = &quot;0123456789abcdef&quot; armhf.url = &quot;https://some.address.to/download/the/app/archive/when/armhf&quot; armhf.sha256 = &quot;fedcba9876543210&quot; In which case ynh_setup_source --dest_dir=&quot;$install_dir&quot; will automatically pick the appropriate source depending on the arch The helper will: Download the specific URL if there is no local archiveCheck the integrity with the specific sha256 sumUncompress the archive to $dest_dir. If in_subdir is true, the first level directory of the archive will be removed.If in_subdir is a numeric value, the N first level directories will be removed. Patches named sources/patches/${src_id}-*.patch will be applied to $dest_dirExtra files in sources/extra_files/$src_id will be copied to dest_dir Requires YunoHost version 2.6.4 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"App Technologies‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#app-technologies","content":" These allow to install specific version of the technology required to run some apps  ","version":"Next","tagName":"h2"},{"title":"Nodejs‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#nodejs","content":" ynh_use_nodejs Load the version of node for an app, and set variables. Usage: ynh_use_nodejs Details:ynh_use_nodejs has to be used in any app scripts before using node for the first time. This helper will provide alias and variables to use in your scripts. To use npm or node, use the alias ynh_npm and ynh_node. Those alias will use the correct version installed for the app. For example: use ynh_npm install instead of npm install With sudo or ynh_exec_as, use instead the fallback variables $ynh_npm and $ynh_nodeAnd propagate $PATH to sudo with $ynh_node_load_PATH Exemple: ynh_exec_as $app $ynh_node_load_PATH $ynh_npm install $PATH contains the path of the requested version of node. However, $PATH is duplicated into $node_PATH to outlast any manipulation of $PATHYou can use the variable $ynh_node_load_PATH to quickly load your node version in $PATH for an usage into a separate script. Exemple: $ynh_node_load_PATH $final_path/script_that_use_npm.sh` Finally, to start a nodejs service with the correct version, 2 solutions Either the app is dependent of node or npm, but does not called it directly. In such situation, you need to load PATH : Environment=&quot;__NODE_ENV_PATH__&quot; ExecStart=__FINALPATH__/my_app You will replace NODE_ENV_PATH with $ynh_node_load_PATH. Or node start the app directly, then you don't need to load the PATH variable ExecStart=__YNH_NODE__ my_app run You will replace YNH_NODE with $ynh_node 2 other variables are also available $nodejs_path: The absolute path to node binaries for the chosen version.$nodejs_version: Just the version number of node for this app. Stored as 'nodejs_version' in settings.yml. Requires YunoHost version 2.7.12 or higher. Dude, show me the code!  ynh_install_nodejs Install a specific version of nodejs Usage: ynh_install_nodejs --nodejs_version=nodejs_version Arguments: -n, --nodejs_version=: Version of node to install. When possible, your should prefer to use major version number (e.g. 8 instead of 8.10.0). Details: ynh_install_nodejs will install the version of node provided as argument by using n. n (Node version management) uses the PATH variable to store the path of the version of node it is going to use. That's how it changes the version Refer to ynh_use_nodejs for more information about available commands and variables Requires YunoHost version 2.7.12 or higher. Dude, show me the code!  ynh_remove_nodejs Remove the version of node used by the app. Usage: ynh_remove_nodejs Details: This helper will check if another app uses the same version of node. If not, this version of node will be removed.If no other app uses node, n will be also removed. Requires YunoHost version 2.7.12 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Ruby‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#ruby","content":" ynh_use_ruby Load the version of Ruby for an app, and set variables. Usage: ynh_use_ruby Details: ynh_use_ruby has to be used in any app scripts before using Ruby for the first time. This helper will provide alias and variables to use in your scripts. To use gem or Ruby, use the alias ynh_gem and ynh_rubyThose alias will use the correct version installed for the app For example: use ynh_gem install instead of gem install With sudo or ynh_exec_as, use instead the fallback variables $ynh_gem and $ynh_rubyAnd propagate $PATH to sudo with $ynh_ruby_load_path Exemple: ynh_exec_as $app $ynh_ruby_load_path $ynh_gem install $PATH contains the path of the requested version of Ruby. However, $PATH is duplicated into $ruby_path to outlast any manipulation of $PATH You can use the variable $ynh_ruby_load_path to quickly load your Ruby version in $PATH for an usage into a separate script. Exemple: $ynh_ruby_load_path $final_path/script_that_use_gem.sh` Finally, to start a Ruby service with the correct version, 2 solutions Either the app is dependent of Ruby or gem, but does not called it directly. In such situation, you need to load PATHEnvironment=&quot;__YNH_RUBY_LOAD_PATH__&quot;ExecStart=__FINALPATH__/my_appYou will replace YNH_RUBY_LOAD_PATH with $ynh_ruby_load_path Or Ruby start the app directly, then you don't need to load the PATH variableExecStart=__YNH_RUBY__ my_app runYou will replace YNH_RUBY with $ynh_ruby one other variable is also available $ruby_path: The absolute path to Ruby binaries for the chosen version. Requires YunoHost version 3.2.2 or higher. Dude, show me the code!  ynh_install_ruby Install a specific version of Ruby Usage: ynh_install_ruby --ruby_version=ruby_version Arguments: -v, --ruby_version=: Version of ruby to install. Details: ynh_install_ruby will install the version of Ruby provided as argument by using rbenv. This helper creates a /etc/profile.d/rbenv.sh that configures PATH environment for rbenv for every LOGIN user, hence your user must have a defined shell (as opposed to /usr/sbin/nologin) Don't forget to execute ruby-dependent command in a login environment (e.g. sudo --login option) When not possible (e.g. in systemd service definition), please use direct path to rbenv shims (e.g. $RBENV_ROOT/shims/bundle) Requires YunoHost version 3.2.2 or higher. Dude, show me the code!  ynh_remove_ruby Remove the version of Ruby used by the app. Usage: ynh_remove_ruby Details: This helper will also cleanup Ruby versions Dude, show me the code!  ynh_cleanup_ruby Remove no more needed versions of Ruby used by the app. Usage: ynh_cleanup_ruby Details: This helper will check what Ruby version are no more required, and uninstall them If no app uses Ruby, rbenv will be also removed. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Go‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#go","content":" ynh_use_go Load the version of Go for an app, and set variables. Usage: ynh_use_go Details: ynh_use_go has to be used in any app scripts before using Go for the first time. This helper will provide alias and variables to use in your scripts. To use gem or Go, use the alias ynh_gem and ynh_goThose alias will use the correct version installed for the app For example: use ynh_gem install instead of gem install With sudo or ynh_exec_as, use instead the fallback variables $ynh_gem and $ynh_goAnd propagate $PATH to sudo with $ynh_go_load_path Exemple: ynh_exec_as $app $ynh_go_load_path $ynh_gem install $PATH contains the path of the requested version of Go. However, $PATH is duplicated into $go_path to outlast any manipulation of $PATH You can use the variable $ynh_go_load_path to quickly load your Go version in $PATH for an usage into a separate script. Exemple: $ynh_go_load_path $install_dir/script_that_use_gem.sh Finally, to start a Go service with the correct version, 2 solutions Either the app is dependent of Go or gem, but does not called it directly. In such situation, you need to load PATHEnvironment=&quot;__YNH_GO_LOAD_PATH__&quot;ExecStart=__INSTALL_DIR__/my_appYou will replace YNH_GO_LOAD_PATH with $ynh_go_load_path Or Go start the app directly, then you don't need to load the PATH variableExecStart=__YNH_GO__ my_app runYou will replace YNH_GO with $ynh_go one other variable is also available $go_path: The absolute path to Go binaries for the chosen version. Requires YunoHost version 3.2.2 or higher. Dude, show me the code!  ynh_install_go Install a specific version of Go Usage: ynh_install_go --go_version=go_version Arguments: -v, --go_version=: Version of go to install. Details: ynh_install_go will install the version of Go provided as argument by using goenv. This helper creates a /etc/profile.d/goenv.sh that configures PATH environment for goenv for every LOGIN user, hence your user must have a defined shell (as opposed to /usr/sbin/nologin) Don't forget to execute go-dependent command in a login environment (e.g. sudo --login option) When not possible (e.g. in systemd service definition), please use direct path to goenv shims (e.g. $goenv_ROOT/shims/bundle) Requires YunoHost version 3.2.2 or higher. Dude, show me the code!  ynh_remove_go Remove the version of Go used by the app. Usage: ynh_remove_go Details: This helper will also cleanup Go versions Dude, show me the code!  ynh_cleanup_go Remove no more needed versions of Go used by the app. Usage: ynh_cleanup_go Details: This helper will check what Go version are no more required, and uninstall them If no app uses Go, goenv will be also removed. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Composer‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#composer","content":" ynh_composer_exec Execute a command with Composer Usage: ynh_composer_exec [--phpversion=phpversion] [--workdir=$install_dir] --commands=&quot;commands&quot; Arguments: -v, --phpversion: PHP version to use with composer-w, --workdir: The directory from where the command will be executed. Default $install_dir or $final_path-c, --commands: Commands to execute. Details: Requires YunoHost version 4.2 or higher. Dude, show me the code!  ynh_install_composer Install and initialize Composer in the given directory Usage: ynh_install_composer [--phpversion=phpversion] [--workdir=$install_dir] [--install_args=&quot;--optimize-autoloader&quot;] [--composerversion=composerversion] Arguments: -v, --phpversion: PHP version to use with composer-w, --workdir: The directory from where the command will be executed. Default $install_dir.-a, --install_args: Additional arguments provided to the composer install. Argument --no-dev already include-c, --composerversion: Composer version to install Details: Requires YunoHost version 4.2 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Databases‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#databases","content":" This is coupled to the 'database' resource in the manifest.toml - at least for mysql/postgresql. Mongodb/redis may have better integration in the future.  ","version":"Next","tagName":"h2"},{"title":"Mysql‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#mysql","content":" ynh_mysql_connect_as Open a connection as a user Usage: ynh_mysql_connect_as --user=user --password=password [--database=database] Arguments: -u, --user=: the user name to connect as-p, --password=: the user password-d, --database=: the database to connect to Examples: ynh_mysql_connect_as --user=&quot;user&quot; --password=&quot;pass&quot; &lt;&lt;&lt; &quot;UPDATE ...;&quot;ynh_mysql_connect_as --user=&quot;user&quot; --password=&quot;pass&quot; &lt; /path/to/file.sql Details: Requires YunoHost version 2.2.4 or higher. Dude, show me the code!  ynh_mysql_execute_as_root Execute a command as root user Usage: ynh_mysql_execute_as_root --sql=sql [--database=database] Arguments: -s, --sql=: the SQL command to execute-d, --database=: the database to connect to Details: Requires YunoHost version 2.2.4 or higher. Dude, show me the code!  ynh_mysql_execute_file_as_root Execute a command from a file as root user Usage: ynh_mysql_execute_file_as_root --file=file [--database=database] Arguments: -f, --file=: the file containing SQL commands-d, --database=: the database to connect to Details: Requires YunoHost version 2.2.4 or higher. Dude, show me the code!  ynh_mysql_dump_db Dump a database Usage: ynh_mysql_dump_db --database=database Arguments: -d, --database=: the database name to dump Returns: The mysqldump output Example: ynh_mysql_dump_db --database=roundcube &gt; ./dump.sql Details: Requires YunoHost version 2.2.4 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Postgresql‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#postgresql","content":" ynh_psql_connect_as Open a connection as a user Usage: ynh_psql_connect_as --user=user --password=password [--database=database] Arguments: -u, --user=: the user name to connect as-p, --password=: the user password-d, --database=: the database to connect to Examples: ynh_psql_connect_as 'user' 'pass' &lt;&lt;&lt; &quot;UPDATE ...;&quot;ynh_psql_connect_as 'user' 'pass' &lt; /path/to/file.sql Details: Requires YunoHost version 3.5.0 or higher. Dude, show me the code!  ynh_psql_execute_as_root Execute a command as root user Usage: ynh_psql_execute_as_root --sql=sql [--database=database] Arguments: -s, --sql=: the SQL command to execute-d, --database=: the database to connect to Details: Requires YunoHost version 3.5.0 or higher. Dude, show me the code!  ynh_psql_execute_file_as_root Execute a command from a file as root user Usage: ynh_psql_execute_file_as_root --file=file [--database=database] Arguments: -f, --file=: the file containing SQL commands-d, --database=: the database to connect to Details: Requires YunoHost version 3.5.0 or higher. Dude, show me the code!  ynh_psql_dump_db Dump a database Usage: ynh_psql_dump_db --database=database Arguments: -d, --database=: the database name to dump Returns: the psqldump output Example: ynh_psql_dump_db 'roundcube' &gt; ./dump.sql Details: Requires YunoHost version 3.5.0 or higher. Dude, show me the code!  ynh_psql_database_exists Check if a psql database exists Usage: ynh_psql_database_exists --database=database | exit: Return 1 if the database doesn't exist, 0 otherwise Arguments: -d, --database=: the database for which to check existence Details: Requires YunoHost version 3.5.0 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Mongodb‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#mongodb","content":" ynh_mongo_exec Execute a mongo command example: ynh_mongo_exec --command='db.getMongo().getDBNames().indexOf(&quot;wekan&quot;)' example: ynh_mongo_exec --command=&quot;db.getMongo().getDBNames().indexOf(&amp;#34;wekan&amp;#34;)&quot; Usage: ynh_mongo_exec [--user=user] [--password=password] [--authenticationdatabase=authenticationdatabase] [--database=database] [--host=host] [--port=port] --command=&quot;command&quot; [--eval] Arguments: -u, --user=: The user name to connect as-p, --password=: The user password-d, --authenticationdatabase=: The authenticationdatabase to connect to-d, --database=: The database to connect to-h, --host=: The host to connect to-P, --port=: The port to connect to-c, --command=: The command to evaluate-e, --eval: Evaluate instead of execute the command. Dude, show me the code!  ynh_mongo_dump_db Dump a database Usage: ynh_mongo_dump_db --database=database Arguments: -d, --database=: The database name to dump Returns: the mongodump output Example: ynh_mongo_dump_db --database=wekan &gt; ./dump.bson Dude, show me the code!  ynh_mongo_database_exists Check if a mongo database exists Usage: ynh_mongo_database_exists --database=database | exit: Return 1 if the database doesn't exist, 0 otherwise Arguments: -d, --database=: The database for which to check existence Dude, show me the code!  ynh_mongo_restore_db Restore a database Usage: ynh_mongo_restore_db --database=database Arguments: -d, --database=: The database name to restore Example: ynh_mongo_restore_db --database=wekan &lt; ./dump.bson Dude, show me the code!  ynh_mongo_setup_db Create a database, an user and its password. Then store the password in the app's config Usage: ynh_mongo_setup_db --db_user=user --db_name=name [--db_pwd=pwd] Arguments: -u, --db_user=: Owner of the database-n, --db_name=: Name of the database-p, --db_pwd=: Password of the database. If not provided, a password will be generated Details: After executing this helper, the password of the created database will be available in $db_pwd It will also be stored as &quot;mongopwd&quot; into the app settings. Dude, show me the code!  ynh_mongo_remove_db Remove a database if it exists, and the associated user Usage: ynh_mongo_remove_db --db_user=user --db_name=name Arguments: -u, --db_user=: Owner of the database-n, --db_name=: Name of the database Dude, show me the code!  ynh_install_mongo Install MongoDB and integrate MongoDB service in YunoHost Usage: ynh_install_mongo [--mongo_version=mongo_version] Arguments: -m, --mongo_version=: Version of MongoDB to install Dude, show me the code!  ynh_remove_mongo Remove MongoDB Only remove the MongoDB service integration in YunoHost for now if MongoDB package as been removed Usage: ynh_remove_mongo Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Redis‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#redis","content":" ynh_redis_get_free_db get the first available redis database Usage: ynh_redis_get_free_db Returns: the database number to use Dude, show me the code!  ynh_redis_remove_db Create a master password and set up global settings Please always call this script in install and restore scripts Usage: ynh_redis_remove_db database Arguments: database: the database to erase Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Configurations / Templating‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#configurations--templating","content":" ","version":"Next","tagName":"h2"},{"title":"Templating‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#templating","content":" ynh_add_config Create a dedicated config file from a template Usage: ynh_add_config --template=&quot;template&quot; --destination=&quot;destination&quot; Arguments: -t, --template=: Template config file to use-d, --destination=: Destination of the config file-j, --jinja: Use jinja template instead of the simple __MY_VAR__ templating format Examples: ynh_add_config --template=&quot;.env&quot; --destination=&quot;$install_dir/.env&quot; # (use the template file &quot;conf/.env&quot; from the app's package)ynh_add_config --jinja --template=&quot;config.j2&quot; --destination=&quot;$install_dir/config&quot; # (use the template file &quot;conf/config.j2&quot; from the app's package) Details: The template can be by default the name of a file in the conf directory of a YunoHost Package, a relative path or an absolute path. The helper will use the template template to generate a config filedestination by replacing the following keywords with global variables that should be defined before calling this helper : __PATH__ by $path_url __NAME__ by $app __NAMETOCHANGE__ by $app __USER__ by $app __FINALPATH__ by $final_path __PHPVERSION__ by $YNH_PHP_VERSION (packaging v1 only, packaging v2 uses phpversion setting implicitly set by apt resource) __YNH_NODE_LOAD_PATH__ by $ynh_node_load_PATH And any dynamic variables that should be defined before calling this helper like: __DOMAIN__ by $domain __APP__ by $app __VAR_1__ by $var_1 __VAR_2__ by $var_2 When --jinja is enabled‚Äã This option is meant for advanced use-cases where the &quot;simple&quot; templating mode ain't enough because you need conditional blocks or loops. For a full documentation of jinja's syntax you can refer to:https://jinja.palletsprojects.com/en/3.1.x/templates/ Note that in YunoHost context, all variables are from shell variables and therefore are strings Keeping track of manual changes by the admin‚Äã The helper will verify the checksum and backup the destination file if it's different before applying the new template. And it will calculate and store the destination file checksum into the app settings when configuration is done. Requires YunoHost version 4.1.0 or higher. Dude, show me the code!  ynh_read_var_in_file Get a value from heterogeneous file (yaml, json, php, python...) Usage: ynh_read_var_in_file --file=PATH --key=KEY Arguments: -f, --file=: the path to the file-k, --key=: the key to get-a, --after=: the line just before the key (in case of multiple lines with the name of the key in the file) Details: This helpers match several var affectation use case in several languages We don't use jq or equivalent to keep comments and blank space in files This helpers work line by line, it is not able to work correctly if you have several identical keys in your files Example of line this helpers can managed correctly .yml title: YunoHost documentation email: 'yunohost@yunohost.org' .json &quot;theme&quot;: &quot;colib'ris&quot;, &quot;port&quot;: 8102 &quot;some_boolean&quot;: false, &quot;user&quot;: null .ini some_boolean = On action = &quot;Clear&quot; port = 20 .php $user= user =&gt; 20 .py USER = 8102 user = 'https://donate.local' CUSTOM['user'] = 'YunoHost' Requires YunoHost version 4.3 or higher. Dude, show me the code!  ynh_write_var_in_file Set a value into heterogeneous file (yaml, json, php, python...) Usage: ynh_write_var_in_file --file=PATH --key=KEY --value=VALUE Arguments: -f, --file=: the path to the file-k, --key=: the key to set-v, --value=: the value to set-a, --after=: the line just before the key (in case of multiple lines with the name of the key in the file) Details: Requires YunoHost version 4.3 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Nginx‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#nginx","content":" ynh_add_nginx_config Create a dedicated nginx config Usage: ynh_add_nginx_config Details: This will use a template in ../conf/nginx.confSee the documentation of ynh_add_config for a description of the template format and how placeholders are replaced with actual variables. Additionally, ynh_add_nginx_config will replace: #sub_path_only by empty string if path_url is not '/'#root_path_only by empty string if path_url is '/' This allows to enable/disable specific behaviors dependenging on the install location Requires YunoHost version 4.1.0 or higher. Dude, show me the code!  ynh_remove_nginx_config Remove the dedicated nginx config Usage: ynh_remove_nginx_config Details: Requires YunoHost version 2.7.2 or higher. Dude, show me the code!  ynh_change_url_nginx_config Regen the nginx config in a change url context Usage: ynh_change_url_nginx_config Details: Requires YunoHost version 11.1.9 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Php‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#php","content":" ynh_add_fpm_config Create a dedicated PHP-FPM config Usage: ynh_add_fpm_config Details: Case 1 (recommended) : your provided a snippet conf/extra_php-fpm.conf The actual PHP configuration will be automatically generated, and your extra_php-fpm.conf will be appended (typically contains PHP upload limits) The resulting configuration will be deployed to the appropriate place, /etc/php/$phpversion/fpm/pool.d/$app.conf Performance-related options in the PHP conf, such as : pm.max_children, pm.start_servers, pm.min_spare_servers pm.max_spare_servers are computed from two parameters called &quot;usage&quot; and &quot;footprint&quot; which can be set to low/medium/high. (cf details below) If you wish to tweak those, please initialize the settings fpm_usage and fpm_footprintprior to calling this helper. Otherwise, &quot;low&quot; will be used as a default for both values. Otherwise, if you want the user to have control over these, we encourage to create a config panel (which should ultimately be standardized by the core ...) Case 2 (deprecate) : you provided an entire conf/php-fpm.conf The configuration will be hydrated, replacing FOOBAR placeholders with $foobar values, etc. The resulting configuration will be deployed to the appropriate place, /etc/php/$phpversion/fpm/pool.d/$app.conf fpm_footprint: Memory footprint of the service (low/medium/high). low - Less than 20 MB of RAM by pool. medium - Between 20 MB and 40 MB of RAM by pool. high - More than 40 MB of RAM by pool. N - Or you can specify a quantitative footprint as MB by pool (use watch -n0.5 ps -o user,cmd,%cpu,rss -u APP) fpm_usage: Expected usage of the service (low/medium/high). low - Personal usage, behind the SSO. medium - Low usage, few people or/and publicly accessible. high - High usage, frequently visited website. The footprint of the service will be used to defined the maximum footprint we can allow, which is half the maximum RAM. So it will be used to defined 'pm.max_children' A lower value for the footprint will allow more children for 'pm.max_children'. And so for 'pm.start_servers', 'pm.min_spare_servers' and 'pm.max_spare_servers' which are defined from the value of 'pm.max_children' NOTE: 'pm.max_children' can't exceed 4 times the number of processor's cores. The usage value will defined the way php will handle the children for the pool. A value set as 'low' will set the process manager to 'ondemand'. Children will start only if the service is used, otherwise no child will stay alive. This config gives the lower footprint when the service is idle. But will use more proc since it has to start a child as soon it's used. Set as 'medium', the process manager will be at dynamic. If the service is idle, a number of children equal to pm.min_spare_servers will stay alive. So the service can be quick to answer to any request. The number of children can grow if needed. The footprint can stay low if the service is idle, but not null. The impact on the proc is a little bit less than 'ondemand' as there's always a few children already available. Set as 'high', the process manager will be set at 'static'. There will be always as many children as 'pm.max_children', the footprint is important (but will be set as maximum a quarter of the maximum RAM) but the impact on the proc is lower. The service will be quick to answer as there's always many children ready to answer. Requires YunoHost version 4.1.0 or higher. Dude, show me the code!  ynh_remove_fpm_config Remove the dedicated PHP-FPM config Usage: ynh_remove_fpm_config Details: Requires YunoHost version 2.7.2 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Systemd‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#systemd","content":" ynh_add_systemd_config Create a dedicated systemd config Usage: ynh_add_systemd_config [--service=service] [--template=template] Arguments: -s, --service=: Service name (optionnal, $app by default)-t, --template=: Name of template file (optionnal, this is 'systemd' by default, meaning ../conf/systemd.service will be used as template) Details: This will use the template ../conf/&lt;templatename&gt;.service. See the documentation of ynh_add_config for a description of the template format and how placeholders are replaced with actual variables. Requires YunoHost version 4.1.0 or higher. Dude, show me the code!  ynh_remove_systemd_config Remove the dedicated systemd config Usage: ynh_remove_systemd_config [--service=service] Arguments: -s, --service=: Service name (optionnal, $app by default) Details: Requires YunoHost version 2.7.2 or higher. Dude, show me the code!  ynh_systemd_action Start (or other actions) a service, print a log in case of failure and optionnaly wait until the service is completely started Usage: ynh_systemd_action [--service_name=service_name] [--action=action] [ [--line_match=&quot;line to match&quot;] [--log_path=log_path] [--timeout=300] [--length=20] ] Arguments: -n, --service_name=: Name of the service to start. Default : $app-a, --action=: Action to perform with systemctl. Default: start-l, --line_match=: Line to match - The line to find in the log to attest the service have finished to boot. If not defined it don't wait until the service is completely started.-p, --log_path=: Log file - Path to the log file. Default : /var/log/$app/$app.log-t, --timeout=: Timeout - The maximum time to wait before ending the watching. Default : 300 seconds.-e, --length=: Length of the error log displayed for debugging : Default : 20 Details: Requires YunoHost version 3.5.0 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Fail2ban‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#fail2ban","content":" ynh_add_fail2ban_config Create a dedicated fail2ban config (jail and filter conf files) Usage: 1: ynh_add_fail2ban_config --logpath=log_file --failregex=filter [--max_retry=max_retry] [--ports=ports] 2: ynh_add_fail2ban_config --use_template Arguments: -l, --logpath=: Log file to be checked by fail2ban-r, --failregex=: Failregex to be looked for by fail2ban-m, --max_retry=: Maximum number of retries allowed before banning IP address - default: 3-p, --ports=: Ports blocked for a banned IP address - default: http,https-t, --use_template: Use this helper in template mode Details: This will use a template in ../conf/f2b_jail.conf and ../conf/f2b_filter.confSee the documentation of ynh_add_config for a description of the template format and how placeholders are replaced with actual variables. Generally your template will look like that by example (for synapse): f2b_jail.conf: [__APP__] enabled = true port = http,https filter = __APP__ logpath = /var/log/__APP__/logfile.log maxretry = 3 f2b_filter.conf: [INCLUDES] before = common.conf [Definition] # Part of regex definition (just used to make more easy to make the global regex) __synapse_start_line = .? \\- synapse\\..+ \\- # Regex definition. failregex = ^%(__synapse_start_line)s INFO \\- POST\\-(\\d+)\\- &lt;HOST&gt; \\- \\d+ \\- Received request\\: POST /_matrix/client/r0/login\\??&lt;SKIPLINES&gt;%(__synapse_start_line)s INFO \\- POST\\-\\1\\- Got login request with identifier: \\{u'type': u'm.id.user', u'user'\\: u'(.+?)'\\}, medium\\: None, address: None, user\\: u'\\5'&lt;SKIPLINES&gt;%(__synapse_start_line)s WARNING \\- \\- (Attempted to login as @\\5\\:.+ but they do not exist|Failed password login for user @\\5\\:.+)$ ignoreregex = Note about the &quot;failregex&quot; option:‚Äã regex to match the password failure messages in the logfile. The host must be matched by a group named &quot;host&quot;. The tag &quot;&lt;HOST&gt;&quot; can be used for standard IP/hostname matching and is only an alias for (?:::f{4,6}:)?(?P&lt;host&gt;[\\w\\-.^_]+) You can find some more explainations about how to make a regex here :https://www.fail2ban.org/wiki/index.php/MANUAL_0_8#Filters To validate your regex you can test with this command: fail2ban-regex /var/log/YOUR_LOG_FILE_PATH /etc/fail2ban/filter.d/YOUR_APP.conf Requires YunoHost version 4.1.0 or higher. Dude, show me the code!  ynh_remove_fail2ban_config Remove the dedicated fail2ban config (jail and filter conf files) Usage: ynh_remove_fail2ban_config Details: Requires YunoHost version 3.5.0 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Logrotate‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#logrotate","content":" ynh_use_logrotate Use logrotate to manage the logfile Usage: ynh_use_logrotate [--logfile=/log/file] [--specific_user=user/group] Arguments: -l, --logfile=: absolute path of logfile-u, --specific_user=: run logrotate as the specified user and group. If not specified logrotate is runned as root. Details: If no --logfile is provided, /var/log/$app will be used as default.logfile can point to a directory or a file. Requires YunoHost version 2.6.4 or higher. Dude, show me the code!  ynh_remove_logrotate Remove the app's logrotate config. Usage: ynh_remove_logrotate Details: Requires YunoHost version 2.6.4 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Misc Tools‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#misc-tools","content":" ","version":"Next","tagName":"h2"},{"title":"Utils‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#utils","content":" ynh_local_curl Curl abstraction to help with POST requests to local pages (such as installation forms) Usage: ynh_local_curl &quot;page_uri&quot; &quot;key1=value1&quot; &quot;key2=value2&quot; ... Arguments: page_uri: Path (relative to $path_url) of the page where POST data will be sentkey1=value1: (Optionnal) POST key and corresponding valuekey2=value2: (Optionnal) Another POST key and corresponding value...: (Optionnal) More POST keys and values Example: ynh_local_curl &quot;/install.php?installButton&quot; &quot;foo=$var1&quot; &quot;bar=$var2&quot; Details: For multiple calls, cookies are persisted between each call for the same app $domain and $path_url should be defined externally (and correspond to the domain.tld and the /path (of the app?)) Requires YunoHost version 2.6.4 or higher. Dude, show me the code!  ynh_secure_remove Remove a file or a directory securely Usage: ynh_secure_remove --file=path_to_remove Arguments: -f, --file=: File or directory to remove Details: Requires YunoHost version 2.6.4 or higher. Dude, show me the code!  ynh_read_manifest Read the value of a key in a ynh manifest file Usage: ynh_read_manifest --manifest=&quot;manifest.json&quot; --manifest_key=&quot;key&quot; Arguments: -m, --manifest=: Path of the manifest to read-k, --manifest_key=: Name of the key to find Returns: the value associate to that key Details: Requires YunoHost version 3.5.0 or higher. Dude, show me the code!  ynh_app_upstream_version Read the upstream version from the manifest or $YNH_APP_MANIFEST_VERSION Usage: ynh_app_upstream_version [--manifest=&quot;manifest.json&quot;] Arguments: -m, --manifest=: Path of the manifest to read Returns: the version number of the upstream app Details: If the manifest is not specified, the envvar $YNH_APP_MANIFEST_VERSION will be used. The version number in the manifest is defined by &lt;upstreamversion&gt;~ynh&lt;packageversion&gt;. For example, if the manifest contains 4.3-2~ynh3 the function will return 4.3-2 Requires YunoHost version 3.5.0 or higher. Dude, show me the code!  ynh_check_app_version_changed Checks the app version to upgrade with the existing app version and returns: Usage: ynh_check_app_version_changed Returns: UPGRADE_APP if the upstream version changed, UPGRADE_PACKAGE otherwise. Details: This helper should be used to avoid an upgrade of an app, or the upstream part of it, when it's not needed Requires YunoHost version 3.5.0 or higher. Dude, show me the code!  ynh_compare_current_package_version Compare the current package version against another version given as an argument. Usage: ynh_compare_current_package_version --comparison (lt|le|eq|ne|ge|gt) --version &lt;X~ynhY&gt; Arguments: --comparison: Comparison type. Could be : lt (lower than), le (lower or equal), eq (equal), ne (not equal), ge (greater or equal), gt (greater than)--version: The version to compare. Need to be a version in the yunohost package version type (like 2.3.1~ynh4) Returns: 0 if the evaluation is true, 1 if false. Example: ynh_compare_current_package_version --comparison lt --version 2.3.2~ynh1 Details: This helper is usually used when we need to do some actions only for some old package versions. Generally you might probably use it as follow in the upgrade script : if ynh_compare_current_package_version --comparison lt --version 2.3.2~ynh1 then # Do something that is needed for the package version older than 2.3.2~ynh1 fi Requires YunoHost version 3.8.0 or higher. Dude, show me the code!  ynh_user_exists Check if a YunoHost user exists Usage: ynh_user_exists --username=username Arguments: -u, --username=: the username to check Returns: 0 if the user exists, 1 otherwise. Example: ynh_user_exists 'toto' || echo &quot;User does not exist&quot; Details: Requires YunoHost version 2.2.4 or higher. Dude, show me the code!  ynh_user_get_info Retrieve a YunoHost user information Usage: ynh_user_get_info --username=username --key=key Arguments: -u, --username=: the username to retrieve info from-k, --key=: the key to retrieve Returns: the value associate to that key Example: mail=$(ynh_user_get_info --username=&quot;toto&quot; --key=mail) Details: Requires YunoHost version 2.2.4 or higher. Dude, show me the code!  ynh_user_list Get the list of YunoHost users Usage: ynh_user_list Returns: one username per line as strings Example: for u in $(ynh_user_list); do ... ; done Details: Requires YunoHost version 2.4.0 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Setting‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#setting","content":" ynh_app_setting_get Get an application setting Usage: ynh_app_setting_get --app=app --key=key Arguments: -a, --app=: the application id-k, --key=: the setting to get Details: Requires YunoHost version 2.2.4 or higher. Dude, show me the code!  ynh_app_setting_set Set an application setting Usage: ynh_app_setting_set --app=app --key=key --value=value Arguments: -a, --app=: the application id-k, --key=: the setting name to set-v, --value=: the setting value to set Details: When choosing the setting key's name, note that including the following keywords will make the associated setting's value appear masked in the debug logs (cf. related code): pwd, pass, passwd, password, passphrase, secret\\w* (regex), \\w+key (regex), token, PASSPHRASEThis is meant to allow sharing the logs while preserving confidential data, but having this in mind is useful would you expect to see those values while debugging your scripts. Requires YunoHost version 2.2.4 or higher. Dude, show me the code!  ynh_app_setting_set_default Set an application setting but only if the &quot;$key&quot; variable ain't set yet Usage: ynh_app_setting_set_default --app=app --key=key --value=value Arguments: -a, --app=: the application id-k, --key=: the setting name to set-v, --value=: the default setting value to set Details: Note that it doesn't just define the setting but ALSO define the $foobar variable Hence it's meant as a replacement for this legacy overly complex syntax: if [ -z &quot;${foo:-}&quot; ] then foo=&quot;bar&quot; ynh_app_setting_set --key=&quot;foo&quot; --value=&quot;$foo&quot; fi Requires YunoHost version 11.1.16 or higher. Dude, show me the code!  ynh_app_setting_delete Delete an application setting Usage: ynh_app_setting_delete --app=app --key=key Arguments: -a, --app=: the application id-k, --key=: the setting to delete Details: Requires YunoHost version 2.2.4 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"String‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#string","content":" ynh_string_random Generate a random string Usage: ynh_string_random [--length=string_length] Arguments: -l, --length=: the string length to generate (default: 24)-f, --filter=: the kind of characters accepted in the output (default: 'A-Za-z0-9') Returns: the generated string Example: pwd=$(ynh_string_random --length=8) Details: Requires YunoHost version 2.2.4 or higher. Dude, show me the code!  ynh_replace_string Substitute/replace a string (or expression) by another in a file Usage: ynh_replace_string --match_string=match_string --replace_string=replace_string --target_file=target_file Arguments: -m, --match_string=: String to be searched and replaced in the file-r, --replace_string=: String that will replace matches-f, --target_file=: File in which the string will be replaced. Details: As this helper is based on sed command, regular expressions and references to sub-expressions can be used (see sed manual page for more information) Requires YunoHost version 2.6.4 or higher. Dude, show me the code!  ynh_replace_special_string Substitute/replace a special string by another in a file Usage: ynh_replace_special_string --match_string=match_string --replace_string=replace_string --target_file=target_file Arguments: -m, --match_string=: String to be searched and replaced in the file-r, --replace_string=: String that will replace matches-t, --target_file=: File in which the string will be replaced. Details: This helper will use ynh_replace_string, but as you can use special characters, you can't use some regular expressions and sub-expressions. Requires YunoHost version 2.7.7 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Backup‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#backup","content":" ynh_backup Add a file or a directory to the list of paths to backup Usage: ynh_backup --src_path=src_path [--dest_path=dest_path] [--is_big] [--not_mandatory] Arguments: -s, --src_path=: file or directory to bind or symlink or copy. it shouldn't be in the backup dir.-d, --dest_path=: destination file or directory inside the backup dir-b, --is_big: Indicate data are big (mail, video, image ...)-m, --not_mandatory: Indicate that if the file is missing, the backup can ignore it. Details: This helper can be used both in a system backup hook, and in an app backup script ynh_backup writes src_path and the relative dest_path into a CSV file, and it creates the parent destination directory If dest_path is ended by a slash it complete this path with the basename of src_path. Example in the context of a wordpress app : ynh_backup &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot; # =&gt; This line will be added into CSV file # &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;,&quot;apps/wordpress/etc/nginx/conf.d/$domain.d/$app.conf&quot; ynh_backup &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot; &quot;conf/nginx.conf&quot; # =&gt; &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;,&quot;apps/wordpress/conf/nginx.conf&quot; ynh_backup &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot; &quot;conf/&quot; # =&gt; &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;,&quot;apps/wordpress/conf/$app.conf&quot; ynh_backup &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot; &quot;conf&quot; # =&gt; &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;,&quot;apps/wordpress/conf&quot; #Deprecated usages (maintained for retro-compatibility) ynh_backup &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot; &quot;${backup_dir}/conf/nginx.conf&quot; # =&gt; &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;,&quot;apps/wordpress/conf/nginx.conf&quot; ynh_backup &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot; &quot;/conf/&quot; # =&gt; &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;,&quot;apps/wordpress/conf/$app.conf&quot; How to use --is_big: --is_big is used to specify that this part of the backup can be quite huge. So, you don't want that your package does backup that part during ynh_backup_before_upgrade. In the same way, an user may doesn't want to backup this big part of the app for each of his backup. And so handle that part differently. As this part of your backup may not be done, your restore script has to handle it. In your restore script, use --not_mandatory with ynh_restore_fileAs well in your remove script, you should not remove those data ! Or an user may end up with a failed upgrade restoring an app without data anymore ! To have the benefit of --is_big while doing a backup, you can whether set the environement variable BACKUP_CORE_ONLY to 1 (BACKUP_CORE_ONLY=1) before the backup command. It will affect only that backup command. Or set the config do_not_backup_data to 1 into the settings.yml of the app. This will affect all backups for this app until the setting is removed. Requires YunoHost version 2.4.0 or higher. Requires YunoHost version 3.5.0 or higher for the argument --not_mandatory Dude, show me the code!  ynh_restore Restore all files that were previously backuped in a core backup script or app backup script Usage: ynh_restore Details: Requires YunoHost version 2.6.4 or higher. Dude, show me the code!  ynh_restore_file Restore a file or a directory Usage: ynh_restore_file --origin_path=origin_path [--dest_path=dest_path] [--not_mandatory] Arguments: -o, --origin_path=: Path where was located the file or the directory before to be backuped or relative path to $YNH_CWD where it is located in the backup archive-d, --dest_path=: Path where restore the file or the dir. If unspecified, the destination will be ORIGIN_PATH or if the ORIGIN_PATH doesn't exist in the archive, the destination will be searched into backup.csv-m, --not_mandatory: Indicate that if the file is missing, the restore process can ignore it. Examples: ynh_restore_file -o &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;You can also use relative paths:ynh_restore_file -o &quot;conf/nginx.conf&quot; Details: Use the registered path in backup_list by ynh_backup to restore the file at the right place. If DEST_PATH already exists and is lighter than 500 Mo, a backup will be made in/var/cache/yunohost/appconfbackup/. Otherwise, the existing file is removed. if apps/$app/etc/nginx/conf.d/$domain.d/$app.conf exists, restore it into/etc/nginx/conf.d/$domain.d/$app.confif no, search for a match in the csv (eg: conf/nginx.conf) and restore it into/etc/nginx/conf.d/$domain.d/$app.conf Requires YunoHost version 2.6.4 or higher. Requires YunoHost version 3.5.0 or higher for the argument --not_mandatory Dude, show me the code!  ynh_store_file_checksum Calculate and store a file checksum into the app settings Usage: ynh_store_file_checksum --file=file Arguments: -f, --file=: The file on which the checksum will performed, then stored. Details: $app should be defined when calling this helper Requires YunoHost version 2.6.4 or higher. Dude, show me the code!  ynh_backup_if_checksum_is_different Verify the checksum and backup the file if it's different Usage: ynh_backup_if_checksum_is_different --file=file Arguments: -f, --file=: The file on which the checksum test will be perfomed. Returns: the name of a backup file, or nothing Details: This helper is primarily meant to allow to easily backup personalised/manually modified config files. Requires YunoHost version 2.6.4 or higher. Dude, show me the code!  ynh_delete_file_checksum Delete a file checksum from the app settings Usage: ynh_delete_file_checksum --file=file Arguments: -f, --file=: The file for which the checksum will be deleted Details: $app should be defined when calling this helper Requires YunoHost version 3.3.1 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Logging‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#logging","content":" ynh_die Print a message to stderr and exit Usage: ynh_die --message=MSG [--ret_code=RETCODE] Arguments: -m, --message=: Message to display-c, --ret_code=: Exit code to exit with Details: Requires YunoHost version 2.4.0 or higher. Dude, show me the code!  ynh_print_info Display a message in the 'INFO' logging category Usage: ynh_print_info --message=&quot;Some message&quot; Arguments: -m, --message=: Message to display Details: Requires YunoHost version 3.2.0 or higher. Dude, show me the code!  ynh_print_warn Print a warning on stderr Usage: ynh_print_warn --message=&quot;Text to print&quot; Arguments: -m, --message=: The text to print Details: Requires YunoHost version 3.2.0 or higher. Dude, show me the code!  ynh_print_err Print an error on stderr Usage: ynh_print_err --message=&quot;Text to print&quot; Arguments: -m, --message=: The text to print Details: Requires YunoHost version 3.2.0 or higher. Dude, show me the code!  ynh_exec_err Execute a command and print the result as an error Usage: ynh_exec_err your command and args Arguments: command: command to execute Details: Note that you should NOT quote the command but only prefix it with ynh_exec_err Requires YunoHost version 3.2.0 or higher. Dude, show me the code!  ynh_exec_warn Execute a command and print the result as a warning Usage: ynh_exec_warn your command and args Arguments: command: command to execute Details: Note that you should NOT quote the command but only prefix it with ynh_exec_warn Requires YunoHost version 3.2.0 or higher. Dude, show me the code!  ynh_exec_warn_less Execute a command and force the result to be printed on stdout Usage: ynh_exec_warn_less your command and args Arguments: command: command to execute Details: Note that you should NOT quote the command but only prefix it with ynh_exec_warn Requires YunoHost version 3.2.0 or higher. Dude, show me the code!  ynh_exec_quiet Execute a command and redirect stdout in /dev/null Usage: ynh_exec_quiet your command and args Arguments: command: command to execute Details: Note that you should NOT quote the command but only prefix it with ynh_exec_warn Requires YunoHost version 3.2.0 or higher. Dude, show me the code!  ynh_exec_fully_quiet Execute a command and redirect stdout and stderr in /dev/null Usage: ynh_exec_quiet your command and args Arguments: command: command to execute Details: Note that you should NOT quote the command but only prefix it with ynh_exec_quiet Requires YunoHost version 3.2.0 or higher. Dude, show me the code!  ynh_exec_and_print_stderr_only_if_error Execute a command and redirect stderr in /dev/null. Print stderr on error. Usage: ynh_exec_and_print_stderr_only_if_error your command and args Arguments: command: command to execute Details: Note that you should NOT quote the command but only prefix it with ynh_exec_and_print_stderr_only_if_error Requires YunoHost version 11.2 or higher. Dude, show me the code!  ynh_script_progression Print a progress bar showing the progression of an app script Usage: ynh_script_progression --message=message [--weight=weight] [--time] Arguments: -m, --message=: The text to print-w, --weight=: The weight for this progression. This value is 1 by default. Use a bigger value for a longer part of the script.-t, --time: Print the execution time since the last call to this helper. Especially usefull to define weights. The execution time is given for the duration since the previous call. So the weight should be applied to this previous call.-l, --last: Use for the last call of the helper, to fill the progression bar. Details: Requires YunoHost version 3.5.0 or higher. Dude, show me the code!  ynh_return Return data to the YunoHost core for later processing (to be used by special hooks like app config panel and core diagnosis) Usage: ynh_return somedata Details: Requires YunoHost version 3.6.0 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Multimedia‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#multimedia","content":" ynh_multimedia_build_main_dir Initialize the multimedia directory system Usage: ynh_multimedia_build_main_dir Details: Requires YunoHost version 4.2 or higher. Dude, show me the code!  ynh_multimedia_addfolder Add a directory in yunohost.multimedia Usage: ynh_multimedia_addfolder --source_dir=&quot;source_dir&quot; --dest_dir=&quot;dest_dir&quot; Arguments: -s, --source_dir=: Source directory - The real directory which contains your medias.-d, --dest_dir=: Destination directory - The name and the place of the symbolic link, relative to &quot;/home/yunohost.multimedia&quot; Details: This &quot;directory&quot; will be a symbolic link to a existing directory. Requires YunoHost version 4.2 or higher. Dude, show me the code!  ynh_multimedia_addaccess Allow an user to have an write authorisation in multimedia directories Usage: ynh_multimedia_addaccess user_name Arguments: -u, --user_name=: The name of the user which gain this access. Details: Requires YunoHost version 4.2 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Deprecated Or Handled By The Core / App Resources Since V2‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#deprecated-or-handled-by-the-core--app-resources-since-v2","content":" ","version":"Next","tagName":"h2"},{"title":"Permission‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#permission","content":" ynh_permission_create Create a new permission for the app Usage: ynh_permission_create --permission=&quot;permission&quot; [--url=&quot;url&quot;] [--additional_urls=&quot;second-url&quot; [ &quot;third-url&quot; ]] [--auth_header=true|false] [--allowed=group1 [ group2 ]] [--show_tile=true|false] [--protected=true|false] Arguments: -p, --permission=: the name for the permission (by default a permission named &quot;main&quot; already exist)-u, --url=: (optional) URL for which access will be allowed/forbidden. Note that if 'show_tile' is enabled, this URL will be the URL of the tile.-A, --additional_urls=: (optional) List of additional URL for which access will be allowed/forbidden-h, --auth_header=: (optional) Define for the URL of this permission, if SSOwat pass the authentication header to the application. Default is true-a, --allowed=: (optional) A list of group/user to allow for the permission-t, --show_tile=: (optional) Define if a tile will be shown in the SSO. If yes the name of the tile will be the 'label' parameter. Defaults to false for the permission different than 'main'.-P, --protected=: (optional) Define if this permission is protected. If it is protected the administrator won't be able to add or remove the visitors group of this permission. Defaults to 'false'. Details: Example 1: ynh_permission_create --permission=admin --url=/admin --additional_urls=domain.tld/admin /superadmin --allowed=alice bob \\ --show_tile=true This example will create a new permission permission with this following effect: A tile named &quot;My app admin&quot; in the SSO will be available for the users alice and bob. This tile will point to the relative url '/admin'.Only the user alice and bob will have the access to theses following url: /admin, domain.tld/admin, /superadmin Example 2: ynh_permission_create --permission=api --url=domain.tld/api --auth_header=false --allowed=visitors --protected=true This example will create a new protected permission. So the admin won't be able to add/remove the visitors group of this permission. In case of an API with need to be always public it avoid that the admin break anything. With this permission all client will be allowed to access to the url 'domain.tld/api'. Note that in this case no tile will be show on the SSO. Note that the auth_header parameter is to 'false'. So no authentication header will be passed to the application. Generally the API is requested by an application and enabling the auth_header has no advantage and could bring some issues in some case. So in this case it's better to disable this option for all API. If provided, 'url' or 'additional_urls' is assumed to be relative to the app domain/path if they start with '/'. For example: / -&gt; domain.tld/app /admin -&gt; domain.tld/app/admin domain.tld/app/api -&gt; domain.tld/app/api 'url' or 'additional_urls' can be treated as a PCRE (not lua) regex if it starts with &quot;re:&quot;. For example: re:/api/[A-Z]$ -&gt; domain.tld/app/api/[A-Z]$ re:domain.tld/app/api/[A-Z]$ -&gt; domain.tld/app/api/[A-Z]$ Note that globally the parameter 'url' and 'additional_urls' are same. The only difference is: 'url' is only one url, 'additional_urls' can be a list of urls. There are no limitation of 'additional_urls''url' is used for the url of tile in the SSO (if enabled with the 'show_tile' parameter) About the authentication header (auth_header parameter). The SSO pass (by default) to the application theses following HTTP header (linked to the authenticated user) to the application: &quot;Auth-User&quot;: username&quot;Remote-User&quot;: username&quot;Email&quot;: user email Generally this feature is usefull to authenticate automatically the user in the application but in some case the application don't work with theses header and theses header need to be disabled to have the application to work correctly. See https://github.com/YunoHost/issues/issues/1420 for more informations Requires YunoHost version 3.7.0 or higher. Dude, show me the code!  ynh_permission_delete Remove a permission for the app (note that when the app is removed all permission is automatically removed) Usage: ynh_permission_delete --permission=&quot;permission&quot; Arguments: -p, --permission=: the name for the permission (by default a permission named &quot;main&quot; is removed automatically when the app is removed) Example: ynh_permission_delete --permission=editors Details: Requires YunoHost version 3.7.0 or higher. Dude, show me the code!  ynh_permission_exists Check if a permission exists Usage: ynh_permission_exists --permission=permission | exit: Return 1 if the permission doesn't exist, 0 otherwise Arguments: -p, --permission=: the permission to check Details: Requires YunoHost version 3.7.0 or higher. Dude, show me the code!  ynh_permission_url Redefine the url associated to a permission Usage: ynh_permission_url --permission &quot;permission&quot; [--url=&quot;url&quot;] [--add_url=&quot;new-url&quot; [ &quot;other-new-url&quot; ]] [--remove_url=&quot;old-url&quot; [ &quot;other-old-url&quot; ]] [--auth_header=true|false] [--clear_urls] Arguments: -p, --permission=: the name for the permission (by default a permission named &quot;main&quot; is removed automatically when the app is removed)-u, --url=: (optional) URL for which access will be allowed/forbidden. Note that if you want to remove url you can pass an empty sting as arguments (&quot;&quot;).-a, --add_url=: (optional) List of additional url to add for which access will be allowed/forbidden.-r, --remove_url=: (optional) List of additional url to remove for which access will be allowed/forbidden-h, --auth_header=: (optional) Define for the URL of this permission, if SSOwat pass the authentication header to the application-c, --clear_urls: (optional) Clean all urls (url and additional_urls) Details: Requires YunoHost version 3.7.0 or higher. Dude, show me the code!  ynh_permission_update Update a permission for the app Usage: ynh_permission_update --permission &quot;permission&quot; [--add=&quot;group&quot; [&quot;group&quot; ...]] [--remove=&quot;group&quot; [&quot;group&quot; ...]] [--show_tile=true|false] [--protected=true|false] Arguments: -p, --permission=: the name for the permission (by default a permission named &quot;main&quot; already exist)-a, --add=: the list of group or users to enable add to the permission-r, --remove=: the list of group or users to remove from the permission-t, --show_tile=: (optional) Define if a tile will be shown in the SSO-P, --protected=: (optional) Define if this permission is protected. If it is protected the administrator won't be able to add or remove the visitors group of this permission. Details: Requires YunoHost version 3.7.0 or higher. Dude, show me the code!  ynh_permission_has_user Check if a permission has an user Usage: ynh_permission_has_user --permission=permission --user=user | exit: Return 1 if the permission doesn't have that user or doesn't exist, 0 otherwise Arguments: -p, --permission=: the permission to check-u, --user=: the user seek in the permission Example: ynh_permission_has_user --permission=main --user=visitors Details: Requires YunoHost version 3.7.1 or higher. Dude, show me the code!  ynh_legacy_permissions_exists Check if a legacy permissions exist Usage: ynh_legacy_permissions_exists | exit: Return 1 if the permission doesn't exist, 0 otherwise Details: Requires YunoHost version 4.1.2 or higher. Dude, show me the code!  ynh_legacy_permissions_delete_all Remove all legacy permissions Usage: ynh_legacy_permissions_delete_all Example: if ynh_legacy_permissions_exists then ynh_legacy_permissions_delete_all # You can recreate the required permissions here with ynh_permission_create fi Requires YunoHost version 4.1.2 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Apt‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#apt","content":" ynh_package_is_installed Check either a package is installed or not Usage: ynh_package_is_installed --package=name Arguments: -p, --package=: the package name to check Returns: 0 if the package is installed, 1 else. Example: ynh_package_is_installed --package=yunohost &amp;&amp; echo &quot;installed&quot; Details: Requires YunoHost version 2.2.4 or higher. Dude, show me the code!  ynh_install_app_dependencies Define and install dependencies with a equivs control file Usage: ynh_install_app_dependencies dep [dep [...]] Arguments: dep: the package name to install in dependence.&quot;dep1|dep2|‚Ä¶&quot;: You can specify alternatives. It will require to install (dep1 or dep2, etc). Details: This helper can/should only be called once per app example : ynh_install_app_dependencies dep1 dep2 &quot;dep3|dep4|dep5&quot; Requires YunoHost version 2.6.4 or higher. Dude, show me the code!  ynh_remove_app_dependencies Remove fake package and its dependencies Usage: ynh_remove_app_dependencies Details: Dependencies will removed only if no other package need them. Requires YunoHost version 2.6.4 or higher. Dude, show me the code!  ynh_install_extra_app_dependencies Install packages from an extra repository properly. Usage: ynh_install_extra_app_dependencies --repo=&quot;repo&quot; --package=&quot;dep1 dep2&quot; [--key=key_url] [--name=name] Arguments: -r, --repo=: Complete url of the extra repository.-p, --package=: The packages to install from this extra repository-k, --key=: url to get the public key.-n, --name=: Name for the files for this repo, $app as default value. Details: Requires YunoHost version 3.8.1 or higher. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Systemuser‚Äã","type":1,"pageTitle":"App helpers (v2)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.0#systemuser","content":" ynh_system_user_create Create a system user Usage: ynh_system_user_create --username=user_name [--home_dir=home_dir] [--use_shell] [--groups=&quot;group1 group2&quot;] Arguments: -u, --username=: Name of the system user that will be create-h, --home_dir=: Path of the home dir for the user. Usually the final path of the app. If this argument is omitted, the user will be created without home-s, --use_shell: Create a user using the default login shell if present. If this argument is omitted, the user will be created with /usr/sbin/nologin shell-g, --groups: Add the user to system groups. Typically meant to add the user to the ssh.app / sftp.app group (e.g. for borgserver, my_webapp) Details: Create a nextcloud user with no home directory and /usr/sbin/nologin login shell (hence no login capability) : ynh_system_user_create --username=nextcloud Create a discourse user using /var/www/discourse as home directory and the default login shell : ynh_system_user_create --username=discourse --home_dir=/var/www/discourse --use_shell Requires YunoHost version 2.6.4 or higher. Dude, show me the code!  ynh_system_user_delete Delete a system user Usage: ynh_system_user_delete --username=user_name Arguments: -u, --username=: Name of the system user that will be create Details: Requires YunoHost version 2.6.4 or higher. Dude, show me the code!  ynh_exec_as Execute a command as another user Usage: ynh_exec_as $USER COMMAND [ARG ...] Details: Requires YunoHost version 4.1.7 or higher. Dude, show me the code!   ","version":"Next","tagName":"h3"},{"title":"App helpers (v2.1)","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1","content":"","keywords":"","version":"Next"},{"title":"Sources‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#sources","content":" This is coupled to the 'sources' resource in the manifest.toml  ","version":"Next","tagName":"h2"},{"title":"Sources‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#sources-1","content":" ynh_setup_source Download, check integrity, uncompress and patch upstream sources Usage: ynh_setup_source --dest_dir=dest_dir [--source_id=source_id] [--keep=&quot;file1 file2&quot;] [--full_replace] Arguments: --dest_dir=: Directory where to setup sources--source_id=: Name of the source, defaults to main (when the sources resource exists in manifest.toml) or (legacy) app otherwise--keep=: Space-separated list of files/folders that will be backup/restored in $dest_dir, such as a config file you don't want to overwrite. For example 'conf.json secrets.json logs' (no trailing / for folders)--full_replace=: Remove previous sources before installing new sources (can be 1 or 0, default to 0) Details: This helper will read infos from the 'sources' resources in the manifest.toml of the app and expect a structure like: [resources.sources] [resources.sources.main] url = &quot;https://some.address.to/download/the/app/archive&quot; sha256 = &quot;0123456789abcdef&quot; # The sha256 sum of the asset obtained from the URL (See also the resources documentation which may be more complete?) Optional flags in the 'sources' resource‚Äã format = &quot;tar.gz&quot;/xz/bz2/tar # automatically guessed from the extension of the URL, but can be set explicitly. Will use `tar` to extract &quot;zip&quot; # automatically guessed from the extension of the URL, but can be set explicitly. Will use `unzip` to extract &quot;docker&quot; # useful to extract files from an already-built docker image (instead of rebuilding them locally). Will use `docker-image-extract` to extract &quot;whatever&quot; # an arbitrary value, not really meaningful except to imply that the file won't be extracted in_subdir = true # default, there's an intermediate subdir in the archive before accessing the actual files false # sources are directly in the archive root n # (special cases) an integer representing a number of subdirs levels to get rid of extract = true # default if file is indeed an archive such as .zip, .tar.gz, .tar.bz2, ... = false # default if file 'format' is not set and the file is not to be extracted because it is not an archive but a script or binary or whatever asset. # in which case the file will only be `mv`ed to the location possibly renamed using the `rename` value rename = &quot;whatever_your_want&quot; # to be used for convenience when `extract` is false and the default name of the file is not practical platform = &quot;linux/amd64&quot; # (defaults to &quot;linux/$YNH_ARCH&quot;) to be used in conjonction with `format = &quot;docker&quot;` to specify which architecture to extract for You may also define assets url and checksum per-architectures such as: [resources.sources] [resources.sources.main] amd64.url = &quot;https://some.address.to/download/the/app/archive/when/amd64&quot; amd64.sha256 = &quot;0123456789abcdef&quot; armhf.url = &quot;https://some.address.to/download/the/app/archive/when/armhf&quot; armhf.sha256 = &quot;fedcba9876543210&quot; In which case ynh_setup_source --dest_dir=&quot;$install_dir&quot; will automatically pick the appropriate source depending on the arch The helper will: Download the specific URL if there is no local archiveCheck the integrity with the specific sha256 sumUncompress the archive to $dest_dir. If in_subdir is true, the first level directory of the archive will be removed.If in_subdir is a numeric value, the N first level directories will be removed. Patches named patches/${src_id}/*.patch will be applied to $dest_dirApply sane default permissions (see _ynh_apply_default_permissions) Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"App Technologies‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#app-technologies","content":" These allow to install specific version of the technology required to run some apps  ","version":"Next","tagName":"h2"},{"title":"Nodejs‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#nodejs","content":" ynh_nodejs_install Install a specific version of nodejs, using 'n' Usage: ynh_nodejs_install Details: The installed version is defined by $nodejs_version which should be defined as global prior to calling this helper n (Node version management) uses the PATH variable to store the path of the version of node it is going to use. That's how it changes the version The helper adds the appropriate, specific version of nodejs to the $PATH variable (which is preserved when calling ynh_exec_as_app). Also defines: $path_with_nodejs to be used in the systemd config (Environment=&quot;PATH=__PATH_WITH_NODEJS__&quot;)$nodejs_dir, the directory containing the specific version of nodejs, which may be used in the systemd config too (e.g. ExecStart=__NODEJS_DIR__/node foo bar) Dude, show me the code!  ynh_nodejs_remove Remove the version of node used by the app. Usage: ynh_nodejs_remove Details: This helper will check if another app uses the same version of node. If not, this version of node will be removed.If no other app uses node, n will be also removed. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Ruby‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#ruby","content":" ynh_ruby_install Install a specific version of Ruby using rbenv Usage: ynh_ruby_install Details: The installed version is defined by $ruby_version which should be defined as global prior to calling this helper The helper adds the appropriate, specific version of ruby to the $PATH variable (which is preserved when calling ynh_exec_as_app). Also defines: $path_with_ruby to be used in the systemd config (Environment=&quot;PATH=__PATH_WITH_RUBY__&quot;)$ruby_dir, the directory containing the specific version of ruby, which may be used in the systemd config too (e.g. ExecStart=__RUBY_DIR__/ruby foo bar) Dude, show me the code!  ynh_ruby_remove Remove the version of Ruby used by the app. Usage: ynh_ruby_remove Details: This helper will also cleanup unused Ruby versions Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Go‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#go","content":" ynh_go_install Install a specific version of Go using goenv Usage: ynh_go_install Details: The installed version is defined by $go_version which should be defined as global prior to calling this helper The helper adds the appropriate, specific version of go to the $PATH variable (which is preserved when calling ynh_exec_as_app). Also defines: $path_with_go (the value of the modified $PATH, but you dont really need it?)$go_dir (the directory containing the specific go version) Dude, show me the code!  ynh_go_remove Remove the version of Go used by the app. Usage: ynh_go_remove Details: This helper will also cleanup Go versions Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Composer‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#composer","content":" ynh_composer_install Install and initialize Composer in the given directory Usage: ynh_composer_install Details: The installed version is defined by $composer_version which should be defined as global prior to calling this helper. Will use $install_dir as workdir unless $composer_workdir exists (but that shouldnt be necessary) Dude, show me the code!  ynh_composer_exec Execute a command with Composer Usage: ynh_composer_exec commands Details: Will use $install_dir as workdir unless $composer_workdir exists (but that shouldnt be necessary) You may also define composer_user=root prior to call this helper if you absolutely need composer to run as root, but this is discouraged... Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Databases‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#databases","content":" This is coupled to the 'database' resource in the manifest.toml - at least for mysql/postgresql. Mongodb/redis may have better integration in the future.  ","version":"Next","tagName":"h2"},{"title":"Mysql‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#mysql","content":" ynh_mysql_db_shell Run SQL instructions in a database ($db_name by default) Usage: ynh_mysql_db_shell [database] &lt;&lt;&lt; &quot;instructions&quot; Arguments: database=: the database to connect to (by default, $db_name) Examples: ynh_mysql_db_shell $db_name &lt;&lt;&lt; &quot;UPDATE ...;&quot;ynh_mysql_db_shell &lt; /path/to/file.sql Dude, show me the code!  ynh_mysql_dump_db Dump a database Usage: ynh_mysql_dump_db database Arguments: database: the database name to dump (by default, $db_name) Returns: The mysqldump output Example: ynh_mysql_dump_db &quot;roundcube&quot; &gt; ./dump.sql Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Postgresql‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#postgresql","content":" ynh_psql_db_shell Run SQL instructions in a database ($db_name by default) Usage: ynh_psql_db_shell database &lt;&lt;&lt; &quot;instructions&quot; Arguments: database: the database to connect to (by default, $db_name) Examples: ynh_psql_db_shell $db_name &lt;&lt;&lt; &quot;UPDATE ...;&quot;ynh_psql_db_shell &lt; /path/to/file.sql Dude, show me the code!  ynh_psql_dump_db Dump a database Usage: ynh_psql_dump_db database Arguments: database: the database name to dump (by default, $db_name) Returns: the psqldump output Example: ynh_psql_dump_db 'roundcube' &gt; ./dump.sql Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Mongodb‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#mongodb","content":" ynh_mongo_exec Execute a mongo command Usage: ynh_mongo_exec [--database=database] --command=&quot;command&quot; Arguments: --database=: The database to connect to--command=: The command to evaluate Example: ynh_mongo_exec --command='db.getMongo().getDBNames().indexOf(&quot;wekan&quot;)' example: ynh_mongo_exec --command=&quot;db.getMongo().getDBNames().indexOf(\\&quot;wekan\\&quot;)&quot; Dude, show me the code!  ynh_mongo_dump_db Dump a database Usage: ynh_mongo_dump_db --database=database Arguments: --database=: The database name to dump Returns: the mongodump output Example: ynh_mongo_dump_db --database=wekan &gt; ./dump.bson Dude, show me the code!  ynh_mongo_database_exists Check if a mongo database exists Usage: ynh_mongo_database_exists --database=database | exit: Return 1 if the database doesn't exist, 0 otherwise Arguments: --database=: The database for which to check existence Dude, show me the code!  ynh_mongo_restore_db Restore a database Usage: ynh_mongo_restore_db --database=database Arguments: --database=: The database name to restore Example: ynh_mongo_restore_db --database=wekan &lt; ./dump.bson Dude, show me the code!  ynh_mongo_setup_db Create a database, an user and its password. Then store the password in the app's config Usage: ynh_mongo_setup_db --db_user=user --db_name=name [--db_pwd=pwd] Arguments: --db_user=: Owner of the database--db_name=: Name of the database--db_pwd=: Password of the database. If not provided, a password will be generated Details: After executing this helper, the password of the created database will be available in $db_pwd It will also be stored as &quot;mongopwd&quot; into the app settings. Dude, show me the code!  ynh_mongo_remove_db Remove a database if it exists, and the associated user Usage: ynh_mongo_remove_db --db_user=user --db_name=name Arguments: --db_user=: Owner of the database--db_name=: Name of the database Dude, show me the code!  ynh_install_mongo Install MongoDB and integrate MongoDB service in YunoHost Usage: ynh_install_mongo Details: The installed version is defined by $mongo_version which should be defined as global prior to calling this helper Dude, show me the code!  ynh_remove_mongo Remove MongoDB Only remove the MongoDB service integration in YunoHost for now if MongoDB package as been removed Usage: ynh_remove_mongo Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Redis‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#redis","content":" ynh_redis_get_free_db get the first available redis database Usage: ynh_redis_get_free_db Returns: the database number to use Dude, show me the code!  ynh_redis_remove_db Erase a redis database so it can be reused by other apps. Usage: ynh_redis_remove_db database Arguments: database: the database to erase Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Configurations / Templating‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#configurations--templating","content":" ","version":"Next","tagName":"h2"},{"title":"Templating‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#templating","content":" ynh_config_add Create a dedicated config file from a template Usage: ynh_config_add --template=&quot;template&quot; --destination=&quot;destination&quot; Arguments: --template=: Template config file to use--destination=: Destination of the config file--jinja: Use jinja template instead of the simple __MY_VAR__ templating format Examples: ynh_config_add --template=&quot;.env&quot; --destination=&quot;$install_dir/.env&quot; # (use the template file &quot;conf/.env&quot; from the app's package)ynh_config_add --jinja --template=&quot;config.j2&quot; --destination=&quot;$install_dir/config&quot; # (use the template file &quot;conf/config.j2&quot; from the app's package) Details: The template can be 1) the name of a file in the conf directory of the app, 2) a relative path or 3) an absolute path. This applies a simple templating format which covers a good 95% of cases, where patterns like __FOO__ are replaced by the bash variable $foo, for example:__DOMAIN__ by $domain__PATH__ by $path__APP__ by $app__VAR_1__ by $var_1__VAR_2__ by $var_2 Special case for __PATH__/ which is replaced by / instead of // if $path is / When --jinja is enabled‚Äã This option is meant for advanced use-cases where the &quot;simple&quot; templating mode ain't enough because you need conditional blocks or loops. For a full documentation of jinja's syntax you can refer to the official Jinja documentation. Note that in YunoHost context, all variables are from shell variables and therefore are strings To help handling complex data Jinja engine are executed with theses additional filters: from_json: load a string as Json and return an objectfrom_yaml: load a string as Yaml and return an objectfrom_toml: load a string as Toml and return an objectto_json: serialize to string an object to Jsonto_yaml: serialize to string an object to Yamlto_toml: serialize to string an object to Toml So by example, if you want to convert a json string $my_json to Toml, you can to this way:{{ my_json | from_json | to_toml }}Or you can iterate on a Json list my_list='[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]' this way: {% for i in my_list | from_json %} value {{ i }} {% endfor }} which will result: value a value b value c Keeping track of manual changes by the admin‚Äã The helper will verify the checksum and backup the destination file if it's different before applying the new template. And it will calculate and store the destination file checksum into the app settings when configuration is done. Dude, show me the code!  ynh_read_var_in_file Get a value from heterogeneous file (yaml, json, php, python...) Usage: ynh_read_var_in_file --file=PATH --key=KEY Arguments: --file=: the path to the file--key=: the key to get--after=: the line just before the key (in case of multiple lines with the name of the key in the file) Details: This helpers match several var affectation use case in several languages We don't use jq or equivalent to keep comments and blank space in files This helpers work line by line, it is not able to work correctly if you have several identical keys in your files Example of line this helpers can managed correctly .yml title: YunoHost documentation email: 'yunohost@yunohost.org' .json &quot;theme&quot;: &quot;colib'ris&quot;, &quot;port&quot;: 8102 &quot;some_boolean&quot;: false, &quot;user&quot;: null .ini some_boolean = On action = &quot;Clear&quot; port = 20 .php $user= user =&gt; 20 .py USER = 8102 user = 'https://donate.local' CUSTOM['user'] = 'YunoHost' Dude, show me the code!  ynh_write_var_in_file Set a value into heterogeneous file (yaml, json, php, python...) Usage: ynh_write_var_in_file --file=PATH --key=KEY --value=VALUE Arguments: --file=: the path to the file--key=: the key to set--value=: the value to set--after=: the line just before the key (in case of multiple lines with the name of the key in the file) Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Nginx‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#nginx","content":" ynh_config_add_nginx Create a dedicated nginx config Usage: ynh_config_add_nginx Details: This will use a template in ../conf/nginx.confSee the documentation of ynh_config_add for a description of the template format and how placeholders are replaced with actual variables. Additionally, ynh_config_add_nginx will replace: #sub_path_only by empty string if path is not '/'#root_path_only by empty string if path is '/' This allows to enable/disable specific behaviors dependenging on the install location Dude, show me the code!  ynh_config_remove_nginx Remove the dedicated nginx config Usage: ynh_config_remove_nginx Dude, show me the code!  ynh_config_change_url_nginx Regen the nginx config in a change url context Usage: ynh_config_change_url_nginx Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Php‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#php","content":" ynh_config_add_phpfpm Create a dedicated PHP-FPM config Usage: ynh_config_add_phpfpm Details: This will automatically generate an appropriate PHP-FPM configuration for this app. The resulting configuration will be deployed to the appropriate place:/etc/php/$php_version/fpm/pool.d/$app.conf If the app provides a conf/extra_php-fpm.conf template, it will be appended to the generated configuration. (In the vast majority of cases, this shouldnt be necessary) $php_version should be defined prior to calling this helper, but there should be no reason to manually set it, as it is automatically set by the apt helpers/resources when installing phpX.Y dependencies (PHP apps should at least install phpX.Y-fpm using the apt helper/resource) $php_group can be defined as a global (from _common.sh) if the worker processes should run with a different group than $app Additional &quot;pm&quot; and &quot;php_admin_value&quot; settings which are meant to be possibly configurable by admins from a future standard config panel at some point, related to performance and availability of the app, for which tweaking may be required if the app is used by &quot;plenty&quot; of users and other memory/CPU load considerations.... If you have good reasons to be willing to use different defaults than the one set by this helper (while still allowing admin to override it) you should use ynh_app_setting_set_default $php_upload_max_filezise: corresponds upload_max_filesize and post_max_size. Defaults to 50M$php_process_management: corresponds to &quot;pm&quot; (ondemand, dynamic, static). Defaults to ondemand$php_max_children: by default, computed from &quot;total RAM&quot; divided by 40, cf _default_php_max_children$php_memory_limit: by default, 128M (from global php.ini) Note that if $php_process_management is set to &quot;dynamic&quot;, then these variables MUST be defined prior to calling the helper (no default value) ... Check PHP-FPM's manual for more info on what these are (: ... $php_start_servers$php_min_spare_servers$php_max_spare_servers Dude, show me the code!  ynh_config_remove_phpfpm Remove the dedicated PHP-FPM config Usage: ynh_config_remove_phpfpm Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Systemd‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#systemd","content":" ynh_config_add_systemd Create a dedicated systemd config Usage: ynh_config_add_systemd [--service=service] [--template=template] Arguments: --service=: Service name (optionnal, $app by default)--template=: Name of template file (optionnal, this is 'systemd' by default, meaning ../conf/systemd.service will be used as template) Details: This will use the template ../conf/&lt;templatename&gt;.service. See the documentation of ynh_config_add for a description of the template format and how placeholders are replaced with actual variables. Dude, show me the code!  ynh_config_remove_systemd Remove the dedicated systemd config Usage: ynh_config_remove_systemd service Arguments: service: Service name (optionnal, $app by default) Dude, show me the code!  ynh_systemctl Start (or other actions) a service, print a log in case of failure and optionnaly wait until the service is completely started Usage: ynh_systemctl [--service=service] [--action=action] [ [--wait_until=&quot;line to match&quot;] [--log_path=log_path] [--timeout=300] [--length=20] ] Arguments: --service=: Name of the service to start. Default : $app--action=: Action to perform with systemctl. Default: start--wait_until=: The pattern to find in the log to attest the service is effectively fully started.--log_path=: Log file - Path to the log file. Default : /var/log/$app/$app.log; systemd to listen on journalctl --unit=$service--timeout=: Timeout - The maximum time to wait before ending the watching. Default : 60 seconds.--length=: Length of the error log displayed for debugging : Default : 20 Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Fail2ban‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#fail2ban","content":" ynh_config_add_fail2ban Create a dedicated fail2ban config (jail and filter conf files) Usage: ynh_config_add_fail2ban --logpath=log_file --failregex=filter Arguments: --logpath=: Log file to be checked by fail2ban--failregex=: Failregex to be looked for by fail2ban Details: If --logpath / --failregex are provided, the helper will generate the appropriate conf using these. Otherwise, it will assume that the app provided templates, namely../conf/f2b_jail.conf and ../conf/f2b_filter.conf They will typically look like (for example here for synapse): f2b_jail.conf: [__APP__] enabled = true port = http,https filter = __APP__ logpath = /var/log/__APP__/logfile.log maxretry = 5 f2b_filter.conf: [INCLUDES] before = common.conf [Definition] # Part of regex definition (just used to make more easy to make the global regex) __synapse_start_line = .? \\- synapse\\..+ \\- # Regex definition. failregex = ^%(__synapse_start_line)s INFO \\- POST\\-(\\d+)\\- &lt;HOST&gt; \\- \\d+ \\- Received request\\: POST /_matrix/client/r0/login\\??&lt;SKIPLINES&gt;%(__synapse_start_line)s INFO \\- POST\\-\\1\\- Got login request with identifier: \\{u'type': u'm.id.user', u'user'\\: u'(.+?)'\\}, medium\\: None, address: None, user\\: u'\\5'&lt;SKIPLINES&gt;%(__synapse_start_line)s WARNING \\- \\- (Attempted to login as @\\5\\:.+ but they do not exist|Failed password login for user @\\5\\:.+)$ ignoreregex = Regarding the the failregex option‚Äã regex to match the password failure messages in the logfile. The host must be matched by a group named &quot;host&quot;. The tag &quot;&lt;HOST&gt;&quot; can be used for standard IP/hostname matching and is only an alias for (?:::f{4,6}:)?(?P&lt;host&gt;[\\w\\-.^_]+) You can find some more explainations about how to make a regex on the official fail2ban documentation. To validate your regex you can test with this command: fail2ban-regex /var/log/YOUR_LOG_FILE_PATH /etc/fail2ban/filter.d/YOUR_APP.conf Dude, show me the code!  ynh_config_remove_fail2ban Remove the dedicated fail2ban config (jail and filter conf files) Usage: ynh_config_remove_fail2ban Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Logrotate‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#logrotate","content":" ynh_config_add_logrotate Add a logrotate configuration to manage log files / log directory Usage: ynh_config_add_logrotate [/path/to/log/file/or/folder] Details: If not argument is provided, /var/log/$app/*.log is used as default. The configuration is autogenerated by YunoHost (ie it doesnt come from a specific app template like nginx or systemd conf) Dude, show me the code!  ynh_config_remove_logrotate Remove the app's logrotate config. Usage: `` Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Misc Tools‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#misc-tools","content":" ","version":"Next","tagName":"h2"},{"title":"Utils‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#utils","content":" ynh_exec_as_app Execute a command after sudoing as $app Usage: ynh_exec_as_app COMMAND [ARG ...] Details: Note that the $PATH variable is preserved (using env PATH=$PATH) Dude, show me the code!  ynh_local_curl Curl abstraction to help with POST requests to local pages (such as installation forms) Usage: ynh_local_curl &quot;page_uri&quot; &quot;key1=value1&quot; &quot;key2=value2&quot; ... Arguments: page_uri: Path (relative to $path) of the page where POST data will be sentkey1=value1: (Optionnal) POST key and corresponding valuekey2=value2: (Optionnal) Another POST key and corresponding value...: (Optionnal) More POST keys and values Example: ynh_local_curl &quot;/install.php?installButton&quot; &quot;foo=$var1&quot; &quot;bar=$var2&quot; Details: For multiple calls, cookies are persisted between each call for the same app $domain and $path should be defined externally (and correspond to the domain.tld and the /path (of the app?)) Dude, show me the code!  ynh_safe_rm Remove a file or a directory, checking beforehand that it's not a disastrous location to rm such as entire /var or /home Usage: ynh_safe_rm path_to_remove Dude, show me the code!  ynh_read_manifest Read the value of a key in the app's manifest Usage: ynh_read_manifest &quot;key&quot; Arguments: key: Name of the key to find Returns: the value associate to that key Dude, show me the code!  ynh_app_upstream_version Return the app upstream version, deduced from $YNH_APP_MANIFEST_VERSION and strippig the ~ynhX part Usage: ynh_app_upstream_version Returns: the version number of the upstream app Details: For example, if the manifest contains 4.3-2~ynh3 the function will return 4.3-2 Dude, show me the code!  ynh_app_upstream_version_changed Return 0 if the &quot;upstream&quot; part of the version changed, or 1 otherwise (ie only the ~ynh suffix changed) Usage: if ynh_app_upstream_version_changed; then ... Dude, show me the code!  ynh_app_upgrading_from_version_before Compare the current package version is strictly lower than another version given as an argument Usage: `` Example: if ynh_app_upgrading_from_version_before 2.3.2~ynh1; then ... Dude, show me the code!  ynh_app_upgrading_from_version_before_or_equal_to Compare the current package version is lower or equal to another version given as an argument Usage: `` Example: if ynh_app_upgrading_from_version_before_or_equal_to 2.3.2~ynh1; then ... Dude, show me the code!  ynh_validate_ip Validate an IP address Usage: ynh_validate_ip --family=family --ip_address=ip_address Returns: 0 for valid ip addresses, 1 otherwise Example: ynh_validate_ip 4 111.222.333.444 Dude, show me the code!  ynh_in_ci_tests Check if the scripts are being run by the package_check in CI Usage: ynh_in_ci_tests Details: Return 0 if in CI, 1 otherwise Dude, show me the code!  ynh_user_get_info Retrieve a YunoHost user information Usage: ynh_user_get_info --username=username --key=key Arguments: --username=: the username to retrieve info from--key=: the key to retrieve Returns: the value associate to that key Example: mail=$(ynh_user_get_info --username=&quot;toto&quot; --key=mail) Dude, show me the code!  ynh_user_list Get the list of YunoHost users Usage: ynh_user_list Returns: one username per line as strings Example: for u in $(ynh_user_list); do ... ; done Dude, show me the code!  ynh_spawn_app_shell Spawn a Bash shell with the app environment loaded Usage: ynh_spawn_app_shell Examples: ynh_spawn_app_shell &lt;&lt;&lt; 'echo &quot;$USER&quot;'ynh_spawn_app_shell &lt; /tmp/some_script.bash Details: The spawned shell will have environment variables loaded and environment files sourced from the app's service configuration file (defaults to $app.service, overridable by the packager with service setting). If the app relies on a specific PHP version, then php will be aliased that version. The PHP command will also be appended with the phpflags settings. Dude, show me the code!  ynh_add_swap Add swap Usage: ynh_add_swap --size=SWAP in Mb Arguments: -s, --size=: Amount of SWAP to add in Mb. Dude, show me the code!  ynh_smart_mktemp Check available space before creating a temp directory. Usage: ynh_smart_mktemp --min_size=&quot;Min size&quot; Arguments: -s, --min_size=: Minimal size needed for the temporary directory, in Mb Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Setting‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#setting","content":" ynh_app_setting_get Get an application setting Usage: ynh_app_setting_get --key=key Arguments: --app=: the application id (global $app by default)--key=: the setting to get Dude, show me the code!  ynh_app_setting_set Set an application setting Usage: ynh_app_setting_set --key=key --value=value Arguments: --app=: the application id (global $app by default)--key=: the setting name to set--value=: the setting value to set Details: When choosing the setting key's name, note that including the following keywords will make the associated setting's value appear masked in the debug logs (cf. related code): pwd, pass, passwd, password, passphrase, secret\\w* (regex), \\w+key (regex), token, PASSPHRASEThis is meant to allow sharing the logs while preserving confidential data, but having this in mind is useful would you expect to see those values while debugging your scripts. Dude, show me the code!  ynh_app_setting_set_default Set an application setting but only if the &quot;$key&quot; variable ain't set yet Usage: ynh_app_setting_set_default --key=key --value=value Arguments: --app=: the application id (global $app by default)--key=: the setting name to set--value=: the default setting value to set Details: Note that it doesn't just define the setting but ALSO define the $foobar variable Hence it's meant as a replacement for this legacy overly complex syntax: if [ -z &quot;${foo:-}&quot; ] then foo=&quot;bar&quot; ynh_app_setting_set --key=&quot;foo&quot; --value=&quot;$foo&quot; fi Dude, show me the code!  ynh_app_setting_delete Delete an application setting Usage: ynh_app_setting_delete --key=key Arguments: --app=: the application id (global $app by default)--key=: the setting to delete Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"String‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#string","content":" ynh_string_random Generate a random string Usage: ynh_string_random [--length=string_length] Arguments: --length=: the string length to generate (default: 24)--filter=: the kind of characters accepted in the output (default: 'A-Za-z0-9') Returns: the generated string Example: pwd=$(ynh_string_random --length=8) Dude, show me the code!  ynh_replace Substitute/replace a string (or expression) by another in a file Usage: ynh_replace --match=match --replace=replace --file=file Arguments: --match=: String to be searched and replaced in the file--replace=: String that will replace matches--file=: File in which the string will be replaced. Details: As this helper is based on sed command, regular expressions and references to sub-expressions can be used (see sed manual page for more information) Dude, show me the code!  ynh_replace_regex Substitute/replace a regex in a file Usage: ynh_replace_regex --match=match --replace=replace --file=file Arguments: --match=: String to be searched and replaced in the file--replace=: String that will replace matches--file=: File in which the string will be replaced. Details: This helper will use ynh_replace, but as you can use special characters, you can't use some regular expressions and sub-expressions. Dude, show me the code!  ynh_normalize_url_path Normalize the url path syntax Usage: ynh_normalize_url_path path_to_normalize Examples: url_path=$(ynh_normalize_url_path $url_path)ynh_normalize_url_path example # -&gt; /exampleynh_normalize_url_path /example # -&gt; /exampleynh_normalize_url_path /example/ # -&gt; /exampleynh_normalize_url_path / # -&gt; / Details: Handle the slash at the beginning of path and its absence at ending Return a normalized url path Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Backup‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#backup","content":" ynh_backup Add a file or a directory to the list of paths to backup Usage: ynh_backup /path/to/stuff Details: NB : note that this helper does NOT perform any copy in itself, it only declares stuff to be backuped via a CSV which is later picked up by the core NB 2 : there is a specific behavior for $data_dir (or childs of $data_dir) and /var/log/$app which are NOT backedup during safety-backup-before-upgrade, OR if the setting &quot;do_not_backup_data&quot; is equals 1 for that app The rationale is that these directories are usually too heavy to be integrated in every backup (think for example about Nextcloud with quite a lot of data, or an app with a lot of media files...) This is coupled to the fact that $data_dir and the log dir won't be (and should NOT) be deleted during remove, unless --purge is used. Hence, if the upgrade fails and the script is removed prior to restoring the backup, the data/logs are not destroyed. Dude, show me the code!  ynh_restore Restore a file or a directory from the backup archive Usage: ynh_restore /path/to/stuff Examples: ynh_restore &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot; Details: If the file or dir to be restored already exists on the system and is lighter than 500 Mo, it is backed up in /var/cache/yunohost/appconfbackup/. Otherwise, the existing file or dir is removed. if apps/$app/etc/nginx/conf.d/$domain.d/$app.conf exists, restore it into/etc/nginx/conf.d/$domain.d/$app.confotheriwse, search for a match in the csv (eg: conf/nginx.conf) and restore it into/etc/nginx/conf.d/$domain.d/$app.conf Dude, show me the code!  ynh_restore_everything Restore all files that were previously backuped in an app backup script Usage: ynh_restore_everything Dude, show me the code!  ynh_store_file_checksum Calculate and store a file checksum into the app settings Usage: ynh_store_file_checksum /path/to/file Dude, show me the code!  ynh_backup_if_checksum_is_different Verify the checksum and backup the file if it's different Usage: ynh_backup_if_checksum_is_different /path/to/file Details: This helper is primarily meant to allow to easily backup personalised/manually modified config files. Dude, show me the code!  ynh_delete_file_checksum Delete a file checksum from the app settings Usage: ynh_delete_file_checksum /path/to/file Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Logging‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#logging","content":" ynh_die Print a message to stderr and terminate the current script Usage: ynh_die &quot;Some message&quot; Dude, show me the code!  ynh_print_info Print an &quot;INFO&quot; message Usage: ynh_print_info &quot;Some message&quot; Dude, show me the code!  ynh_print_warn Print a warning on stderr Usage: ynh_print_warn &quot;Some message&quot; Dude, show me the code!  ynh_hide_warnings Execute a command and redirect stderr to stdout Usage: ynh_hide_warnings your command and args Arguments: command: command to execute Dude, show me the code!  ynh_exec_and_print_stderr_only_if_error Execute a command and redirect stderr in /dev/null. Print stderr on error. Usage: ynh_exec_and_print_stderr_only_if_error your command and args Arguments: command: command to execute Details: Note that you should NOT quote the command but only prefix it with ynh_exec_and_print_stderr_only_if_error Dude, show me the code!  ynh_return Return data to the YunoHost core for later processing (to be used by special hooks like app config panel and core diagnosis) Usage: ynh_return somedata Dude, show me the code!  ynh_script_progression Print a progress bar showing the progression of an app script Usage: ynh_script_progression &quot;Some message&quot; Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Multimedia‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#multimedia","content":" ynh_multimedia_build_main_dir Initialize the multimedia directory system Usage: ynh_multimedia_build_main_dir Dude, show me the code!  ynh_multimedia_addfolder Add a directory in yunohost.multimedia Usage: ynh_multimedia_addfolder --source_dir=&quot;source_dir&quot; --dest_dir=&quot;dest_dir&quot; Arguments: --source_dir=: Source directory - The real directory which contains your medias.--dest_dir=: Destination directory - The name and the place of the symbolic link, relative to /home/yunohost.multimedia Details: This &quot;directory&quot; will be a symbolic link to a existing directory. Dude, show me the code!  ynh_multimedia_addaccess Add an user to the multimedia group, in turn having write permission in multimedia directories Usage: ynh_multimedia_addaccess user_name Arguments: user_name: The name of the user which gain this access. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Deprecated Or Handled By The Core / App Resources Since V2‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#deprecated-or-handled-by-the-core--app-resources-since-v2","content":" ","version":"Next","tagName":"h2"},{"title":"Permission‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#permission","content":" ynh_permission_delete Remove a permission for the app (note that when the app is removed all permission is automatically removed) Usage: ynh_permission_delete --permission=&quot;permission&quot; Arguments: --permission=: the name for the permission (by default a permission named &quot;main&quot; is removed automatically when the app is removed) Example: ynh_permission_delete --permission=editors Dude, show me the code!  ynh_permission_exists Check if a permission exists Usage: ynh_permission_exists --permission=permission | exit: Return 1 if the permission doesn't exist, 0 otherwise Arguments: --permission=: the permission to check Dude, show me the code!  ynh_permission_url Redefine the url associated to a permission Usage: ynh_permission_url --permission &quot;permission&quot; [--url=&quot;url&quot;] [--add_url=&quot;new-url&quot; [ &quot;other-new-url&quot; ]] [--remove_url=&quot;old-url&quot; [ &quot;other-old-url&quot; ]] [--auth_header=true|false] [--clear_urls] Arguments: --permission=: the name for the permission (by default a permission named &quot;main&quot; is removed automatically when the app is removed)--url=: (optional) URL for which access will be allowed/forbidden. Note that if you want to remove url you can pass an empty sting as arguments (&quot;&quot;).--add_url=: (optional) List of additional url to add for which access will be allowed/forbidden.--remove_url=: (optional) List of additional url to remove for which access will be allowed/forbidden--auth_header=: (optional) Define for the URL of this permission, if SSOwat pass the authentication header to the application--clear_urls: (optional) Clean all urls (url and additional_urls) Dude, show me the code!  ynh_permission_update Update a permission for the app Usage: ynh_permission_update --permission &quot;permission&quot; [--add=&quot;group&quot; [&quot;group&quot; ...]] [--remove=&quot;group&quot; [&quot;group&quot; ...]] Arguments: --permission=: the name for the permission (by default a permission named &quot;main&quot; already exist)--add=: the list of group or users to enable add to the permission--remove=: the list of group or users to remove from the permission Dude, show me the code!  ynh_permission_has_user Check if a permission has an user Usage: ynh_permission_has_user --permission=permission --user=user | exit: Return 1 if the permission doesn't have that user or doesn't exist, 0 otherwise Arguments: --permission=: the permission to check--user=: the user seek in the permission Example: ynh_permission_has_user --permission=main --user=visitors Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Apt‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#apt","content":" ynh_apt_install_dependencies Define and install dependencies with a equivs control file Usage: ynh_apt_install_dependencies dep [dep [...]] Arguments: dep: the package name to install in dependence.&quot;dep1|dep2|‚Ä¶&quot;: You can specify alternatives. It will require to install (dep1 or dep2, etc). Details: example : ynh_apt_install_dependencies dep1 dep2 &quot;dep3|dep4|dep5&quot; Dude, show me the code!  ynh_apt_remove_dependencies Remove fake package and its dependencies Usage: ynh_apt_remove_dependencies Details: Dependencies will removed only if no other package need them. Dude, show me the code!  ynh_apt_install_dependencies_from_extra_repository Install packages from an extra repository properly. Usage: ynh_apt_install_dependencies_from_extra_repository --repo=&quot;repo&quot; --package=&quot;dep1 dep2&quot; --key=key_url Arguments: --repo=: Complete url of the extra repository.--package=: The packages to install from this extra repository--key=: url to get the public key. Dude, show me the code!    ","version":"Next","tagName":"h3"},{"title":"Systemuser‚Äã","type":1,"pageTitle":"App helpers (v2.1)","url":"/doc/pr-2675/fr/dev/packaging/scripts/helpers_v2.1#systemuser","content":" ynh_system_user_exists Check if a user exists on the system Usage: ynh_system_user_exists --username=username Arguments: --username=: the username to check Returns: 0 if the user exists, 1 otherwise. Dude, show me the code!  ynh_system_group_exists Check if a group exists on the system Usage: ynh_system_group_exists --group=group Arguments: --group=: the group to check Returns: 0 if the group exists, 1 otherwise. Dude, show me the code!  ynh_system_user_create Create a system user Usage: ynh_system_user_create --username=user_name [--home_dir=home_dir] [--use_shell] [--groups=&quot;group1 group2&quot;] Arguments: --username=: Name of the system user that will be create--home_dir=: Path of the home dir for the user. Usually the final path of the app. If this argument is omitted, the user will be created without home--use_shell: Create a user using the default login shell if present. If this argument is omitted, the user will be created with /usr/sbin/nologin shell--groups: Add the user to system groups. Typically meant to add the user to the ssh.app / sftp.app group (e.g. for borgserver, my_webapp) Details: Create a nextcloud user with no home directory and /usr/sbin/nologin login shell (hence no login capability) : ynh_system_user_create --username=nextcloud Create a discourse user using /var/www/discourse as home directory and the default login shell : ynh_system_user_create --username=discourse --home_dir=/var/www/discourse --use_shell Dude, show me the code!  ynh_system_user_delete Delete a system user Usage: ynh_system_user_delete --username=user_name Arguments: --username=: Name of the system user that will be create Dude, show me the code!   ","version":"Next","tagName":"h3"},{"title":"App structure","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/structure","content":"App structure A Yunohost app package is a Git repository with such a structure: myapp_ynh ‚îú‚îÄ‚îÄ manifest.toml # The manifest ‚îú‚îÄ‚îÄ scripts # The scripts ‚îÇ ‚îú‚îÄ‚îÄ _common.sh ‚îÇ ‚îú‚îÄ‚îÄ install ‚îÇ ‚îú‚îÄ‚îÄ remove ‚îÇ ‚îú‚îÄ‚îÄ backup ‚îÇ ‚îú‚îÄ‚îÄ restore ‚îÇ ‚îú‚îÄ‚îÄ change_url ‚îÇ ‚îî‚îÄ‚îÄ upgrade ‚îú‚îÄ‚îÄ conf # The configuration files to install ‚îÇ ‚îú‚îÄ‚îÄ cinny.json ‚îÇ ‚îî‚îÄ‚îÄ nginx.conf ‚îú‚îÄ‚îÄ doc # The documentation ‚îÇ ‚îú‚îÄ‚îÄ DESCRIPTION.md ‚îÇ ‚îú‚îÄ‚îÄ DESCRIPTION_fr.md ‚îÇ ‚îú‚îÄ‚îÄ PRE_INSTALL.md ‚îÇ ‚îî‚îÄ‚îÄ screenshots ‚îÇ ‚îî‚îÄ‚îÄ screenshot.png ‚îú‚îÄ‚îÄ patches # Optional patches ‚îú‚îÄ‚îÄ tests.toml # The tests manifest ‚îú‚îÄ‚îÄ LICENSE ‚îî‚îÄ‚îÄ README.md The manifest contains upstream information, sources, version, installation questions and resources to initialize. The scripts are called by YunoHost when operations are started by the admin. The configuration files are templates that are filled and installed by the scripts, for example nginx or systemd or specific configs. Patches are applied when downloading the upstream sources. The documentation is used to show messages before / after install, upgrade, and in the webadmin.","keywords":"","version":"Next"},{"title":"Testing your app","type":0,"sectionRef":"#","url":"/doc/pr-2675/fr/dev/packaging/test","content":"","keywords":"","version":"Next"},{"title":"Package linter‚Äã","type":1,"pageTitle":"Testing your app","url":"/doc/pr-2675/fr/dev/packaging/test#package-linter","content":" The package linter performs a static analysis of your app to check a bunch of recommended practice.  It is pretty straightforward to run considering that you should only need Python installed.  ","version":"Next","tagName":"h2"},{"title":"Package check‚Äã","type":1,"pageTitle":"Testing your app","url":"/doc/pr-2675/fr/dev/packaging/test#package-check","content":" Package check is a more elaborate software that will tests many scenarios for you app such as:  installing, removing and reinstalling your app + validating that the app can indeed be accessed on its URL endpoint (with no 404/502 error) when installing on a root domain (domain.tld/)when installing in a domain subpatch (domain.tld/foobar)installing in private modeinstalling multiple instances upgrading from the same versionupgrading from older versionsbackup/restore...  Package check will then summarize the results and compute a quality level ranging from 0 to 8.  To run its tests, package check uses a LXC container to manipulate the package in a clean environment without any previous installations. Installing LXC/LXD is unfortunately not that straighforward (it kinda depends on your OS/distribution), though we documented how to do so in the README.  ","version":"Next","tagName":"h2"},{"title":"Package check's tests.toml‚Äã","type":1,"pageTitle":"Testing your app","url":"/doc/pr-2675/fr/dev/packaging/test#package-checks-teststoml","content":" Package check interfaces with your app's tests.toml which allows to control a few things about which tests are run - though it is usually pretty empty as many things can be deduced from the app's manifest.  More info about the syntax here are also available in the README  ","version":"Next","tagName":"h3"},{"title":"Application quality levels‚Äã","type":1,"pageTitle":"Testing your app","url":"/doc/pr-2675/fr/dev/packaging/test#application-quality-levels","content":" Package check will compute a quality level ranging from 0 to 8.  Apps with level equal or lower than 4 are considered &quot;bad quality&quot; and YunoHost will discourage people from installing such apps.  While this definition may vary with time, the current definition as of February 2023 is roughly:  level 0 (¬´ Broken ¬ª) : the application doesn't work at all or doesn't pass level 1 criteriaslevel 1 (¬´ Installable in at least one scenario ¬ª) : At least one install succeeded, and there's no critical issue reported in the linterlevel 2 (¬´ Installable in all scenarios ¬ª) : All install scenarios tested (typically install on full domain, domain+subpath, multi-instance, private/public) succeededlevel 3 (¬´ Can be upgraded ¬ª) : All upgrades tests from the current commit succeededlevel 4 (¬´ Can be backuped/restored ¬ª) : All backup/restore tests succeededlevel 5 (¬´ No linter error ¬ª) : No red errors reported by the linterlevel 6 (¬´ App is in a community-operated git org ¬ª) : The app is hosted on YunoHost-Apps organization. (From a maintenance / security point of view, we want to avoid the catalog being filled with apps that are privately-hosted and that the initial maintainer will ultimately abandon and that can't be maintained easily by the community)level 7 (¬´ All tests succeeded + No linter warning ¬ª) : Pass all test (including for example upgrade from past commits) and no warning reported by the linterlevel 8 (¬´ Maintained and long-term good quality ¬ª) : The app is not flagged as not-maintained / alpha / deprecated / obsolete in the catalog, and has been at least level 5 during the past ~year  ","version":"Next","tagName":"h3"},{"title":"Continous integration (CI)‚Äã","type":1,"pageTitle":"Testing your app","url":"/doc/pr-2675/fr/dev/packaging/test#continous-integration-ci","content":" The YunoHost project also developed an interface called yunorunner which interfaces with package_check, handles a job queue, and automatically add jobs to the queue using some triggers.  The two major ones are:  The &quot;official&quot; CI: This where the &quot;official&quot; quality level of each app comes from. Jobs are triggered after each commit on the repo's master branch.The &quot;dev&quot; CI: This is where people validate their pull request which is often more convenient than running package_check yourself, and has the advantage of the results being automatically public, which facilitates collective debugging.  Members of the YunoHost-Apps organization can trigger jobs on the dev CI directly from a pull request simply by commenting something like !testme (cf for example here). A .png summary of the tests will be automatically displayed once the job completes (and you can click the link to see the entire job execution and debug it).  ","version":"Next","tagName":"h2"},{"title":"Why create package_check + yunorunner rather than using well-known solutions like Gitlab-CI ?‚Äã","type":1,"pageTitle":"Testing your app","url":"/doc/pr-2675/fr/dev/packaging/test#why-create-package_check--yunorunner-rather-than-using-well-known-solutions-like-gitlab-ci-","content":" Constrain 1 : Gitlab-CI or other similar solutions are mostly based around Docker, while we use LXC. In particular, we do want to reuse LXC snapshots of successful install during other tests (upgrade, backup/restore, ..) rather than reinstalling the app from scratch everytime, which drastically reduces the test time. We could do so using Gitlab artifacts, but such artifacts are automatically made public which is not convenient because they contain a full filesystem and their only use it to speed up the test process. Moreover, in the Gitlab-CI paradigm, jobs are not running on the same machine and they would need to download the snapshot which can be lengthy. The other mechanism, caching, is explicitly advertised as not reliable in Gitlab's-CI doc. What would be helpful would be some non-public artifact system (see similar discussion here)  Constrain 2 : Our test workflow is somewhat complex and we have 400+ apps to maintain. It's not acceptable to have to duplicate/maintain the CI logic in app each repository, so we need some sort of repo that handles the CI logic, while still being to supersed some behavior from the app repo itself. Gitlab-CI has some syntax which can allow this, but this remains quite laborious.  Constrain 3 : Having a common job queue/dashboard UI accross all app. In the Gitlab-CI paradigm, each repository has its own job queue/dashboard UI, but this is not really convenient. ","version":"Next","tagName":"h3"}],"options":{"languages":["ar","de","en","es","fr","it","ru"],"id":"default"}}