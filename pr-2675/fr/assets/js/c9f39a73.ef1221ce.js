"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["6939"],{2800:function(e,t,r){r.r(t),r.d(t,{frontMatter:()=>c,toc:()=>d,default:()=>f,metadata:()=>n,assets:()=>l,contentTitle:()=>u});var n=JSON.parse('{"id":"admin/domains/certificate","title":"Certificat","description":"Les certificats sont utilis\xe9s pour garantir la confidentialit\xe9 et l\'authenticit\xe9 des communications entre un navigateur web et votre serveur. En particulier, il permet de prot\xe9ger les visiteurs contre des attaquants qui chercheraient \xe0 usurper l\'identit\xe9 du serveur.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/admin/25.domains/certificate.mdx","sourceDirName":"admin/25.domains","slug":"/admin/domains/certificate","permalink":"/doc/pr-2675/fr/admin/domains/certificate","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/i18n/fr/docusaurus-plugin-content-docs/current/admin/25.domains/certificate.mdx","tags":[],"version":"current","frontMatter":{"title":"Certificat"},"sidebar":"admin","previous":{"title":"\u{1F310} Domaines","permalink":"/doc/pr-2675/fr/admin/domains/"},"next":{"title":"\u{1F4E6} Applications","permalink":"/doc/pr-2675/fr/admin/apps/"}}'),i=r(4848),s=r(4429),a=r(4109),o=r(3703);let c={title:"Certificat"},u,l={},d=[{value:"Installer un certificat Let&#39;s Encrypt",id:"installer-un-certificat-lets-encrypt",level:3},{value:"En cas de probl\xe8me",id:"en-cas-de-probl\xe8me",level:4}];function p(e){let t={code:"code",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Les certificats sont utilis\xe9s pour garantir la confidentialit\xe9 et l'authenticit\xe9 des communications entre un navigateur web et votre serveur. En particulier, il permet de prot\xe9ger les visiteurs contre des attaquants qui chercheraient \xe0 usurper l'identit\xe9 du serveur."}),"\n",(0,i.jsxs)(t.p,{children:["YunoHost fournit par d\xe9faut un certificat ",(0,i.jsx)(t.strong,{children:"auto-sign\xe9"}),", ce qui veut dire que c\u2019est votre serveur qui garantit la validit\xe9 du certificat. C\u2019est suffisant ",(0,i.jsx)(t.strong,{children:"pour un usage personnel"}),", car vous pouvez avoir confiance en votre serveur, en revanche cela posera probl\xe8me si vous comptez ouvrir l\u2019acc\xe8s \xe0 votre serveur \xe0 des anonymes, par exemple pour h\xe9berger un site web."]}),"\n",(0,i.jsx)(t.p,{children:"En effet, les utilisateurs devront passer par un \xe9cran de ce type :"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:r(1478).A+"",width:"937",height:"677"})}),"\n",(0,i.jsxs)(t.p,{children:["Cet \xe9cran revient \xe0 demander ",(0,i.jsx)(t.strong,{children:"\xab Avez-vous confiance au serveur qui h\xe9berge ce site\u2009? \xbb"}),".\nCela peut effrayer vos utilisateurs (\xe0 juste titre)."]}),"\n",(0,i.jsxs)(t.p,{children:["To avoid this confusion, it's possible to get a certificate signed a known authority named ",(0,i.jsx)(t.strong,{children:"Let's Encrypt"})," which provide free certificates directly recognized by browsers. YunoHost allows to directly install this certificate from the web administration interface or from the command line."]}),"\n",(0,i.jsx)(t.h3,{id:"installer-un-certificat-lets-encrypt",children:"Installer un certificat Let's Encrypt"}),"\n",(0,i.jsx)(t.p,{children:"Avant de chercher \xe0 installer un certificat Let's Encrypt, assurez vous que\nvotre DNS est correctement configur\xe9 (votre.domaine.tld doit pointer sur l'IP\nde votre serveur) et que votre site est accessible en HTTP depuis l'ext\xe9rieur\n(c.-\xe0-d. qu'au moins le port 80 est correctement redirig\xe9 vers votre serveur)."}),"\n",(0,i.jsxs)(a.A,{groupId:"admin-commands",children:[(0,i.jsxs)(o.A,{value:"web",label:"Depuis la webadmin",children:[(0,i.jsx)(t.p,{children:"Rendez-vous dans la partie 'Domaines' de l'interface d'administration, puis dans\nla section d\xe9di\xe9e \xe0 votre domaine. Vous trouverez un bouton 'Certificat SSL'."}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:r(2257).A+"",width:"341",height:"675"})}),(0,i.jsx)(t.p,{children:"Dans la section 'Certificat SSL', vous pourrez voir l'\xe9tat actuel du certificat.\nSi vous venez d'ajouter le domaine, il dispose d'un certificat auto-sign\xe9."}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:r(8139).A+"",width:"1131",height:"536"})}),(0,i.jsx)(t.p,{children:"Si votre domaine est correctement configur\xe9, il vous est alors possible de\npasser \xe0 un certificat Let's Encrypt via le bouton vert."}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:r(1308).A+"",width:"1132",height:"494"})}),(0,i.jsx)(t.p,{children:"Une fois l'installation effectu\xe9e, vous pouvez vous rendre sur votre domaine\nvia votre navigateur, en HTTPS, pour v\xe9rifier que votre certificat est bien\nsign\xe9 par Let's Encrypt. Le certificat sera renouvel\xe9 automatiquement tous les\ntrois mois environ."}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:r(2345).A+"",width:"418",height:"201"})})]}),(0,i.jsxs)(o.A,{value:"cli",label:"Depuis la ligne de commande",children:[(0,i.jsx)(t.p,{children:"Connectez-vous sur votre serveur en SSH."}),(0,i.jsx)(t.p,{children:"Vous pouvez v\xe9rifier le statut actuel de votre certificat via :"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"yunohost domain cert status your.domain.tld\n"})}),(0,i.jsx)(t.p,{children:"Installez le certificat Let's Encrypt via :"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"yunohost domain cert install your.domain.tld\n"})}),(0,i.jsx)(t.p,{children:"Cette commande doit retourner :"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"Success! The SSOwat configuration has been generated\nSuccess! Successfully installed Let's Encrypt certificate for domain DOMAIN.TLD!\n"})}),(0,i.jsx)(t.p,{children:"Une fois l'installation effectu\xe9e, vous pouvez vous rendre sur votre domaine\nvia votre navigateur, en HTTPS, pour v\xe9rifier que votre certificat est bien\nsign\xe9 par Let's Encrypt. Le certificat sera renouvel\xe9 automatiquement tous les\ntrois mois environ."})]})]}),"\n",(0,i.jsx)(t.h4,{id:"en-cas-de-probl\xe8me",children:"En cas de probl\xe8me"}),"\n",(0,i.jsx)(t.p,{children:"Si, suite \xe0 une mauvaise manipulation, un certificat se retrouve dans une\nsituation f\xe2cheuse (e.g. perte du certificat ou impossible de lire le\ncertificat), il est possible de repartir sur des bases propres en reg\xe9n\xe9rant un\ncertificat auto-sign\xe9 :"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"yunohost domain cert install your.domain.tld --self-signed --force\n"})}),"\n",(0,i.jsx)(t.p,{children:"Si YunoHost trouve que votre domaine est mal configur\xe9 quand bien m\xeame vous\navez bien v\xe9rifi\xe9 votre configuration DNS et avez bien acc\xe8s \xe0 votre serveur en\nHTTP depuis l'ext\xe9rieur, vous pouvez tenter :"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["add a line ",(0,i.jsx)(t.code,{children:"127.0.0.1 your.domain.tld"})," to the file ",(0,i.jsx)(t.code,{children:"/etc/hosts"})," on your server;"]}),"\n",(0,i.jsxs)(t.li,{children:["if the certificate installation still doesn't work, you can disable the checks with ",(0,i.jsx)(t.code,{children:"--no-checks"})," after the ",(0,i.jsx)(t.code,{children:"cert install"})," command."]}),"\n"]})]})}function f(e={}){let{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},1478:function(e,t,r){r.d(t,{A:()=>n});let n=r.p+"assets/images/postinstall_error-a2920838a2f2005c70a902f08afb6fd6.png"},2345:function(e,t,r){r.d(t,{A:()=>n});let n=r.p+"assets/images/certificate-signed-by-LE-13340bc35e67f988903a28bf6873c6e8.png"},1308:function(e,t,r){r.d(t,{A:()=>n});let n=r.p+"assets/images/certificate-after-LE-3d6e3fd11aea419606e8c6b6af9359c3.png"},8139:function(e,t,r){r.d(t,{A:()=>n});let n=r.p+"assets/images/certificate-before-LE-b508eea8886858f1e489c2eb347a54f7.png"},2257:function(e,t,r){r.d(t,{A:()=>n});let n=r.p+"assets/images/domain-certificate-button-b03482f077ef5a4489c9e38d99905dad.png"},3703:function(e,t,r){r.d(t,{A:()=>s});var n=r(4848);r(6540);var i=r(9836);function s({children:e,hidden:t,className:r}){return(0,n.jsx)("div",{role:"tabpanel",className:(0,i.A)("tabItem_Ymn6",r),hidden:t,children:e})}},4109:function(e,t,r){r.d(t,{A:()=>x});var n=r(4848),i=r(6540),s=r(9836),a=r(6364),o=r(8251),c=r(6347),u=r(8004),l=r(5580),d=r(2213),p=r(5734);function f(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){let{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h({value:e,tabValues:t}){return t.some(t=>t.value===e)}var m=r(8864);function v({className:e,block:t,selectedValue:r,selectValue:i,tabValues:a}){let c=[],{blockElementScrollPositionUntilNextRender:u}=(0,o.a_)(),l=e=>{let t=e.currentTarget,n=a[c.indexOf(t)].value;n!==r&&(u(t),i(n))},d=e=>{let t=null;switch(e.key){case"Enter":l(e);break;case"ArrowRight":{let r=c.indexOf(e.currentTarget)+1;t=c[r]??c[0];break}case"ArrowLeft":{let r=c.indexOf(e.currentTarget)-1;t=c[r]??c[c.length-1]}}t?.focus()};return(0,n.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":t},e),children:a.map(({value:e,label:t,attributes:i})=>(0,n.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{c.push(e)},onKeyDown:d,onClick:l,...i,className:(0,s.A)("tabs__item","tabItem_LNqP",i?.className,{"tabs__item--active":r===e}),children:t??e},e))})}function g({lazy:e,children:t,selectedValue:r}){let a=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){let e=a.find(e=>e.props.value===r);return e?(0,i.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,n.jsx)("div",{className:"margin-top--md",children:a.map((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==r}))})}function b(e){let t=function(e){let t,{defaultValue:r,queryString:n=!1,groupId:s}=e,a=function(e){let{values:t,children:r}=e;return(0,i.useMemo)(()=>{let e=t??f(r).map(({props:{value:e,label:t,attributes:r,default:n}})=>({value:e,label:t,attributes:r,default:n})),n=(0,d.XI)(e,(e,t)=>e.value===t.value);if(n.length>0)throw Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[t,r])}(e),[o,m]=(0,i.useState)(()=>(function({defaultValue:e,tabValues:t}){if(0===t.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:t}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let r=t.find(e=>e.default)??t[0];if(!r)throw Error("Unexpected error: 0 tabValues");return r.value})({defaultValue:r,tabValues:a})),[v,g]=function({queryString:e=!1,groupId:t}){let r=(0,c.W6)(),n=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,l.aZ)(n),(0,i.useCallback)(e=>{if(!n)return;let t=new URLSearchParams(r.location.search);t.set(n,e),r.replace({...r.location,search:t.toString()})},[n,r])]}({queryString:n,groupId:s}),[b,x]=function({groupId:e}){let t=e?`docusaurus.tab.${e}`:null,[r,n]=(0,p.Dv)(t);return[r,(0,i.useCallback)(e=>{t&&n.set(e)},[t,n])]}({groupId:s}),j=h({value:t=v??b,tabValues:a})?t:null;return(0,u.A)(()=>{j&&m(j)},[j]),{selectedValue:o,selectValue:(0,i.useCallback)(e=>{if(!h({value:e,tabValues:a}))throw Error(`Can't select invalid tab value=${e}`);m(e),g(e),x(e)},[g,x,a]),tabValues:a}}(e);return(0,n.jsxs)("div",{className:(0,s.A)(a.G.tabs.container,"tabs-container","tabList__CuJ"),children:[(0,n.jsx)(v,{...t,...e}),(0,n.jsx)(g,{...t,...e})]})}function x(e){let t=(0,m.A)();return(0,n.jsx)(b,{...e,children:f(e.children)},String(t))}},4429:function(e,t,r){r.d(t,{R:()=>a,x:()=>o});var n=r(6540);let i={},s=n.createContext(i);function a(e){let t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);