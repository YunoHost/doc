"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["4221"],{2648:function(e,i,n){n.r(i),n.d(i,{frontMatter:()=>t,toc:()=>c,default:()=>u,metadata:()=>a,assets:()=>l,contentTitle:()=>r});var a=JSON.parse('{"id":"admin/tutorials/security","title":"Security","description":"YunoHost \xe8 stato sviluppato per la migliore sicurezza senza troppe complicazioni. Ogni protocollo in YunoHost \xe8 cifrato e view salvato solo un hash delle password e di default gli utenti possono accedere solo alla propria directory personale.","source":"@site/i18n/it/docusaurus-plugin-content-docs/current/admin/45.tutorials/60.security.mdx","sourceDirName":"admin/45.tutorials","slug":"/admin/tutorials/security","permalink":"/doc/pr-2675/it/admin/tutorials/security","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/i18n/it/docusaurus-plugin-content-docs/current/admin/45.tutorials/60.security.mdx","tags":[],"version":"current","sidebarPosition":60,"frontMatter":{"title":"Security"},"sidebar":"admin","previous":{"title":"Moving an app folder to a different storage location","permalink":"/doc/pr-2675/it/admin/tutorials/moving_app_folder"},"next":{"title":"Access apps via SFTP","permalink":"/doc/pr-2675/it/admin/tutorials/sftp_on_apps"}}'),o=n(4848),s=n(4429);let t={title:"Security"},r,l={},c=[{value:"Migliorare la sicurezza",id:"migliorare-la-sicurezza",level:2},{value:"Autenticazione SSH con la chiave",id:"autenticazione-ssh-con-la-chiave",level:3},{value:"Modificare la porta SSH",id:"modificare-la-porta-ssh",level:3},{value:"Cambiare la configurazione della compatibilit\xe0 dei cifrari",id:"cambiare-la-configurazione-della-compatibilit\xe0-dei-cifrari",level:3},{value:"Disabilitare le API di YunoHost",id:"disabilitare-le-api-di-yunohost",level:3}];function d(e){let i={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{FAIcon:n}=i;return n||function(e,i){throw Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("FAIcon",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.p,{children:["YunoHost \xe8 stato sviluppato per la migliore sicurezza senza troppe complicazioni. Ogni protocollo in YunoHost \xe8 ",(0,o.jsx)(i.strong,{children:"cifrato"})," e view salvato solo un hash delle password e di default gli utenti possono accedere solo alla propria directory personale."]}),"\n",(0,o.jsx)(i.p,{children:"Rimangono due punti importanti da notare:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["Installing additional apps can ",(0,o.jsx)(i.strong,{children:"significantly increase"})," the number of potential security flaws. Do not hesitate to get information about security flaws ",(0,o.jsx)(i.strong,{children:"before installing an app"}),", and try to only install apps which will suit your needs."]}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["The fact that YunoHost is a well-known and used piece of software increases the chances of an attack. If a flaw is discovered, it could potentially affect all YunoHost instances at once. Keep your system ",(0,o.jsx)(i.strong,{children:"up-to-date"})," to remain safe. Updates can be automated by installing the ",(0,o.jsx)(i.a,{href:"https://install-app.yunohost.org/?app=unattended_upgrades",children:'"Unattended_upgrades" app'}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.admonition,{type:"tip",children:(0,o.jsxs)(i.p,{children:["Se avete bisogno di aiuto non esitate a ",(0,o.jsx)(i.a,{href:"/community/help",children:"chiedere"}),"."]})}),"\n",(0,o.jsx)(i.admonition,{type:"danger",children:(0,o.jsxs)(i.p,{children:[(0,o.jsx)(n,{icon:"fa-shield"})," Per discutere di problemi di sicurezza contattate il ",(0,o.jsx)(i.a,{href:"/community/security_team",children:"team YunoHost security"}),"."]})}),"\n",(0,o.jsx)(i.hr,{}),"\n",(0,o.jsx)(i.h2,{id:"migliorare-la-sicurezza",children:"Migliorare la sicurezza"}),"\n",(0,o.jsx)(i.p,{children:"Se il vostro server YunoHost \xe8 usato in situazioni critiche di produzione oppure se volete migliorarne la sicurezza potreste seguire le seguenti buone pratiche."}),"\n",(0,o.jsx)(i.admonition,{type:"warning",children:(0,o.jsx)(i.p,{children:"Per seguire queste istruzioni \xe8 necessario essere in possesso di conoscenze avanzate di amministrazione di sistema."})}),"\n",(0,o.jsx)(i.admonition,{type:"tip",children:(0,o.jsx)(i.p,{children:"Non chiudete mai la connessione SSH in uso prima di aver controllato che le modifiche fatte siano corrette. Provate la nuova configurazione aprendo un nuovo terminale o una nuova finestra cosicch\xe9 possiate eliminare le modifiche se c'\xe8 qualcosa di sbagliato."})}),"\n",(0,o.jsx)(i.h3,{id:"autenticazione-ssh-con-la-chiave",children:"Autenticazione SSH con la chiave"}),"\n",(0,o.jsx)(i.p,{children:"Di default l'autenticazione SSH chiede la password dell'amministratore. \xc8 consigliato disattivare questo tipo di autenticazione per sostituirlo con il sistema basato sulle chiavi."}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Sul client"}),":"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"ssh-keygen\nssh-copy-id -i ~/.ssh/id_rsa.pub <username@your_yunohost_server>\n"})}),"\n",(0,o.jsx)(i.admonition,{type:"tip",children:(0,o.jsxs)(i.p,{children:["Se incontrate problemi di permessi impostate ",(0,o.jsx)(i.code,{children:"username"})," come proprietario della directory ",(0,o.jsx)(i.code,{children:"~/.ssh"})," con il comando ",(0,o.jsx)(i.code,{children:"chown"}),". Fate attenzione al fatto che, per ragiorni di sicurezza questa directory deve essere con il modo ",(0,o.jsx)(i.code,{children:"700"}),".\nSe state usando Ubuntu 16.04 dovete avviare ",(0,o.jsx)(i.code,{children:"ssh-add"})," per avviare l'agente SSH."]})}),"\n",(0,o.jsx)(i.p,{children:"Digitate la password di amministrazione e la chiave verr\xe0 copiata nel vostro server."}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Sul vostro server"})," la modifica della configurazione di SSH per disattivare l'autenticazione a password \xe8 gestita da un'impostazione di sistema:"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"sudo yunohost settings set security.ssh.ssh_password_authentication -v no\n"})}),"\n",(0,o.jsx)(i.hr,{}),"\n",(0,o.jsx)(i.h3,{id:"modificare-la-porta-ssh",children:"Modificare la porta SSH"}),"\n",(0,o.jsx)(i.p,{children:"Per prevenire i tentativi di connessione dei robot che fanno scan di internet alla ricerca di server con SSH attivato \xe8 possibile cambiare la porta SSH.\nQuesta impostazione \xe8 gestita da un'impostazione di sistema che aggiorna le configurazioni di SSH e di fail2ban."}),"\n",(0,o.jsx)(i.p,{children:"Note that changing the port is still useful even if you've disabled password authentication, because that significantly reduces noise from brute force attempts in SSH logs."}),"\n",(0,o.jsx)(i.admonition,{type:"warning",children:(0,o.jsxs)(i.p,{children:["Se modificate una qualsiasi impostazione nel file ",(0,o.jsx)(i.code,{children:"/etc/ssh/sshd_config"}),", anche solo la porta di ascolto, YunoHost non gestir\xe0 pi\xf9 il file. Per questa ragione \xe8 necessario usare sempre gli strumenti di amministrazione per fare modifiche ai file di configurazione del sistema."]})}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"sudo yunohost settings set security.ssh.ssh_port -v <new_ssh_port_number>\n"})}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Per tutte le connessioni SSH seguenti"})," \xe8 necessario aggiungere l'opzione ",(0,o.jsx)(i.code,{children:"-p"})," seguita dal numero della porta di SSH."]}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Esempio"}),":"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"ssh -p <new_ssh_port_number> admin@<your_yunohost_server>\n"})}),"\n",(0,o.jsx)(i.hr,{}),"\n",(0,o.jsx)(i.h3,{id:"cambiare-la-configurazione-della-compatibilit\xe0-dei-cifrari",children:"Cambiare la configurazione della compatibilit\xe0 dei cifrari"}),"\n",(0,o.jsxs)(i.p,{children:["La configurazione TLS di default per i servizi \xe8 pensata per offrire una buona compatibilit\xe0 di supporto ai vecchi device. \xc8 possibile configurare questa policy per specifici servizi come SSH e NGINX. La configurazione di default di NGINX segue il documento ",(0,o.jsx)(i.a,{href:"https://wiki.mozilla.org/Security/Server_Side_TLS#Intermediate_compatibility_.28default.29",children:"intermediate compatibility recommendation"})," di Mozilla. Potete scegliere di cambiare nella modalit\xe0 di configurazione 'moderna' che usa le raccomandazioni di sicurezza pi\xf9 recenti che per\xf2 abbassano la compatibilit\xe0 potendo portare a problemi con i vostri utenti che usano device pi\xf9 vecchi. Si possono trovare maggiori dettagli relativi alla compatibilit\xe0 in ",(0,o.jsx)(i.a,{href:"https://wiki.mozilla.org/Security/Server_Side_TLS#Modern_compatibility",children:"questa pagina"}),"."]}),"\n",(0,o.jsx)(i.p,{children:"Il cambio di livello di compatibilit\xe0 non \xe8 definitivo e pu\xf2 essere ripristinato nel caso in cui non si adatti alle vostre necessit\xe0."}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Sul vostro server"}),", cambio della policy per NGINX"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"sudo yunohost settings set security.nginx.nginx_compatibility -v modern\n"})}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Sul vostro server"}),", cambio della policy per SSH"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"sudo yunohost settings set security.ssh.ssh_compatibility -v modern\n"})}),"\n",(0,o.jsx)(i.h3,{id:"disabilitare-le-api-di-yunohost",children:"Disabilitare le API di YunoHost"}),"\n",(0,o.jsxs)(i.p,{children:["La pagina di amministrazione di YunoHost \xe8 accessibile da un ",(0,o.jsx)(i.strong,{children:"API HTTP"})," che ascolta di default sulla porta 6787 (solo su localhost).\nPu\xf2 essere usata per amministrare molti aspetti del vostro server e di conseguenza attori maligni possono usarla per danneggiarlo.\nLa cosa migliore da fare, se conoscete l'iso dell'",(0,o.jsx)(i.a,{href:"/admin/command_line",children:"interfaccia a lina di comando (CLI)"}),", \xe8 disattivare il servizio ",(0,o.jsx)(i.code,{children:"yunohost-api"}),".`"]}),"\n",(0,o.jsx)(i.admonition,{type:"warning",children:(0,o.jsx)(i.p,{children:"Facendo cos\xec verranno completamente disabilitate le API di YunoHost e la pagina di amministrazione che si basa su queste.\nProcedete solo nel caso in cui siate a vostro agio usando l'interfaccia a linea di comando."})}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"sudo systemctl disable yunohost-api\nsudo systemctl stop yunohost-api\n"})}),"\n",(0,o.jsxs)(i.p,{children:["Poich\xe9 il servizio ",(0,o.jsx)(i.code,{children:"yunohost-api"})," \xe8 stato disabilitato e non sta girando Diagnosi riporter\xe0 un errore che non pu\xf2 essere ignorato.\nSe volete far s\xec che l'errore venga ignorato potete configurare in tal senso YunoHost dalla linea di comando."]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"sudo yunohost diagnosis ignore --filter services service=yunohost-api\n"})})]})}function u(e={}){let{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},4429:function(e,i,n){n.d(i,{R:()=>t,x:()=>r});var a=n(6540);let o={},s=a.createContext(o);function t(e){let i=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),a.createElement(s.Provider,{value:i},e.children)}}}]);