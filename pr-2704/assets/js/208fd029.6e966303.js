"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["8061"],{4451:function(e,o,s){s.r(o),s.d(o,{frontMatter:()=>n,toc:()=>c,default:()=>h,metadata:()=>t,assets:()=>l,contentTitle:()=>a});var t=JSON.parse('{"id":"admin/troubleshooting/blacklist_forms","title":"Removing your server\u2019s IP/domain from antispam listings","description":"For various reasons, your IP or domain may end up in blocklists and get rejected by specific email providers, or anti-spam services. If you receive an alert from the diagnosis tool, clicking Details should point you to the appropriate form to contest the listing and get your server removed from it.","source":"@site/docs/admin/50.troubleshooting/25.blacklist_forms.mdx","sourceDirName":"admin/50.troubleshooting","slug":"/admin/troubleshooting/blacklist_forms","permalink":"/doc/pr-2704/admin/troubleshooting/blacklist_forms","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/docs/admin/50.troubleshooting/25.blacklist_forms.mdx","tags":[],"version":"current","sidebarPosition":25,"frontMatter":{"title":"Removing your server\u2019s IP/domain from antispam listings"},"sidebar":"admin","previous":{"title":"Setting up IPv6","permalink":"/doc/pr-2704/admin/troubleshooting/ipv6"},"next":{"title":"\u{1F47E} Advanced","permalink":"/doc/pr-2704/category/-advanced"}}'),i=s(4848),r=s(4429);let n={title:"Removing your server\u2019s IP/domain from antispam listings"},a,l={},c=[{value:"Test your server",id:"test-your-server",level:2},{value:"Checking email-related logs",id:"checking-email-related-logs",level:2},{value:"Specific email providers",id:"specific-email-providers",level:2},{value:"Microsoft",id:"microsoft",level:3},{value:"GMail",id:"gmail",level:3},{value:"Yahoo",id:"yahoo",level:3},{value:"Free (french ISP)",id:"free-french-isp",level:3},{value:"Receving alerts about emails sent without SPF or DKIM",id:"receving-alerts-about-emails-sent-without-spf-or-dkim",level:2}];function d(e){let o={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.p,{children:"For various reasons, your IP or domain may end up in blocklists and get rejected by specific email providers, or anti-spam services. If you receive an alert from the diagnosis tool, clicking Details should point you to the appropriate form to contest the listing and get your server removed from it."}),"\n",(0,i.jsx)(o.h2,{id:"test-your-server",children:"Test your server"}),"\n",(0,i.jsx)(o.p,{children:"To check your Email deliverability, YunoHost provide automatic tests in the Diagnosis section of the webadmin, checking the presence of your server on blocklists / RBL (Realtime Blackhole List), as well as compliance with other standard practice demonstrating that your server is legitimately sending email (as opposed to infected machines used by hackers/spammers/botnet), such as DNS records and reverse DNS configuration. The diagnosis will also indicate if there is a suspiciously high number of emails pending in the send queue."}),"\n",(0,i.jsx)(o.p,{children:"Complementary to these checks, you may be interested in the following services:"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:["by sending an email to the random test address indicated on ",(0,i.jsx)(o.a,{href:"https://www.mail-tester.com",children:"Mail tester"})," ... though most of the checks are covered by YunoHost's diagnosis."]}),"\n",(0,i.jsxs)(o.li,{children:["by checking your server's public IP on : ",(0,i.jsx)(o.a,{href:"https://multirbl.valli.org/",children:"MultiRBL Valli"})," or ",(0,i.jsx)(o.a,{href:"https://whatismyipaddress.com/blacklist-check",children:"Whatismyip"})]}),"\n"]}),"\n",(0,i.jsx)(o.h2,{id:"checking-email-related-logs",children:"Checking email-related logs"}),"\n",(0,i.jsx)(o.p,{children:"This command can help you to summarize which emails sent by your server got refused by other SMTP servers, and why:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-bash",children:'cat /var/log/mail.log | grep "deferred" | sed -E "s/(:[0-9][0-9]).+</\\1\\t/g" | sed -E "s/>.+dsn/\\terror/g" | sed -E "s/, status=deferred \\(/ /g" | sed -E "s/\\)$//g"\n'})}),"\n",(0,i.jsxs)(o.p,{children:["You might want to compare this to ",(0,i.jsx)(o.a,{href:"https://en.wikipedia.org/wiki/List_of_SMTP_server_return_codes",children:"the list of SMTP return codes"}),"."]}),"\n",(0,i.jsx)(o.h2,{id:"specific-email-providers",children:"Specific email providers"}),"\n",(0,i.jsx)(o.p,{children:"YunoHost is only able to test generic blocklists using the DNS RBL mechanism. However, Gmail, Microsoft, Yahoo or Free maintains their own blocklisting mechanism. In some situation, you may need to contact their teams through dedicated forms or use dedicated tools."}),"\n",(0,i.jsx)(o.h3,{id:"microsoft",children:"Microsoft"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsx)(o.li,{children:"No way to test easily IP reputation"}),"\n",(0,i.jsx)(o.li,{children:(0,i.jsx)(o.a,{href:"https://sendersupport.olc.protection.outlook.com/pm/",children:"Microsoft guide for postmaster"})}),"\n",(0,i.jsx)(o.li,{children:(0,i.jsx)(o.a,{href:"https://sendersupport.olc.protection.outlook.com/pm/troubleshooting.aspx#Codes",children:"Information about SMTP return code from Microsoft"})}),"\n",(0,i.jsxs)(o.li,{children:["Reputation Management tools :","\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsx)(o.li,{children:(0,i.jsx)(o.a,{href:"https://postmaster.live.com/snds/JMRP.aspx",children:"Junk Email Reporting Program (JMRP)"})}),"\n",(0,i.jsx)(o.li,{children:(0,i.jsx)(o.a,{href:"https://postmaster.live.com/snds/index.aspx",children:"Smart Network Data Services (SNDS)"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.a,{href:"https://support.microsoft.com/supportrequestform/8ad563e3-288e-2a61-8122-3ba03d6b8d75",children:"Get support form for deliverability issues"})," (Sadly you need a Microsoft account :/ )"]}),"\n"]}),"\n",(0,i.jsx)(o.h3,{id:"gmail",children:"GMail"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsx)(o.li,{children:"No way to test easily IP reputation"}),"\n",(0,i.jsx)(o.li,{children:(0,i.jsx)(o.a,{href:"https://support.google.com/a/topic/1354753",children:"Google guide for postmaster"})}),"\n",(0,i.jsx)(o.li,{children:(0,i.jsx)(o.a,{href:"https://support.google.com/a/answer/3726730",children:"Information about SMTP return code from Google"})}),"\n",(0,i.jsxs)(o.li,{children:["Reputation Management tools : ",(0,i.jsx)(o.a,{href:"https://postmaster.google.com",children:"Google Postmaster Tools"})]}),"\n",(0,i.jsx)(o.li,{children:(0,i.jsx)(o.a,{href:"https://support.google.com/mail/contact/bulk_send_new",children:"Get support form for deliverability issues"})}),"\n"]}),"\n",(0,i.jsx)(o.h3,{id:"yahoo",children:"Yahoo"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsx)(o.li,{children:"No way to test easily IP reputation"}),"\n",(0,i.jsx)(o.li,{children:(0,i.jsx)(o.a,{href:"https://senders.yahooinc.com/best-practices",children:"Yahoo guide for postmaster"})}),"\n",(0,i.jsx)(o.li,{children:(0,i.jsx)(o.a,{href:"https://senders.yahooinc.com/smtp-error-codes",children:"Information about SMTP return code from Yahoo"})}),"\n",(0,i.jsxs)(o.li,{children:["Reputation Management tools : ",(0,i.jsx)(o.a,{href:"https://io.help.yahoo.com/contact/index?page=contactform&locale=en_US&token=Zh%2FBBVqXzLHlIbokbUqVWTUbuuQeXGkGnZzhKR2JQ4O6mMQdy9JSWdtWFXvjthcYCRj9bUIFfycOfG%2B4GOHPHoOGa8HwDO2%2B0kYRtTcdR8Nja5P9HWkKh3VWfS3pyu4UdjhvwG%2BBCvnYFl5dToDK%2Fw%3D%3D&selectedChannel=email-icon",children:"Complaint Feedback Loop"})]}),"\n",(0,i.jsx)(o.li,{children:(0,i.jsx)(o.a,{href:"https://senders.yahooinc.com/contact",children:"Get support form for deliverability issues"})}),"\n"]}),"\n",(0,i.jsx)(o.h3,{id:"free-french-isp",children:"Free (french ISP)"}),"\n",(0,i.jsxs)(o.p,{children:["You can find a tool to test your IP, advices, explanation of error code and a way to contact Free on ",(0,i.jsx)(o.a,{href:"https://postmaster.free.fr/",children:"this page"})]}),"\n",(0,i.jsx)(o.h2,{id:"receving-alerts-about-emails-sent-without-spf-or-dkim",children:"Receving alerts about emails sent without SPF or DKIM"}),"\n",(0,i.jsx)(o.p,{children:"If you use your own domains and think that some mails are sent by unauthorized servers (so without SPF/DKIM), you can obtain reports from other mail server by declaring an email address in the DMARC DNS record:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-text",children:'_dmarc.DOMAIN 3600 IN TXT "v=DMARC1; p=none; fo=1; rua=mailto:example@domain.tld!10m"\n'})})]})}function h(e={}){let{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},4429:function(e,o,s){s.d(o,{R:()=>n,x:()=>a});var t=s(6540);let i={},r=t.createContext(i);function n(e){let o=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:n(e.components),t.createElement(r.Provider,{value:o},e.children)}}}]);