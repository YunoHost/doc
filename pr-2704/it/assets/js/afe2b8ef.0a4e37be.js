"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["9517"],{3831:function(e,o,n){n.r(o),n.d(o,{frontMatter:()=>a,toc:()=>c,default:()=>h,metadata:()=>i,assets:()=>d,contentTitle:()=>t});var i=JSON.parse('{"id":"admin/troubleshooting/noaccess","title":"Riottenere l\'accesso a YunoHost","description":"Ci possono essere diverse ragioni che possono portare al blocco parziale o totale degli accessi a amministratore ad un server YunoHost. Spesso per\xf2 se un metodo di accesso \xe8 bloccato altri sono possibili.","source":"@site/i18n/it/docusaurus-plugin-content-docs/current/admin/50.troubleshooting/15.noaccess.mdx","sourceDirName":"admin/50.troubleshooting","slug":"/admin/troubleshooting/noaccess","permalink":"/doc/pr-2704/it/admin/troubleshooting/noaccess","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/i18n/it/docusaurus-plugin-content-docs/current/admin/50.troubleshooting/15.noaccess.mdx","tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"title":"Riottenere l\'accesso a YunoHost"},"sidebar":"admin","previous":{"title":"Changing root\'s password","permalink":"/doc/pr-2704/it/admin/troubleshooting/change_root_password"},"next":{"title":"Impostare IPv6","permalink":"/doc/pr-2704/it/admin/troubleshooting/ipv6"}}'),r=n(4848),s=n(4429);let a={title:"Riottenere l'accesso a YunoHost"},t,d={},c=[{value:"Hai l&#39;accesso al server usando l&#39;indirizzo IP locale ma non dal nome di dominio",id:"hai-laccesso-al-server-usando-lindirizzo-ip-locale-ma-non-dal-nome-di-dominio",level:2},{value:"Se il server \xe8 self-hosted a casa: controlla il port forwarding",id:"se-il-server-\xe8-self-hosted-a-casa-controlla-il-port-forwarding",level:3},{value:"Configura i record DNS",id:"configura-i-record-dns",level:3},{value:"Altre probabili cause",id:"altre-probabili-cause",level:3},{value:"Stai ricevendo un errore sul certificato che non ti permette di raggiungere la pagina di amministrazione",id:"stai-ricevendo-un-errore-sul-certificato-che-non-ti-permette-di-raggiungere-la-pagina-di-amministrazione",level:2},{value:"Puoi accedere via SSH ma non dalla pagina di amministrazione o l&#39;inverso",id:"puoi-accedere-via-ssh-ma-non-dalla-pagina-di-amministrazione-o-linverso",level:2},{value:"Stai provando a loggarti via SSH come <code>root</code> invece che con l&#39;utente <code>admin</code>",id:"stai-provando-a-loggarti-via-ssh-come-root-invece-che-con-lutente-admin",level:3},{value:"Sei stato bannato temporaneamente",id:"sei-stato-bannato-temporaneamente",level:3},{value:"Il server web NGINX non funziona",id:"il-server-web-nginx-non-funziona",level:3},{value:"Your server is reachable by IPv6, but not IPv4, or inversely",id:"your-server-is-reachable-by-ipv6-but-not-ipv4-or-inversely",level:3},{value:"Webadmin is working, but some web apps are returning 502 errors",id:"webadmin-is-working-but-some-web-apps-are-returning-502-errors",level:2},{value:"You have lost your admin password, or the password is seemingly wrong",id:"you-have-lost-your-admin-password-or-the-password-is-seemingly-wrong",level:2},{value:"Your VPN expired or does not connect any more",id:"your-vpn-expired-or-does-not-connect-any-more",level:2},{value:"Your server does not boot",id:"your-server-does-not-boot",level:2},{value:"VNC or screen access does not work",id:"vnc-or-screen-access-does-not-work",level:2}];function l(e){let o={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.p,{children:"Ci possono essere diverse ragioni che possono portare al blocco parziale o totale degli accessi a amministratore ad un server YunoHost. Spesso per\xf2 se un metodo di accesso \xe8 bloccato altri sono possibili."}),"\n",(0,r.jsx)(o.p,{children:"Questa pagina cercher\xe0 di trovare il problema, riottenere l'accesso ed eventualmente riparare il vostro sistema. Le cause pi\xf9 comuni sono all'inizio per cui siete invitati a seguire questo tutorial dall'inizio."}),"\n",(0,r.jsx)(o.h2,{id:"hai-laccesso-al-server-usando-lindirizzo-ip-locale-ma-non-dal-nome-di-dominio",children:"Hai l'accesso al server usando l'indirizzo IP locale ma non dal nome di dominio"}),"\n",(0,r.jsx)(o.h3,{id:"se-il-server-\xe8-self-hosted-a-casa-controlla-il-port-forwarding",children:"Se il server \xe8 self-hosted a casa: controlla il port forwarding"}),"\n",(0,r.jsxs)(o.p,{children:["Controlla di riuscire ad accedere al server usando l'IP pubblico (lo puoi trovare su ",(0,r.jsx)(o.a,{href:"https://ip.yunohost.org",children:"https://ip.yunohost.org"}),"). Se questo non funziona:"]}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["Make sure you have ",(0,r.jsx)(o.a,{href:"/admin/get_started/post_install/port_forwarding",children:"set up forwarding"})]}),"\n",(0,r.jsxs)(o.li,{children:["Some ISP routers do not support ",(0,r.jsx)(o.em,{children:"hairpinning"}),", which prevents you from reaching your server by its domain name from within your local network. If so, you can use one of the following workaround:","\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsx)(o.li,{children:"use a cellular connection (4/5G)"}),"\n",(0,r.jsxs)(o.li,{children:["tweak your ",(0,r.jsx)(o.code,{children:"/etc/hosts"})," file on each of your client devices"]}),"\n",(0,r.jsxs)(o.li,{children:["add YunoHost's local IP as DNS resovler in your router (usually in the DHCP section) and open port ",(0,r.jsx)(o.code,{children:"53"})," (UDP) in YunoHost's firewall, making sure to ",(0,r.jsx)(o.strong,{children:"not"})," enable UPnP forwarding. (Do ",(0,r.jsx)(o.strong,{children:"not"})," open port 53 on your router)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(o.h3,{id:"configura-i-record-dns",children:"Configura i record DNS"}),"\n",(0,r.jsx)(o.admonition,{type:"tip",children:(0,r.jsxs)(o.p,{children:["Questo non \xe8 un problema se stai usando un dominio fornito da ",(0,r.jsx)(o.code,{children:"nohost.me"}),", ",(0,r.jsx)(o.code,{children:"noho.st"})," or ",(0,r.jsx)(o.code,{children:"ynh.fr"})]})}),"\n",(0,r.jsxs)(o.p,{children:["Devi configurare i tuoi ",(0,r.jsx)(o.a,{href:"/admin/get_started/post_install/dns_config",children:"record DNS"})," (come minimo i record ",(0,r.jsx)(o.code,{children:"A"})," e ",(0,r.jsx)(o.code,{children:"AAAA"})," se usi una connessione IPv6)."]}),"\n",(0,r.jsxs)(o.p,{children:["Puoi verificare la correttezza dei record DNS confrontando i risultati dati da ",(0,r.jsx)(o.a,{href:"https://www.whatsmydns.net/",children:"questo servizio"})," con l'",(0,r.jsx)(o.a,{href:"https://ip.yunohost.org",children:"IP restituito dal nostro servizio"}),"."]}),"\n",(0,r.jsx)(o.h3,{id:"altre-probabili-cause",children:"Altre probabili cause"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["You domain ",(0,r.jsx)(o.code,{children:"noho.st"}),", ",(0,r.jsx)(o.code,{children:"nohost.me"}),", or ",(0,r.jsx)(o.code,{children:"ynh.fr"})," is unreachable following a failure on YunoHost's infrastructure. Check the ",(0,r.jsx)(o.a,{href:"https://forum.yunohost.org/",children:"forum"})," for announcements or people posting about the same issue."]}),"\n",(0,r.jsxs)(o.li,{children:["Your domain name may be expired. Check that on your registrar's client panel, or by using the command ",(0,r.jsx)(o.code,{children:"whois yourdomain.tld"}),"."]}),"\n",(0,r.jsxs)(o.li,{children:["You have a dynamic IP address. In that case, you need to set up a script or a client that takes care of regularly update it. Refer to the page on ",(0,r.jsx)(o.a,{href:"/admin/tutorials/domains/dns_dynamicip",children:"DNS with a dynamic IP"})," to see how. You can also use a domain ",(0,r.jsx)(o.code,{children:"nohost.me"}),", ",(0,r.jsx)(o.code,{children:"noho.st"})," or ",(0,r.jsx)(o.code,{children:"ynh.fr"})," that includes this features."]}),"\n"]}),"\n",(0,r.jsx)(o.h2,{id:"stai-ricevendo-un-errore-sul-certificato-che-non-ti-permette-di-raggiungere-la-pagina-di-amministrazione",children:"Stai ricevendo un errore sul certificato che non ti permette di raggiungere la pagina di amministrazione"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["\n",(0,r.jsx)(o.p,{children:"A certificate error may be displayed if you have made a typo in the address bar of your browser."}),"\n"]}),"\n",(0,r.jsxs)(o.li,{children:["\n",(0,r.jsxs)(o.p,{children:["If you have just installed your server, or just installed a new domain, it uses a self-signed certificate. In that case, it is possible and understandable to add a ",(0,r.jsx)(o.em,{children:"temporary"})," security exception so that you can ",(0,r.jsx)(o.a,{href:"/admin/domains/certificate",children:"install a Let's Encrypt certificate"}),", provided you have a secure Internet connection."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(o.h2,{id:"puoi-accedere-via-ssh-ma-non-dalla-pagina-di-amministrazione-o-linverso",children:"Puoi accedere via SSH ma non dalla pagina di amministrazione o l'inverso"}),"\n",(0,r.jsxs)(o.h3,{id:"stai-provando-a-loggarti-via-ssh-come-root-invece-che-con-lutente-admin",children:["Stai provando a loggarti via SSH come ",(0,r.jsx)(o.code,{children:"root"})," invece che con l'utente ",(0,r.jsx)(o.code,{children:"admin"})]}),"\n",(0,r.jsxs)(o.p,{children:["Di default \xe8 possibile loggarsi via SSH solo come ",(0,r.jsx)(o.code,{children:"admin"}),". \xc8 possibile loggarsi come ",(0,r.jsx)(o.code,{children:"root"})," ",(0,r.jsx)(o.em,{children:"solo dall'interno della rete locale del server"}),". Se il server \xe8 su una VPS la console web o VNC fornita dal provider DPS dovrebbe funzionare."]}),"\n",(0,r.jsxs)(o.p,{children:["Se stai provando ad avviare i comandi ",(0,r.jsx)(o.code,{children:"yunohost"})," dalla riga di comando come ",(0,r.jsx)(o.code,{children:"admin"})," \xe8 necessario avviarlo preceduto dal comando ",(0,r.jsx)(o.code,{children:"sudo"})," (ad esempio ",(0,r.jsx)(o.code,{children:"sudo yunohost user list"}),"). \xc8 possibile diventare ",(0,r.jsx)(o.code,{children:"root"})," anche con il comando ",(0,r.jsx)(o.code,{children:"sudo su"}),"."]}),"\n",(0,r.jsx)(o.h3,{id:"sei-stato-bannato-temporaneamente",children:"Sei stato bannato temporaneamente"}),"\n",(0,r.jsx)(o.p,{children:"Il tuo server YunoHost include il servizio Fail2Ban che banna automaticamente gli indirizzi IP che falliscono pi\xf9 volte di seguito. In alcuni casi possono essere programmi configurati con password vecchie (ad esempio client Nextcloud) oppure un utente che ha il tuo stesso IP."}),"\n",(0,r.jsx)(o.p,{children:"Se sei stato bannato provando ad accedere ad una pagina web sar\xe0 irraggiungibile solo questa e potrai collegarti al tuo server via SSH. Viceversa se sei stato bannati da SSH la pagina di amministrazione funzioner\xe0."}),"\n",(0,r.jsx)(o.p,{children:"Se sei stato bannato sia da SSH che dalla pagina di amministrazione puoi provare a raggiungere il tuo server attraverso un altro indirizzo IP. Ad esempio puoi provare a collegarti usando la connessione cellulare del tuo telefono, attraverso una VPN, Tor o un altro proxy."}),"\n",(0,r.jsxs)(o.p,{children:["Vedi anche: ",(0,r.jsx)(o.a,{href:"/admin/troubleshooting/fail2ban",children:"togliere il ban ad un indirizzo"})]}),"\n",(0,r.jsx)(o.admonition,{type:"note",children:(0,r.jsx)(o.p,{children:"I ban normalmente durano dai 0 ai 12 minuti e solo su IPv4."})}),"\n",(0,r.jsx)(o.h3,{id:"il-server-web-nginx-non-funziona",children:"Il server web NGINX non funziona"}),"\n",(0,r.jsxs)(o.p,{children:["Maybe the NGINX web server is out of order. You can check that ",(0,r.jsx)(o.a,{href:"/admin/command_line",children:"trough SSH"})," with the command ",(0,r.jsx)(o.code,{children:"yunohost service status nginx"}),". If it is failing, check that its configuration is correct by running ",(0,r.jsx)(o.code,{children:"nginx -t"}),". If it is indeed broken, it may be due to the installation or removal of a low-quality app... If you need support, ",(0,r.jsx)(o.a,{href:"/community/help",children:"ask for it"}),"."]}),"\n",(0,r.jsx)(o.p,{children:"The NGINX or SSH servers may have been killed due to a lack of storage space, RAM, or swap."}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["Try restarting the service with ",(0,r.jsx)(o.code,{children:"systemctl restart nginx"}),"."]}),"\n",(0,r.jsxs)(o.li,{children:["You can check used storage with ",(0,r.jsx)(o.code,{children:"df -h"}),". If one of your partitions is full, you need to identify what fills it and make room. You can use ",(0,r.jsx)(o.code,{children:"ncdu"})," command (install it with ",(0,r.jsx)(o.code,{children:"apt install ncdu"}),") to browse from the root directory: ",(0,r.jsx)(o.code,{children:"ncdu /"})]}),"\n",(0,r.jsxs)(o.li,{children:["You can check RAM and swap usage with ",(0,r.jsx)(o.code,{children:"free -h"}),". Depending on the result, it may be necessary to optimize your server to use less RAM (removal of heavy or unused apps...), add more RAM or add a swap file."]}),"\n"]}),"\n",(0,r.jsx)(o.h3,{id:"your-server-is-reachable-by-ipv6-but-not-ipv4-or-inversely",children:"Your server is reachable by IPv6, but not IPv4, or inversely"}),"\n",(0,r.jsxs)(o.p,{children:["You can check that by ",(0,r.jsx)(o.code,{children:"ping"}),"ing it:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-bash",children:"ping -4 yourdomain.tld # or its IPv4\nping -6 yourdomain.tld # or its IPv6\n"})}),"\n",(0,r.jsx)(o.p,{children:"If one of the two is working, use it to connect by SSH or the webadmin."}),"\n",(0,r.jsx)(o.p,{children:"If none are working, you need to resolv your connection issue. In some cases, an update of your router may have enabled IPv6 and DNS configuration may be disrupted."}),"\n",(0,r.jsx)(o.h2,{id:"webadmin-is-working-but-some-web-apps-are-returning-502-errors",children:"Webadmin is working, but some web apps are returning 502 errors"}),"\n",(0,r.jsxs)(o.p,{children:["It is highly probable that the underlying service for these apps is failing (e.g. PHP apps requiring ",(0,r.jsx)(o.code,{children:"php7.0-fpm"})," or ",(0,r.jsx)(o.code,{children:"php7.3-fpm"}),"). You can then try to restart the services, and/or ask for ",(0,r.jsx)(o.a,{href:"/community/help",children:"help"})]}),"\n",(0,r.jsx)(o.h2,{id:"you-have-lost-your-admin-password-or-the-password-is-seemingly-wrong",children:"You have lost your admin password, or the password is seemingly wrong"}),"\n",(0,r.jsxs)(o.p,{children:["If you can reach the webadmin login page (force reload with ",(0,r.jsx)(o.code,{children:"CTRL + F5"})," to be sure), and you cannot log in, your password is probably wrong."]}),"\n",(0,r.jsxs)(o.p,{children:["If yoy are sure of your passord, it may be due to the ",(0,r.jsx)(o.code,{children:"slapd"})," service failing. If that's the case, log into the server by SSH as ",(0,r.jsx)(o.code,{children:"root"}),"."]}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["If your server is at home, you most likely have access to the local network. From this network, you can follow the ",(0,r.jsx)(o.a,{href:"/admin/command_line",children:"SSH instructions"}),"`."]}),"\n",(0,r.jsx)(o.li,{children:"If your server is a VPS, your provider may offer a web console."}),"\n"]}),"\n",(0,r.jsxs)(o.p,{children:["Once logged in, you have to check the state of the service with ",(0,r.jsx)(o.code,{children:"yunohost service status slapd"})," and/or reset your admin password with ",(0,r.jsx)(o.code,{children:"yunohost tools adminpw"}),"."]}),"\n",(0,r.jsxs)(o.p,{children:["If this is still failing, on a VPS you may be able to reboot in rescue mode. Do not hesitate to ask for ",(0,r.jsx)(o.a,{href:"/community/help",children:"help"})]}),"\n",(0,r.jsx)(o.admonition,{type:"warning",children:(0,r.jsx)(o.p,{children:"To be completed"})}),"\n",(0,r.jsx)(o.h2,{id:"your-vpn-expired-or-does-not-connect-any-more",children:"Your VPN expired or does not connect any more"}),"\n",(0,r.jsx)(o.p,{children:"If you have a VPN with fixed IP, maybe it has expired, or the provider's infrastructure is failing."}),"\n",(0,r.jsx)(o.p,{children:"In that case, contact your VPN provider to renew it and update the parameters of the VPN Client app."}),"\n",(0,r.jsx)(o.p,{children:"Meanwhile, try reaching your server if it is at home, by:"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["its local IP, using one of the method listed ",(0,r.jsx)(o.a,{href:"/admin/get_started/post_install/find_ip",children:"on the corresponding page"})]}),"\n",(0,r.jsxs)(o.li,{children:["reaching it at ",(0,r.jsx)(o.code,{children:"yunohost.local"}),", assuming your client supports the Bonjour protocol (or ",(0,r.jsx)(o.code,{children:"yunohost-2.local"}),", etc. depending on how many YunoHost servers are on your network)"]}),"\n"]}),"\n",(0,r.jsx)(o.admonition,{type:"warning",children:(0,r.jsx)(o.p,{children:"To be completed"})}),"\n",(0,r.jsx)(o.h2,{id:"your-server-does-not-boot",children:"Your server does not boot"}),"\n",(0,r.jsx)(o.p,{children:"In some cases your server may be stuck at boot. It may come from a new, buggy, kernel. Try changing to another kernel on the boot screen (via VNC for VPS)."}),"\n",(0,r.jsxs)(o.p,{children:['If you are in "rescue" mode with ',(0,r.jsx)(o.code,{children:"grub"}),", it may be due a misconfiguration of ",(0,r.jsx)(o.code,{children:"grub"}),", or a corrupted drive."]}),"\n",(0,r.jsxs)(o.p,{children:['In that case, access the storage drive from another system (your provider\'s "rescue" mode, live USB drive, read the SD or drive on another computer) and try to check partitions integrity with ',(0,r.jsx)(o.code,{children:"smartctl"}),", ",(0,r.jsx)(o.code,{children:"fsck"}),", and ",(0,r.jsx)(o.code,{children:"mount"}),"."]}),"\n",(0,r.jsxs)(o.p,{children:["If disks are corrupted or hard to mount, you have to save your data and maybe reformat, reinstall, and/or change the drive. If you succeed in mounting the drive, you can use ",(0,r.jsx)(o.code,{children:"systemd-nspawn"})," to access its database."]}),"\n",(0,r.jsxs)(o.p,{children:["Otherwise, run ",(0,r.jsx)(o.code,{children:"grub-update"}),", ",(0,r.jsx)(o.code,{children:"grub-install"})," again with ",(0,r.jsx)(o.code,{children:"chroot"})," or with ",(0,r.jsx)(o.code,{children:"systemd-nspawn"}),"."]}),"\n",(0,r.jsx)(o.h2,{id:"vnc-or-screen-access-does-not-work",children:"VNC or screen access does not work"}),"\n",(0,r.jsx)(o.p,{children:"It may be due hardware issue on your server, or with the hypervisor if it is on a VPS."}),"\n",(0,r.jsx)(o.p,{children:"If you are renting your server, contact the support of your provider. Otherwise, try fixing your machine by replacing failing components."})]})}function h(e={}){let{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},4429:function(e,o,n){n.d(o,{R:()=>a,x:()=>t});var i=n(6540);let r={},s=i.createContext(r);function a(e){let o=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function t(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:o},e.children)}}}]);