"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([["9648"],{7532:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>d,toc:()=>c,default:()=>h,metadata:()=>s,assets:()=>l,contentTitle:()=>o});var s=JSON.parse('{"id":"admin/get_started/post_install/dns_config","title":"DNS zone configuration","description":"DNS (domain name system) is a system that converts human-readable addresses","source":"@site/docs/admin/05.get_started/40.post_install/20.dns_config.mdx","sourceDirName":"admin/05.get_started/40.post_install","slug":"/admin/get_started/post_install/dns_config","permalink":"/doc/pr-2704/en/admin/get_started/post_install/dns_config","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/main/docs/admin/05.get_started/40.post_install/20.dns_config.mdx","tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"title":"DNS zone configuration"},"sidebar":"admin","previous":{"title":"Configure port-forwarding","permalink":"/doc/pr-2704/en/admin/get_started/post_install/port_forwarding"},"next":{"title":"Advices and guidelines","permalink":"/doc/pr-2704/en/admin/get_started/guidelines"}}'),i=t(4848),r=t(4429);let d={title:"DNS zone configuration"},o,l={},c=[{value:"Recommended DNS configuration",id:"recommended-dns-configuration",level:2},{value:"A few notes about this table",id:"a-few-notes-about-this-table",level:3},{value:"Reverse DNS",id:"reverse-dns",level:2},{value:"Dynamic IP",id:"dynamic-ip",level:2}];function a(e){let n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"DNS (domain name system) is a system that converts human-readable addresses\n(domain names) into machine-understandable addresses (IP). For your server to be\neasily accessible by human beings, and for some services like mail to work\nproperly, DNS must be configured."}),"\n",(0,i.jsxs)(n.p,{children:["If you're using an ",(0,i.jsx)(n.a,{href:"/admin/tutorials/domains/dns_nohost_me",children:"automatic domain"})," provided by the YunoHost Project, the configuration should be\nperformed automatically. If you're using your own domain name (e.g. bought via\na registrar), you should manually configure your domain on your registrar's\ninterface."]}),"\n",(0,i.jsx)(n.h2,{id:"recommended-dns-configuration",children:"Recommended DNS configuration"}),"\n",(0,i.jsxs)(n.p,{children:["NB: Examples here use the placeholder ",(0,i.jsx)(n.code,{children:"your.domain.tld"}),", you have to replace it with your real domain, such as ",(0,i.jsx)(n.code,{children:"www.yunohost.org"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"YunoHost provides a recommended DNS configuration, available via:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"the webadmin, in Domain > your.domain.tld > DNS configuration;"}),"\n",(0,i.jsxs)(n.li,{children:["or the command line, ",(0,i.jsx)(n.code,{children:"yunohost domain dns suggest your.domain.tld"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For specific needs or specific setups, and if you know what you're doing, you\nmight want or have to tweak these, or add additional ones (e.g. to handle\nsubdomains)."}),"\n",(0,i.jsx)(n.p,{children:"The recommended configuration typically looks like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'#\n# Basic ipv4/ipv6 records\n#\n@ 3600 IN A 111.222.33.44\n* 3600 IN A 111.222.33.44\n\n# (If your server is IPv6 capable, there are some AAAA records)\n@ 3600 IN AAAA 2222:444:8888:3333:bbbb:5555:3333:1111\n* 3600 IN AAAA 2222:444:8888:3333:bbbb:5555:3333:1111\n\n#\n# Mail (MX, SPF, DKIM and DMARC)\n#\n@ 3600 IN MX 10 your.domain.tld.\n@ 3600 IN TXT "v=spf1 a mx -all"\nmail._domainkey 3600 IN TXT "v=DKIM1; k=rsa; p=someHuuuuuuugeKey"\n_dmarc 3600 IN TXT "v=DMARC1; p=none"\n'})}),"\n",(0,i.jsx)(n.p,{children:"Though it might be easier to understand it if displayed like this:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Type"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Name"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.strong,{children:"A"})}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.strong,{children:"@"})}),(0,i.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,i.jsx)(n.code,{children:"111.222.333.444"})," (your IPv4)"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"A"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"*"}),(0,i.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,i.jsx)(n.code,{children:"111.222.333.444"})," (your IPv4)"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"AAAA"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"@"}),(0,i.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,i.jsx)(n.code,{children:"2222:444:8888:3333:bbbb:5555:3333:1111"})," (your IPv6)"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"AAAA"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"*"}),(0,i.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,i.jsx)(n.code,{children:"2222:444:8888:3333:bbbb:5555:3333:1111"})," (your IPv6)"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.strong,{children:"MX"})}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.strong,{children:"@"})}),(0,i.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,i.jsx)(n.code,{children:"your.domain.tld."}),"     (and priority: 10)"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"TXT"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"@"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:'"v=spf1 a mx -all"'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"TXT"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"mail._domainkey"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:'"v=DKIM1; k=rsa; p=someHuuuuuuugeKey"'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"TXT"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"_dmarc"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:'"v=DMARC1; p=none"'})})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"a-few-notes-about-this-table",children:"A few notes about this table"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Not all these lines are absolutely necessary. For a minimal setup, you only need the records in bold."}),"\n",(0,i.jsxs)(n.li,{children:["The dot at the end of ",(0,i.jsx)(n.code,{children:"your.domain.tld."})," is important ;);"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@"})," corresponds to ",(0,i.jsx)(n.code,{children:"your.domain.tld"}),", and e.g. ",(0,i.jsx)(n.code,{children:"muc"})," corresponds to ",(0,i.jsx)(n.code,{children:"muc.your.domain.tld"}),";"]}),"\n",(0,i.jsx)(n.li,{children:"These are example values ! See your generated conf for the actual values you should use;"}),"\n",(0,i.jsxs)(n.li,{children:["We recommend a ",(0,i.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Time_to_live#DNS_records",children:"TTL"})," of 3600 (1 hour). But you can use something else if you know what you're doing;"]}),"\n",(0,i.jsx)(n.li,{children:"Don't put an IPv6 record if you're not sure IPv6 really works on your server! You might have issues with Let's Encrypt if it doesn't."}),"\n",(0,i.jsxs)(n.li,{children:["If you're using the domain provider Namecheap the SRV DNS entries are formatted as ",(0,i.jsx)(n.strong,{children:"Service"}),": ",(0,i.jsx)(n.code,{children:"_xmpp-client"})," ",(0,i.jsx)(n.strong,{children:"Protocol"}),": ",(0,i.jsx)(n.code,{children:"_tcp"})," ",(0,i.jsx)(n.strong,{children:"Priority"}),": ",(0,i.jsx)(n.code,{children:"0"})," ",(0,i.jsx)(n.strong,{children:"Weight"}),": ",(0,i.jsx)(n.code,{children:"5"})," ",(0,i.jsx)(n.strong,{children:"Port"}),": ",(0,i.jsx)(n.code,{children:"5222"})," ",(0,i.jsx)(n.strong,{children:"Target"}),": ",(0,i.jsx)(n.code,{children:"your.domain.tld"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"reverse-dns",children:"Reverse DNS"}),"\n",(0,i.jsxs)(n.p,{children:["If your ISP or VPS provider let you define a ",(0,i.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Reverse_DNS_lookup",children:"Reverse DNS\nlookup"})," for your public IPv4\nand/or IPv6 addresses, you must configure it. It will prevent you to be marked as\nspam by anti-spam filters."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["N.B.: the reverse DNS configuration happens on your Internet Service Provider or VPS provider. It is ",(0,i.jsx)(n.em,{children:"not"})," handled by your domain's registrar."]})}),"\n",(0,i.jsxs)(n.p,{children:["If your public IPv4 address is ",(0,i.jsx)(n.code,{children:"111.222.333.444"})," and your DNS\ndomain is ",(0,i.jsx)(n.code,{children:"domain.tld"}),", you should get following answer when using ",(0,i.jsx)(n.code,{children:"nslookup"}),"\ncommand tool:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"nslookup 111.222.333.444\n444.333.222.111.in-addr.arpa    name = domain.tld.\n"})}),"\n",(0,i.jsx)(n.p,{children:"The diagnosis system available in the webadmin performs this checks automatically (in section Email)."}),"\n",(0,i.jsx)(n.h2,{id:"dynamic-ip",children:"Dynamic IP"}),"\n",(0,i.jsxs)(n.p,{children:["If your global IP address is constantly changing, follow this ",(0,i.jsx)(n.a,{href:"/admin/tutorials/domains/dns_dynamicip",children:"tutorial"}),"."]})]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},4429:function(e,n,t){t.d(n,{R:()=>d,x:()=>o});var s=t(6540);let i={},r=s.createContext(i);function d(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);